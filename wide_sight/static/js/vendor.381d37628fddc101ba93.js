webpackJsonp([0],{"+E39":function(t,e,i){t.exports=!i("S82l")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"+Ggc":function(t,e,i){"use strict";e.a={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},"+ZMJ":function(t,e,i){var n=i("lOnJ");t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},"+b92":function(t,e,i){"use strict";function n(t,e,i,n){for(var r=0,o=t[i-n],a=t[i-n+1];e<i;e+=n){var s=t[e],h=t[e+1];r+=a*s-o*h,o=s,a=h}return r/2}function r(t,e,i,r){for(var o=0,a=0,s=i.length;a<s;++a){var h=i[a];o+=n(t,e,h,r),e=h}return o}e.a=n,e.b=r,e.c=function(t,e,i,n){for(var o=0,a=0,s=i.length;a<s;++a){var h=i[a];o+=r(t,e,h,n),e=h[h.length-1]}return o}},"+iwx":function(t,e,i){"use strict";e.b=function(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution};var n=i("6t+W"),r=i("57Gy"),o=i("3ciB"),a=i("XOen"),s=i("OrOo"),h=i("jP9t"),c=i("tFCN"),l=i("hTFF"),u=i("9Ewl"),p=function(t){function e(e){var i=Object(c.a)({},e);delete i.source,t.call(this,i),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,e.map&&this.setMap(e.map),Object(n.a)(this,Object(a.b)(h.a.SOURCE),this.handleSourcePropertyChange_,this);var r=e.source?e.source:null;this.setSource(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(h.a.SOURCE)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():u.a.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Object(n.e)(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=Object(n.a)(t,r.a.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Object(n.e)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Object(n.e)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Object(n.a)(t,l.a.PRECOMPOSE,function(t){var e=this.getLayerState();e.managed=!1,void 0===this.getZIndex()&&(e.zIndex=1/0),t.frameState.layerStatesArray.push(e),t.frameState.layerStates[Object(o.b)(this)]=e},this),this.mapRenderKey_=Object(n.a)(this,r.a.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(h.a.SOURCE,t)},e}(s.a);e.a=p},"+tPU":function(t,e,i){i("xGkn");for(var n=i("7KvD"),r=i("hJx8"),o=i("/bQp"),a=i("dSzd")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),h=0;h<s.length;h++){var c=s[h],l=n[c],u=l&&l.prototype;u&&!u[a]&&r(u,a,c),o[c]=o.Array}},"//Fk":function(t,e,i){t.exports={default:i("U5ju"),__esModule:!0}},"/LWt":function(t,e,i){"use strict";e.b=function(t){for(var e=h(),i=0,n=t.length;i<n;++i)u(e,t[i]);return e},e.c=function(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]},e.d=function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()},e.e=function(t,e,i){var n,r;n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0;r=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0;return n*n+r*r},e.f=function(t,e){return a(t,e[0],e[1])},e.g=function(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]},e.h=a,e.i=s,e.j=h,e.k=c,e.l=l,e.m=function(t,e){var i=t[0],n=t[1];return c(i,n,i,n,e)},e.n=function(t,e){return p(l(e),t)},e.o=function(t,e,i,n,r){return d(l(r),t,e,i,n)},e.p=function(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]},e.q=function(t,e){e[0]<t[0]&&(t[0]=e[0]);e[2]>t[2]&&(t[2]=e[2]);e[1]<t[1]&&(t[1]=e[1]);e[3]>t[3]&&(t[3]=e[3]);return t},e.r=u,e.s=d,e.t=function(t,e,i){var n;if(n=e.call(i,v(t)))return n;if(n=e.call(i,g(t)))return n;if(n=e.call(i,b(t)))return n;if(n=e.call(i,x(t)))return n;return!1},e.u=m,e.v=v,e.w=g,e.x=function(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]},e.y=function(t,e){var i;e===r.a.BOTTOM_LEFT?i=v(t):e===r.a.BOTTOM_RIGHT?i=g(t):e===r.a.TOP_LEFT?i=x(t):e===r.a.TOP_RIGHT?i=b(t):Object(n.a)(!1,13);return i},e.z=function(t,e,i,n,r){var o=e*n[0]/2,a=e*n[1]/2,s=Math.cos(i),h=Math.sin(i),l=o*s,u=o*h,p=a*s,d=a*h,f=t[0],m=t[1],v=f-l+d,g=f-l-d,y=f+l-d,_=f+l+d,x=m-u-p,b=m-u+p,M=m+u+p,w=m+u-p;return c(Math.min(v,g,y,_),Math.min(x,b,M,w),Math.max(v,g,y,_),Math.max(x,b,M,w),r)},e.A=y,e.B=_,e.C=x,e.D=b,e.E=M,e.F=w,e.H=E,e.I=function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t},e.J=function(t,e){var i=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=n,t[3]+=n},e.G=function(t,e,i){var n=!1,r=s(t,e),a=s(t,i);if(r===o.a.INTERSECTING||a===o.a.INTERSECTING)n=!0;else{var h,c,l=t[0],u=t[1],p=t[2],d=t[3],f=e[0],m=e[1],v=i[0],g=i[1],y=(g-m)/(v-f);a&o.a.ABOVE&&!(r&o.a.ABOVE)&&(n=(h=v-(g-d)/y)>=l&&h<=p),n||!(a&o.a.RIGHT)||r&o.a.RIGHT||(n=(c=g-(v-p)*y)>=u&&c<=d),n||!(a&o.a.BELOW)||r&o.a.BELOW||(n=(h=v-(g-u)/y)>=l&&h<=p),n||!(a&o.a.LEFT)||r&o.a.LEFT||(n=(c=g-(v-l)*y)>=u&&c<=d)}return n},e.a=function(t,e,i){var n=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(n,n,2),function(t,e,i){var n=Math.min.apply(null,t),r=Math.min.apply(null,e),o=Math.max.apply(null,t),a=Math.max.apply(null,e);return c(n,r,o,a,i)}([n[0],n[2],n[4],n[6]],[n[1],n[3],n[5],n[7]],i)};var n=i("OEyb"),r=i("7XOM"),o=i("+Ggc");function a(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function s(t,e){var i=t[0],n=t[1],r=t[2],a=t[3],s=e[0],h=e[1],c=o.a.UNKNOWN;return s<i?c|=o.a.LEFT:s>r&&(c|=o.a.RIGHT),h<n?c|=o.a.BELOW:h>a&&(c|=o.a.ABOVE),c===o.a.UNKNOWN&&(c=o.a.INTERSECTING),c}function h(){return[1/0,1/0,-1/0,-1/0]}function c(t,e,i,n,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=n,r):[t,e,i,n]}function l(t){return c(1/0,1/0,-1/0,-1/0,t)}function u(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function p(t,e){for(var i=0,n=e.length;i<n;++i)u(t,e[i]);return t}function d(t,e,i,n,r){for(;i<n;i+=r)f(t,e[i],e[i+1]);return t}function f(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function m(t){var e=0;return E(t)||(e=M(t)*y(t)),e}function v(t){return[t[0],t[1]]}function g(t){return[t[2],t[1]]}function y(t){return t[3]-t[1]}function _(t,e,i){var n=i||[1/0,1/0,-1/0,-1/0];return w(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):l(n),n}function x(t){return[t[0],t[3]]}function b(t){return[t[2],t[3]]}function M(t){return t[2]-t[0]}function w(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function E(t){return t[2]<t[0]||t[3]<t[1]}},"/bQp":function(t,e){t.exports={}},"09IN":function(t,e,i){"use strict";i.d(e,"b",function(){return n}),i.d(e,"a",function(){return r});var n=.5,r=!0},"1avf":function(t,e,i){"use strict";e.a=o,e.b=function(t,e,i,o){var a=o||r,s=Object(n.i)(t[1]),h=Object(n.i)(t[0]),c=e/a,l=Math.asin(Math.sin(s)*Math.cos(c)+Math.cos(s)*Math.sin(c)*Math.cos(i)),u=h+Math.atan2(Math.sin(i)*Math.sin(c)*Math.cos(s),Math.cos(c)-Math.sin(s)*Math.sin(l));return[Object(n.h)(u),Object(n.h)(l)]};var n=i("o1z/"),r=(i("Fu+J"),6371008.8);function o(t,e,i){var o=i||r,a=Object(n.i)(t[1]),s=Object(n.i)(e[1]),h=(s-a)/2,c=Object(n.i)(e[0]-t[0])/2,l=Math.sin(h)*Math.sin(h)+Math.sin(c)*Math.sin(c)*Math.cos(a)*Math.cos(s);return 2*o*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}},"2KxR":function(t,e){t.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},"2S6f":function(t,e,i){"use strict";function n(t){return Math.pow(t,3)}function r(t){return 3*t*t-2*t*t*t}e.a=n,e.b=function(t){return 1-n(1-t)},e.c=r,e.d=function(t){return t}},"3Eo+":function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},"3Jqb":function(t,e,i){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3}},"3Q3L":function(t,e,i){"use strict";e.a={ANIMATING:0,INTERACTING:1}},"3ahG":function(t,e,i){"use strict";function n(t,e,i,n){for(var r=t[e],o=t[e+1],a=0,s=e+n;s<i;s+=n){var h=t[s],c=t[s+1];a+=Math.sqrt((h-r)*(h-r)+(c-o)*(c-o)),r=h,o=c}return a}e.a=n},"3ciB":function(t,e,i){"use strict";e.b=function(t){return t.ol_uid||(t.ol_uid=++n)},i.d(e,"a",function(){return r});var n=0;var r="5.2.0"},"3fs2":function(t,e,i){var n=i("RY/4"),r=i("dSzd")("iterator"),o=i("/bQp");t.exports=i("FeBl").getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[n(t)]}},"4acs":function(t,e,i){"use strict";var n=["experimental-webgl","webgl","webkit-3d","moz-webgl"];var r=!1;if("undefined"!=typeof window&&"WebGLRenderingContext"in window)try{var o=function(t,e){for(var i=n.length,r=0;r<i;++r)try{var o=t.getContext(n[r],e);if(o)return o}catch(t){}return null}(document.createElement("canvas"),{failIfMajorPerformanceCaveat:!0});o&&(r=!0,o.getParameter(o.MAX_TEXTURE_SIZE),o.getSupportedExtensions())}catch(t){}i.d(e,"c",function(){return s}),i.d(e,"g",function(){return h}),i.d(e,"i",function(){return c}),i.d(e,"d",function(){return l}),i.d(e,"b",function(){return u}),i.d(e,"a",function(){return p}),i.d(e,"h",function(){return d}),i.d(e,"f",function(){return f}),i.d(e,"e",function(){return m}),i.d(e,!1,function(){return r});var a="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",s=-1!==a.indexOf("firefox"),h=-1!==a.indexOf("safari")&&-1==a.indexOf("chrom"),c=-1!==a.indexOf("webkit")&&-1==a.indexOf("edge"),l=-1!==a.indexOf("macintosh"),u=window.devicePixelRatio||1,p=function(){var t=!1;try{t=!!document.createElement("canvas").getContext("2d").setLineDash}catch(t){}return t}(),d=(navigator,"ontouchstart"in window),f="PointerEvent"in window,m=!!navigator.msPointerEnabled},"4mcu":function(t,e){t.exports=function(){}},"52gC":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},"57Gy":function(t,e,i){"use strict";e.a={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"}},"5MGX":function(t,e,i){"use strict";e.a={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"}},"5t69":function(t,e,i){"use strict";var n=i("zF6X"),r=i("/LWt"),o=i("5MGX"),a=i("Fu+J"),s=i("grfP"),h=i("VgFP"),c=i("bmSR"),l=i("hrLW"),u=i("wupX"),p=i("MB6k"),d=i("pWpL"),f=i("LmAy"),m=function(t){function e(e,i,r){if(t.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,i);else if(void 0!==i&&r)this.setFlatCoordinates(i,e),this.ends_=r;else{for(var o=this.getLayout(),a=[],s=[],h=0,c=e.length;h<c;++h){var l=e[h];0===h&&(o=l.getLayout()),Object(n.c)(a,l.getFlatCoordinates()),s.push(a.length)}this.setFlatCoordinates(o,a),this.ends_=s}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLineString=function(t){this.flatCoordinates?Object(n.c)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(r.e)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(c.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(c.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=o.a.XYM&&this.layout!=o.a.XYZM||0===this.flatCoordinates.length)return null;var n=void 0!==e&&e,r=void 0!==i&&i;return Object(p.c)(this.flatCoordinates,0,this.ends_,this.stride,t,n,r)},e.prototype.getCoordinates=function(){return Object(u.b)(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new s.a(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,n=[],r=0,o=0,a=e.length;o<a;++o){var h=e[o],c=new s.a(t.slice(r,h),i);n.push(c),r=h}return n},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,i=0,r=this.ends_,o=this.stride,a=0,s=r.length;a<s;++a){var h=r[a],c=Object(p.a)(e,i,h,o,.5);Object(n.c)(t,c),i=h}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=Object(f.b)(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,n),new e(i,o.a.XY,n)},e.prototype.getType=function(){return a.a.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(d.b)(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Object(l.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(h.a);e.a=m},"6t+W":function(t,e,i){"use strict";e.a=h,e.b=function(t,e,i,n){return h(t,e,i,n,!0)},e.c=function(t,e,i,n){var a=o(t,e);if(a){var s=r(a,i,n,!0);s&&c(s)}},e.e=c,e.d=function(t){var e=a(t);for(var i in e)s(t,i)};var n=i("tFCN");function r(t,e,i,n){for(var r,o=0,a=t.length;o<a;++o)if((r=t[o]).listener===e&&r.bindTo===i)return n&&(r.deleteIndex=o),r}function o(t,e){var i=t.ol_lm;return i?i[e]:void 0}function a(t){var e=t.ol_lm;return e||(e=t.ol_lm={}),e}function s(t,e){var i=o(t,e);if(i){for(var r=0,a=i.length;r<a;++r)t.removeEventListener(e,i[r].boundListener),Object(n.b)(i[r]);i.length=0;var s=t.ol_lm;s&&(delete s[e],0===Object.keys(s).length&&delete t.ol_lm)}}function h(t,e,i,n,o){var s=a(t),h=s[e];h||(h=s[e]=[]);var l=r(h,i,n,!1);return l?o||(l.callOnce=!1):(l={bindTo:n,callOnce:!!o,listener:i,target:t,type:e},t.addEventListener(e,function(t){var e=function(e){var i=t.listener,n=t.bindTo||t.target;return t.callOnce&&c(t),i.call(n,e)};return t.boundListener=e,e}(l)),h.push(l)),l}function c(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=o(t.target,t.type);if(e){var i="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==i&&e.splice(i,1),0===e.length&&s(t.target,t.type)}Object(n.b)(t)}}},"7+uW":function(t,e,i){"use strict";(function(t){
/*!
 * Vue.js v2.5.17
 * (c) 2014-2018 Evan You
 * Released under the MIT License.
 */
var i=Object.freeze({});function n(t){return void 0===t||null===t}function r(t){return void 0!==t&&null!==t}function o(t){return!0===t}function a(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function s(t){return null!==t&&"object"==typeof t}var h=Object.prototype.toString;function c(t){return"[object Object]"===h.call(t)}function l(t){return"[object RegExp]"===h.call(t)}function u(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function p(t){return null==t?"":"object"==typeof t?JSON.stringify(t,null,2):String(t)}function d(t){var e=parseFloat(t);return isNaN(e)?t:e}function f(t,e){for(var i=Object.create(null),n=t.split(","),r=0;r<n.length;r++)i[n[r]]=!0;return e?function(t){return i[t.toLowerCase()]}:function(t){return i[t]}}var m=f("slot,component",!0),v=f("key,ref,slot,slot-scope,is");function g(t,e){if(t.length){var i=t.indexOf(e);if(i>-1)return t.splice(i,1)}}var y=Object.prototype.hasOwnProperty;function _(t,e){return y.call(t,e)}function x(t){var e=Object.create(null);return function(i){return e[i]||(e[i]=t(i))}}var b=/-(\w)/g,M=x(function(t){return t.replace(b,function(t,e){return e?e.toUpperCase():""})}),w=x(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),E=/\B([A-Z])/g,T=x(function(t){return t.replace(E,"-$1").toLowerCase()});var S=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function i(i){var n=arguments.length;return n?n>1?t.apply(e,arguments):t.call(e,i):t.call(e)}return i._length=t.length,i};function C(t,e){e=e||0;for(var i=t.length-e,n=new Array(i);i--;)n[i]=t[i+e];return n}function O(t,e){for(var i in e)t[i]=e[i];return t}function R(t){for(var e={},i=0;i<t.length;i++)t[i]&&O(e,t[i]);return e}function A(t,e,i){}var L=function(t,e,i){return!1},P=function(t){return t};function I(t,e){if(t===e)return!0;var i=s(t),n=s(e);if(!i||!n)return!i&&!n&&String(t)===String(e);try{var r=Array.isArray(t),o=Array.isArray(e);if(r&&o)return t.length===e.length&&t.every(function(t,i){return I(t,e[i])});if(r||o)return!1;var a=Object.keys(t),h=Object.keys(e);return a.length===h.length&&a.every(function(i){return I(t[i],e[i])})}catch(t){return!1}}function N(t,e){for(var i=0;i<t.length;i++)if(I(t[i],e))return i;return-1}function F(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var D="data-server-rendered",j=["component","directive","filter"],k=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured"],G={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:L,isReservedAttr:L,isUnknownElement:L,getTagNamespace:A,parsePlatformTagName:P,mustUseProp:L,_lifecycleHooks:k};function U(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function z(t,e,i,n){Object.defineProperty(t,e,{value:i,enumerable:!!n,writable:!0,configurable:!0})}var B=/[^\w.$]/;var H,V="__proto__"in{},W="undefined"!=typeof window,X="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,Y=X&&WXEnvironment.platform.toLowerCase(),q=W&&window.navigator.userAgent.toLowerCase(),K=q&&/msie|trident/.test(q),Z=q&&q.indexOf("msie 9.0")>0,$=q&&q.indexOf("edge/")>0,J=(q&&q.indexOf("android"),q&&/iphone|ipad|ipod|ios/.test(q)||"ios"===Y),Q=(q&&/chrome\/\d+/.test(q),{}.watch),tt=!1;if(W)try{var et={};Object.defineProperty(et,"passive",{get:function(){tt=!0}}),window.addEventListener("test-passive",null,et)}catch(t){}var it=function(){return void 0===H&&(H=!W&&!X&&void 0!==t&&"server"===t.process.env.VUE_ENV),H},nt=W&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function rt(t){return"function"==typeof t&&/native code/.test(t.toString())}var ot,at="undefined"!=typeof Symbol&&rt(Symbol)&&"undefined"!=typeof Reflect&&rt(Reflect.ownKeys);ot="undefined"!=typeof Set&&rt(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var st=A,ht=0,ct=function(){this.id=ht++,this.subs=[]};ct.prototype.addSub=function(t){this.subs.push(t)},ct.prototype.removeSub=function(t){g(this.subs,t)},ct.prototype.depend=function(){ct.target&&ct.target.addDep(this)},ct.prototype.notify=function(){for(var t=this.subs.slice(),e=0,i=t.length;e<i;e++)t[e].update()},ct.target=null;var lt=[];function ut(t){ct.target&&lt.push(ct.target),ct.target=t}function pt(){ct.target=lt.pop()}var dt=function(t,e,i,n,r,o,a,s){this.tag=t,this.data=e,this.children=i,this.text=n,this.elm=r,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},ft={child:{configurable:!0}};ft.child.get=function(){return this.componentInstance},Object.defineProperties(dt.prototype,ft);var mt=function(t){void 0===t&&(t="");var e=new dt;return e.text=t,e.isComment=!0,e};function vt(t){return new dt(void 0,void 0,void 0,String(t))}function gt(t){var e=new dt(t.tag,t.data,t.children,t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.isCloned=!0,e}var yt=Array.prototype,_t=Object.create(yt);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(t){var e=yt[t];z(_t,t,function(){for(var i=[],n=arguments.length;n--;)i[n]=arguments[n];var r,o=e.apply(this,i),a=this.__ob__;switch(t){case"push":case"unshift":r=i;break;case"splice":r=i.slice(2)}return r&&a.observeArray(r),a.dep.notify(),o})});var xt=Object.getOwnPropertyNames(_t),bt=!0;function Mt(t){bt=t}var wt=function(t){(this.value=t,this.dep=new ct,this.vmCount=0,z(t,"__ob__",this),Array.isArray(t))?((V?Et:Tt)(t,_t,xt),this.observeArray(t)):this.walk(t)};function Et(t,e,i){t.__proto__=e}function Tt(t,e,i){for(var n=0,r=i.length;n<r;n++){var o=i[n];z(t,o,e[o])}}function St(t,e){var i;if(s(t)&&!(t instanceof dt))return _(t,"__ob__")&&t.__ob__ instanceof wt?i=t.__ob__:bt&&!it()&&(Array.isArray(t)||c(t))&&Object.isExtensible(t)&&!t._isVue&&(i=new wt(t)),e&&i&&i.vmCount++,i}function Ct(t,e,i,n,r){var o=new ct,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var s=a&&a.get;s||2!==arguments.length||(i=t[e]);var h=a&&a.set,c=!r&&St(i);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(t):i;return ct.target&&(o.depend(),c&&(c.dep.depend(),Array.isArray(e)&&function t(e){for(var i=void 0,n=0,r=e.length;n<r;n++)(i=e[n])&&i.__ob__&&i.__ob__.dep.depend(),Array.isArray(i)&&t(i)}(e))),e},set:function(e){var n=s?s.call(t):i;e===n||e!=e&&n!=n||(h?h.call(t,e):i=e,c=!r&&St(e),o.notify())}})}}function Ot(t,e,i){if(Array.isArray(t)&&u(e))return t.length=Math.max(t.length,e),t.splice(e,1,i),i;if(e in t&&!(e in Object.prototype))return t[e]=i,i;var n=t.__ob__;return t._isVue||n&&n.vmCount?i:n?(Ct(n.value,e,i),n.dep.notify(),i):(t[e]=i,i)}function Rt(t,e){if(Array.isArray(t)&&u(e))t.splice(e,1);else{var i=t.__ob__;t._isVue||i&&i.vmCount||_(t,e)&&(delete t[e],i&&i.dep.notify())}}wt.prototype.walk=function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)Ct(t,e[i])},wt.prototype.observeArray=function(t){for(var e=0,i=t.length;e<i;e++)St(t[e])};var At=G.optionMergeStrategies;function Lt(t,e){if(!e)return t;for(var i,n,r,o=Object.keys(e),a=0;a<o.length;a++)n=t[i=o[a]],r=e[i],_(t,i)?c(n)&&c(r)&&Lt(n,r):Ot(t,i,r);return t}function Pt(t,e,i){return i?function(){var n="function"==typeof e?e.call(i,i):e,r="function"==typeof t?t.call(i,i):t;return n?Lt(n,r):r}:e?t?function(){return Lt("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function It(t,e){return e?t?t.concat(e):Array.isArray(e)?e:[e]:t}function Nt(t,e,i,n){var r=Object.create(t||null);return e?O(r,e):r}At.data=function(t,e,i){return i?Pt(t,e,i):e&&"function"!=typeof e?t:Pt(t,e)},k.forEach(function(t){At[t]=It}),j.forEach(function(t){At[t+"s"]=Nt}),At.watch=function(t,e,i,n){if(t===Q&&(t=void 0),e===Q&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var r={};for(var o in O(r,t),e){var a=r[o],s=e[o];a&&!Array.isArray(a)&&(a=[a]),r[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return r},At.props=At.methods=At.inject=At.computed=function(t,e,i,n){if(!t)return e;var r=Object.create(null);return O(r,t),e&&O(r,e),r},At.provide=Pt;var Ft=function(t,e){return void 0===e?t:e};function Dt(t,e,i){"function"==typeof e&&(e=e.options),function(t,e){var i=t.props;if(i){var n,r,o={};if(Array.isArray(i))for(n=i.length;n--;)"string"==typeof(r=i[n])&&(o[M(r)]={type:null});else if(c(i))for(var a in i)r=i[a],o[M(a)]=c(r)?r:{type:r};t.props=o}}(e),function(t,e){var i=t.inject;if(i){var n=t.inject={};if(Array.isArray(i))for(var r=0;r<i.length;r++)n[i[r]]={from:i[r]};else if(c(i))for(var o in i){var a=i[o];n[o]=c(a)?O({from:o},a):{from:a}}}}(e),function(t){var e=t.directives;if(e)for(var i in e){var n=e[i];"function"==typeof n&&(e[i]={bind:n,update:n})}}(e);var n=e.extends;if(n&&(t=Dt(t,n,i)),e.mixins)for(var r=0,o=e.mixins.length;r<o;r++)t=Dt(t,e.mixins[r],i);var a,s={};for(a in t)h(a);for(a in e)_(t,a)||h(a);function h(n){var r=At[n]||Ft;s[n]=r(t[n],e[n],i,n)}return s}function jt(t,e,i,n){if("string"==typeof i){var r=t[e];if(_(r,i))return r[i];var o=M(i);if(_(r,o))return r[o];var a=w(o);return _(r,a)?r[a]:r[i]||r[o]||r[a]}}function kt(t,e,i,n){var r=e[t],o=!_(i,t),a=i[t],s=zt(Boolean,r.type);if(s>-1)if(o&&!_(r,"default"))a=!1;else if(""===a||a===T(t)){var h=zt(String,r.type);(h<0||s<h)&&(a=!0)}if(void 0===a){a=function(t,e,i){if(!_(e,"default"))return;var n=e.default;0;if(t&&t.$options.propsData&&void 0===t.$options.propsData[i]&&void 0!==t._props[i])return t._props[i];return"function"==typeof n&&"Function"!==Gt(e.type)?n.call(t):n}(n,r,t);var c=bt;Mt(!0),St(a),Mt(c)}return a}function Gt(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Ut(t,e){return Gt(t)===Gt(e)}function zt(t,e){if(!Array.isArray(e))return Ut(e,t)?0:-1;for(var i=0,n=e.length;i<n;i++)if(Ut(e[i],t))return i;return-1}function Bt(t,e,i){if(e)for(var n=e;n=n.$parent;){var r=n.$options.errorCaptured;if(r)for(var o=0;o<r.length;o++)try{if(!1===r[o].call(n,t,e,i))return}catch(t){Ht(t,n,"errorCaptured hook")}}Ht(t,e,i)}function Ht(t,e,i){if(G.errorHandler)try{return G.errorHandler.call(null,t,e,i)}catch(t){Vt(t,null,"config.errorHandler")}Vt(t,e,i)}function Vt(t,e,i){if(!W&&!X||"undefined"==typeof console)throw t;console.error(t)}var Wt,Xt,Yt=[],qt=!1;function Kt(){qt=!1;var t=Yt.slice(0);Yt.length=0;for(var e=0;e<t.length;e++)t[e]()}var Zt=!1;if("undefined"!=typeof setImmediate&&rt(setImmediate))Xt=function(){setImmediate(Kt)};else if("undefined"==typeof MessageChannel||!rt(MessageChannel)&&"[object MessageChannelConstructor]"!==MessageChannel.toString())Xt=function(){setTimeout(Kt,0)};else{var $t=new MessageChannel,Jt=$t.port2;$t.port1.onmessage=Kt,Xt=function(){Jt.postMessage(1)}}if("undefined"!=typeof Promise&&rt(Promise)){var Qt=Promise.resolve();Wt=function(){Qt.then(Kt),J&&setTimeout(A)}}else Wt=Xt;function te(t,e){var i;if(Yt.push(function(){if(t)try{t.call(e)}catch(t){Bt(t,e,"nextTick")}else i&&i(e)}),qt||(qt=!0,Zt?Xt():Wt()),!t&&"undefined"!=typeof Promise)return new Promise(function(t){i=t})}var ee=new ot;function ie(t){!function t(e,i){var n,r;var o=Array.isArray(e);if(!o&&!s(e)||Object.isFrozen(e)||e instanceof dt)return;if(e.__ob__){var a=e.__ob__.dep.id;if(i.has(a))return;i.add(a)}if(o)for(n=e.length;n--;)t(e[n],i);else for(r=Object.keys(e),n=r.length;n--;)t(e[r[n]],i)}(t,ee),ee.clear()}var ne,re=x(function(t){var e="&"===t.charAt(0),i="~"===(t=e?t.slice(1):t).charAt(0),n="!"===(t=i?t.slice(1):t).charAt(0);return{name:t=n?t.slice(1):t,once:i,capture:n,passive:e}});function oe(t){function e(){var t=arguments,i=e.fns;if(!Array.isArray(i))return i.apply(null,arguments);for(var n=i.slice(),r=0;r<n.length;r++)n[r].apply(null,t)}return e.fns=t,e}function ae(t,e,i,r,o){var a,s,h,c;for(a in t)s=t[a],h=e[a],c=re(a),n(s)||(n(h)?(n(s.fns)&&(s=t[a]=oe(s)),i(c.name,s,c.once,c.capture,c.passive,c.params)):s!==h&&(h.fns=s,t[a]=h));for(a in e)n(t[a])&&r((c=re(a)).name,e[a],c.capture)}function se(t,e,i){var a;t instanceof dt&&(t=t.data.hook||(t.data.hook={}));var s=t[e];function h(){i.apply(this,arguments),g(a.fns,h)}n(s)?a=oe([h]):r(s.fns)&&o(s.merged)?(a=s).fns.push(h):a=oe([s,h]),a.merged=!0,t[e]=a}function he(t,e,i,n,o){if(r(e)){if(_(e,i))return t[i]=e[i],o||delete e[i],!0;if(_(e,n))return t[i]=e[n],o||delete e[n],!0}return!1}function ce(t){return a(t)?[vt(t)]:Array.isArray(t)?function t(e,i){var s=[];var h,c,l,u;for(h=0;h<e.length;h++)n(c=e[h])||"boolean"==typeof c||(l=s.length-1,u=s[l],Array.isArray(c)?c.length>0&&(le((c=t(c,(i||"")+"_"+h))[0])&&le(u)&&(s[l]=vt(u.text+c[0].text),c.shift()),s.push.apply(s,c)):a(c)?le(u)?s[l]=vt(u.text+c):""!==c&&s.push(vt(c)):le(c)&&le(u)?s[l]=vt(u.text+c.text):(o(e._isVList)&&r(c.tag)&&n(c.key)&&r(i)&&(c.key="__vlist"+i+"_"+h+"__"),s.push(c)));return s}(t):void 0}function le(t){return r(t)&&r(t.text)&&!1===t.isComment}function ue(t,e){return(t.__esModule||at&&"Module"===t[Symbol.toStringTag])&&(t=t.default),s(t)?e.extend(t):t}function pe(t){return t.isComment&&t.asyncFactory}function de(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var i=t[e];if(r(i)&&(r(i.componentOptions)||pe(i)))return i}}function fe(t,e,i){i?ne.$once(t,e):ne.$on(t,e)}function me(t,e){ne.$off(t,e)}function ve(t,e,i){ne=t,ae(e,i||{},fe,me),ne=void 0}function ge(t,e){var i={};if(!t)return i;for(var n=0,r=t.length;n<r;n++){var o=t[n],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==e&&o.fnContext!==e||!a||null==a.slot)(i.default||(i.default=[])).push(o);else{var s=a.slot,h=i[s]||(i[s]=[]);"template"===o.tag?h.push.apply(h,o.children||[]):h.push(o)}}for(var c in i)i[c].every(ye)&&delete i[c];return i}function ye(t){return t.isComment&&!t.asyncFactory||" "===t.text}function _e(t,e){e=e||{};for(var i=0;i<t.length;i++)Array.isArray(t[i])?_e(t[i],e):e[t[i].key]=t[i].fn;return e}var xe=null;function be(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function Me(t,e){if(e){if(t._directInactive=!1,be(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var i=0;i<t.$children.length;i++)Me(t.$children[i]);we(t,"activated")}}function we(t,e){ut();var i=t.$options[e];if(i)for(var n=0,r=i.length;n<r;n++)try{i[n].call(t)}catch(i){Bt(i,t,e+" hook")}t._hasHookEvent&&t.$emit("hook:"+e),pt()}var Ee=[],Te=[],Se={},Ce=!1,Oe=!1,Re=0;function Ae(){var t,e;for(Oe=!0,Ee.sort(function(t,e){return t.id-e.id}),Re=0;Re<Ee.length;Re++)e=(t=Ee[Re]).id,Se[e]=null,t.run();var i=Te.slice(),n=Ee.slice();Re=Ee.length=Te.length=0,Se={},Ce=Oe=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Me(t[e],!0)}(i),function(t){var e=t.length;for(;e--;){var i=t[e],n=i.vm;n._watcher===i&&n._isMounted&&we(n,"updated")}}(n),nt&&G.devtools&&nt.emit("flush")}var Le=0,Pe=function(t,e,i,n,r){this.vm=t,r&&(t._watcher=this),t._watchers.push(this),n?(this.deep=!!n.deep,this.user=!!n.user,this.lazy=!!n.lazy,this.sync=!!n.sync):this.deep=this.user=this.lazy=this.sync=!1,this.cb=i,this.id=++Le,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ot,this.newDepIds=new ot,this.expression="","function"==typeof e?this.getter=e:(this.getter=function(t){if(!B.test(t)){var e=t.split(".");return function(t){for(var i=0;i<e.length;i++){if(!t)return;t=t[e[i]]}return t}}}(e),this.getter||(this.getter=function(){})),this.value=this.lazy?void 0:this.get()};Pe.prototype.get=function(){var t;ut(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;Bt(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ie(t),pt(),this.cleanupDeps()}return t},Pe.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},Pe.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var i=this.depIds;this.depIds=this.newDepIds,this.newDepIds=i,this.newDepIds.clear(),i=this.deps,this.deps=this.newDeps,this.newDeps=i,this.newDeps.length=0},Pe.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==Se[e]){if(Se[e]=!0,Oe){for(var i=Ee.length-1;i>Re&&Ee[i].id>t.id;)i--;Ee.splice(i+1,0,t)}else Ee.push(t);Ce||(Ce=!0,te(Ae))}}(this)},Pe.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||s(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(t){Bt(t,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},Pe.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},Pe.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},Pe.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||g(this.vm._watchers,this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1}};var Ie={enumerable:!0,configurable:!0,get:A,set:A};function Ne(t,e,i){Ie.get=function(){return this[e][i]},Ie.set=function(t){this[e][i]=t},Object.defineProperty(t,i,Ie)}function Fe(t){t._watchers=[];var e=t.$options;e.props&&function(t,e){var i=t.$options.propsData||{},n=t._props={},r=t.$options._propKeys=[];t.$parent&&Mt(!1);var o=function(o){r.push(o);var a=kt(o,e,i,t);Ct(n,o,a),o in t||Ne(t,"_props",o)};for(var a in e)o(a);Mt(!0)}(t,e.props),e.methods&&function(t,e){t.$options.props;for(var i in e)t[i]=null==e[i]?A:S(e[i],t)}(t,e.methods),e.data?function(t){var e=t.$options.data;c(e=t._data="function"==typeof e?function(t,e){ut();try{return t.call(e,e)}catch(t){return Bt(t,e,"data()"),{}}finally{pt()}}(e,t):e||{})||(e={});var i=Object.keys(e),n=t.$options.props,r=(t.$options.methods,i.length);for(;r--;){var o=i[r];0,n&&_(n,o)||U(o)||Ne(t,"_data",o)}St(e,!0)}(t):St(t._data={},!0),e.computed&&function(t,e){var i=t._computedWatchers=Object.create(null),n=it();for(var r in e){var o=e[r],a="function"==typeof o?o:o.get;0,n||(i[r]=new Pe(t,a||A,A,De)),r in t||je(t,r,o)}}(t,e.computed),e.watch&&e.watch!==Q&&function(t,e){for(var i in e){var n=e[i];if(Array.isArray(n))for(var r=0;r<n.length;r++)Ge(t,i,n[r]);else Ge(t,i,n)}}(t,e.watch)}var De={lazy:!0};function je(t,e,i){var n=!it();"function"==typeof i?(Ie.get=n?ke(e):i,Ie.set=A):(Ie.get=i.get?n&&!1!==i.cache?ke(e):i.get:A,Ie.set=i.set?i.set:A),Object.defineProperty(t,e,Ie)}function ke(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),ct.target&&e.depend(),e.value}}function Ge(t,e,i,n){return c(i)&&(n=i,i=i.handler),"string"==typeof i&&(i=t[i]),t.$watch(e,i,n)}function Ue(t,e){if(t){for(var i=Object.create(null),n=at?Reflect.ownKeys(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}):Object.keys(t),r=0;r<n.length;r++){for(var o=n[r],a=t[o].from,s=e;s;){if(s._provided&&_(s._provided,a)){i[o]=s._provided[a];break}s=s.$parent}if(!s)if("default"in t[o]){var h=t[o].default;i[o]="function"==typeof h?h.call(e):h}else 0}return i}}function ze(t,e){var i,n,o,a,h;if(Array.isArray(t)||"string"==typeof t)for(i=new Array(t.length),n=0,o=t.length;n<o;n++)i[n]=e(t[n],n);else if("number"==typeof t)for(i=new Array(t),n=0;n<t;n++)i[n]=e(n+1,n);else if(s(t))for(a=Object.keys(t),i=new Array(a.length),n=0,o=a.length;n<o;n++)h=a[n],i[n]=e(t[h],h,n);return r(i)&&(i._isVList=!0),i}function Be(t,e,i,n){var r,o=this.$scopedSlots[t];if(o)i=i||{},n&&(i=O(O({},n),i)),r=o(i)||e;else{var a=this.$slots[t];a&&(a._rendered=!0),r=a||e}var s=i&&i.slot;return s?this.$createElement("template",{slot:s},r):r}function He(t){return jt(this.$options,"filters",t)||P}function Ve(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function We(t,e,i,n,r){var o=G.keyCodes[e]||i;return r&&n&&!G.keyCodes[e]?Ve(r,n):o?Ve(o,t):n?T(n)!==e:void 0}function Xe(t,e,i,n,r){if(i)if(s(i)){var o;Array.isArray(i)&&(i=R(i));var a=function(a){if("class"===a||"style"===a||v(a))o=t;else{var s=t.attrs&&t.attrs.type;o=n||G.mustUseProp(e,s,a)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}a in o||(o[a]=i[a],r&&((t.on||(t.on={}))["update:"+a]=function(t){i[a]=t}))};for(var h in i)a(h)}else;return t}function Ye(t,e){var i=this._staticTrees||(this._staticTrees=[]),n=i[t];return n&&!e?n:(Ke(n=i[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),"__static__"+t,!1),n)}function qe(t,e,i){return Ke(t,"__once__"+e+(i?"_"+i:""),!0),t}function Ke(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]&&"string"!=typeof t[n]&&Ze(t[n],e+"_"+n,i);else Ze(t,e,i)}function Ze(t,e,i){t.isStatic=!0,t.key=e,t.isOnce=i}function $e(t,e){if(e)if(c(e)){var i=t.on=t.on?O({},t.on):{};for(var n in e){var r=i[n],o=e[n];i[n]=r?[].concat(r,o):o}}else;return t}function Je(t){t._o=qe,t._n=d,t._s=p,t._l=ze,t._t=Be,t._q=I,t._i=N,t._m=Ye,t._f=He,t._k=We,t._b=Xe,t._v=vt,t._e=mt,t._u=_e,t._g=$e}function Qe(t,e,n,r,a){var s,h=a.options;_(r,"_uid")?(s=Object.create(r))._original=r:(s=r,r=r._original);var c=o(h._compiled),l=!c;this.data=t,this.props=e,this.children=n,this.parent=r,this.listeners=t.on||i,this.injections=Ue(h.inject,r),this.slots=function(){return ge(n,r)},c&&(this.$options=h,this.$slots=this.slots(),this.$scopedSlots=t.scopedSlots||i),h._scopeId?this._c=function(t,e,i,n){var o=si(s,t,e,i,n,l);return o&&!Array.isArray(o)&&(o.fnScopeId=h._scopeId,o.fnContext=r),o}:this._c=function(t,e,i,n){return si(s,t,e,i,n,l)}}function ti(t,e,i,n){var r=gt(t);return r.fnContext=i,r.fnOptions=n,e.slot&&((r.data||(r.data={})).slot=e.slot),r}function ei(t,e){for(var i in e)t[M(i)]=e[i]}Je(Qe.prototype);var ii={init:function(t,e,i,n){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var o=t;ii.prepatch(o,o)}else{(t.componentInstance=function(t,e,i,n){var o={_isComponent:!0,parent:e,_parentVnode:t,_parentElm:i||null,_refElm:n||null},a=t.data.inlineTemplate;r(a)&&(o.render=a.render,o.staticRenderFns=a.staticRenderFns);return new t.componentOptions.Ctor(o)}(t,xe,i,n)).$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions;!function(t,e,n,r,o){var a=!!(o||t.$options._renderChildren||r.data.scopedSlots||t.$scopedSlots!==i);if(t.$options._parentVnode=r,t.$vnode=r,t._vnode&&(t._vnode.parent=r),t.$options._renderChildren=o,t.$attrs=r.data.attrs||i,t.$listeners=n||i,e&&t.$options.props){Mt(!1);for(var s=t._props,h=t.$options._propKeys||[],c=0;c<h.length;c++){var l=h[c],u=t.$options.props;s[l]=kt(l,u,e,t)}Mt(!0),t.$options.propsData=e}n=n||i;var p=t.$options._parentListeners;t.$options._parentListeners=n,ve(t,n,p),a&&(t.$slots=ge(o,r.context),t.$forceUpdate())}(e.componentInstance=t.componentInstance,n.propsData,n.listeners,e,n.children)},insert:function(t){var e,i=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,we(n,"mounted")),t.data.keepAlive&&(i._isMounted?((e=n)._inactive=!1,Te.push(e)):Me(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?function t(e,i){if(!(i&&(e._directInactive=!0,be(e))||e._inactive)){e._inactive=!0;for(var n=0;n<e.$children.length;n++)t(e.$children[n]);we(e,"deactivated")}}(e,!0):e.$destroy())}},ni=Object.keys(ii);function ri(t,e,a,h,c){if(!n(t)){var l=a.$options._base;if(s(t)&&(t=l.extend(t)),"function"==typeof t){var u;if(n(t.cid)&&void 0===(t=function(t,e,i){if(o(t.error)&&r(t.errorComp))return t.errorComp;if(r(t.resolved))return t.resolved;if(o(t.loading)&&r(t.loadingComp))return t.loadingComp;if(!r(t.contexts)){var a=t.contexts=[i],h=!0,c=function(){for(var t=0,e=a.length;t<e;t++)a[t].$forceUpdate()},l=F(function(i){t.resolved=ue(i,e),h||c()}),u=F(function(e){r(t.errorComp)&&(t.error=!0,c())}),p=t(l,u);return s(p)&&("function"==typeof p.then?n(t.resolved)&&p.then(l,u):r(p.component)&&"function"==typeof p.component.then&&(p.component.then(l,u),r(p.error)&&(t.errorComp=ue(p.error,e)),r(p.loading)&&(t.loadingComp=ue(p.loading,e),0===p.delay?t.loading=!0:setTimeout(function(){n(t.resolved)&&n(t.error)&&(t.loading=!0,c())},p.delay||200)),r(p.timeout)&&setTimeout(function(){n(t.resolved)&&u(null)},p.timeout))),h=!1,t.loading?t.loadingComp:t.resolved}t.contexts.push(i)}(u=t,l,a)))return function(t,e,i,n,r){var o=mt();return o.asyncFactory=t,o.asyncMeta={data:e,context:i,children:n,tag:r},o}(u,e,a,h,c);e=e||{},ci(t),r(e.model)&&function(t,e){var i=t.model&&t.model.prop||"value",n=t.model&&t.model.event||"input";(e.props||(e.props={}))[i]=e.model.value;var o=e.on||(e.on={});r(o[n])?o[n]=[e.model.callback].concat(o[n]):o[n]=e.model.callback}(t.options,e);var p=function(t,e,i){var o=e.options.props;if(!n(o)){var a={},s=t.attrs,h=t.props;if(r(s)||r(h))for(var c in o){var l=T(c);he(a,h,c,l,!0)||he(a,s,c,l,!1)}return a}}(e,t);if(o(t.options.functional))return function(t,e,n,o,a){var s=t.options,h={},c=s.props;if(r(c))for(var l in c)h[l]=kt(l,c,e||i);else r(n.attrs)&&ei(h,n.attrs),r(n.props)&&ei(h,n.props);var u=new Qe(n,h,a,o,t),p=s.render.call(null,u._c,u);if(p instanceof dt)return ti(p,n,u.parent,s);if(Array.isArray(p)){for(var d=ce(p)||[],f=new Array(d.length),m=0;m<d.length;m++)f[m]=ti(d[m],n,u.parent,s);return f}}(t,p,e,a,h);var d=e.on;if(e.on=e.nativeOn,o(t.options.abstract)){var f=e.slot;e={},f&&(e.slot=f)}!function(t){for(var e=t.hook||(t.hook={}),i=0;i<ni.length;i++){var n=ni[i];e[n]=ii[n]}}(e);var m=t.options.name||c;return new dt("vue-component-"+t.cid+(m?"-"+m:""),e,void 0,void 0,void 0,a,{Ctor:t,propsData:p,listeners:d,tag:c,children:h},u)}}}var oi=1,ai=2;function si(t,e,i,h,c,l){return(Array.isArray(i)||a(i))&&(c=h,h=i,i=void 0),o(l)&&(c=ai),function(t,e,i,a,h){if(r(i)&&r(i.__ob__))return mt();r(i)&&r(i.is)&&(e=i.is);if(!e)return mt();0;Array.isArray(a)&&"function"==typeof a[0]&&((i=i||{}).scopedSlots={default:a[0]},a.length=0);h===ai?a=ce(a):h===oi&&(a=function(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}(a));var c,l;if("string"==typeof e){var u;l=t.$vnode&&t.$vnode.ns||G.getTagNamespace(e),c=G.isReservedTag(e)?new dt(G.parsePlatformTagName(e),i,a,void 0,void 0,t):r(u=jt(t.$options,"components",e))?ri(u,i,t,a,e):new dt(e,i,a,void 0,void 0,t)}else c=ri(e,i,t,a);return Array.isArray(c)?c:r(c)?(r(l)&&function t(e,i,a){e.ns=i;"foreignObject"===e.tag&&(i=void 0,a=!0);if(r(e.children))for(var s=0,h=e.children.length;s<h;s++){var c=e.children[s];r(c.tag)&&(n(c.ns)||o(a)&&"svg"!==c.tag)&&t(c,i,a)}}(c,l),r(i)&&function(t){s(t.style)&&ie(t.style);s(t.class)&&ie(t.class)}(i),c):mt()}(t,e,i,h,c)}var hi=0;function ci(t){var e=t.options;if(t.super){var i=ci(t.super);if(i!==t.superOptions){t.superOptions=i;var n=function(t){var e,i=t.options,n=t.extendOptions,r=t.sealedOptions;for(var o in i)i[o]!==r[o]&&(e||(e={}),e[o]=li(i[o],n[o],r[o]));return e}(t);n&&O(t.extendOptions,n),(e=t.options=Dt(i,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function li(t,e,i){if(Array.isArray(t)){var n=[];i=Array.isArray(i)?i:[i],e=Array.isArray(e)?e:[e];for(var r=0;r<t.length;r++)(e.indexOf(t[r])>=0||i.indexOf(t[r])<0)&&n.push(t[r]);return n}return t}function ui(t){this._init(t)}function pi(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var i=this,n=i.cid,r=t._Ctor||(t._Ctor={});if(r[n])return r[n];var o=t.name||i.options.name;var a=function(t){this._init(t)};return(a.prototype=Object.create(i.prototype)).constructor=a,a.cid=e++,a.options=Dt(i.options,t),a.super=i,a.options.props&&function(t){var e=t.options.props;for(var i in e)Ne(t.prototype,"_props",i)}(a),a.options.computed&&function(t){var e=t.options.computed;for(var i in e)je(t.prototype,i,e[i])}(a),a.extend=i.extend,a.mixin=i.mixin,a.use=i.use,j.forEach(function(t){a[t]=i[t]}),o&&(a.options.components[o]=a),a.superOptions=i.options,a.extendOptions=t,a.sealedOptions=O({},a.options),r[n]=a,a}}function di(t){return t&&(t.Ctor.options.name||t.tag)}function fi(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!l(t)&&t.test(e)}function mi(t,e){var i=t.cache,n=t.keys,r=t._vnode;for(var o in i){var a=i[o];if(a){var s=di(a.componentOptions);s&&!e(s)&&vi(i,o,n,r)}}}function vi(t,e,i,n){var r=t[e];!r||n&&r.tag===n.tag||r.componentInstance.$destroy(),t[e]=null,g(i,e)}!function(t){t.prototype._init=function(t){var e=this;e._uid=hi++,e._isVue=!0,t&&t._isComponent?function(t,e){var i=t.$options=Object.create(t.constructor.options),n=e._parentVnode;i.parent=e.parent,i._parentVnode=n,i._parentElm=e._parentElm,i._refElm=e._refElm;var r=n.componentOptions;i.propsData=r.propsData,i._parentListeners=r.listeners,i._renderChildren=r.children,i._componentTag=r.tag,e.render&&(i.render=e.render,i.staticRenderFns=e.staticRenderFns)}(e,t):e.$options=Dt(ci(e.constructor),t||{},e),e._renderProxy=e,e._self=e,function(t){var e=t.$options,i=e.parent;if(i&&!e.abstract){for(;i.$options.abstract&&i.$parent;)i=i.$parent;i.$children.push(t)}t.$parent=i,t.$root=i?i.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(e),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&ve(t,e)}(e),function(t){t._vnode=null,t._staticTrees=null;var e=t.$options,n=t.$vnode=e._parentVnode,r=n&&n.context;t.$slots=ge(e._renderChildren,r),t.$scopedSlots=i,t._c=function(e,i,n,r){return si(t,e,i,n,r,!1)},t.$createElement=function(e,i,n,r){return si(t,e,i,n,r,!0)};var o=n&&n.data;Ct(t,"$attrs",o&&o.attrs||i,null,!0),Ct(t,"$listeners",e._parentListeners||i,null,!0)}(e),we(e,"beforeCreate"),function(t){var e=Ue(t.$options.inject,t);e&&(Mt(!1),Object.keys(e).forEach(function(i){Ct(t,i,e[i])}),Mt(!0))}(e),Fe(e),function(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}(e),we(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(ui),function(t){var e={get:function(){return this._data}},i={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",i),t.prototype.$set=Ot,t.prototype.$delete=Rt,t.prototype.$watch=function(t,e,i){if(c(e))return Ge(this,t,e,i);(i=i||{}).user=!0;var n=new Pe(this,t,e,i);return i.immediate&&e.call(this,n.value),function(){n.teardown()}}}(ui),function(t){var e=/^hook:/;t.prototype.$on=function(t,i){if(Array.isArray(t))for(var n=0,r=t.length;n<r;n++)this.$on(t[n],i);else(this._events[t]||(this._events[t]=[])).push(i),e.test(t)&&(this._hasHookEvent=!0);return this},t.prototype.$once=function(t,e){var i=this;function n(){i.$off(t,n),e.apply(i,arguments)}return n.fn=e,i.$on(t,n),i},t.prototype.$off=function(t,e){var i=this;if(!arguments.length)return i._events=Object.create(null),i;if(Array.isArray(t)){for(var n=0,r=t.length;n<r;n++)this.$off(t[n],e);return i}var o=i._events[t];if(!o)return i;if(!e)return i._events[t]=null,i;if(e)for(var a,s=o.length;s--;)if((a=o[s])===e||a.fn===e){o.splice(s,1);break}return i},t.prototype.$emit=function(t){var e=this,i=e._events[t];if(i){i=i.length>1?C(i):i;for(var n=C(arguments,1),r=0,o=i.length;r<o;r++)try{i[r].apply(e,n)}catch(i){Bt(i,e,'event handler for "'+t+'"')}}return e}}(ui),function(t){t.prototype._update=function(t,e){var i=this;i._isMounted&&we(i,"beforeUpdate");var n=i.$el,r=i._vnode,o=xe;xe=i,i._vnode=t,r?i.$el=i.__patch__(r,t):(i.$el=i.__patch__(i.$el,t,e,!1,i.$options._parentElm,i.$options._refElm),i.$options._parentElm=i.$options._refElm=null),xe=o,n&&(n.__vue__=null),i.$el&&(i.$el.__vue__=i),i.$vnode&&i.$parent&&i.$vnode===i.$parent._vnode&&(i.$parent.$el=i.$el)},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){we(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||g(e.$children,t),t._watcher&&t._watcher.teardown();for(var i=t._watchers.length;i--;)t._watchers[i].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),we(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}(ui),function(t){Je(t.prototype),t.prototype.$nextTick=function(t){return te(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,r=n.render,o=n._parentVnode;o&&(e.$scopedSlots=o.data.scopedSlots||i),e.$vnode=o;try{t=r.call(e._renderProxy,e.$createElement)}catch(i){Bt(i,e,"render"),t=e._vnode}return t instanceof dt||(t=mt()),t.parent=o,t}}(ui);var gi=[String,RegExp,Array],yi={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:gi,exclude:gi,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)vi(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",function(e){mi(t,function(t){return fi(e,t)})}),this.$watch("exclude",function(e){mi(t,function(t){return!fi(e,t)})})},render:function(){var t=this.$slots.default,e=de(t),i=e&&e.componentOptions;if(i){var n=di(i),r=this.include,o=this.exclude;if(r&&(!n||!fi(r,n))||o&&n&&fi(o,n))return e;var a=this.cache,s=this.keys,h=null==e.key?i.Ctor.cid+(i.tag?"::"+i.tag:""):e.key;a[h]?(e.componentInstance=a[h].componentInstance,g(s,h),s.push(h)):(a[h]=e,s.push(h),this.max&&s.length>parseInt(this.max)&&vi(a,s[0],s,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}}};!function(t){var e={get:function(){return G}};Object.defineProperty(t,"config",e),t.util={warn:st,extend:O,mergeOptions:Dt,defineReactive:Ct},t.set=Ot,t.delete=Rt,t.nextTick=te,t.options=Object.create(null),j.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,O(t.options.components,yi),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var i=C(arguments,1);return i.unshift(this),"function"==typeof t.install?t.install.apply(t,i):"function"==typeof t&&t.apply(null,i),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=Dt(this.options,t),this}}(t),pi(t),function(t){j.forEach(function(e){t[e]=function(t,i){return i?("component"===e&&c(i)&&(i.name=i.name||t,i=this.options._base.extend(i)),"directive"===e&&"function"==typeof i&&(i={bind:i,update:i}),this.options[e+"s"][t]=i,i):this.options[e+"s"][t]}})}(t)}(ui),Object.defineProperty(ui.prototype,"$isServer",{get:it}),Object.defineProperty(ui.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(ui,"FunctionalRenderContext",{value:Qe}),ui.version="2.5.17";var _i=f("style,class"),xi=f("input,textarea,option,select,progress"),bi=function(t,e,i){return"value"===i&&xi(t)&&"button"!==e||"selected"===i&&"option"===t||"checked"===i&&"input"===t||"muted"===i&&"video"===t},Mi=f("contenteditable,draggable,spellcheck"),wi=f("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Ei="http://www.w3.org/1999/xlink",Ti=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Si=function(t){return Ti(t)?t.slice(6,t.length):""},Ci=function(t){return null==t||!1===t};function Oi(t){for(var e=t.data,i=t,n=t;r(n.componentInstance);)(n=n.componentInstance._vnode)&&n.data&&(e=Ri(n.data,e));for(;r(i=i.parent);)i&&i.data&&(e=Ri(e,i.data));return function(t,e){if(r(t)||r(e))return Ai(t,Li(e));return""}(e.staticClass,e.class)}function Ri(t,e){return{staticClass:Ai(t.staticClass,e.staticClass),class:r(t.class)?[t.class,e.class]:e.class}}function Ai(t,e){return t?e?t+" "+e:t:e||""}function Li(t){return Array.isArray(t)?function(t){for(var e,i="",n=0,o=t.length;n<o;n++)r(e=Li(t[n]))&&""!==e&&(i&&(i+=" "),i+=e);return i}(t):s(t)?function(t){var e="";for(var i in t)t[i]&&(e&&(e+=" "),e+=i);return e}(t):"string"==typeof t?t:""}var Pi={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Ii=f("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Ni=f("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Fi=function(t){return Ii(t)||Ni(t)};function Di(t){return Ni(t)?"svg":"math"===t?"math":void 0}var ji=Object.create(null);var ki=f("text,number,password,search,email,tel,url");function Gi(t){if("string"==typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}var Ui=Object.freeze({createElement:function(t,e){var i=document.createElement(t);return"select"!==t?i:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&i.setAttribute("multiple","multiple"),i)},createElementNS:function(t,e){return document.createElementNS(Pi[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,i){t.insertBefore(e,i)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}}),zi={create:function(t,e){Bi(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Bi(t,!0),Bi(e))},destroy:function(t){Bi(t,!0)}};function Bi(t,e){var i=t.data.ref;if(r(i)){var n=t.context,o=t.componentInstance||t.elm,a=n.$refs;e?Array.isArray(a[i])?g(a[i],o):a[i]===o&&(a[i]=void 0):t.data.refInFor?Array.isArray(a[i])?a[i].indexOf(o)<0&&a[i].push(o):a[i]=[o]:a[i]=o}}var Hi=new dt("",{},[]),Vi=["create","activate","update","remove","destroy"];function Wi(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&r(t.data)===r(e.data)&&function(t,e){if("input"!==t.tag)return!0;var i,n=r(i=t.data)&&r(i=i.attrs)&&i.type,o=r(i=e.data)&&r(i=i.attrs)&&i.type;return n===o||ki(n)&&ki(o)}(t,e)||o(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&n(e.asyncFactory.error))}function Xi(t,e,i){var n,o,a={};for(n=e;n<=i;++n)r(o=t[n].key)&&(a[o]=n);return a}var Yi={create:qi,update:qi,destroy:function(t){qi(t,Hi)}};function qi(t,e){(t.data.directives||e.data.directives)&&function(t,e){var i,n,r,o=t===Hi,a=e===Hi,s=Zi(t.data.directives,t.context),h=Zi(e.data.directives,e.context),c=[],l=[];for(i in h)n=s[i],r=h[i],n?(r.oldValue=n.value,Ji(r,"update",e,t),r.def&&r.def.componentUpdated&&l.push(r)):(Ji(r,"bind",e,t),r.def&&r.def.inserted&&c.push(r));if(c.length){var u=function(){for(var i=0;i<c.length;i++)Ji(c[i],"inserted",e,t)};o?se(e,"insert",u):u()}l.length&&se(e,"postpatch",function(){for(var i=0;i<l.length;i++)Ji(l[i],"componentUpdated",e,t)});if(!o)for(i in s)h[i]||Ji(s[i],"unbind",t,t,a)}(t,e)}var Ki=Object.create(null);function Zi(t,e){var i,n,r=Object.create(null);if(!t)return r;for(i=0;i<t.length;i++)(n=t[i]).modifiers||(n.modifiers=Ki),r[$i(n)]=n,n.def=jt(e.$options,"directives",n.name);return r}function $i(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Ji(t,e,i,n,r){var o=t.def&&t.def[e];if(o)try{o(i.elm,t,i,n,r)}catch(n){Bt(n,i.context,"directive "+t.name+" "+e+" hook")}}var Qi=[zi,Yi];function tn(t,e){var i=e.componentOptions;if(!(r(i)&&!1===i.Ctor.options.inheritAttrs||n(t.data.attrs)&&n(e.data.attrs))){var o,a,s=e.elm,h=t.data.attrs||{},c=e.data.attrs||{};for(o in r(c.__ob__)&&(c=e.data.attrs=O({},c)),c)a=c[o],h[o]!==a&&en(s,o,a);for(o in(K||$)&&c.value!==h.value&&en(s,"value",c.value),h)n(c[o])&&(Ti(o)?s.removeAttributeNS(Ei,Si(o)):Mi(o)||s.removeAttribute(o))}}function en(t,e,i){t.tagName.indexOf("-")>-1?nn(t,e,i):wi(e)?Ci(i)?t.removeAttribute(e):(i="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,i)):Mi(e)?t.setAttribute(e,Ci(i)||"false"===i?"false":"true"):Ti(e)?Ci(i)?t.removeAttributeNS(Ei,Si(e)):t.setAttributeNS(Ei,e,i):nn(t,e,i)}function nn(t,e,i){if(Ci(i))t.removeAttribute(e);else{if(K&&!Z&&"TEXTAREA"===t.tagName&&"placeholder"===e&&!t.__ieph){var n=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",n)};t.addEventListener("input",n),t.__ieph=!0}t.setAttribute(e,i)}}var rn={create:tn,update:tn};function on(t,e){var i=e.elm,o=e.data,a=t.data;if(!(n(o.staticClass)&&n(o.class)&&(n(a)||n(a.staticClass)&&n(a.class)))){var s=Oi(e),h=i._transitionClasses;r(h)&&(s=Ai(s,Li(h))),s!==i._prevClass&&(i.setAttribute("class",s),i._prevClass=s)}}var an,sn,hn,cn,ln,un,pn={create:on,update:on},dn=/[\w).+\-_$\]]/;function fn(t){var e,i,n,r,o,a=!1,s=!1,h=!1,c=!1,l=0,u=0,p=0,d=0;for(n=0;n<t.length;n++)if(i=e,e=t.charCodeAt(n),a)39===e&&92!==i&&(a=!1);else if(s)34===e&&92!==i&&(s=!1);else if(h)96===e&&92!==i&&(h=!1);else if(c)47===e&&92!==i&&(c=!1);else if(124!==e||124===t.charCodeAt(n+1)||124===t.charCodeAt(n-1)||l||u||p){switch(e){case 34:s=!0;break;case 39:a=!0;break;case 96:h=!0;break;case 40:p++;break;case 41:p--;break;case 91:u++;break;case 93:u--;break;case 123:l++;break;case 125:l--}if(47===e){for(var f=n-1,m=void 0;f>=0&&" "===(m=t.charAt(f));f--);m&&dn.test(m)||(c=!0)}}else void 0===r?(d=n+1,r=t.slice(0,n).trim()):v();function v(){(o||(o=[])).push(t.slice(d,n).trim()),d=n+1}if(void 0===r?r=t.slice(0,n).trim():0!==d&&v(),o)for(n=0;n<o.length;n++)r=mn(r,o[n]);return r}function mn(t,e){var i=e.indexOf("(");if(i<0)return'_f("'+e+'")('+t+")";var n=e.slice(0,i),r=e.slice(i+1);return'_f("'+n+'")('+t+(")"!==r?","+r:r)}function vn(t){console.error("[Vue compiler]: "+t)}function gn(t,e){return t?t.map(function(t){return t[e]}).filter(function(t){return t}):[]}function yn(t,e,i){(t.props||(t.props=[])).push({name:e,value:i}),t.plain=!1}function _n(t,e,i){(t.attrs||(t.attrs=[])).push({name:e,value:i}),t.plain=!1}function xn(t,e,i){t.attrsMap[e]=i,t.attrsList.push({name:e,value:i})}function bn(t,e,i,n,r,o){(t.directives||(t.directives=[])).push({name:e,rawName:i,value:n,arg:r,modifiers:o}),t.plain=!1}function Mn(t,e,n,r,o,a){var s;(r=r||i).capture&&(delete r.capture,e="!"+e),r.once&&(delete r.once,e="~"+e),r.passive&&(delete r.passive,e="&"+e),"click"===e&&(r.right?(e="contextmenu",delete r.right):r.middle&&(e="mouseup")),r.native?(delete r.native,s=t.nativeEvents||(t.nativeEvents={})):s=t.events||(t.events={});var h={value:n.trim()};r!==i&&(h.modifiers=r);var c=s[e];Array.isArray(c)?o?c.unshift(h):c.push(h):s[e]=c?o?[h,c]:[c,h]:h,t.plain=!1}function wn(t,e,i){var n=En(t,":"+e)||En(t,"v-bind:"+e);if(null!=n)return fn(n);if(!1!==i){var r=En(t,e);if(null!=r)return JSON.stringify(r)}}function En(t,e,i){var n;if(null!=(n=t.attrsMap[e]))for(var r=t.attrsList,o=0,a=r.length;o<a;o++)if(r[o].name===e){r.splice(o,1);break}return i&&delete t.attrsMap[e],n}function Tn(t,e,i){var n=i||{},r=n.number,o="$$v";n.trim&&(o="(typeof $$v === 'string'? $$v.trim(): $$v)"),r&&(o="_n("+o+")");var a=Sn(e,o);t.model={value:"("+e+")",expression:'"'+e+'"',callback:"function ($$v) {"+a+"}"}}function Sn(t,e){var i=function(t){if(t=t.trim(),an=t.length,t.indexOf("[")<0||t.lastIndexOf("]")<an-1)return(cn=t.lastIndexOf("."))>-1?{exp:t.slice(0,cn),key:'"'+t.slice(cn+1)+'"'}:{exp:t,key:null};sn=t,cn=ln=un=0;for(;!On();)Rn(hn=Cn())?Ln(hn):91===hn&&An(hn);return{exp:t.slice(0,ln),key:t.slice(ln+1,un)}}(t);return null===i.key?t+"="+e:"$set("+i.exp+", "+i.key+", "+e+")"}function Cn(){return sn.charCodeAt(++cn)}function On(){return cn>=an}function Rn(t){return 34===t||39===t}function An(t){var e=1;for(ln=cn;!On();)if(Rn(t=Cn()))Ln(t);else if(91===t&&e++,93===t&&e--,0===e){un=cn;break}}function Ln(t){for(var e=t;!On()&&(t=Cn())!==e;);}var Pn,In="__r",Nn="__c";function Fn(t,e,i,n,r){var o;e=(o=e)._withTask||(o._withTask=function(){Zt=!0;var t=o.apply(null,arguments);return Zt=!1,t}),i&&(e=function(t,e,i){var n=Pn;return function r(){null!==t.apply(null,arguments)&&Dn(e,r,i,n)}}(e,t,n)),Pn.addEventListener(t,e,tt?{capture:n,passive:r}:n)}function Dn(t,e,i,n){(n||Pn).removeEventListener(t,e._withTask||e,i)}function jn(t,e){if(!n(t.data.on)||!n(e.data.on)){var i=e.data.on||{},o=t.data.on||{};Pn=e.elm,function(t){if(r(t[In])){var e=K?"change":"input";t[e]=[].concat(t[In],t[e]||[]),delete t[In]}r(t[Nn])&&(t.change=[].concat(t[Nn],t.change||[]),delete t[Nn])}(i),ae(i,o,Fn,Dn,e.context),Pn=void 0}}var kn={create:jn,update:jn};function Gn(t,e){if(!n(t.data.domProps)||!n(e.data.domProps)){var i,o,a=e.elm,s=t.data.domProps||{},h=e.data.domProps||{};for(i in r(h.__ob__)&&(h=e.data.domProps=O({},h)),s)n(h[i])&&(a[i]="");for(i in h){if(o=h[i],"textContent"===i||"innerHTML"===i){if(e.children&&(e.children.length=0),o===s[i])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===i){a._value=o;var c=n(o)?"":String(o);Un(a,c)&&(a.value=c)}else a[i]=o}}}function Un(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var i=!0;try{i=document.activeElement!==t}catch(t){}return i&&t.value!==e}(t,e)||function(t,e){var i=t.value,n=t._vModifiers;if(r(n)){if(n.lazy)return!1;if(n.number)return d(i)!==d(e);if(n.trim)return i.trim()!==e.trim()}return i!==e}(t,e))}var zn={create:Gn,update:Gn},Bn=x(function(t){var e={},i=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach(function(t){if(t){var n=t.split(i);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e});function Hn(t){var e=Vn(t.style);return t.staticStyle?O(t.staticStyle,e):e}function Vn(t){return Array.isArray(t)?R(t):"string"==typeof t?Bn(t):t}var Wn,Xn=/^--/,Yn=/\s*!important$/,qn=function(t,e,i){if(Xn.test(e))t.style.setProperty(e,i);else if(Yn.test(i))t.style.setProperty(e,i.replace(Yn,""),"important");else{var n=Zn(e);if(Array.isArray(i))for(var r=0,o=i.length;r<o;r++)t.style[n]=i[r];else t.style[n]=i}},Kn=["Webkit","Moz","ms"],Zn=x(function(t){if(Wn=Wn||document.createElement("div").style,"filter"!==(t=M(t))&&t in Wn)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<Kn.length;i++){var n=Kn[i]+e;if(n in Wn)return n}});function $n(t,e){var i=e.data,o=t.data;if(!(n(i.staticStyle)&&n(i.style)&&n(o.staticStyle)&&n(o.style))){var a,s,h=e.elm,c=o.staticStyle,l=o.normalizedStyle||o.style||{},u=c||l,p=Vn(e.data.style)||{};e.data.normalizedStyle=r(p.__ob__)?O({},p):p;var d=function(t,e){var i,n={};if(e)for(var r=t;r.componentInstance;)(r=r.componentInstance._vnode)&&r.data&&(i=Hn(r.data))&&O(n,i);(i=Hn(t.data))&&O(n,i);for(var o=t;o=o.parent;)o.data&&(i=Hn(o.data))&&O(n,i);return n}(e,!0);for(s in u)n(d[s])&&qn(h,s,"");for(s in d)(a=d[s])!==u[s]&&qn(h,s,null==a?"":a)}}var Jn={create:$n,update:$n};function Qn(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var i=" "+(t.getAttribute("class")||"")+" ";i.indexOf(" "+e+" ")<0&&t.setAttribute("class",(i+e).trim())}}function tr(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var i=" "+(t.getAttribute("class")||"")+" ",n=" "+e+" ";i.indexOf(n)>=0;)i=i.replace(n," ");(i=i.trim())?t.setAttribute("class",i):t.removeAttribute("class")}}function er(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&O(e,ir(t.name||"v")),O(e,t),e}return"string"==typeof t?ir(t):void 0}}var ir=x(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),nr=W&&!Z,rr="transition",or="animation",ar="transition",sr="transitionend",hr="animation",cr="animationend";nr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(ar="WebkitTransition",sr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(hr="WebkitAnimation",cr="webkitAnimationEnd"));var lr=W?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function ur(t){lr(function(){lr(t)})}function pr(t,e){var i=t._transitionClasses||(t._transitionClasses=[]);i.indexOf(e)<0&&(i.push(e),Qn(t,e))}function dr(t,e){t._transitionClasses&&g(t._transitionClasses,e),tr(t,e)}function fr(t,e,i){var n=vr(t,e),r=n.type,o=n.timeout,a=n.propCount;if(!r)return i();var s=r===rr?sr:cr,h=0,c=function(){t.removeEventListener(s,l),i()},l=function(e){e.target===t&&++h>=a&&c()};setTimeout(function(){h<a&&c()},o+1),t.addEventListener(s,l)}var mr=/\b(transform|all)(,|$)/;function vr(t,e){var i,n=window.getComputedStyle(t),r=n[ar+"Delay"].split(", "),o=n[ar+"Duration"].split(", "),a=gr(r,o),s=n[hr+"Delay"].split(", "),h=n[hr+"Duration"].split(", "),c=gr(s,h),l=0,u=0;return e===rr?a>0&&(i=rr,l=a,u=o.length):e===or?c>0&&(i=or,l=c,u=h.length):u=(i=(l=Math.max(a,c))>0?a>c?rr:or:null)?i===rr?o.length:h.length:0,{type:i,timeout:l,propCount:u,hasTransform:i===rr&&mr.test(n[ar+"Property"])}}function gr(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(e,i){return yr(e)+yr(t[i])}))}function yr(t){return 1e3*Number(t.slice(0,-1))}function _r(t,e){var i=t.elm;r(i._leaveCb)&&(i._leaveCb.cancelled=!0,i._leaveCb());var o=er(t.data.transition);if(!n(o)&&!r(i._enterCb)&&1===i.nodeType){for(var a=o.css,h=o.type,c=o.enterClass,l=o.enterToClass,u=o.enterActiveClass,p=o.appearClass,f=o.appearToClass,m=o.appearActiveClass,v=o.beforeEnter,g=o.enter,y=o.afterEnter,_=o.enterCancelled,x=o.beforeAppear,b=o.appear,M=o.afterAppear,w=o.appearCancelled,E=o.duration,T=xe,S=xe.$vnode;S&&S.parent;)T=(S=S.parent).context;var C=!T._isMounted||!t.isRootInsert;if(!C||b||""===b){var O=C&&p?p:c,R=C&&m?m:u,A=C&&f?f:l,L=C&&x||v,P=C&&"function"==typeof b?b:g,I=C&&M||y,N=C&&w||_,D=d(s(E)?E.enter:E);0;var j=!1!==a&&!Z,k=Mr(P),G=i._enterCb=F(function(){j&&(dr(i,A),dr(i,R)),G.cancelled?(j&&dr(i,O),N&&N(i)):I&&I(i),i._enterCb=null});t.data.show||se(t,"insert",function(){var e=i.parentNode,n=e&&e._pending&&e._pending[t.key];n&&n.tag===t.tag&&n.elm._leaveCb&&n.elm._leaveCb(),P&&P(i,G)}),L&&L(i),j&&(pr(i,O),pr(i,R),ur(function(){dr(i,O),G.cancelled||(pr(i,A),k||(br(D)?setTimeout(G,D):fr(i,h,G)))})),t.data.show&&(e&&e(),P&&P(i,G)),j||k||G()}}}function xr(t,e){var i=t.elm;r(i._enterCb)&&(i._enterCb.cancelled=!0,i._enterCb());var o=er(t.data.transition);if(n(o)||1!==i.nodeType)return e();if(!r(i._leaveCb)){var a=o.css,h=o.type,c=o.leaveClass,l=o.leaveToClass,u=o.leaveActiveClass,p=o.beforeLeave,f=o.leave,m=o.afterLeave,v=o.leaveCancelled,g=o.delayLeave,y=o.duration,_=!1!==a&&!Z,x=Mr(f),b=d(s(y)?y.leave:y);0;var M=i._leaveCb=F(function(){i.parentNode&&i.parentNode._pending&&(i.parentNode._pending[t.key]=null),_&&(dr(i,l),dr(i,u)),M.cancelled?(_&&dr(i,c),v&&v(i)):(e(),m&&m(i)),i._leaveCb=null});g?g(w):w()}function w(){M.cancelled||(t.data.show||((i.parentNode._pending||(i.parentNode._pending={}))[t.key]=t),p&&p(i),_&&(pr(i,c),pr(i,u),ur(function(){dr(i,c),M.cancelled||(pr(i,l),x||(br(b)?setTimeout(M,b):fr(i,h,M)))})),f&&f(i,M),_||x||M())}}function br(t){return"number"==typeof t&&!isNaN(t)}function Mr(t){if(n(t))return!1;var e=t.fns;return r(e)?Mr(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function wr(t,e){!0!==e.data.show&&_r(e)}var Er=function(t){var e,i,s={},h=t.modules,c=t.nodeOps;for(e=0;e<Vi.length;++e)for(s[Vi[e]]=[],i=0;i<h.length;++i)r(h[i][Vi[e]])&&s[Vi[e]].push(h[i][Vi[e]]);function l(t){var e=c.parentNode(t);r(e)&&c.removeChild(e,t)}function u(t,e,i,n,a,h,l){if(r(t.elm)&&r(h)&&(t=h[l]=gt(t)),t.isRootInsert=!a,!function(t,e,i,n){var a=t.data;if(r(a)){var h=r(t.componentInstance)&&a.keepAlive;if(r(a=a.hook)&&r(a=a.init)&&a(t,!1,i,n),r(t.componentInstance))return p(t,e),o(h)&&function(t,e,i,n){for(var o,a=t;a.componentInstance;)if(a=a.componentInstance._vnode,r(o=a.data)&&r(o=o.transition)){for(o=0;o<s.activate.length;++o)s.activate[o](Hi,a);e.push(a);break}d(i,t.elm,n)}(t,e,i,n),!0}}(t,e,i,n)){var u=t.data,f=t.children,v=t.tag;r(v)?(t.elm=t.ns?c.createElementNS(t.ns,v):c.createElement(v,t),y(t),m(t,f,e),r(u)&&g(t,e),d(i,t.elm,n)):o(t.isComment)?(t.elm=c.createComment(t.text),d(i,t.elm,n)):(t.elm=c.createTextNode(t.text),d(i,t.elm,n))}}function p(t,e){r(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,v(t)?(g(t,e),y(t)):(Bi(t),e.push(t))}function d(t,e,i){r(t)&&(r(i)?i.parentNode===t&&c.insertBefore(t,e,i):c.appendChild(t,e))}function m(t,e,i){if(Array.isArray(e))for(var n=0;n<e.length;++n)u(e[n],i,t.elm,null,!0,e,n);else a(t.text)&&c.appendChild(t.elm,c.createTextNode(String(t.text)))}function v(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return r(t.tag)}function g(t,i){for(var n=0;n<s.create.length;++n)s.create[n](Hi,t);r(e=t.data.hook)&&(r(e.create)&&e.create(Hi,t),r(e.insert)&&i.push(t))}function y(t){var e;if(r(e=t.fnScopeId))c.setStyleScope(t.elm,e);else for(var i=t;i;)r(e=i.context)&&r(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e),i=i.parent;r(e=xe)&&e!==t.context&&e!==t.fnContext&&r(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e)}function _(t,e,i,n,r,o){for(;n<=r;++n)u(i[n],o,t,e,!1,i,n)}function x(t){var e,i,n=t.data;if(r(n))for(r(e=n.hook)&&r(e=e.destroy)&&e(t),e=0;e<s.destroy.length;++e)s.destroy[e](t);if(r(e=t.children))for(i=0;i<t.children.length;++i)x(t.children[i])}function b(t,e,i,n){for(;i<=n;++i){var o=e[i];r(o)&&(r(o.tag)?(M(o),x(o)):l(o.elm))}}function M(t,e){if(r(e)||r(t.data)){var i,n=s.remove.length+1;for(r(e)?e.listeners+=n:e=function(t,e){function i(){0==--i.listeners&&l(t)}return i.listeners=e,i}(t.elm,n),r(i=t.componentInstance)&&r(i=i._vnode)&&r(i.data)&&M(i,e),i=0;i<s.remove.length;++i)s.remove[i](t,e);r(i=t.data.hook)&&r(i=i.remove)?i(t,e):e()}else l(t.elm)}function w(t,e,i,n){for(var o=i;o<n;o++){var a=e[o];if(r(a)&&Wi(t,a))return o}}function E(t,e,i,a){if(t!==e){var h=e.elm=t.elm;if(o(t.isAsyncPlaceholder))r(e.asyncFactory.resolved)?C(t.elm,e,i):e.isAsyncPlaceholder=!0;else if(o(e.isStatic)&&o(t.isStatic)&&e.key===t.key&&(o(e.isCloned)||o(e.isOnce)))e.componentInstance=t.componentInstance;else{var l,p=e.data;r(p)&&r(l=p.hook)&&r(l=l.prepatch)&&l(t,e);var d=t.children,f=e.children;if(r(p)&&v(e)){for(l=0;l<s.update.length;++l)s.update[l](t,e);r(l=p.hook)&&r(l=l.update)&&l(t,e)}n(e.text)?r(d)&&r(f)?d!==f&&function(t,e,i,o,a){for(var s,h,l,p=0,d=0,f=e.length-1,m=e[0],v=e[f],g=i.length-1,y=i[0],x=i[g],M=!a;p<=f&&d<=g;)n(m)?m=e[++p]:n(v)?v=e[--f]:Wi(m,y)?(E(m,y,o),m=e[++p],y=i[++d]):Wi(v,x)?(E(v,x,o),v=e[--f],x=i[--g]):Wi(m,x)?(E(m,x,o),M&&c.insertBefore(t,m.elm,c.nextSibling(v.elm)),m=e[++p],x=i[--g]):Wi(v,y)?(E(v,y,o),M&&c.insertBefore(t,v.elm,m.elm),v=e[--f],y=i[++d]):(n(s)&&(s=Xi(e,p,f)),n(h=r(y.key)?s[y.key]:w(y,e,p,f))?u(y,o,t,m.elm,!1,i,d):Wi(l=e[h],y)?(E(l,y,o),e[h]=void 0,M&&c.insertBefore(t,l.elm,m.elm)):u(y,o,t,m.elm,!1,i,d),y=i[++d]);p>f?_(t,n(i[g+1])?null:i[g+1].elm,i,d,g,o):d>g&&b(0,e,p,f)}(h,d,f,i,a):r(f)?(r(t.text)&&c.setTextContent(h,""),_(h,null,f,0,f.length-1,i)):r(d)?b(0,d,0,d.length-1):r(t.text)&&c.setTextContent(h,""):t.text!==e.text&&c.setTextContent(h,e.text),r(p)&&r(l=p.hook)&&r(l=l.postpatch)&&l(t,e)}}}function T(t,e,i){if(o(i)&&r(t.parent))t.parent.data.pendingInsert=e;else for(var n=0;n<e.length;++n)e[n].data.hook.insert(e[n])}var S=f("attrs,class,staticClass,staticStyle,key");function C(t,e,i,n){var a,s=e.tag,h=e.data,c=e.children;if(n=n||h&&h.pre,e.elm=t,o(e.isComment)&&r(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(r(h)&&(r(a=h.hook)&&r(a=a.init)&&a(e,!0),r(a=e.componentInstance)))return p(e,i),!0;if(r(s)){if(r(c))if(t.hasChildNodes())if(r(a=h)&&r(a=a.domProps)&&r(a=a.innerHTML)){if(a!==t.innerHTML)return!1}else{for(var l=!0,u=t.firstChild,d=0;d<c.length;d++){if(!u||!C(u,c[d],i,n)){l=!1;break}u=u.nextSibling}if(!l||u)return!1}else m(e,c,i);if(r(h)){var f=!1;for(var v in h)if(!S(v)){f=!0,g(e,i);break}!f&&h.class&&ie(h.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,i,a,h,l){if(!n(e)){var p,d=!1,f=[];if(n(t))d=!0,u(e,f,h,l);else{var m=r(t.nodeType);if(!m&&Wi(t,e))E(t,e,f,a);else{if(m){if(1===t.nodeType&&t.hasAttribute(D)&&(t.removeAttribute(D),i=!0),o(i)&&C(t,e,f))return T(e,f,!0),t;p=t,t=new dt(c.tagName(p).toLowerCase(),{},[],void 0,p)}var g=t.elm,y=c.parentNode(g);if(u(e,f,g._leaveCb?null:y,c.nextSibling(g)),r(e.parent))for(var _=e.parent,M=v(e);_;){for(var w=0;w<s.destroy.length;++w)s.destroy[w](_);if(_.elm=e.elm,M){for(var S=0;S<s.create.length;++S)s.create[S](Hi,_);var O=_.data.hook.insert;if(O.merged)for(var R=1;R<O.fns.length;R++)O.fns[R]()}else Bi(_);_=_.parent}r(y)?b(0,[t],0,0):r(t.tag)&&x(t)}}return T(e,f,d),e.elm}r(t)&&x(t)}}({nodeOps:Ui,modules:[rn,pn,kn,zn,Jn,W?{create:wr,activate:wr,remove:function(t,e){!0!==t.data.show?xr(t,e):e()}}:{}].concat(Qi)});Z&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&Pr(t,"input")});var Tr={inserted:function(t,e,i,n){"select"===i.tag?(n.elm&&!n.elm._vOptions?se(i,"postpatch",function(){Tr.componentUpdated(t,e,i)}):Sr(t,e,i.context),t._vOptions=[].map.call(t.options,Rr)):("textarea"===i.tag||ki(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",Ar),t.addEventListener("compositionend",Lr),t.addEventListener("change",Lr),Z&&(t.vmodel=!0)))},componentUpdated:function(t,e,i){if("select"===i.tag){Sr(t,e,i.context);var n=t._vOptions,r=t._vOptions=[].map.call(t.options,Rr);if(r.some(function(t,e){return!I(t,n[e])}))(t.multiple?e.value.some(function(t){return Or(t,r)}):e.value!==e.oldValue&&Or(e.value,r))&&Pr(t,"change")}}};function Sr(t,e,i){Cr(t,e,i),(K||$)&&setTimeout(function(){Cr(t,e,i)},0)}function Cr(t,e,i){var n=e.value,r=t.multiple;if(!r||Array.isArray(n)){for(var o,a,s=0,h=t.options.length;s<h;s++)if(a=t.options[s],r)o=N(n,Rr(a))>-1,a.selected!==o&&(a.selected=o);else if(I(Rr(a),n))return void(t.selectedIndex!==s&&(t.selectedIndex=s));r||(t.selectedIndex=-1)}}function Or(t,e){return e.every(function(e){return!I(e,t)})}function Rr(t){return"_value"in t?t._value:t.value}function Ar(t){t.target.composing=!0}function Lr(t){t.target.composing&&(t.target.composing=!1,Pr(t.target,"input"))}function Pr(t,e){var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!0),t.dispatchEvent(i)}function Ir(t){return!t.componentInstance||t.data&&t.data.transition?t:Ir(t.componentInstance._vnode)}var Nr={model:Tr,show:{bind:function(t,e,i){var n=e.value,r=(i=Ir(i)).data&&i.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;n&&r?(i.data.show=!0,_r(i,function(){t.style.display=o})):t.style.display=n?o:"none"},update:function(t,e,i){var n=e.value;!n!=!e.oldValue&&((i=Ir(i)).data&&i.data.transition?(i.data.show=!0,n?_r(i,function(){t.style.display=t.__vOriginalDisplay}):xr(i,function(){t.style.display="none"})):t.style.display=n?t.__vOriginalDisplay:"none")},unbind:function(t,e,i,n,r){r||(t.style.display=t.__vOriginalDisplay)}}},Fr={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Dr(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?Dr(de(e.children)):t}function jr(t){var e={},i=t.$options;for(var n in i.propsData)e[n]=t[n];var r=i._parentListeners;for(var o in r)e[M(o)]=r[o];return e}function kr(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var Gr={name:"transition",props:Fr,abstract:!0,render:function(t){var e=this,i=this.$slots.default;if(i&&(i=i.filter(function(t){return t.tag||pe(t)})).length){0;var n=this.mode;0;var r=i[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return r;var o=Dr(r);if(!o)return r;if(this._leaving)return kr(t,r);var s="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?s+"comment":s+o.tag:a(o.key)?0===String(o.key).indexOf(s)?o.key:s+o.key:o.key;var h=(o.data||(o.data={})).transition=jr(this),c=this._vnode,l=Dr(c);if(o.data.directives&&o.data.directives.some(function(t){return"show"===t.name})&&(o.data.show=!0),l&&l.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(o,l)&&!pe(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var u=l.data.transition=O({},h);if("out-in"===n)return this._leaving=!0,se(u,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),kr(t,r);if("in-out"===n){if(pe(o))return c;var p,d=function(){p()};se(h,"afterEnter",d),se(h,"enterCancelled",d),se(u,"delayLeave",function(t){p=t})}}return r}}},Ur=O({tag:String,moveClass:String},Fr);function zr(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function Br(t){t.data.newPos=t.elm.getBoundingClientRect()}function Hr(t){var e=t.data.pos,i=t.data.newPos,n=e.left-i.left,r=e.top-i.top;if(n||r){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate("+n+"px,"+r+"px)",o.transitionDuration="0s"}}delete Ur.mode;var Vr={Transition:Gr,TransitionGroup:{props:Ur,render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",i=Object.create(null),n=this.prevChildren=this.children,r=this.$slots.default||[],o=this.children=[],a=jr(this),s=0;s<r.length;s++){var h=r[s];if(h.tag)if(null!=h.key&&0!==String(h.key).indexOf("__vlist"))o.push(h),i[h.key]=h,(h.data||(h.data={})).transition=a;else;}if(n){for(var c=[],l=[],u=0;u<n.length;u++){var p=n[u];p.data.transition=a,p.data.pos=p.elm.getBoundingClientRect(),i[p.key]?c.push(p):l.push(p)}this.kept=t(e,null,c),this.removed=l}return t(e,null,o)},beforeUpdate:function(){this.__patch__(this._vnode,this.kept,!1,!0),this._vnode=this.kept},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(zr),t.forEach(Br),t.forEach(Hr),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var i=t.elm,n=i.style;pr(i,e),n.transform=n.WebkitTransform=n.transitionDuration="",i.addEventListener(sr,i._moveCb=function t(n){n&&!/transform$/.test(n.propertyName)||(i.removeEventListener(sr,t),i._moveCb=null,dr(i,e))})}}))},methods:{hasMove:function(t,e){if(!nr)return!1;if(this._hasMove)return this._hasMove;var i=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){tr(i,t)}),Qn(i,e),i.style.display="none",this.$el.appendChild(i);var n=vr(i);return this.$el.removeChild(i),this._hasMove=n.hasTransform}}}};ui.config.mustUseProp=bi,ui.config.isReservedTag=Fi,ui.config.isReservedAttr=_i,ui.config.getTagNamespace=Di,ui.config.isUnknownElement=function(t){if(!W)return!0;if(Fi(t))return!1;if(t=t.toLowerCase(),null!=ji[t])return ji[t];var e=document.createElement(t);return t.indexOf("-")>-1?ji[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:ji[t]=/HTMLUnknownElement/.test(e.toString())},O(ui.options.directives,Nr),O(ui.options.components,Vr),ui.prototype.__patch__=W?Er:A,ui.prototype.$mount=function(t,e){return function(t,e,i){return t.$el=e,t.$options.render||(t.$options.render=mt),we(t,"beforeMount"),new Pe(t,function(){t._update(t._render(),i)},A,null,!0),i=!1,null==t.$vnode&&(t._isMounted=!0,we(t,"mounted")),t}(this,t=t&&W?Gi(t):void 0,e)},W&&setTimeout(function(){G.devtools&&nt&&nt.emit("init",ui)},0);var Wr=/\{\{((?:.|\n)+?)\}\}/g,Xr=/[-.*+?^${}()|[\]\/\\]/g,Yr=x(function(t){var e=t[0].replace(Xr,"\\$&"),i=t[1].replace(Xr,"\\$&");return new RegExp(e+"((?:.|\\n)+?)"+i,"g")});function qr(t,e){var i=e?Yr(e):Wr;if(i.test(t)){for(var n,r,o,a=[],s=[],h=i.lastIndex=0;n=i.exec(t);){(r=n.index)>h&&(s.push(o=t.slice(h,r)),a.push(JSON.stringify(o)));var c=fn(n[1].trim());a.push("_s("+c+")"),s.push({"@binding":c}),h=r+n[0].length}return h<t.length&&(s.push(o=t.slice(h)),a.push(JSON.stringify(o))),{expression:a.join("+"),tokens:s}}}var Kr={staticKeys:["staticClass"],transformNode:function(t,e){e.warn;var i=En(t,"class");i&&(t.staticClass=JSON.stringify(i));var n=wn(t,"class",!1);n&&(t.classBinding=n)},genData:function(t){var e="";return t.staticClass&&(e+="staticClass:"+t.staticClass+","),t.classBinding&&(e+="class:"+t.classBinding+","),e}};var Zr,$r={staticKeys:["staticStyle"],transformNode:function(t,e){e.warn;var i=En(t,"style");i&&(t.staticStyle=JSON.stringify(Bn(i)));var n=wn(t,"style",!1);n&&(t.styleBinding=n)},genData:function(t){var e="";return t.staticStyle&&(e+="staticStyle:"+t.staticStyle+","),t.styleBinding&&(e+="style:("+t.styleBinding+"),"),e}},Jr=function(t){return(Zr=Zr||document.createElement("div")).innerHTML=t,Zr.textContent},Qr=f("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),to=f("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),eo=f("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),io=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,no="[a-zA-Z_][\\w\\-\\.]*",ro="((?:"+no+"\\:)?"+no+")",oo=new RegExp("^<"+ro),ao=/^\s*(\/?)>/,so=new RegExp("^<\\/"+ro+"[^>]*>"),ho=/^<!DOCTYPE [^>]+>/i,co=/^<!\--/,lo=/^<!\[/,uo=!1;"x".replace(/x(.)?/g,function(t,e){uo=""===e});var po=f("script,style,textarea",!0),fo={},mo={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t"},vo=/&(?:lt|gt|quot|amp);/g,go=/&(?:lt|gt|quot|amp|#10|#9);/g,yo=f("pre,textarea",!0),_o=function(t,e){return t&&yo(t)&&"\n"===e[0]};function xo(t,e){var i=e?go:vo;return t.replace(i,function(t){return mo[t]})}var bo,Mo,wo,Eo,To,So,Co,Oo,Ro=/^@|^v-on:/,Ao=/^v-|^@|^:/,Lo=/([^]*?)\s+(?:in|of)\s+([^]*)/,Po=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Io=/^\(|\)$/g,No=/:(.*)$/,Fo=/^:|^v-bind:/,Do=/\.[^.]+/g,jo=x(Jr);function ko(t,e,i){return{type:1,tag:t,attrsList:e,attrsMap:function(t){for(var e={},i=0,n=t.length;i<n;i++)e[t[i].name]=t[i].value;return e}(e),parent:i,children:[]}}function Go(t,e){bo=e.warn||vn,So=e.isPreTag||L,Co=e.mustUseProp||L,Oo=e.getTagNamespace||L,wo=gn(e.modules,"transformNode"),Eo=gn(e.modules,"preTransformNode"),To=gn(e.modules,"postTransformNode"),Mo=e.delimiters;var i,n,r=[],o=!1!==e.preserveWhitespace,a=!1,s=!1;function h(t){t.pre&&(a=!1),So(t.tag)&&(s=!1);for(var i=0;i<To.length;i++)To[i](t,e)}return function(t,e){for(var i,n,r=[],o=e.expectHTML,a=e.isUnaryTag||L,s=e.canBeLeftOpenTag||L,h=0;t;){if(i=t,n&&po(n)){var c=0,l=n.toLowerCase(),u=fo[l]||(fo[l]=new RegExp("([\\s\\S]*?)(</"+l+"[^>]*>)","i")),p=t.replace(u,function(t,i,n){return c=n.length,po(l)||"noscript"===l||(i=i.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),_o(l,i)&&(i=i.slice(1)),e.chars&&e.chars(i),""});h+=t.length-p.length,t=p,S(l,h-c,h)}else{var d=t.indexOf("<");if(0===d){if(co.test(t)){var f=t.indexOf("--\x3e");if(f>=0){e.shouldKeepComment&&e.comment(t.substring(4,f)),w(f+3);continue}}if(lo.test(t)){var m=t.indexOf("]>");if(m>=0){w(m+2);continue}}var v=t.match(ho);if(v){w(v[0].length);continue}var g=t.match(so);if(g){var y=h;w(g[0].length),S(g[1],y,h);continue}var _=E();if(_){T(_),_o(n,t)&&w(1);continue}}var x=void 0,b=void 0,M=void 0;if(d>=0){for(b=t.slice(d);!(so.test(b)||oo.test(b)||co.test(b)||lo.test(b)||(M=b.indexOf("<",1))<0);)d+=M,b=t.slice(d);x=t.substring(0,d),w(d)}d<0&&(x=t,t=""),e.chars&&x&&e.chars(x)}if(t===i){e.chars&&e.chars(t);break}}function w(e){h+=e,t=t.substring(e)}function E(){var e=t.match(oo);if(e){var i,n,r={tagName:e[1],attrs:[],start:h};for(w(e[0].length);!(i=t.match(ao))&&(n=t.match(io));)w(n[0].length),r.attrs.push(n);if(i)return r.unarySlash=i[1],w(i[0].length),r.end=h,r}}function T(t){var i=t.tagName,h=t.unarySlash;o&&("p"===n&&eo(i)&&S(n),s(i)&&n===i&&S(i));for(var c=a(i)||!!h,l=t.attrs.length,u=new Array(l),p=0;p<l;p++){var d=t.attrs[p];uo&&-1===d[0].indexOf('""')&&(""===d[3]&&delete d[3],""===d[4]&&delete d[4],""===d[5]&&delete d[5]);var f=d[3]||d[4]||d[5]||"",m="a"===i&&"href"===d[1]?e.shouldDecodeNewlinesForHref:e.shouldDecodeNewlines;u[p]={name:d[1],value:xo(f,m)}}c||(r.push({tag:i,lowerCasedTag:i.toLowerCase(),attrs:u}),n=i),e.start&&e.start(i,u,c,t.start,t.end)}function S(t,i,o){var a,s;if(null==i&&(i=h),null==o&&(o=h),t&&(s=t.toLowerCase()),t)for(a=r.length-1;a>=0&&r[a].lowerCasedTag!==s;a--);else a=0;if(a>=0){for(var c=r.length-1;c>=a;c--)e.end&&e.end(r[c].tag,i,o);r.length=a,n=a&&r[a-1].tag}else"br"===s?e.start&&e.start(t,[],!0,i,o):"p"===s&&(e.start&&e.start(t,[],!1,i,o),e.end&&e.end(t,i,o))}S()}(t,{warn:bo,expectHTML:e.expectHTML,isUnaryTag:e.isUnaryTag,canBeLeftOpenTag:e.canBeLeftOpenTag,shouldDecodeNewlines:e.shouldDecodeNewlines,shouldDecodeNewlinesForHref:e.shouldDecodeNewlinesForHref,shouldKeepComment:e.comments,start:function(t,o,c){var l=n&&n.ns||Oo(t);K&&"svg"===l&&(o=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];Vo.test(n.name)||(n.name=n.name.replace(Wo,""),e.push(n))}return e}(o));var u,p=ko(t,o,n);l&&(p.ns=l),"style"!==(u=p).tag&&("script"!==u.tag||u.attrsMap.type&&"text/javascript"!==u.attrsMap.type)||it()||(p.forbidden=!0);for(var d=0;d<Eo.length;d++)p=Eo[d](p,e)||p;function f(t){0}if(a||(!function(t){null!=En(t,"v-pre")&&(t.pre=!0)}(p),p.pre&&(a=!0)),So(p.tag)&&(s=!0),a?function(t){var e=t.attrsList.length;if(e)for(var i=t.attrs=new Array(e),n=0;n<e;n++)i[n]={name:t.attrsList[n].name,value:JSON.stringify(t.attrsList[n].value)};else t.pre||(t.plain=!0)}(p):p.processed||(zo(p),function(t){var e=En(t,"v-if");if(e)t.if=e,Bo(t,{exp:e,block:t});else{null!=En(t,"v-else")&&(t.else=!0);var i=En(t,"v-else-if");i&&(t.elseif=i)}}(p),function(t){null!=En(t,"v-once")&&(t.once=!0)}(p),Uo(p,e)),i?r.length||i.if&&(p.elseif||p.else)&&(f(),Bo(i,{exp:p.elseif,block:p})):(i=p,f()),n&&!p.forbidden)if(p.elseif||p.else)!function(t,e){var i=function(t){var e=t.length;for(;e--;){if(1===t[e].type)return t[e];t.pop()}}(e.children);i&&i.if&&Bo(i,{exp:t.elseif,block:t})}(p,n);else if(p.slotScope){n.plain=!1;var m=p.slotTarget||'"default"';(n.scopedSlots||(n.scopedSlots={}))[m]=p}else n.children.push(p),p.parent=n;c?h(p):(n=p,r.push(p))},end:function(){var t=r[r.length-1],e=t.children[t.children.length-1];e&&3===e.type&&" "===e.text&&!s&&t.children.pop(),r.length-=1,n=r[r.length-1],h(t)},chars:function(t){if(n&&(!K||"textarea"!==n.tag||n.attrsMap.placeholder!==t)){var e,i,r=n.children;if(t=s||t.trim()?"script"===(e=n).tag||"style"===e.tag?t:jo(t):o&&r.length?" ":"")!a&&" "!==t&&(i=qr(t,Mo))?r.push({type:2,expression:i.expression,tokens:i.tokens,text:t}):" "===t&&r.length&&" "===r[r.length-1].text||r.push({type:3,text:t})}},comment:function(t){n.children.push({type:3,text:t,isComment:!0})}}),i}function Uo(t,e){var i,n;(n=wn(i=t,"key"))&&(i.key=n),t.plain=!t.key&&!t.attrsList.length,function(t){var e=wn(t,"ref");e&&(t.ref=e,t.refInFor=function(t){var e=t;for(;e;){if(void 0!==e.for)return!0;e=e.parent}return!1}(t))}(t),function(t){if("slot"===t.tag)t.slotName=wn(t,"name");else{var e;"template"===t.tag?(e=En(t,"scope"),t.slotScope=e||En(t,"slot-scope")):(e=En(t,"slot-scope"))&&(t.slotScope=e);var i=wn(t,"slot");i&&(t.slotTarget='""'===i?'"default"':i,"template"===t.tag||t.slotScope||_n(t,"slot",i))}}(t),function(t){var e;(e=wn(t,"is"))&&(t.component=e);null!=En(t,"inline-template")&&(t.inlineTemplate=!0)}(t);for(var r=0;r<wo.length;r++)t=wo[r](t,e)||t;!function(t){var e,i,n,r,o,a,s,h=t.attrsList;for(e=0,i=h.length;e<i;e++){if(n=r=h[e].name,o=h[e].value,Ao.test(n))if(t.hasBindings=!0,(a=Ho(n))&&(n=n.replace(Do,"")),Fo.test(n))n=n.replace(Fo,""),o=fn(o),s=!1,a&&(a.prop&&(s=!0,"innerHtml"===(n=M(n))&&(n="innerHTML")),a.camel&&(n=M(n)),a.sync&&Mn(t,"update:"+M(n),Sn(o,"$event"))),s||!t.component&&Co(t.tag,t.attrsMap.type,n)?yn(t,n,o):_n(t,n,o);else if(Ro.test(n))n=n.replace(Ro,""),Mn(t,n,o,a,!1);else{var c=(n=n.replace(Ao,"")).match(No),l=c&&c[1];l&&(n=n.slice(0,-(l.length+1))),bn(t,n,r,o,l,a)}else _n(t,n,JSON.stringify(o)),!t.component&&"muted"===n&&Co(t.tag,t.attrsMap.type,n)&&yn(t,n,"true")}}(t)}function zo(t){var e;if(e=En(t,"v-for")){var i=function(t){var e=t.match(Lo);if(!e)return;var i={};i.for=e[2].trim();var n=e[1].trim().replace(Io,""),r=n.match(Po);r?(i.alias=n.replace(Po,""),i.iterator1=r[1].trim(),r[2]&&(i.iterator2=r[2].trim())):i.alias=n;return i}(e);i&&O(t,i)}}function Bo(t,e){t.ifConditions||(t.ifConditions=[]),t.ifConditions.push(e)}function Ho(t){var e=t.match(Do);if(e){var i={};return e.forEach(function(t){i[t.slice(1)]=!0}),i}}var Vo=/^xmlns:NS\d+/,Wo=/^NS\d+:/;function Xo(t){return ko(t.tag,t.attrsList.slice(),t.parent)}var Yo=[Kr,$r,{preTransformNode:function(t,e){if("input"===t.tag){var i,n=t.attrsMap;if(!n["v-model"])return;if((n[":type"]||n["v-bind:type"])&&(i=wn(t,"type")),n.type||i||!n["v-bind"]||(i="("+n["v-bind"]+").type"),i){var r=En(t,"v-if",!0),o=r?"&&("+r+")":"",a=null!=En(t,"v-else",!0),s=En(t,"v-else-if",!0),h=Xo(t);zo(h),xn(h,"type","checkbox"),Uo(h,e),h.processed=!0,h.if="("+i+")==='checkbox'"+o,Bo(h,{exp:h.if,block:h});var c=Xo(t);En(c,"v-for",!0),xn(c,"type","radio"),Uo(c,e),Bo(h,{exp:"("+i+")==='radio'"+o,block:c});var l=Xo(t);return En(l,"v-for",!0),xn(l,":type",i),Uo(l,e),Bo(h,{exp:r,block:l}),a?h.else=!0:s&&(h.elseif=s),h}}}}];var qo,Ko,Zo={expectHTML:!0,modules:Yo,directives:{model:function(t,e,i){i;var n=e.value,r=e.modifiers,o=t.tag,a=t.attrsMap.type;if(t.component)return Tn(t,n,r),!1;if("select"===o)!function(t,e,i){var n='var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(i&&i.number?"_n(val)":"val")+"});";n=n+" "+Sn(e,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]"),Mn(t,"change",n,null,!0)}(t,n,r);else if("input"===o&&"checkbox"===a)!function(t,e,i){var n=i&&i.number,r=wn(t,"value")||"null",o=wn(t,"true-value")||"true",a=wn(t,"false-value")||"false";yn(t,"checked","Array.isArray("+e+")?_i("+e+","+r+")>-1"+("true"===o?":("+e+")":":_q("+e+","+o+")")),Mn(t,"change","var $$a="+e+",$$el=$event.target,$$c=$$el.checked?("+o+"):("+a+");if(Array.isArray($$a)){var $$v="+(n?"_n("+r+")":r)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+Sn(e,"$$a.concat([$$v])")+")}else{$$i>-1&&("+Sn(e,"$$a.slice(0,$$i).concat($$a.slice($$i+1))")+")}}else{"+Sn(e,"$$c")+"}",null,!0)}(t,n,r);else if("input"===o&&"radio"===a)!function(t,e,i){var n=i&&i.number,r=wn(t,"value")||"null";yn(t,"checked","_q("+e+","+(r=n?"_n("+r+")":r)+")"),Mn(t,"change",Sn(e,r),null,!0)}(t,n,r);else if("input"===o||"textarea"===o)!function(t,e,i){var n=t.attrsMap.type,r=i||{},o=r.lazy,a=r.number,s=r.trim,h=!o&&"range"!==n,c=o?"change":"range"===n?In:"input",l="$event.target.value";s&&(l="$event.target.value.trim()"),a&&(l="_n("+l+")");var u=Sn(e,l);h&&(u="if($event.target.composing)return;"+u),yn(t,"value","("+e+")"),Mn(t,c,u,null,!0),(s||a)&&Mn(t,"blur","$forceUpdate()")}(t,n,r);else if(!G.isReservedTag(o))return Tn(t,n,r),!1;return!0},text:function(t,e){e.value&&yn(t,"textContent","_s("+e.value+")")},html:function(t,e){e.value&&yn(t,"innerHTML","_s("+e.value+")")}},isPreTag:function(t){return"pre"===t},isUnaryTag:Qr,mustUseProp:bi,canBeLeftOpenTag:to,isReservedTag:Fi,getTagNamespace:Di,staticKeys:function(t){return t.reduce(function(t,e){return t.concat(e.staticKeys||[])},[]).join(",")}(Yo)},$o=x(function(t){return f("type,tag,attrsList,attrsMap,plain,parent,children,attrs"+(t?","+t:""))});function Jo(t,e){t&&(qo=$o(e.staticKeys||""),Ko=e.isReservedTag||L,function t(e){e.static=function(t){if(2===t.type)return!1;if(3===t.type)return!0;return!(!t.pre&&(t.hasBindings||t.if||t.for||m(t.tag)||!Ko(t.tag)||function(t){for(;t.parent;){if("template"!==(t=t.parent).tag)return!1;if(t.for)return!0}return!1}(t)||!Object.keys(t).every(qo)))}(e);if(1===e.type){if(!Ko(e.tag)&&"slot"!==e.tag&&null==e.attrsMap["inline-template"])return;for(var i=0,n=e.children.length;i<n;i++){var r=e.children[i];t(r),r.static||(e.static=!1)}if(e.ifConditions)for(var o=1,a=e.ifConditions.length;o<a;o++){var s=e.ifConditions[o].block;t(s),s.static||(e.static=!1)}}}(t),function t(e,i){if(1===e.type){if((e.static||e.once)&&(e.staticInFor=i),e.static&&e.children.length&&(1!==e.children.length||3!==e.children[0].type))return void(e.staticRoot=!0);if(e.staticRoot=!1,e.children)for(var n=0,r=e.children.length;n<r;n++)t(e.children[n],i||!!e.for);if(e.ifConditions)for(var o=1,a=e.ifConditions.length;o<a;o++)t(e.ifConditions[o].block,i)}}(t,!1))}var Qo=/^([\w$_]+|\([^)]*?\))\s*=>|^function\s*\(/,ta=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,ea={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},ia={esc:"Escape",tab:"Tab",enter:"Enter",space:" ",up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete"]},na=function(t){return"if("+t+")return null;"},ra={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:na("$event.target !== $event.currentTarget"),ctrl:na("!$event.ctrlKey"),shift:na("!$event.shiftKey"),alt:na("!$event.altKey"),meta:na("!$event.metaKey"),left:na("'button' in $event && $event.button !== 0"),middle:na("'button' in $event && $event.button !== 1"),right:na("'button' in $event && $event.button !== 2")};function oa(t,e,i){var n=e?"nativeOn:{":"on:{";for(var r in t)n+='"'+r+'":'+aa(r,t[r])+",";return n.slice(0,-1)+"}"}function aa(t,e){if(!e)return"function(){}";if(Array.isArray(e))return"["+e.map(function(e){return aa(t,e)}).join(",")+"]";var i=ta.test(e.value),n=Qo.test(e.value);if(e.modifiers){var r="",o="",a=[];for(var s in e.modifiers)if(ra[s])o+=ra[s],ea[s]&&a.push(s);else if("exact"===s){var h=e.modifiers;o+=na(["ctrl","shift","alt","meta"].filter(function(t){return!h[t]}).map(function(t){return"$event."+t+"Key"}).join("||"))}else a.push(s);return a.length&&(r+=function(t){return"if(!('button' in $event)&&"+t.map(sa).join("&&")+")return null;"}(a)),o&&(r+=o),"function($event){"+r+(i?"return "+e.value+"($event)":n?"return ("+e.value+")($event)":e.value)+"}"}return i||n?e.value:"function($event){"+e.value+"}"}function sa(t){var e=parseInt(t,10);if(e)return"$event.keyCode!=="+e;var i=ea[t],n=ia[t];return"_k($event.keyCode,"+JSON.stringify(t)+","+JSON.stringify(i)+",$event.key,"+JSON.stringify(n)+")"}var ha={on:function(t,e){t.wrapListeners=function(t){return"_g("+t+","+e.value+")"}},bind:function(t,e){t.wrapData=function(i){return"_b("+i+",'"+t.tag+"',"+e.value+","+(e.modifiers&&e.modifiers.prop?"true":"false")+(e.modifiers&&e.modifiers.sync?",true":"")+")"}},cloak:A},ca=function(t){this.options=t,this.warn=t.warn||vn,this.transforms=gn(t.modules,"transformCode"),this.dataGenFns=gn(t.modules,"genData"),this.directives=O(O({},ha),t.directives);var e=t.isReservedTag||L;this.maybeComponent=function(t){return!e(t.tag)},this.onceId=0,this.staticRenderFns=[]};function la(t,e){var i=new ca(e);return{render:"with(this){return "+(t?ua(t,i):'_c("div")')+"}",staticRenderFns:i.staticRenderFns}}function ua(t,e){if(t.staticRoot&&!t.staticProcessed)return pa(t,e);if(t.once&&!t.onceProcessed)return da(t,e);if(t.for&&!t.forProcessed)return function(t,e,i,n){var r=t.for,o=t.alias,a=t.iterator1?","+t.iterator1:"",s=t.iterator2?","+t.iterator2:"";0;return t.forProcessed=!0,(n||"_l")+"(("+r+"),function("+o+a+s+"){return "+(i||ua)(t,e)+"})"}(t,e);if(t.if&&!t.ifProcessed)return fa(t,e);if("template"!==t.tag||t.slotTarget){if("slot"===t.tag)return function(t,e){var i=t.slotName||'"default"',n=ga(t,e),r="_t("+i+(n?","+n:""),o=t.attrs&&"{"+t.attrs.map(function(t){return M(t.name)+":"+t.value}).join(",")+"}",a=t.attrsMap["v-bind"];!o&&!a||n||(r+=",null");o&&(r+=","+o);a&&(r+=(o?"":",null")+","+a);return r+")"}(t,e);var i;if(t.component)i=function(t,e,i){var n=e.inlineTemplate?null:ga(e,i,!0);return"_c("+t+","+ma(e,i)+(n?","+n:"")+")"}(t.component,t,e);else{var n=t.plain?void 0:ma(t,e),r=t.inlineTemplate?null:ga(t,e,!0);i="_c('"+t.tag+"'"+(n?","+n:"")+(r?","+r:"")+")"}for(var o=0;o<e.transforms.length;o++)i=e.transforms[o](t,i);return i}return ga(t,e)||"void 0"}function pa(t,e){return t.staticProcessed=!0,e.staticRenderFns.push("with(this){return "+ua(t,e)+"}"),"_m("+(e.staticRenderFns.length-1)+(t.staticInFor?",true":"")+")"}function da(t,e){if(t.onceProcessed=!0,t.if&&!t.ifProcessed)return fa(t,e);if(t.staticInFor){for(var i="",n=t.parent;n;){if(n.for){i=n.key;break}n=n.parent}return i?"_o("+ua(t,e)+","+e.onceId+++","+i+")":ua(t,e)}return pa(t,e)}function fa(t,e,i,n){return t.ifProcessed=!0,function t(e,i,n,r){if(!e.length)return r||"_e()";var o=e.shift();return o.exp?"("+o.exp+")?"+a(o.block)+":"+t(e,i,n,r):""+a(o.block);function a(t){return n?n(t,i):t.once?da(t,i):ua(t,i)}}(t.ifConditions.slice(),e,i,n)}function ma(t,e){var i="{",n=function(t,e){var i=t.directives;if(!i)return;var n,r,o,a,s="directives:[",h=!1;for(n=0,r=i.length;n<r;n++){o=i[n],a=!0;var c=e.directives[o.name];c&&(a=!!c(t,o,e.warn)),a&&(h=!0,s+='{name:"'+o.name+'",rawName:"'+o.rawName+'"'+(o.value?",value:("+o.value+"),expression:"+JSON.stringify(o.value):"")+(o.arg?',arg:"'+o.arg+'"':"")+(o.modifiers?",modifiers:"+JSON.stringify(o.modifiers):"")+"},")}if(h)return s.slice(0,-1)+"]"}(t,e);n&&(i+=n+","),t.key&&(i+="key:"+t.key+","),t.ref&&(i+="ref:"+t.ref+","),t.refInFor&&(i+="refInFor:true,"),t.pre&&(i+="pre:true,"),t.component&&(i+='tag:"'+t.tag+'",');for(var r=0;r<e.dataGenFns.length;r++)i+=e.dataGenFns[r](t);if(t.attrs&&(i+="attrs:{"+xa(t.attrs)+"},"),t.props&&(i+="domProps:{"+xa(t.props)+"},"),t.events&&(i+=oa(t.events,!1,e.warn)+","),t.nativeEvents&&(i+=oa(t.nativeEvents,!0,e.warn)+","),t.slotTarget&&!t.slotScope&&(i+="slot:"+t.slotTarget+","),t.scopedSlots&&(i+=function(t,e){return"scopedSlots:_u(["+Object.keys(t).map(function(i){return va(i,t[i],e)}).join(",")+"])"}(t.scopedSlots,e)+","),t.model&&(i+="model:{value:"+t.model.value+",callback:"+t.model.callback+",expression:"+t.model.expression+"},"),t.inlineTemplate){var o=function(t,e){var i=t.children[0];0;if(1===i.type){var n=la(i,e.options);return"inlineTemplate:{render:function(){"+n.render+"},staticRenderFns:["+n.staticRenderFns.map(function(t){return"function(){"+t+"}"}).join(",")+"]}"}}(t,e);o&&(i+=o+",")}return i=i.replace(/,$/,"")+"}",t.wrapData&&(i=t.wrapData(i)),t.wrapListeners&&(i=t.wrapListeners(i)),i}function va(t,e,i){return e.for&&!e.forProcessed?function(t,e,i){var n=e.for,r=e.alias,o=e.iterator1?","+e.iterator1:"",a=e.iterator2?","+e.iterator2:"";return e.forProcessed=!0,"_l(("+n+"),function("+r+o+a+"){return "+va(t,e,i)+"})"}(t,e,i):"{key:"+t+",fn:"+("function("+String(e.slotScope)+"){return "+("template"===e.tag?e.if?e.if+"?"+(ga(e,i)||"undefined")+":undefined":ga(e,i)||"undefined":ua(e,i))+"}")+"}"}function ga(t,e,i,n,r){var o=t.children;if(o.length){var a=o[0];if(1===o.length&&a.for&&"template"!==a.tag&&"slot"!==a.tag)return(n||ua)(a,e);var s=i?function(t,e){for(var i=0,n=0;n<t.length;n++){var r=t[n];if(1===r.type){if(ya(r)||r.ifConditions&&r.ifConditions.some(function(t){return ya(t.block)})){i=2;break}(e(r)||r.ifConditions&&r.ifConditions.some(function(t){return e(t.block)}))&&(i=1)}}return i}(o,e.maybeComponent):0,h=r||_a;return"["+o.map(function(t){return h(t,e)}).join(",")+"]"+(s?","+s:"")}}function ya(t){return void 0!==t.for||"template"===t.tag||"slot"===t.tag}function _a(t,e){return 1===t.type?ua(t,e):3===t.type&&t.isComment?(n=t,"_e("+JSON.stringify(n.text)+")"):"_v("+(2===(i=t).type?i.expression:ba(JSON.stringify(i.text)))+")";var i,n}function xa(t){for(var e="",i=0;i<t.length;i++){var n=t[i];e+='"'+n.name+'":'+ba(n.value)+","}return e.slice(0,-1)}function ba(t){return t.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)");function Ma(t,e){try{return new Function(t)}catch(i){return e.push({err:i,code:t}),A}}var wa,Ea,Ta=(wa=function(t,e){var i=Go(t.trim(),e);!1!==e.optimize&&Jo(i,e);var n=la(i,e);return{ast:i,render:n.render,staticRenderFns:n.staticRenderFns}},function(t){function e(e,i){var n=Object.create(t),r=[],o=[];if(n.warn=function(t,e){(e?o:r).push(t)},i)for(var a in i.modules&&(n.modules=(t.modules||[]).concat(i.modules)),i.directives&&(n.directives=O(Object.create(t.directives||null),i.directives)),i)"modules"!==a&&"directives"!==a&&(n[a]=i[a]);var s=wa(e,n);return s.errors=r,s.tips=o,s}return{compile:e,compileToFunctions:function(t){var e=Object.create(null);return function(i,n,r){(n=O({},n)).warn,delete n.warn;var o=n.delimiters?String(n.delimiters)+i:i;if(e[o])return e[o];var a=t(i,n),s={},h=[];return s.render=Ma(a.render,h),s.staticRenderFns=a.staticRenderFns.map(function(t){return Ma(t,h)}),e[o]=s}}(e)}})(Zo).compileToFunctions;function Sa(t){return(Ea=Ea||document.createElement("div")).innerHTML=t?'<a href="\n"/>':'<div a="\n"/>',Ea.innerHTML.indexOf("&#10;")>0}var Ca=!!W&&Sa(!1),Oa=!!W&&Sa(!0),Ra=x(function(t){var e=Gi(t);return e&&e.innerHTML}),Aa=ui.prototype.$mount;ui.prototype.$mount=function(t,e){if((t=t&&Gi(t))===document.body||t===document.documentElement)return this;var i=this.$options;if(!i.render){var n=i.template;if(n)if("string"==typeof n)"#"===n.charAt(0)&&(n=Ra(n));else{if(!n.nodeType)return this;n=n.innerHTML}else t&&(n=function(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}(t));if(n){0;var r=Ta(n,{shouldDecodeNewlines:Ca,shouldDecodeNewlinesForHref:Oa,delimiters:i.delimiters,comments:i.comments},this),o=r.render,a=r.staticRenderFns;i.render=o,i.staticRenderFns=a}}return Aa.call(this,t,e)},ui.compile=Ta,e.a=ui}).call(e,i("DuR2"))},"77Pl":function(t,e,i){var n=i("EqjI");t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},"7KvD":function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},"7XOM":function(t,e,i){"use strict";e.a={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},"82Mu":function(t,e,i){var n=i("7KvD"),r=i("L42u").set,o=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,h="process"==i("R9M2")(a);t.exports=function(){var t,e,i,c=function(){var n,r;for(h&&(n=a.domain)&&n.exit();t;){r=t.fn,t=t.next;try{r()}catch(n){throw t?i():e=void 0,n}}e=void 0,n&&n.enter()};if(h)i=function(){a.nextTick(c)};else if(!o||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);i=function(){l.then(c)}}else i=function(){r.call(n,c)};else{var u=!0,p=document.createTextNode("");new o(c).observe(p,{characterData:!0}),i=function(){p.data=u=!u}}return function(n){var r={fn:n,next:void 0};e&&(e.next=r),t||(t=r,i()),e=r}}},"880/":function(t,e,i){t.exports=i("hJx8")},"94VQ":function(t,e,i){"use strict";var n=i("Yobk"),r=i("X8DO"),o=i("e6n0"),a={};i("hJx8")(a,i("dSzd")("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(a,{next:r(1,i)}),o(t,e+" Iterator")}},"9Ewl":function(t,e,i){"use strict";e.a={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}},"9JMd":function(t,e,i){"use strict";var n=i("OEyb"),r=i("bhTf"),o=i("57Gy"),a=function(t){function e(e){t.call(this),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(o.a.CLEAR)},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t,e){for(var i=this.oldest_;i;)t.call(e,i.value_,i.key_,this),i=i.newer},e.prototype.get=function(t){var e=this.entries_[t];return Object(n.a)(void 0!==e,15),e===this.newest_?e.value_:(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e,e.value_)},e.prototype.remove=function(t){var e=this.entries_[t];return Object(n.a)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e},e.prototype.getValues=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},e.prototype.set=function(t,e){Object(n.a)(!(t in this.entries_),16);var i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e.prototype.prune=function(){for(;this.canExpireCache();)this.pop()},e}(r.a);e.a=a},A7Qc:function(t,e,i){"use strict";var n=i("V2dr"),r=i("XOen"),o=i("yGLh"),a=i("9Ewl"),s=function(t){function e(e){t.call(this),this.projection_=Object(o.d)(e.projection),this.attributions_=this.adaptAttributions_(e.attributions),this.loading=!1,this.state_=void 0!==e.state?e.state:a.a.READY,this.wrapX_=void 0!==e.wrapX&&e.wrapX}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.adaptAttributions_=function(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null},e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=this.adaptAttributions_(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(r.a);s.prototype.forEachFeatureAtCoordinate=n.c,e.a=s},A90D:function(t,e,i){"use strict";i.d(e,"a",function(){return s});var n=i("AU1m"),r=i("DM+O"),o=i("XOen"),a="length",s=function(t){function e(e,i){t.call(this,e),this.element=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i("LKHy").a),h=function(t){function e(e,i){t.call(this);var n=i||{};if(this.unique_=!!n.unique,this.array_=e||[],this.unique_)for(var r=0,o=this.array_.length;r<o;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,i=t.length;e<i;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)t(e[i],i,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(a)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new s(r.a.ADD,e))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new s(r.a.REMOVE,e)),e},e.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new s(r.a.REMOVE,n)),this.dispatchEvent(new s(r.a.ADD,e))}else{for(var o=i;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(a,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===t&&i!==e)throw new n.a(58)},e}(o.a);e.b=h},AMn6:function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=i("FeXB"),r=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};function o(t,e,i){return e+":"+t+":"+(i?Object(n.b)(i):"null")}r.prototype.clear=function(){this.cache_={},this.cacheSize_=0},r.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var t=0;for(var e in this.cache_){var i=this.cache_[e];0!=(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},r.prototype.get=function(t,e,i){var n=o(t,e,i);return n in this.cache_?this.cache_[n]:null},r.prototype.set=function(t,e,i,n){var r=o(t,e,i);this.cache_[r]=n,++this.cacheSize_},r.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()};var a=new r},AT16:function(t,e,i){"use strict";var n=i("zF6X"),r=i("/LWt"),o=i("5MGX"),a=i("Fu+J"),s=i("i3aX"),h=i("ZYQ1"),c=i("VgFP"),l=i("+b92");var u=i("bmSR"),p=i("ZXW8"),d=i("hrLW"),f=i("wupX"),m=i("vhPq"),v=i("pWpL"),g=i("piqq"),y=i("LmAy"),_=function(t){function e(e,i,r){if(t.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){for(var o=this.getLayout(),a=[],s=[],h=0,c=e.length;h<c;++h){var l=e[h];0===h&&(o=l.getLayout());for(var u=a.length,p=l.getEnds(),d=0,f=p.length;d<f;++d)p[d]+=u;Object(n.c)(a,l.getFlatCoordinates()),s.push(p)}i=o,e=a,r=s}void 0!==i&&r?(this.setFlatCoordinates(i,e),this.endss_=r):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;Object(n.c)(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,o=(e=t.getEnds().slice()).length;r<o;++r)e[r]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),n=0;n<t;++n)i[n]=this.endss_[n].slice();return new e(this.flatCoordinates.slice(),this.layout,i)},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(r.e)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(u.f)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(u.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return Object(p.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return Object(l.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(g.d)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Object(f.c)(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=function(t,e,i,n){for(var o=[],a=Object(r.j)(),s=0,h=i.length;s<h;++s){var c=i[s];a=Object(r.o)(t,e,c[0],n),o.push((a[0]+a[2])/2,(a[1]+a[3])/2),e=c[c.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Object(m.b)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new s.a(this.getFlatInteriorPoints().slice(),o.a.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(g.b)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(g.d)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=Object(y.d)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,n),new e(i,o.a.XY,n)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var n=this.endss_[t].slice(),r=n[n.length-1];if(0!==e)for(var o=0,a=n.length;o<a;++o)n[o]-=e;return new h.a(this.flatCoordinates.slice(e,r),this.layout,n)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[],r=0,o=0,a=i.length;o<a;++o){var s=i[o].slice(),c=s[s.length-1];if(0!==r)for(var l=0,u=s.length;l<u;++l)s[l]-=r;var p=new h.a(e.slice(r,c),t,s);n.push(p),r=c}return n},e.prototype.getType=function(){return a.a.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return Object(v.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=Object(d.d)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var n=i[i.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()},e}(c.a);e.a=_},AU1m:function(t,e,i){"use strict";var n=i("3ciB"),r=function(t){function e(e){var i="Assertion failed. See https://openlayers.org/en/"+n.a.split("-")[0]+"/doc/errors/#"+e+" for details.";t.call(this,i),this.code=e,this.name="AssertionError",this.message=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);e.a=r},CTDj:function(t,e,i){"use strict";i.d(e,"c",function(){return o}),i.d(e,"d",function(){return a}),i.d(e,"b",function(){return s}),i.d(e,"a",function(){return h}),i.d(e,"e",function(){return c});var n,r,o="ol-hidden",a="ol-unselectable",s="ol-control",h="ol-collapsed",c=(r={},function(t){if(n||(n=document.createElement("div").style),!(t in r)){n.font=t;var e=n.fontFamily;if(n.font="",!e)return null;r[t]=e.split(/,\s?/)}return r[t]})},CXw9:function(t,e,i){"use strict";var n,r,o,a,s=i("O4g8"),h=i("7KvD"),c=i("+ZMJ"),l=i("RY/4"),u=i("kM2E"),p=i("EqjI"),d=i("lOnJ"),f=i("2KxR"),m=i("NWt+"),v=i("t8x9"),g=i("L42u").set,y=i("82Mu")(),_=i("qARP"),x=i("dNDb"),b=i("iUbK"),M=i("fJUb"),w=h.TypeError,E=h.process,T=E&&E.versions,S=T&&T.v8||"",C=h.Promise,O="process"==l(E),R=function(){},A=r=_.f,L=!!function(){try{var t=C.resolve(1),e=(t.constructor={})[i("dSzd")("species")]=function(t){t(R,R)};return(O||"function"==typeof PromiseRejectionEvent)&&t.then(R)instanceof e&&0!==S.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(t){}}(),P=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},I=function(t,e){if(!t._n){t._n=!0;var i=t._c;y(function(){for(var n=t._v,r=1==t._s,o=0,a=function(e){var i,o,a,s=r?e.ok:e.fail,h=e.resolve,c=e.reject,l=e.domain;try{s?(r||(2==t._h&&D(t),t._h=1),!0===s?i=n:(l&&l.enter(),i=s(n),l&&(l.exit(),a=!0)),i===e.promise?c(w("Promise-chain cycle")):(o=P(i))?o.call(i,h,c):h(i)):c(n)}catch(t){l&&!a&&l.exit(),c(t)}};i.length>o;)a(i[o++]);t._c=[],t._n=!1,e&&!t._h&&N(t)})}},N=function(t){g.call(h,function(){var e,i,n,r=t._v,o=F(t);if(o&&(e=x(function(){O?E.emit("unhandledRejection",r,t):(i=h.onunhandledrejection)?i({promise:t,reason:r}):(n=h.console)&&n.error&&n.error("Unhandled promise rejection",r)}),t._h=O||F(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},F=function(t){return 1!==t._h&&0===(t._a||t._c).length},D=function(t){g.call(h,function(){var e;O?E.emit("rejectionHandled",t):(e=h.onrejectionhandled)&&e({promise:t,reason:t._v})})},j=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),I(e,!0))},k=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw w("Promise can't be resolved itself");(e=P(t))?y(function(){var n={_w:i,_d:!1};try{e.call(t,c(k,n,1),c(j,n,1))}catch(t){j.call(n,t)}}):(i._v=t,i._s=1,I(i,!1))}catch(t){j.call({_w:i,_d:!1},t)}}};L||(C=function(t){f(this,C,"Promise","_h"),d(t),n.call(this);try{t(c(k,this,1),c(j,this,1))}catch(t){j.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=i("xH/j")(C.prototype,{then:function(t,e){var i=A(v(this,C));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=O?E.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&I(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new n;this.promise=t,this.resolve=c(k,t,1),this.reject=c(j,t,1)},_.f=A=function(t){return t===C||t===a?new o(t):r(t)}),u(u.G+u.W+u.F*!L,{Promise:C}),i("e6n0")(C,"Promise"),i("bRrM")("Promise"),a=i("FeBl").Promise,u(u.S+u.F*!L,"Promise",{reject:function(t){var e=A(this);return(0,e.reject)(t),e.promise}}),u(u.S+u.F*(s||!L),"Promise",{resolve:function(t){return M(s&&this===a?C:this,t)}}),u(u.S+u.F*!(L&&i("dY0y")(function(t){C.all(t).catch(R)})),"Promise",{all:function(t){var e=this,i=A(e),n=i.resolve,r=i.reject,o=x(function(){var i=[],o=0,a=1;m(t,!1,function(t){var s=o++,h=!1;i.push(void 0),a++,e.resolve(t).then(function(t){h||(h=!0,i[s]=t,--a||n(i))},r)}),--a||n(i)});return o.e&&r(o.v),i.promise},race:function(t){var e=this,i=A(e),n=i.reject,r=x(function(){m(t,!1,function(t){e.resolve(t).then(i.resolve,n)})});return r.e&&n(r.v),i.promise}})},D2L2:function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},DL7K:function(t,e,i){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5}},"DM+O":function(t,e,i){"use strict";e.a={ADD:"add",REMOVE:"remove"}},DuR2:function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},EGZi:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},EqBC:function(t,e,i){"use strict";var n=i("kM2E"),r=i("FeBl"),o=i("7KvD"),a=i("t8x9"),s=i("fJUb");n(n.P+n.R,"Promise",{finally:function(t){var e=a(this,r.Promise||o.Promise),i="function"==typeof t;return this.then(i?function(i){return s(e,t()).then(function(){return i})}:t,i?function(i){return s(e,t()).then(function(){throw i})}:t)}})},EqjI:function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},FeBl:function(t,e){var i=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=i)},FeXB:function(t,e,i){"use strict";e.b=function(t){return"string"==typeof t?t:u(t)},e.a=function(t){return Array.isArray(t)?t:c(t)},e.c=u;var n=i("OEyb"),r=i("o1z/"),o=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,a=/^([a-z]*)$/i;var s,h,c=(s={},h=0,function(t){var e;if(s.hasOwnProperty(t))e=s[t];else{if(h>=1024){var i=0;for(var r in s)0==(3&i++)&&(delete s[r],--h)}e=function(t){var e,i,r,s,h;if(a.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var i=getComputedStyle(e).color;return document.body.removeChild(e),i}return""}(t)),o.exec(t)){var c,u=t.length-1;c=u<=4?1:2;var p=4===u||8===u;e=parseInt(t.substr(1+0*c,c),16),i=parseInt(t.substr(1+1*c,c),16),r=parseInt(t.substr(1+2*c,c),16),s=p?parseInt(t.substr(1+3*c,c),16):255,1==c&&(e=(e<<4)+e,i=(i<<4)+i,r=(r<<4)+r,p&&(s=(s<<4)+s)),h=[e,i,r,s/255]}else 0==t.indexOf("rgba(")?l(h=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((h=t.slice(4,-1).split(",").map(Number)).push(1),l(h)):Object(n.a)(!1,14);return h}(t),s[t]=e,++h}return e});function l(t){return t[0]=Object(r.a)(t[0]+.5|0,0,255),t[1]=Object(r.a)(t[1]+.5|0,0,255),t[2]=Object(r.a)(t[2]+.5|0,0,255),t[3]=Object(r.a)(t[3],0,1),t}function u(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:t[3])+")"}},"Fu+J":function(t,e,i){"use strict";e.a={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}},IU0A:function(t,e,i){"use strict";var n=function(){this.disposed_=!1};n.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},n.prototype.disposeInternal=function(){},e.a=n},IZoy:function(t,e,i){"use strict";i("o1z/");function n(t,e){var i,n,r=t[0],o=t[1],a=e[0],s=e[1],h=a[0],c=a[1],l=s[0],u=s[1],p=l-h,d=u-c,f=0===p&&0===d?0:(p*(r-h)+d*(o-c))/(p*p+d*d||0);return f<=0?(i=h,n=c):f>=1?(i=l,n=u):(i=h+f*p,n=c+f*d),[i,n]}function r(t,e){var i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n}e.a=function(t,e){return t[0]+=e[0],t[1]+=e[1],t},e.b=function(t,e){var i=e.getRadius(),n=e.getCenter(),r=n[0],o=n[1],a=t[0],s=t[1],h=a-r,c=s-o;0===h&&0===c&&(h=1);var l=Math.sqrt(h*h+c*c);return[r+i*h/l,o+i*c/l]},e.c=n,e.e=function(t,e){for(var i=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){i=!1;break}return i},e.f=function(t,e){var i=Math.cos(e),n=Math.sin(e),r=t[0]*i-t[1]*n,o=t[1]*i+t[0]*n;return t[0]=r,t[1]=o,t},e.g=function(t,e){return t[0]*=e,t[1]*=e,t},e.h=r,e.d=function(t,e){return Math.sqrt(r(t,e))},e.i=function(t,e){return r(t,n(t,e))}},Ibhu:function(t,e,i){var n=i("D2L2"),r=i("TcQ7"),o=i("vFc/")(!1),a=i("ax3d")("IE_PROTO");t.exports=function(t,e){var i,s=r(t),h=0,c=[];for(i in s)i!=a&&n(s,i)&&c.push(i);for(;e.length>h;)n(s,i=e[h++])&&(~o(c,i)||c.push(i));return c}},L42u:function(t,e,i){var n,r,o,a=i("+ZMJ"),s=i("knuC"),h=i("RPLV"),c=i("ON07"),l=i("7KvD"),u=l.process,p=l.setImmediate,d=l.clearImmediate,f=l.MessageChannel,m=l.Dispatch,v=0,g={},y=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},_=function(t){y.call(t.data)};p&&d||(p=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return g[++v]=function(){s("function"==typeof t?t:Function(t),e)},n(v),v},d=function(t){delete g[t]},"process"==i("R9M2")(u)?n=function(t){u.nextTick(a(y,t,1))}:m&&m.now?n=function(t){m.now(a(y,t,1))}:f?(o=(r=new f).port2,r.port1.onmessage=_,n=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(t){l.postMessage(t+"","*")},l.addEventListener("message",_,!1)):n="onreadystatechange"in c("script")?function(t){h.appendChild(c("script")).onreadystatechange=function(){h.removeChild(this),y.call(t)}}:function(t){setTimeout(a(y,t,1),0)}),t.exports={set:p,clear:d}},LKHy:function(t,e,i){"use strict";e.b=function(t){t.stopPropagation()};var n=function(t){this.propagationStopped,this.type=t,this.target=null};n.prototype.preventDefault=function(){this.propagationStopped=!0},n.prototype.stopPropagation=function(){this.propagationStopped=!0},e.a=n},Lfyu:function(t,e,i){"use strict";var n=i("Wrfv"),r=i("3ciB"),o=i("V2dr"),a=i("o1z/");function s(t){return t}var h=i("XOen"),c=i("zF6X");var l=i("xek4"),u=i("3Q3L"),p="center",d="resolution",f="rotation",m=i("OEyb"),v=i("IZoy"),g=i("2S6f"),y=i("/LWt"),_=i("Fu+J"),x=i("ZYQ1"),b=i("VgFP"),M=i("tFCN"),w=i("yGLh"),E=i("vv/+"),T=0,S=function(t){function e(e){t.call(this);var i=Object(M.a)({},e);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=Object(w.b)(i.projection,"EPSG:3857"),this.applyOptions_(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.applyOptions_=function(t){var e={};e[p]=void 0!==t.center?t.center:null;var i=function(t){var e,i,r,o=void 0!==t.minZoom?t.minZoom:T,s=void 0!==t.maxZoom?t.maxZoom:28,h=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){var l=t.resolutions;i=l[o],r=void 0!==l[s]?l[s]:l[l.length-1],e=function(t){return function(e,i,n){if(void 0!==e){var r=Object(c.f)(t,e,n);r=Object(a.a)(r+i,0,t.length-1);var o=Math.floor(r);if(r!=o&&o<t.length-1){var s=t[o]/t[o+1];return t[o]/Math.pow(s,r-o)}return t[o]}}}(l)}else{var u=Object(w.b)(t.projection,"EPSG:3857"),p=u.getExtent(),d=p?Math.max(Object(y.E)(p),Object(y.A)(p)):360*w.a[E.b.DEGREES]/u.getMetersPerUnit(),f=d/n.b/Math.pow(2,T),m=f/Math.pow(2,28-T);void 0!==(i=t.maxResolution)?o=0:i=f/Math.pow(h,o),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(h,s):f/Math.pow(h,s):m),s=o+Math.floor(Math.log(i/r)/Math.log(h)),r=i/Math.pow(h,s-o),e=function(t,e,i){return function(n,r,o){if(void 0!==n){var a=-o/2+.5,s=Math.floor(Math.log(e/n)/Math.log(t)+a),h=Math.max(s+r,0);return void 0!==i&&(h=Math.min(h,i)),e/Math.pow(t,h)}}}(h,i,s-o)}return{constraint:e,maxResolution:i,minResolution:r,minZoom:o,zoomFactor:h}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=i.minZoom;var r=function(t){return void 0!==t.extent?(e=t.extent,function(t){return t?[Object(a.a)(t[0],e[0],e[2]),Object(a.a)(t[1],e[1],e[3])]:void 0}):s;var e}(t),o=i.constraint,h=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?Object(l.b)():!1===e?l.d:"number"==typeof e?Object(l.a)(e):l.d}return l.c}(t);this.constraints_={center:r,resolution:o,rotation:h},void 0!==t.resolution?e[d]=t.resolution:void 0!==t.zoom&&(e[d]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e[d]=Object(a.a)(Number(this.getResolution()||e[d]),this.minResolution_,this.maxResolution_))),e[f]=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=Object(M.a)({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),Object(M.a)({},e,t)},e.prototype.animate=function(t){var e,i=arguments,n=arguments.length;if(n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n),!this.isDef()){var r=arguments[n-1];return r.center&&this.setCenter(r.center),void 0!==r.zoom&&this.setZoom(r.zoom),void 0!==r.rotation&&this.setRotation(r.rotation),void(e&&C(e,!0))}for(var o=Date.now(),s=this.getCenter().slice(),h=this.getResolution(),c=this.getRotation(),l=[],p=0;p<n;++p){var d=i[p],f={start:o,complete:!1,anchor:d.anchor,duration:void 0!==d.duration?d.duration:1e3,easing:d.easing||g.c};if(d.center&&(f.sourceCenter=s,f.targetCenter=d.center,s=f.targetCenter),void 0!==d.zoom?(f.sourceResolution=h,f.targetResolution=this.constrainResolution(this.maxResolution_,d.zoom-this.minZoom_,0),h=f.targetResolution):d.resolution&&(f.sourceResolution=h,f.targetResolution=d.resolution,h=f.targetResolution),void 0!==d.rotation){f.sourceRotation=c;var m=Object(a.d)(d.rotation-c+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=c+m,c=f.targetRotation}f.callback=e,O(f)?f.complete=!0:o+=f.duration,l.push(f)}this.animations_.push(l),this.setHint(u.a.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[u.a.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[u.a.INTERACTING]>0},e.prototype.cancelAnimations=function(){this.setHint(u.a.ANIMATING,-this.hints_[u.a.ANIMATING]);for(var t=0,e=this.animations_.length;t<e;++t){var i=this.animations_[t];i[0].callback&&C(i[0].callback,!1)}this.animations_.length=0},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,i=this.animations_.length-1;i>=0;--i){for(var n=this.animations_[i],r=!0,o=0,s=n.length;o<s;++o){var h=n[o];if(!h.complete){var c=t-h.start,l=h.duration>0?c/h.duration:1;l>=1?(h.complete=!0,l=1):r=!1;var m=h.easing(l);if(h.sourceCenter){var v=h.sourceCenter[0],g=h.sourceCenter[1],y=v+m*(h.targetCenter[0]-v),_=g+m*(h.targetCenter[1]-g);this.set(p,[y,_])}if(h.sourceResolution&&h.targetResolution){var x=1===m?h.targetResolution:h.sourceResolution+m*(h.targetResolution-h.sourceResolution);h.anchor&&this.set(p,this.calculateCenterZoom(x,h.anchor)),this.set(d,x)}if(void 0!==h.sourceRotation&&void 0!==h.targetRotation){var b=1===m?Object(a.d)(h.targetRotation+Math.PI,2*Math.PI)-Math.PI:h.sourceRotation+m*(h.targetRotation-h.sourceRotation);h.anchor&&this.set(p,this.calculateCenterRotate(b,h.anchor)),this.set(f,b)}if(e=!0,!h.complete)break}}if(r){this.animations_[i]=null,this.setHint(u.a.ANIMATING,-1);var M=n[0].callback;M&&C(M,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},e.prototype.calculateCenterRotate=function(t,e){var i,n=this.getCenter();return void 0!==n&&(i=[n[0]-e[0],n[1]-e[1]],Object(v.f)(i,t-this.getRotation()),Object(v.a)(i,e)),i},e.prototype.calculateCenterZoom=function(t,e){var i,n=this.getCenter(),r=this.getResolution();void 0!==n&&void 0!==r&&(i=[e[0]-t*(e[0]-n[0])/r,e[1]-t*(e[1]-n[1])/r]);return i},e.prototype.getSizeFromViewport_=function(){var t=[100,100],e='.ol-viewport[data-view="'+Object(r.b)(this)+'"]',i=document.querySelector(e);if(i){var n=getComputedStyle(i);t[0]=parseInt(n.width,10),t[1]=parseInt(n.height,10)}return t},e.prototype.constrainCenter=function(t){return this.constraints_.center(t)},e.prototype.constrainResolution=function(t,e,i){var n=e||0,r=i||0;return this.constraints_.resolution(t,n,r)},e.prototype.constrainRotation=function(t,e){var i=e||0;return this.constraints_.rotation(t,i)},e.prototype.getCenter=function(){return this.get(p)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_(),i=this.getCenter();Object(m.a)(i,1);var n=this.getResolution();Object(m.a)(void 0!==n,2);var r=this.getRotation();return Object(m.a)(void 0!==r,3),Object(y.z)(i,n,r,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(d)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){var i=e||this.getSizeFromViewport_(),n=Object(y.E)(t)/i[0],r=Object(y.A)(t)/i[1];return Math.max(n,r)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,i=this.maxResolution_,n=this.minResolution_,r=Math.log(i/n)/Math.log(e);return function(t){return i/Math.pow(e,t*r)}},e.prototype.getRotation=function(){return this.get(f)},e.prototype.getValueForResolutionFunction=function(t){var e=t||2,i=this.maxResolution_,n=this.minResolution_,r=Math.log(i/n)/Math.log(e);return function(t){return Math.log(i/t)/Math.log(e)/r}},e.prototype.getState=function(t){var e=this.getCenter(),i=this.getProjection(),n=this.getResolution(),r=n/t,o=this.getRotation();return{center:[Math.round(e[0]/r)*r,Math.round(e[1]/r)*r],projection:void 0!==i?i:null,resolution:n,rotation:o,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,i,n=this.minZoom_||0;if(this.resolutions_){var r=Object(c.f)(this.resolutions_,t,1);n=r,e=this.resolutions_[r],i=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)},e.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},e.prototype.fit=function(t,e){var i,n=e||{},r=n.size;r||(r=this.getSizeFromViewport_()),t instanceof b.a?t.getType()===_.a.CIRCLE?(t=t.getExtent(),(i=Object(x.c)(t)).rotate(this.getRotation(),Object(y.x)(t))):i=t:(Object(m.a)(Array.isArray(t),24),Object(m.a)(!Object(y.H)(t),25),i=Object(x.c)(t));var a,s=void 0!==n.padding?n.padding:[0,0,0,0],h=void 0===n.constrainResolution||n.constrainResolution,c=void 0!==n.nearest&&n.nearest;a=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.constrainResolution(this.maxResolution_,n.maxZoom-this.minZoom_,0):0;for(var l=i.getFlatCoordinates(),u=this.getRotation(),p=Math.cos(-u),d=Math.sin(-u),f=1/0,v=1/0,g=-1/0,M=-1/0,w=i.getStride(),E=0,T=l.length;E<T;E+=w){var S=l[E]*p-l[E+1]*d,O=l[E]*d+l[E+1]*p;f=Math.min(f,S),v=Math.min(v,O),g=Math.max(g,S),M=Math.max(M,O)}var R=this.getResolutionForExtent([f,v,g,M],[r[0]-s[1]-s[3],r[1]-s[0]-s[2]]);if(R=isNaN(R)?a:Math.max(R,a),h){var A=this.constrainResolution(R,0,0);!c&&A<R&&(A=this.constrainResolution(A,-1,0)),R=A}d=-d;var L=(f+g)/2,P=(v+M)/2,I=[(L+=(s[1]-s[3])/2*R)*p-(P+=(s[0]-s[2])/2*R)*d,P*p+L*d],N=n.callback?n.callback:o.c;void 0!==n.duration?this.animate({resolution:R,center:I,duration:n.duration,easing:n.easing},N):(this.setResolution(R),this.setCenter(I),C(N,!0))},e.prototype.centerOn=function(t,e,i){var n=this.getRotation(),r=Math.cos(-n),o=Math.sin(-n),a=t[0]*r-t[1]*o,s=t[1]*r+t[0]*o,h=this.getResolution(),c=(a+=(e[0]/2-i[0])*h)*r-(s+=(i[1]-e[1]/2)*h)*(o=-o),l=s*r+a*o;this.setCenter([c,l])},e.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},e.prototype.rotate=function(t,e){if(void 0!==e){var i=this.calculateCenterRotate(t,e);this.setCenter(i)}this.setRotation(t)},e.prototype.setCenter=function(t){this.set(p,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.set(d,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setRotation=function(t){this.set(f,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e}(h.a);function C(t,e){setTimeout(function(){t(e)},0)}function O(t){return!(t.sourceCenter&&t.targetCenter&&!Object(v.e)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}e.a=S},LmAy:function(t,e,i){"use strict";e.a=r,e.b=o,e.e=a,e.c=h,e.d=function(t,e,i,n,r,o,a,s){for(var c=0,l=i.length;c<l;++c){var u=i[c],p=[];a=h(t,e,u,n,r,o,a,p),s.push(p),e=u[u.length-1]}return a};var n=i("o1z/");function r(t,e,i,r,o,a,s){var h=(i-e)/r;if(h<3){for(;e<i;e+=r)a[s++]=t[e],a[s++]=t[e+1];return s}var c=new Array(h);c[0]=1,c[h-1]=1;for(var l=[e,i-r],u=0;l.length>0;){for(var p=l.pop(),d=l.pop(),f=0,m=t[d],v=t[d+1],g=t[p],y=t[p+1],_=d+r;_<p;_+=r){var x=t[_],b=t[_+1],M=Object(n.g)(x,b,m,v,g,y);M>f&&(u=_,f=M)}f>o&&(c[(u-e)/r]=1,d+r<u&&l.push(d,u),u+r<p&&l.push(u,p))}for(var w=0;w<h;++w)c[w]&&(a[s++]=t[e+w*r],a[s++]=t[e+w*r+1]);return s}function o(t,e,i,n,o,a,s,h){for(var c=0,l=i.length;c<l;++c){var u=i[c];s=r(t,e,u,n,o,a,s),h.push(s),e=u}return s}function a(t,e){return e*Math.round(t/e)}function s(t,e,i,n,r,o,s){if(e==i)return s;var h,c,l=a(t[e],r),u=a(t[e+1],r);e+=n,o[s++]=l,o[s++]=u;do{if(h=a(t[e],r),c=a(t[e+1],r),(e+=n)==i)return o[s++]=h,o[s++]=c,s}while(h==l&&c==u);for(;e<i;){var p=a(t[e],r),d=a(t[e+1],r);if(e+=n,p!=h||d!=c){var f=h-l,m=c-u,v=p-l,g=d-u;f*g==m*v&&(f<0&&v<f||f==v||f>0&&v>f)&&(m<0&&g<m||m==g||m>0&&g>m)?(h=p,c=d):(o[s++]=h,o[s++]=c,l=h,u=c,h=p,c=d)}}return o[s++]=h,o[s++]=c,s}function h(t,e,i,n,r,o,a,h){for(var c=0,l=i.length;c<l;++c){var u=i[c];a=s(t,e,u,n,r,o,a),h.push(a),e=u}return a}},M6a0:function(t,e){},MB6k:function(t,e,i){"use strict";e.a=function(t,e,i,o,a,s){var h=NaN,c=NaN,l=(i-e)/o;if(1===l)h=t[e],c=t[e+1];else if(2==l)h=(1-a)*t[e]+a*t[e+o],c=(1-a)*t[e+1]+a*t[e+o+1];else if(0!==l){for(var u=t[e],p=t[e+1],d=0,f=[0],m=e+o;m<i;m+=o){var v=t[m],g=t[m+1];d+=Math.sqrt((v-u)*(v-u)+(g-p)*(g-p)),f.push(d),u=v,p=g}var y=a*d,_=Object(n.a)(f,y);if(_<0){var x=(y-f[-_-2])/(f[-_-1]-f[-_-2]),b=e+(-_-2)*o;h=Object(r.c)(t[b],t[b+o],x),c=Object(r.c)(t[b+1],t[b+o+1],x)}else h=t[e+_*o],c=t[e+_*o+1]}return s?(s[0]=h,s[1]=c,s):[h,c]},e.b=o,e.c=function(t,e,i,n,r,a,s){if(s)return o(t,e,i[i.length-1],n,r,a);var h;if(r<t[n-1])return a?((h=t.slice(0,n))[n-1]=r,h):null;if(t[t.length-1]<r)return a?((h=t.slice(t.length-n))[n-1]=r,h):null;for(var c=0,l=i.length;c<l;++c){var u=i[c];if(e!=u){if(r<t[e+n-1])return null;if(r<=t[u-1])return o(t,e,u,n,r,!1);e=u}}return null};var n=i("zF6X"),r=i("o1z/");function o(t,e,i,n,o,a){if(i==e)return null;var s;if(o<t[e+n-1])return a?((s=t.slice(e,e+n))[n-1]=o,s):null;if(t[i-1]<o)return a?((s=t.slice(i-n,i))[n-1]=o,s):null;if(o==t[e+n-1])return t.slice(e,e+n);for(var h=e/n,c=i/n;h<c;){var l=h+c>>1;o<t[(l+1)*n-1]?c=l:h=l+1}var u=t[h*n-1];if(o==u)return t.slice((h-1)*n,(h-1)*n+n);var p=(o-u)/(t[(h+1)*n-1]-u);s=[];for(var d=0;d<n-1;++d)s.push(Object(r.c)(t[(h-1)*n+d],t[h*n+d],p));return s.push(o),s}},MU5D:function(t,e,i){var n=i("R9M2");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},Mdwg:function(t,e,i){"use strict";var n=i("v5fe"),r=i("+iwx"),o="preload",a="useInterimTilesOnError",s=i("tFCN"),h=function(t){function e(e){var i=e||{},r=Object(s.a)({},i);delete r.preload,delete r.useInterimTilesOnError,t.call(this,r),this.setPreload(void 0!==i.preload?i.preload:0),this.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),this.type=n.a.TILE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPreload=function(){return this.get(o)},e.prototype.setPreload=function(t){this.set(o,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(a)},e.prototype.setUseInterimTilesOnError=function(t){this.set(a,t)},e}(r.a);h.prototype.getSource;e.a=h},Mhyx:function(t,e,i){var n=i("/bQp"),r=i("dSzd")("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[r]===t)}},Mjwz:function(t,e,i){"use strict";var n=i("OEyb"),r=i("Fu+J"),o=i("QBya"),a=i("w2Al"),s=i("4acs"),h=i("3Jqb"),c=i("Oeue"),l=function(t){function e(e){var i=e||{};t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,atlasManager:i.atlasManager})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)},e}(function(t){function e(e){var i=void 0!==e.rotateWithView&&e.rotateWithView;t.call(this,{opacity:1,rotateWithView:i,rotation:void 0!==e.rotation?e.rotation:0,scale:1}),this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=e.atlasManager,this.render_(this.atlasManager_)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return h.a.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t,e){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t,e){},e.prototype.render_=function(t){var e,i,n="",r="",h=0,l=null,u=0,p=0;this.stroke_&&(null===(i=this.stroke_.getColor())&&(i=c.k),i=Object(o.a)(i),void 0===(p=this.stroke_.getWidth())&&(p=c.h),l=this.stroke_.getLineDash(),u=this.stroke_.getLineDashOffset(),s.a||(l=null,u=0),void 0===(r=this.stroke_.getLineJoin())&&(r=c.g),void 0===(n=this.stroke_.getLineCap())&&(n=c.d),void 0===(h=this.stroke_.getMiterLimit())&&(h=c.i));var d=2*(this.radius_+p)+1,f={strokeStyle:i,strokeWidth:p,size:d,lineCap:n,lineDash:l,lineDashOffset:u,lineJoin:r,miterLimit:h};if(void 0===t){var m=Object(a.a)(d,d);this.canvas_=m.canvas,e=d=this.canvas_.width,this.draw_(f,m,0,0),this.createHitDetectionCanvas_(f)}else{d=Math.round(d);var v,g=!this.fill_;g&&(v=this.drawHitDetectionCanvas_.bind(this,f));var y=this.getChecksum(),_=t.add(y,d,d,this.draw_.bind(this,f),v);this.canvas_=_.image,this.origin_=[_.offsetX,_.offsetY],e=_.image.width,g?(this.hitDetectionCanvas_=_.hitImage,this.hitDetectionImageSize_=[_.hitImage.width,_.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])}this.anchor_=[d/2,d/2],this.size_=[d,d],this.imageSize_=[e,e]},e.prototype.draw_=function(t,e,i,n){var r,a,s;e.setTransform(1,0,0,1,0,0),e.translate(i,n),e.beginPath();var h=this.points_;if(h===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var l=void 0!==this.radius2_?this.radius2_:this.radius_;for(l!==this.radius_&&(h*=2),r=0;r<=h;r++)a=2*r*Math.PI/h-Math.PI/2+this.angle_,s=r%2==0?this.radius_:l,e.lineTo(t.size/2+s*Math.cos(a),t.size/2+s*Math.sin(a))}if(this.fill_){var u=this.fill_.getColor();null===u&&(u=c.b),e.fillStyle=Object(o.a)(u),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)this.hitDetectionCanvas_=this.canvas_;else{var e=Object(a.a)(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)}},e.prototype.drawHitDetectionCanvas_=function(t,e,i,n){e.setTransform(1,0,0,1,0,0),e.translate(i,n),e.beginPath();var r=this.points_;if(r===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o,a,s,h=void 0!==this.radius2_?this.radius2_:this.radius_;for(h!==this.radius_&&(r*=2),o=0;o<=r;o++)s=2*o*Math.PI/r-Math.PI/2+this.angle_,a=o%2==0?this.radius_:h,e.lineTo(t.size/2+a*Math.cos(s),t.size/2+a*Math.sin(s))}e.fillStyle=c.b,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e.prototype.getChecksum=function(){var t=this.stroke_?this.stroke_.getChecksum():"-",e=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){var i="r"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[i,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]},e}(i("dw+W").a)),u=i("3ciB"),p=i("FeXB"),d=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.checksum_=void 0};d.prototype.clone=function(){var t=this.getColor();return new d({color:t&&t.slice?t.slice():t||void 0})},d.prototype.getColor=function(){return this.color_},d.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},d.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.color_ instanceof CanvasPattern||this.color_ instanceof CanvasGradient?this.checksum_=Object(u.b)(this.color_).toString():this.checksum_="f"+(this.color_?Object(p.b)(this.color_):"-")),this.checksum_};var f=d,m=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width,this.checksum_=void 0};m.prototype.clone=function(){var t=this.getColor();return new m({color:t&&t.slice?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},m.prototype.getColor=function(){return this.color_},m.prototype.getLineCap=function(){return this.lineCap_},m.prototype.getLineDash=function(){return this.lineDash_},m.prototype.getLineDashOffset=function(){return this.lineDashOffset_},m.prototype.getLineJoin=function(){return this.lineJoin_},m.prototype.getMiterLimit=function(){return this.miterLimit_},m.prototype.getWidth=function(){return this.width_},m.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},m.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},m.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},m.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},m.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},m.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},m.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},m.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.color_?"string"==typeof this.color_?this.checksum_+=this.color_:this.checksum_+=Object(u.b)(this.color_).toString():this.checksum_+="-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_};var v=m;e.d=function(t){var e;if("function"==typeof t)e=t;else{var i;Array.isArray(t)?i=t:(Object(n.a)(t instanceof g,41),i=[t]),e=function(){return i}}return e},e.a=function(t,e){if(!y){var i=new f({color:"rgba(255,255,255,0.4)"}),n=new v({color:"#3399CC",width:1.25});y=[new g({image:new l({fill:i,stroke:n,radius:5}),fill:i,stroke:n})]}return y},e.b=function(){var t={},e=[255,255,255,1],i=[0,153,255,1];return t[r.a.POLYGON]=[new g({fill:new f({color:[255,255,255,.5]})})],t[r.a.MULTI_POLYGON]=t[r.a.POLYGON],t[r.a.LINE_STRING]=[new g({stroke:new v({color:e,width:5})}),new g({stroke:new v({color:i,width:3})})],t[r.a.MULTI_LINE_STRING]=t[r.a.LINE_STRING],t[r.a.CIRCLE]=t[r.a.POLYGON].concat(t[r.a.LINE_STRING]),t[r.a.POINT]=[new g({image:new l({radius:6,fill:new f({color:i}),stroke:new v({color:e,width:1.5})}),zIndex:1/0})],t[r.a.MULTI_POINT]=t[r.a.POINT],t[r.a.GEOMETRY_COLLECTION]=t[r.a.POLYGON].concat(t[r.a.LINE_STRING],t[r.a.POINT]),t};var g=function(t){var e=t||{};this.geometry_=null,this.geometryFunction_=_,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};g.prototype.clone=function(){var t=this.getGeometry();return t&&t.clone&&(t=t.clone()),new g({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},g.prototype.getRenderer=function(){return this.renderer_},g.prototype.setRenderer=function(t){this.renderer_=t},g.prototype.getGeometry=function(){return this.geometry_},g.prototype.getGeometryFunction=function(){return this.geometryFunction_},g.prototype.getFill=function(){return this.fill_},g.prototype.setFill=function(t){this.fill_=t},g.prototype.getImage=function(){return this.image_},g.prototype.setImage=function(t){this.image_=t},g.prototype.getStroke=function(){return this.stroke_},g.prototype.setStroke=function(t){this.stroke_=t},g.prototype.getText=function(){return this.text_},g.prototype.setText=function(t){this.text_=t},g.prototype.getZIndex=function(){return this.zIndex_},g.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=_,this.geometry_=t},g.prototype.setZIndex=function(t){this.zIndex_=t};var y=null;function _(t){return t.getGeometry()}e.c=g},"Ml+6":function(t,e,i){"use strict";function n(){}i.d(e,"u",function(){return Nr}),i.d(e,"n",function(){return jr}),i.d(e,"p",function(){return zr}),i.d(e,"h",function(){return hn}),i.d(e,"e",function(){return Yr}),i.d(e,"r",function(){return Fa}),i.d(e,"k",function(){return Lr}),i.d(e,"d",function(){return Ei}),i.d(e,"j",function(){return xi}),i.d(e,"m",function(){return Dh}),i.d(e,"g",function(){return Pe}),i.d(e,"t",function(){return De}),i.d(e,"s",function(){return Ie}),i.d(e,"b",function(){return ai}),i.d(e,"o",function(){return ta}),i.d(e,"l",function(){return zi}),i.d(e,"a",function(){return da}),i.d(e,"q",function(){return Ur}),i.d(e,"i",function(){return sn}),i.d(e,"f",function(){return Xr}),i.d(e,"c",function(){return w}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(void 0!==n&&null!==n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Object.assign(n.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var i=this._listeners[t];if(void 0!==i){var n=i.indexOf(e);-1!==n&&i.splice(n,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var i=e.slice(0),n=0,r=i.length;n<r;n++)i[n].call(this,t)}}}});var r,o,a,s,h,c,l,u,p,d,f,m="97",v=0,g=1,y=2,_=1,x=2,b=0,M=1,w=2,E=0,T=1,S=2,C=0,O=1,R=2,A=3,L=4,P=5,I=100,N=101,F=102,D=103,j=104,k=200,G=201,U=202,z=203,B=204,H=205,V=206,W=207,X=208,Y=209,q=210,K=0,Z=1,$=2,J=3,Q=4,tt=5,et=6,it=7,nt=0,rt=1,ot=2,at=0,st=1,ht=2,ct=3,lt=4,ut=301,pt=302,dt=303,ft=304,mt=305,vt=306,gt=307,yt=1e3,_t=1001,xt=1002,bt=1003,Mt=1004,wt=1005,Et=1006,Tt=1007,St=1008,Ct=1009,Ot=1010,Rt=1011,At=1012,Lt=1013,Pt=1014,It=1015,Nt=1016,Ft=1017,Dt=1018,jt=1019,kt=1020,Gt=1021,Ut=1022,zt=1023,Bt=1024,Ht=1025,Vt=1026,Wt=1027,Xt=1028,Yt=33776,qt=33777,Kt=33778,Zt=33779,$t=35840,Jt=35841,Qt=35842,te=35843,ee=36196,ie=37808,ne=37809,re=37810,oe=37811,ae=37812,se=37813,he=37814,ce=37815,le=37816,ue=37817,pe=37818,de=37819,fe=37820,me=37821,ve=2201,ge=2400,ye=0,_e=1,xe=2,be=3e3,Me=3001,we=3007,Ee=3002,Te=3004,Se=3005,Ce=3006,Oe=3200,Re=3201,Ae=0,Le=1,Pe={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&i]+t[i>>8&255]+"-"+t[i>>16&15|64]+t[i>>24&255]+"-"+t[63&n|128]+t[n>>8&255]+"-"+t[n>>16&255]+t[n>>24&255]+t[255&r]+t[r>>8&255]+t[r>>16&255]+t[r>>24&255]).toUpperCase()}}(),clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Pe.DEG2RAD},radToDeg:function(t){return t*Pe.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function Ie(t,e){this.x=t||0,this.y=e||0}function Ne(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Fe(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==n?n:1}function De(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}function je(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Ie.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(Ie.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,i=this.y,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6],this.y=n[1]*e+n[4]*i+n[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:(r=new Ie,o=new Ie,function(t,e){return r.set(t,t),o.set(e,e),this.clamp(r,o)}),clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*i-o*n+t.x,this.y=r*n+o*i+t.y,this}}),Object.assign(Ne.prototype,{isMatrix4:!0,set:function(t,e,i,n,r,o,a,s,h,c,l,u,p,d,f,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=i,v[12]=n,v[1]=r,v[5]=o,v[9]=a,v[13]=s,v[2]=h,v[6]=c,v[10]=l,v[14]=u,v[3]=p,v[7]=d,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Ne).fromArray(this.elements)},copy:function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this},copyPosition:function(t){var e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:(d=new De,function(t){var e=this.elements,i=t.elements,n=1/d.setFromMatrixColumn(t,0).length(),r=1/d.setFromMatrixColumn(t,1).length(),o=1/d.setFromMatrixColumn(t,2).length();return e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=0,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=0,e[8]=i[8]*o,e[9]=i[9]*o,e[10]=i[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,i=t.x,n=t.y,r=t.z,o=Math.cos(i),a=Math.sin(i),s=Math.cos(n),h=Math.sin(n),c=Math.cos(r),l=Math.sin(r);if("XYZ"===t.order){var u=o*c,p=o*l,d=a*c,f=a*l;e[0]=s*c,e[4]=-s*l,e[8]=h,e[1]=p+d*h,e[5]=u-f*h,e[9]=-a*s,e[2]=f-u*h,e[6]=d+p*h,e[10]=o*s}else if("YXZ"===t.order){var m=s*c,v=s*l,g=h*c,y=h*l;e[0]=m+y*a,e[4]=g*a-v,e[8]=o*h,e[1]=o*l,e[5]=o*c,e[9]=-a,e[2]=v*a-g,e[6]=y+m*a,e[10]=o*s}else if("ZXY"===t.order){m=s*c,v=s*l,g=h*c,y=h*l;e[0]=m-y*a,e[4]=-o*l,e[8]=g+v*a,e[1]=v+g*a,e[5]=o*c,e[9]=y-m*a,e[2]=-o*h,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){u=o*c,p=o*l,d=a*c,f=a*l;e[0]=s*c,e[4]=d*h-p,e[8]=u*h+f,e[1]=s*l,e[5]=f*h+u,e[9]=p*h-d,e[2]=-h,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){var _=o*s,x=o*h,b=a*s,M=a*h;e[0]=s*c,e[4]=M-_*l,e[8]=b*l+x,e[1]=l,e[5]=o*c,e[9]=-a*c,e[2]=-h*c,e[6]=x*l+b,e[10]=_-M*l}else if("XZY"===t.order){_=o*s,x=o*h,b=a*s,M=a*h;e[0]=s*c,e[4]=-l,e[8]=h*c,e[1]=_*l+M,e[5]=o*c,e[9]=x*l-b,e[2]=b*l-x,e[6]=a*c,e[10]=M*l+_}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:(u=new De(0,0,0),p=new De(1,1,1),function(t){return this.compose(u,t,p)}),lookAt:(h=new De,c=new De,l=new De,function(t,e,i){var n=this.elements;return l.subVectors(t,e),0===l.lengthSq()&&(l.z=1),l.normalize(),h.crossVectors(i,l),0===h.lengthSq()&&(1===Math.abs(i.z)?l.x+=1e-4:l.z+=1e-4,l.normalize(),h.crossVectors(i,l)),h.normalize(),c.crossVectors(l,h),n[0]=h.x,n[4]=c.x,n[8]=l.x,n[1]=h.y,n[5]=c.y,n[9]=l.y,n[2]=h.z,n[6]=c.z,n[10]=l.z,this}),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements,r=this.elements,o=i[0],a=i[4],s=i[8],h=i[12],c=i[1],l=i[5],u=i[9],p=i[13],d=i[2],f=i[6],m=i[10],v=i[14],g=i[3],y=i[7],_=i[11],x=i[15],b=n[0],M=n[4],w=n[8],E=n[12],T=n[1],S=n[5],C=n[9],O=n[13],R=n[2],A=n[6],L=n[10],P=n[14],I=n[3],N=n[7],F=n[11],D=n[15];return r[0]=o*b+a*T+s*R+h*I,r[4]=o*M+a*S+s*A+h*N,r[8]=o*w+a*C+s*L+h*F,r[12]=o*E+a*O+s*P+h*D,r[1]=c*b+l*T+u*R+p*I,r[5]=c*M+l*S+u*A+p*N,r[9]=c*w+l*C+u*L+p*F,r[13]=c*E+l*O+u*P+p*D,r[2]=d*b+f*T+m*R+v*I,r[6]=d*M+f*S+m*A+v*N,r[10]=d*w+f*C+m*L+v*F,r[14]=d*E+f*O+m*P+v*D,r[3]=g*b+y*T+_*R+x*I,r[7]=g*M+y*S+_*A+x*N,r[11]=g*w+y*C+_*L+x*F,r[15]=g*E+y*O+_*P+x*D,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new De;return function(e){for(var i=0,n=e.count;i<n;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.applyMatrix4(this),e.setXYZ(i,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],o=t[1],a=t[5],s=t[9],h=t[13],c=t[2],l=t[6],u=t[10],p=t[14];return t[3]*(+r*s*l-n*h*l-r*a*u+i*h*u+n*a*p-i*s*p)+t[7]*(+e*s*p-e*h*u+r*o*u-n*o*p+n*h*c-r*s*c)+t[11]*(+e*h*l-e*a*p-r*o*l+i*o*p+r*a*c-i*h*c)+t[15]*(-n*a*c-e*s*l+e*a*u+n*o*l-i*o*u+i*s*c)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var i=this.elements,n=t.elements,r=n[0],o=n[1],a=n[2],s=n[3],h=n[4],c=n[5],l=n[6],u=n[7],p=n[8],d=n[9],f=n[10],m=n[11],v=n[12],g=n[13],y=n[14],_=n[15],x=d*y*u-g*f*u+g*l*m-c*y*m-d*l*_+c*f*_,b=v*f*u-p*y*u-v*l*m+h*y*m+p*l*_-h*f*_,M=p*g*u-v*d*u+v*c*m-h*g*m-p*c*_+h*d*_,w=v*d*l-p*g*l-v*c*f+h*g*f+p*c*y-h*d*y,E=r*x+o*b+a*M+s*w;if(0===E){var T="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(T);return console.warn(T),this.identity()}var S=1/E;return i[0]=x*S,i[1]=(g*f*s-d*y*s-g*a*m+o*y*m+d*a*_-o*f*_)*S,i[2]=(c*y*s-g*l*s+g*a*u-o*y*u-c*a*_+o*l*_)*S,i[3]=(d*l*s-c*f*s-d*a*u+o*f*u+c*a*m-o*l*m)*S,i[4]=b*S,i[5]=(p*y*s-v*f*s+v*a*m-r*y*m-p*a*_+r*f*_)*S,i[6]=(v*l*s-h*y*s-v*a*u+r*y*u+h*a*_-r*l*_)*S,i[7]=(h*f*s-p*l*s+p*a*u-r*f*u-h*a*m+r*l*m)*S,i[8]=M*S,i[9]=(v*d*s-p*g*s-v*o*m+r*g*m+p*o*_-r*d*_)*S,i[10]=(h*g*s-v*c*s+v*o*u-r*g*u-h*o*_+r*c*_)*S,i[11]=(p*c*s-h*d*s-p*o*u+r*d*u+h*o*m-r*c*m)*S,i[12]=w*S,i[13]=(p*g*a-v*d*a+v*o*f-r*g*f-p*o*y+r*d*y)*S,i[14]=(v*c*a-h*g*a-v*o*l+r*g*l+h*o*y-r*c*y)*S,i[15]=(h*d*a-p*c*a+p*o*l-r*d*l-h*o*f+r*c*f)*S,this},scale:function(t){var e=this.elements,i=t.x,n=t.y,r=t.z;return e[0]*=i,e[4]*=n,e[8]*=r,e[1]*=i,e[5]*=n,e[9]*=r,e[2]*=i,e[6]*=n,e[10]*=r,e[3]*=i,e[7]*=n,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=1-i,o=t.x,a=t.y,s=t.z,h=r*o,c=r*a;return this.set(h*o+i,h*a-n*s,h*s+n*a,0,h*a+n*s,c*a+i,c*s-n*o,0,h*s-n*a,c*s+n*o,r*s*s+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,i){var n=this.elements,r=e._x,o=e._y,a=e._z,s=e._w,h=r+r,c=o+o,l=a+a,u=r*h,p=r*c,d=r*l,f=o*c,m=o*l,v=a*l,g=s*h,y=s*c,_=s*l,x=i.x,b=i.y,M=i.z;return n[0]=(1-(f+v))*x,n[1]=(p+_)*x,n[2]=(d-y)*x,n[3]=0,n[4]=(p-_)*b,n[5]=(1-(u+v))*b,n[6]=(m+g)*b,n[7]=0,n[8]=(d+y)*M,n[9]=(m-g)*M,n[10]=(1-(u+f))*M,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this},decompose:(a=new De,s=new Ne,function(t,e,i){var n=this.elements,r=a.set(n[0],n[1],n[2]).length(),o=a.set(n[4],n[5],n[6]).length(),h=a.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),t.x=n[12],t.y=n[13],t.z=n[14],s.copy(this);var c=1/r,l=1/o,u=1/h;return s.elements[0]*=c,s.elements[1]*=c,s.elements[2]*=c,s.elements[4]*=l,s.elements[5]*=l,s.elements[6]*=l,s.elements[8]*=u,s.elements[9]*=u,s.elements[10]*=u,e.setFromRotationMatrix(s),i.x=r,i.y=o,i.z=h,this}),makePerspective:function(t,e,i,n,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*r/(e-t),h=2*r/(i-n),c=(e+t)/(e-t),l=(i+n)/(i-n),u=-(o+r)/(o-r),p=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=h,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=u,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,i,n,r,o){var a=this.elements,s=1/(e-t),h=1/(i-n),c=1/(o-r),l=(e+t)*s,u=(i+n)*h,p=(o+r)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*h,a[9]=0,a[13]=-u,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,i=t.elements,n=0;n<16;n++)if(e[n]!==i[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<16;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}),Object.assign(Fe,{slerp:function(t,e,i,n){return i.copy(t).slerp(e,n)},slerpFlat:function(t,e,i,n,r,o,a){var s=i[n+0],h=i[n+1],c=i[n+2],l=i[n+3],u=r[o+0],p=r[o+1],d=r[o+2],f=r[o+3];if(l!==f||s!==u||h!==p||c!==d){var m=1-a,v=s*u+h*p+c*d+l*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var _=Math.sqrt(y),x=Math.atan2(_,v*g);m=Math.sin(m*x)/_,a=Math.sin(a*x)/_}var b=a*g;if(s=s*m+u*b,h=h*m+p*b,c=c*m+d*b,l=l*m+f*b,m===1-a){var M=1/Math.sqrt(s*s+h*h+c*c+l*l);s*=M,h*=M,c*=M,l*=M}}t[e]=s,t[e+1]=h,t[e+2]=c,t[e+3]=l}}),Object.defineProperties(Fe.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(Fe.prototype,{isQuaternion:!0,set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t._x,n=t._y,r=t._z,o=t.order,a=Math.cos,s=Math.sin,h=a(i/2),c=a(n/2),l=a(r/2),u=s(i/2),p=s(n/2),d=s(r/2);return"XYZ"===o?(this._x=u*c*l+h*p*d,this._y=h*p*l-u*c*d,this._z=h*c*d+u*p*l,this._w=h*c*l-u*p*d):"YXZ"===o?(this._x=u*c*l+h*p*d,this._y=h*p*l-u*c*d,this._z=h*c*d-u*p*l,this._w=h*c*l+u*p*d):"ZXY"===o?(this._x=u*c*l-h*p*d,this._y=h*p*l+u*c*d,this._z=h*c*d+u*p*l,this._w=h*c*l-u*p*d):"ZYX"===o?(this._x=u*c*l-h*p*d,this._y=h*p*l+u*c*d,this._z=h*c*d-u*p*l,this._w=h*c*l+u*p*d):"YZX"===o?(this._x=u*c*l+h*p*d,this._y=h*p*l+u*c*d,this._z=h*c*d-u*p*l,this._w=h*c*l-u*p*d):"XZY"===o&&(this._x=u*c*l-h*p*d,this._y=h*p*l-u*c*d,this._z=h*c*d+u*p*l,this._w=h*c*l+u*p*d),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,i=t.elements,n=i[0],r=i[4],o=i[8],a=i[1],s=i[5],h=i[9],c=i[2],l=i[6],u=i[10],p=n+s+u;return p>0?(e=.5/Math.sqrt(p+1),this._w=.25/e,this._x=(l-h)*e,this._y=(o-c)*e,this._z=(a-r)*e):n>s&&n>u?(e=2*Math.sqrt(1+n-s-u),this._w=(l-h)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(o+c)/e):s>u?(e=2*Math.sqrt(1+s-n-u),this._w=(o-c)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(h+l)/e):(e=2*Math.sqrt(1+u-n-s),this._w=(a-r)/e,this._x=(o+c)/e,this._y=(h+l)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e=new De;return function(i,n){return void 0===e&&(e=new De),(t=i.dot(n)+1)<1e-6?(t=0,Math.abs(i.x)>Math.abs(i.z)?e.set(-i.y,i.x,0):e.set(0,-i.z,i.y)):e.crossVectors(i,n),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),angleTo:function(t){return 2*Math.acos(Math.abs(Pe.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var i=this.angleTo(t);if(0===i)return this;var n=Math.min(1,e/i);return this.slerp(t,n),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t._x,n=t._y,r=t._z,o=t._w,a=e._x,s=e._y,h=e._z,c=e._w;return this._x=i*c+o*a+n*h-r*s,this._y=n*c+o*s+r*a-i*h,this._z=r*c+o*h+i*s-n*a,this._w=o*c-i*a-n*s-r*h,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,r=this._z,o=this._w,a=o*t._w+i*t._x+n*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=i,this._y=n,this._z=r,this;var s=1-a*a;if(s<=Number.EPSILON){var h=1-e;return this._w=h*o+e*this._w,this._x=h*i+e*this._x,this._y=h*n+e*this._y,this._z=h*r+e*this._z,this.normalize()}var c=Math.sqrt(s),l=Math.atan2(c,a),u=Math.sin((1-e)*l)/c,p=Math.sin(e*l)/c;return this._w=o*u+this._w*p,this._x=i*u+this._x*p,this._y=n*u+this._y*p,this._z=r*u+this._z*p,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(De.prototype,{isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:(f=new Fe,function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(f.setFromEuler(t))}),applyAxisAngle:function(){var t=new Fe;return function(e,i){return this.applyQuaternion(t.setFromAxisAngle(e,i))}}(),applyMatrix3:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*n,this.y=r[1]*e+r[4]*i+r[7]*n,this.z=r[2]*e+r[5]*i+r[8]*n,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements,o=1/(r[3]*e+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*n+r[12])*o,this.y=(r[1]*e+r[5]*i+r[9]*n+r[13])*o,this.z=(r[2]*e+r[6]*i+r[10]*n+r[14])*o,this},applyQuaternion:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,o=t.y,a=t.z,s=t.w,h=s*e+o*n-a*i,c=s*i+a*e-r*n,l=s*n+r*i-o*e,u=-r*e-o*i-a*n;return this.x=h*s+u*-r+c*-a-l*-o,this.y=c*s+u*-o+l*-r-h*-a,this.z=l*s+u*-a+h*-o-c*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(){var t=new Ne;return function(e){return this.applyMatrix4(t.getInverse(e.projectionMatrix)).applyMatrix4(e.matrixWorld)}}(),transformDirection:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n,this.y=r[1]*e+r[5]*i+r[9]*n,this.z=r[2]*e+r[6]*i+r[10]*n,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t=new De,e=new De;return function(i,n){return t.set(i,i,i),e.set(n,n,n),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var i=t.x,n=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=n*s-r*a,this.y=r*o-i*s,this.z=i*a-n*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new De;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new De;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(Pe.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,i){var n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(je.prototype,{isMatrix3:!0,set:function(t,e,i,n,r,o,a,s,h){var c=this.elements;return c[0]=t,c[1]=n,c[2]=a,c[3]=e,c[4]=r,c[5]=s,c[6]=i,c[7]=o,c[8]=h,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t=new De;return function(e){for(var i=0,n=e.count;i<n;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.applyMatrix3(this),e.setXYZ(i,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements,r=this.elements,o=i[0],a=i[3],s=i[6],h=i[1],c=i[4],l=i[7],u=i[2],p=i[5],d=i[8],f=n[0],m=n[3],v=n[6],g=n[1],y=n[4],_=n[7],x=n[2],b=n[5],M=n[8];return r[0]=o*f+a*g+s*x,r[3]=o*m+a*y+s*b,r[6]=o*v+a*_+s*M,r[1]=h*f+c*g+l*x,r[4]=h*m+c*y+l*b,r[7]=h*v+c*_+l*M,r[2]=u*f+p*g+d*x,r[5]=u*m+p*y+d*b,r[8]=u*v+p*_+d*M,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],a=t[5],s=t[6],h=t[7],c=t[8];return e*o*c-e*a*h-i*r*c+i*a*s+n*r*h-n*o*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var i=t.elements,n=this.elements,r=i[0],o=i[1],a=i[2],s=i[3],h=i[4],c=i[5],l=i[6],u=i[7],p=i[8],d=p*h-c*u,f=c*l-p*s,m=u*s-h*l,v=r*d+o*f+a*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return n[0]=d*y,n[1]=(a*u-p*o)*y,n[2]=(c*o-a*h)*y,n[3]=f*y,n[4]=(p*r-a*l)*y,n[5]=(a*s-c*r)*y,n[6]=m*y,n[7]=(o*l-u*r)*y,n[8]=(h*r-o*s)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,i,n,r,o,a){var s=Math.cos(r),h=Math.sin(r);this.set(i*s,i*h,-i*(s*o+h*a)+o+t,-n*h,n*s,-n*(-h*o+s*a)+a+e,0,0,1)},scale:function(t,e){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this},rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=this.elements,r=n[0],o=n[3],a=n[6],s=n[1],h=n[4],c=n[7];return n[0]=e*r+i*s,n[3]=e*o+i*h,n[6]=e*a+i*c,n[1]=-i*r+e*s,n[4]=-i*o+e*h,n[7]=-i*a+e*c,this},translate:function(t,e){var i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this},equals:function(t){for(var e=this.elements,i=t.elements,n=0;n<9;n++)if(e[n]!==i[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<9;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}});var ke,Ge,Ue,ze,Be,He={getDataURL:function(t){var e;if(t instanceof HTMLCanvasElement)e=t;else{(e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=t.width,e.height=t.height;var i=e.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height)}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},Ve=0;function We(t,e,i,n,r,o,a,s,h,c){Object.defineProperty(this,"id",{value:Ve++}),this.uuid=Pe.generateUUID(),this.name="",this.image=void 0!==t?t:We.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:We.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:_t,this.wrapT=void 0!==n?n:_t,this.magFilter=void 0!==r?r:Et,this.minFilter=void 0!==o?o:St,this.anisotropy=void 0!==h?h:1,this.format=void 0!==a?a:zt,this.type=void 0!==s?s:Ct,this.offset=new Ie(0,0),this.repeat=new Ie(1,1),this.center=new Ie(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new je,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:be,this.version=0,this.onUpdate=null}function Xe(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==n?n:1}function Ye(t,e,i){this.width=t,this.height=e,this.scissor=new Xe(0,0,t,e),this.scissorTest=!1,this.viewport=new Xe(0,0,t,e),void 0===(i=i||{}).minFilter&&(i.minFilter=Et),this.texture=new We(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.generateMipmaps=void 0===i.generateMipmaps||i.generateMipmaps,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function qe(t,e,i){Ye.call(this,t,e,i),this.activeCubeFace=0,this.activeMipMapLevel=0}function Ke(t,e,i,n,r,o,a,s,h,c,l,u){We.call(this,null,o,a,s,h,c,n,r,l,u),this.image={data:t,width:e,height:i},this.magFilter=void 0!==h?h:bt,this.minFilter=void 0!==c?c:bt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function Ze(t,e){this.min=void 0!==t?t:new De(1/0,1/0,1/0),this.max=void 0!==e?e:new De(-1/0,-1/0,-1/0)}function $e(t,e){this.center=void 0!==t?t:new De,this.radius=void 0!==e?e:0}function Je(t,e){this.normal=void 0!==t?t:new De(1,0,0),this.constant=void 0!==e?e:0}function Qe(t,e,i,n,r,o){this.planes=[void 0!==t?t:new Je,void 0!==e?e:new Je,void 0!==i?i:new Je,void 0!==n?n:new Je,void 0!==r?r:new Je,void 0!==o?o:new Je]}We.DEFAULT_IMAGE=void 0,We.DEFAULT_MAPPING=300,We.prototype=Object.assign(Object.create(n.prototype),{constructor:We,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=Pe.generateUUID()),!e&&void 0===t.images[n.uuid]){var r;if(Array.isArray(n)){r=[];for(var o=0,a=n.length;o<a;o++)r.push(He.getDataURL(n[o]))}else r=He.getDataURL(n);t.images[n.uuid]={uuid:n.uuid,url:r}}i.image=n.uuid}return e||(t.textures[this.uuid]=i),i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case yt:t.x=t.x-Math.floor(t.x);break;case _t:t.x=t.x<0?0:1;break;case xt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case yt:t.y=t.y-Math.floor(t.y);break;case _t:t.y=t.y<0?0:1;break;case xt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(We.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Xe.prototype,{isVector4:!0,set:function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*n+o[12]*r,this.y=o[1]*e+o[5]*i+o[9]*n+o[13]*r,this.z=o[2]*e+o[6]*i+o[10]*n+o[14]*r,this.w=o[3]*e+o[7]*i+o[11]*n+o[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,i,n,r,o=t.elements,a=o[0],s=o[4],h=o[8],c=o[1],l=o[5],u=o[9],p=o[2],d=o[6],f=o[10];if(Math.abs(s-c)<.01&&Math.abs(h-p)<.01&&Math.abs(u-d)<.01){if(Math.abs(s+c)<.1&&Math.abs(h+p)<.1&&Math.abs(u+d)<.1&&Math.abs(a+l+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(a+1)/2,v=(l+1)/2,g=(f+1)/2,y=(s+c)/4,_=(h+p)/4,x=(u+d)/4;return m>v&&m>g?m<.01?(i=0,n=.707106781,r=.707106781):(n=y/(i=Math.sqrt(m)),r=_/i):v>g?v<.01?(i=.707106781,n=0,r=.707106781):(i=y/(n=Math.sqrt(v)),r=x/n):g<.01?(i=.707106781,n=.707106781,r=0):(i=_/(r=Math.sqrt(g)),n=x/r),this.set(i,n,r,e),this}var b=Math.sqrt((d-u)*(d-u)+(h-p)*(h-p)+(c-s)*(c-s));return Math.abs(b)<.001&&(b=1),this.x=(d-u)/b,this.y=(h-p)/b,this.z=(c-s)/b,this.w=Math.acos((a+l+f-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(i,n){return void 0===t&&(t=new Xe,e=new Xe),t.set(i,i,i,i),e.set(n,n,n,n),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),Ye.prototype=Object.assign(Object.create(n.prototype),{constructor:Ye,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),qe.prototype=Object.create(Ye.prototype),qe.prototype.constructor=qe,qe.prototype.isWebGLRenderTargetCube=!0,Ke.prototype=Object.create(We.prototype),Ke.prototype.constructor=Ke,Ke.prototype.isDataTexture=!0,Object.assign(Ze.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,h=t.length;s<h;s+=3){var c=t[s],l=t[s+1],u=t[s+2];c<e&&(e=c),l<i&&(i=l),u<n&&(n=u),c>r&&(r=c),l>o&&(o=l),u>a&&(a=u)}return this.min.set(e,i,n),this.max.set(r,o,a),this},setFromBufferAttribute:function(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,h=t.count;s<h;s++){var c=t.getX(s),l=t.getY(s),u=t.getZ(s);c<e&&(e=c),l<i&&(i=l),u<n&&(n=u),c>r&&(r=c),l>o&&(o=l),u>a&&(a=u)}return this.min.set(e,i,n),this.max.set(r,o,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new De;return function(e,i){var n=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new De),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new De),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t,e,i,n=new De;function r(r){var o=r.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(e=0,i=a.length;e<i;e++)n.copy(a[e]),n.applyMatrix4(r.matrixWorld),t.expandByPoint(n)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(e=0,i=s.count;e<i;e++)n.fromBufferAttribute(s,e).applyMatrix4(r.matrixWorld),t.expandByPoint(n)}}return function(e){return t=this,e.updateMatrixWorld(!0),e.traverse(r),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new De),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:(Ge=new De,function(t){return this.clampPoint(t.center,Ge),Ge.distanceToSquared(t.center)<=t.radius*t.radius}),intersectsPlane:function(t){var e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant},intersectsTriangle:function(){var t=new De,e=new De,i=new De,n=new De,r=new De,o=new De,a=new De,s=new De,h=new De,c=new De;function l(n){var r,o;for(r=0,o=n.length-3;r<=o;r+=3){a.fromArray(n,r);var s=h.x*Math.abs(a.x)+h.y*Math.abs(a.y)+h.z*Math.abs(a.z),c=t.dot(a),l=e.dot(a),u=i.dot(a);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),h.subVectors(this.max,s),t.subVectors(a.a,s),e.subVectors(a.b,s),i.subVectors(a.c,s),n.subVectors(e,t),r.subVectors(i,e),o.subVectors(t,i);var u=[0,-n.z,n.y,0,-r.z,r.y,0,-o.z,o.y,n.z,0,-n.x,r.z,0,-r.x,o.z,0,-o.x,-n.y,n.x,0,-r.y,r.x,0,-o.y,o.x,0];return!!l(u)&&(!!l(u=[1,0,0,0,1,0,0,0,1])&&(c.crossVectors(n,r),l(u=[c.x,c.y,c.z])))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new De),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new De;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new De;return function(e){return void 0===e&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),e=new $e),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:(ke=[new De,new De,new De,new De,new De,new De,new De,new De],function(t){return this.isEmpty()?this:(ke[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ke[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ke[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ke[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ke[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ke[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ke[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ke[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ke),this)}),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign($e.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:(Ue=new Ze,function(t,e){var i=this.center;void 0!==e?i.copy(e):Ue.setFromPoints(t).getCenter(i);for(var n=0,r=0,o=t.length;r<o;r++)n=Math.max(n,i.distanceToSquared(t[r]));return this.radius=Math.sqrt(n),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new De),e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new Ze),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(Je.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new De,e=new De;return function(i,n,r){var o=t.subVectors(r,n).cross(e.subVectors(i,n)).normalize();return this.setFromNormalAndCoplanarPoint(o,i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new De),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new De;return function(e,i){void 0===i&&(console.warn("THREE.Plane: .intersectLine() target is now required"),i=new De);var n=e.delta(t),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?i.copy(e.start):void 0;var o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?void 0:i.copy(n).multiplyScalar(o).add(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new De),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new De,e=new je;return function(i,n){var r=n||e.getNormalMatrix(i),o=this.coplanarPoint(t).applyMatrix4(i),a=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(a),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(Qe.prototype,{set:function(t,e,i,n,r,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(n),a[4].copy(r),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,i=0;i<6;i++)e[i].copy(t.planes[i]);return this},setFromMatrix:function(t){var e=this.planes,i=t.elements,n=i[0],r=i[1],o=i[2],a=i[3],s=i[4],h=i[5],c=i[6],l=i[7],u=i[8],p=i[9],d=i[10],f=i[11],m=i[12],v=i[13],g=i[14],y=i[15];return e[0].setComponents(a-n,l-s,f-u,y-m).normalize(),e[1].setComponents(a+n,l+s,f+u,y+m).normalize(),e[2].setComponents(a+r,l+h,f+p,y+v).normalize(),e[3].setComponents(a-r,l-h,f-p,y-v).normalize(),e[4].setComponents(a-o,l-c,f-d,y-g).normalize(),e[5].setComponents(a+o,l+c,f+d,y+g).normalize(),this},intersectsObject:(Be=new $e,function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Be.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Be)}),intersectsSprite:function(){var t=new $e;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,i=t.center,n=-t.radius,r=0;r<6;r++){if(e[r].distanceToPoint(i)<n)return!1}return!0},intersectsBox:(ze=new De,function(t){for(var e=this.planes,i=0;i<6;i++){var n=e[i];if(ze.x=n.normal.x>0?t.max.x:t.min.x,ze.y=n.normal.y>0?t.max.y:t.min.y,ze.z=n.normal.z>0?t.max.z:t.min.z,n.distanceToPoint(ze)<0)return!1}return!0}),containsPoint:function(t){for(var e=this.planes,i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}});var ti,ei,ii,ni={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif\n",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif\n",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n}\n",background_vert:"varying vec2 vUv;\nvoid main() {\n\tvUv = uv;\n\tgl_Position = vec4( position, 1.0 );\n\tgl_Position.z = 1.0;\n}\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\tvec4 matcapColor = texture2D( matcap, uv );\n\tmatcapColor = matcapTexelToLinear( matcapColor );\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n"},ri={merge:function(t){for(var e={},i=0;i<t.length;i++){var n=this.clone(t[i]);for(var r in n)e[r]=n[r]}return e},clone:function(t){var e={};for(var i in t)for(var n in e[i]={},t[i]){var r=t[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[i][n]=r.clone():Array.isArray(r)?e[i][n]=r.slice():e[i][n]=r}return e}},oi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ai(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}Object.assign(ai.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(){function t(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}return function(e,i,n){if(e=Pe.euclideanModulo(e,1),i=Pe.clamp(i,0,1),n=Pe.clamp(n,0,1),0===i)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+i):n+i-n*i,o=2*n-r;this.r=t(o,r,e+1/3),this.g=t(o,r,e),this.b=t(o,r,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n,r=i[1],o=i[2];switch(r){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,h=parseInt(n[3],10)/100;return e(n[5]),this.setHSL(a,s,h)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){var c,l=(c=i[1]).length;if(3===l)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}t&&t.length>0&&(void 0!==(c=oi[t])?this.setHex(c):console.warn("THREE.Color: Unknown color "+t));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var i=e>0?1/e:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(){function t(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),copyLinearToSRGB:function(){function t(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,i,n=this.r,r=this.g,o=this.b,a=Math.max(n,r,o),s=Math.min(n,r,o),h=(s+a)/2;if(s===a)e=0,i=0;else{var c=a-s;switch(i=h<=.5?c/(a+s):c/(2-a-s),a){case n:e=(r-o)/c+(r<o?6:0);break;case r:e=(o-n)/c+2;break;case o:e=(n-r)/c+4}e/=6}return t.h=e,t.s=i,t.l=h,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(ii={},function(t,e,i){return this.getHSL(ii),ii.h+=t,ii.s+=e,ii.l+=i,this.setHSL(ii.h,ii.s,ii.l),this}),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:(ti={h:0,s:0,l:0},ei={h:0,s:0,l:0},function(t,e){this.getHSL(ti),t.getHSL(ei);var i=Pe.lerp(ti.h,ei.h,e),n=Pe.lerp(ti.s,ei.s,e),r=Pe.lerp(ti.l,ei.l,e);return this.setHSL(i,n,r),this}),equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var si,hi={common:{diffuse:{value:new ai(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new je},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ie(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ai(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new ai(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new je}},sprite:{diffuse:{value:new ai(15658734)},opacity:{value:1},center:{value:new Ie(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new je}}},ci={basic:{uniforms:ri.merge([hi.common,hi.specularmap,hi.envmap,hi.aomap,hi.lightmap,hi.fog]),vertexShader:ni.meshbasic_vert,fragmentShader:ni.meshbasic_frag},lambert:{uniforms:ri.merge([hi.common,hi.specularmap,hi.envmap,hi.aomap,hi.lightmap,hi.emissivemap,hi.fog,hi.lights,{emissive:{value:new ai(0)}}]),vertexShader:ni.meshlambert_vert,fragmentShader:ni.meshlambert_frag},phong:{uniforms:ri.merge([hi.common,hi.specularmap,hi.envmap,hi.aomap,hi.lightmap,hi.emissivemap,hi.bumpmap,hi.normalmap,hi.displacementmap,hi.gradientmap,hi.fog,hi.lights,{emissive:{value:new ai(0)},specular:{value:new ai(1118481)},shininess:{value:30}}]),vertexShader:ni.meshphong_vert,fragmentShader:ni.meshphong_frag},standard:{uniforms:ri.merge([hi.common,hi.envmap,hi.aomap,hi.lightmap,hi.emissivemap,hi.bumpmap,hi.normalmap,hi.displacementmap,hi.roughnessmap,hi.metalnessmap,hi.fog,hi.lights,{emissive:{value:new ai(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:ni.meshphysical_vert,fragmentShader:ni.meshphysical_frag},matcap:{uniforms:ri.merge([hi.common,hi.bumpmap,hi.normalmap,hi.displacementmap,hi.fog,{matcap:{value:null}}]),vertexShader:ni.meshmatcap_vert,fragmentShader:ni.meshmatcap_frag},points:{uniforms:ri.merge([hi.points,hi.fog]),vertexShader:ni.points_vert,fragmentShader:ni.points_frag},dashed:{uniforms:ri.merge([hi.common,hi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ni.linedashed_vert,fragmentShader:ni.linedashed_frag},depth:{uniforms:ri.merge([hi.common,hi.displacementmap]),vertexShader:ni.depth_vert,fragmentShader:ni.depth_frag},normal:{uniforms:ri.merge([hi.common,hi.bumpmap,hi.normalmap,hi.displacementmap,{opacity:{value:1}}]),vertexShader:ni.normal_vert,fragmentShader:ni.normal_frag},sprite:{uniforms:ri.merge([hi.sprite,hi.fog]),vertexShader:ni.sprite_vert,fragmentShader:ni.sprite_frag},background:{uniforms:{t2D:{value:null}},vertexShader:ni.background_vert,fragmentShader:ni.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ni.cube_vert,fragmentShader:ni.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ni.equirect_vert,fragmentShader:ni.equirect_frag},distanceRGBA:{uniforms:ri.merge([hi.common,hi.displacementmap,{referencePosition:{value:new De},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ni.distanceRGBA_vert,fragmentShader:ni.distanceRGBA_frag},shadow:{uniforms:ri.merge([hi.lights,hi.fog,{color:{value:new ai(0)},opacity:{value:1}}]),vertexShader:ni.shadow_vert,fragmentShader:ni.shadow_frag}};function li(){var t=null,e=!1,i=null;function n(r,o){!1!==e&&(i(r,o),t.requestAnimationFrame(n))}return{start:function(){!0!==e&&null!==i&&(t.requestAnimationFrame(n),e=!0)},stop:function(){e=!1},setAnimationLoop:function(t){i=t},setContext:function(e){t=e}}}function ui(t){var e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(i){i.isInterleavedBufferAttribute&&(i=i.data);var n=e.get(i);n&&(t.deleteBuffer(n.buffer),e.delete(i))},update:function(i,n){i.isInterleavedBufferAttribute&&(i=i.data);var r=e.get(i);void 0===r?e.set(i,function(e,i){var n=e.array,r=e.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW,o=t.createBuffer();t.bindBuffer(i,o),t.bufferData(i,n,r),e.onUploadCallback();var a=t.FLOAT;return n instanceof Float32Array?a=t.FLOAT:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?a=t.UNSIGNED_SHORT:n instanceof Int16Array?a=t.SHORT:n instanceof Uint32Array?a=t.UNSIGNED_INT:n instanceof Int32Array?a=t.INT:n instanceof Int8Array?a=t.BYTE:n instanceof Uint8Array&&(a=t.UNSIGNED_BYTE),{buffer:o,type:a,bytesPerElement:n.BYTES_PER_ELEMENT,version:e.version}}(i,n)):r.version<i.version&&(function(e,i,n){var r=i.array,o=i.updateRange;t.bindBuffer(n,e),!1===i.dynamic?t.bufferData(n,r,t.STATIC_DRAW):-1===o.count?t.bufferSubData(n,0,r):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(n,o.offset*r.BYTES_PER_ELEMENT,r.subarray(o.offset,o.offset+o.count)),o.count=-1)}(r.buffer,i,n),r.version=i.version)}}}function pi(t,e,i,n,r,o){this.a=t,this.b=e,this.c=i,this.normal=n&&n.isVector3?n:new De,this.vertexNormals=Array.isArray(n)?n:[],this.color=r&&r.isColor?r:new ai,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}function di(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._order=n||di.DefaultOrder}function fi(){this.mask=1}ci.physical={uniforms:ri.merge([ci.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:ni.meshphysical_vert,fragmentShader:ni.meshphysical_frag},Object.assign(pi.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}}),di.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],di.DefaultOrder="XYZ",Object.defineProperties(di.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(di.prototype,{isEuler:!0,set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var n=Pe.clamp,r=t.elements,o=r[0],a=r[4],s=r[8],h=r[1],c=r[5],l=r[9],u=r[2],p=r[6],d=r[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(p,c),this._z=0)):"YXZ"===e?(this._x=Math.asin(-n(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(h,c)):(this._y=Math.atan2(-u,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(n(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(h,o))):"ZYX"===e?(this._y=Math.asin(-n(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(p,d),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===e?(this._z=Math.asin(n(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-u,o)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===e?(this._z=Math.asin(-n(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(p,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-l,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new Ne;return function(e,i,n){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,i,n)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:(si=new Fe,function(t){return si.setFromEuler(this),this.setFromQuaternion(si,t)}),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new De(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(fi.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!=(this.mask&t.mask)}});var mi,vi,gi,yi,_i=0;function xi(){Object.defineProperty(this,"id",{value:_i++}),this.uuid=Pe.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=xi.DefaultUp.clone();var t=new De,e=new di,i=new Fe,n=new De(1,1,1);e.onChange(function(){i.setFromEuler(e,!1)}),i.onChange(function(){e.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:t},rotation:{enumerable:!0,value:e},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:n},modelViewMatrix:{value:new Ne},normalMatrix:{value:new je}}),this.matrix=new Ne,this.matrixWorld=new Ne,this.matrixAutoUpdate=xi.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new fi,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}xi.DefaultUp=new De(0,1,0),xi.DefaultMatrixAutoUpdate=!0,xi.prototype=Object.assign(Object.create(n.prototype),{constructor:xi,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:(yi=new Fe,function(t,e){return yi.setFromAxisAngle(t,e),this.quaternion.multiply(yi),this}),rotateOnWorldAxis:function(){var t=new Fe;return function(e,i){return t.setFromAxisAngle(e,i),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new De(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new De(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new De(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new De;return function(e,i){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(i)),this}}(),translateX:function(){var t=new De(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new De(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new De(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:(gi=new Ne,function(t){return t.applyMatrix4(gi.getInverse(this.matrixWorld))}),lookAt:function(){var t=new Fe,e=new Ne,i=new De,n=new De;return function(r,o,a){r.isVector3?i.copy(r):i.set(r,o,a);var s=this.parent;this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld),this.isCamera?e.lookAt(n,i,this.up):e.lookAt(i,n,this.up),this.quaternion.setFromRotationMatrix(e),s&&(e.extractRotation(s.matrixWorld),t.setFromRotationMatrix(e),this.quaternion.premultiply(t.inverse()))}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var i=this.children.indexOf(t);return-1!==i&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(i,1)),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new De),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(mi=new De,vi=new De,function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Fe),this.updateMatrixWorld(!0),this.matrixWorld.decompose(mi,t,vi),t}),getWorldScale:function(){var t=new De,e=new Fe;return function(i){return void 0===i&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),i=new De),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,i),i}}(),getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new De),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var n=this.children,r=0,o=n.length;r<o;r++)n[r].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"==typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var n={};function r(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isMesh||this.isLine||this.isPoints){n.geometry=r(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,h=a.length;s<h;s++){var c=a[s];r(t.shapes,c)}else r(t.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(s=0,h=this.material.length;s<h;s++)l.push(r(t.materials,this.material[s]));n.material=l}else n.material=r(t.materials,this.material);if(this.children.length>0){n.children=[];for(s=0;s<this.children.length;s++)n.children.push(this.children[s].toJSON(t).object)}if(e){var u=m(t.geometries),p=m(t.materials),d=m(t.textures),f=m(t.images);a=m(t.shapes);u.length>0&&(i.geometries=u),p.length>0&&(i.materials=p),d.length>0&&(i.textures=d),f.length>0&&(i.images=f),a.length>0&&(i.shapes=a)}return i.object=n,i;function m(t){var e=[];for(var i in t){var n=t[i];delete n.metadata,e.push(n)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var i=0;i<t.children.length;i++){var n=t.children[i];this.add(n.clone())}return this}});var bi,Mi,wi=0;function Ei(){Object.defineProperty(this,"id",{value:wi+=2}),this.uuid=Pe.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ti(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Si(t,e,i){Ti.call(this,new Int8Array(t),e,i)}function Ci(t,e,i){Ti.call(this,new Uint8Array(t),e,i)}function Oi(t,e,i){Ti.call(this,new Uint8ClampedArray(t),e,i)}function Ri(t,e,i){Ti.call(this,new Int16Array(t),e,i)}function Ai(t,e,i){Ti.call(this,new Uint16Array(t),e,i)}function Li(t,e,i){Ti.call(this,new Int32Array(t),e,i)}function Pi(t,e,i){Ti.call(this,new Uint32Array(t),e,i)}function Ii(t,e,i){Ti.call(this,new Float32Array(t),e,i)}function Ni(t,e,i){Ti.call(this,new Float64Array(t),e,i)}function Fi(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Di(t){if(0===t.length)return-1/0;for(var e=t[0],i=1,n=t.length;i<n;++i)t[i]>e&&(e=t[i]);return e}Ei.prototype=Object.assign(Object.create(n.prototype),{constructor:Ei,isGeometry:!0,applyMatrix:function(t){for(var e=(new je).getNormalMatrix(t),i=0,n=this.vertices.length;i<n;i++){this.vertices[i].applyMatrix4(t)}for(i=0,n=this.faces.length;i<n;i++){var r=this.faces[i];r.normal.applyMatrix3(e).normalize();for(var o=0,a=r.vertexNormals.length;o<a;o++)r.vertexNormals[o].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new Ne;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new Ne;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new Ne;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new Ne;return function(e,i,n){return t.makeTranslation(e,i,n),this.applyMatrix(t),this}}(),scale:function(){var t=new Ne;return function(e,i,n){return t.makeScale(e,i,n),this.applyMatrix(t),this}}(),lookAt:(Mi=new xi,function(t){Mi.lookAt(t),Mi.updateMatrix(),this.applyMatrix(Mi.matrix)}),fromBufferGeometry:function(t){var e=this,i=null!==t.index?t.index.array:void 0,n=t.attributes,r=n.position.array,o=void 0!==n.normal?n.normal.array:void 0,a=void 0!==n.color?n.color.array:void 0,s=void 0!==n.uv?n.uv.array:void 0,h=void 0!==n.uv2?n.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var c=[],l=[],u=[],p=0,d=0;p<r.length;p+=3,d+=2)e.vertices.push(new De(r[p],r[p+1],r[p+2])),void 0!==o&&c.push(new De(o[p],o[p+1],o[p+2])),void 0!==a&&e.colors.push(new ai(a[p],a[p+1],a[p+2])),void 0!==s&&l.push(new Ie(s[d],s[d+1])),void 0!==h&&u.push(new Ie(h[d],h[d+1]));function f(t,i,n,r){var p=new pi(t,i,n,void 0!==o?[c[t].clone(),c[i].clone(),c[n].clone()]:[],void 0!==a?[e.colors[t].clone(),e.colors[i].clone(),e.colors[n].clone()]:[],r);e.faces.push(p),void 0!==s&&e.faceVertexUvs[0].push([l[t].clone(),l[i].clone(),l[n].clone()]),void 0!==h&&e.faceVertexUvs[1].push([u[t].clone(),u[i].clone(),u[n].clone()])}var m=t.groups;if(m.length>0)for(p=0;p<m.length;p++)for(var v=m[p],g=v.start,y=(d=g,g+v.count);d<y;d+=3)void 0!==i?f(i[d],i[d+1],i[d+2],v.materialIndex):f(d,d+1,d+2,v.materialIndex);else if(void 0!==i)for(p=0;p<i.length;p+=3)f(i[p],i[p+1],i[p+2]);else for(p=0;p<r.length/3;p+=3)f(p,p+1,p+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:(bi=new De,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(bi).negate(),this.translate(bi.x,bi.y,bi.z),this}),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,i=0===e?1:1/e,n=new Ne;return n.set(i,0,0,-i*t.x,0,i,0,-i*t.y,0,0,i,-i*t.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var t=new De,e=new De,i=0,n=this.faces.length;i<n;i++){var r=this.faces[i],o=this.vertices[r.a],a=this.vertices[r.b],s=this.vertices[r.c];t.subVectors(s,a),e.subVectors(o,a),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){var e,i,n,r,o,a;for(void 0===t&&(t=!0),a=new Array(this.vertices.length),e=0,i=this.vertices.length;e<i;e++)a[e]=new De;if(t){var s,h,c,l=new De,u=new De;for(n=0,r=this.faces.length;n<r;n++)o=this.faces[n],s=this.vertices[o.a],h=this.vertices[o.b],c=this.vertices[o.c],l.subVectors(c,h),u.subVectors(s,h),l.cross(u),a[o.a].add(l),a[o.b].add(l),a[o.c].add(l)}else for(this.computeFaceNormals(),n=0,r=this.faces.length;n<r;n++)a[(o=this.faces[n]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(e=0,i=this.vertices.length;e<i;e++)a[e].normalize();for(n=0,r=this.faces.length;n<r;n++){var p=(o=this.faces[n]).vertexNormals;3===p.length?(p[0].copy(a[o.a]),p[1].copy(a[o.b]),p[2].copy(a[o.c])):(p[0]=a[o.a].clone(),p[1]=a[o.b].clone(),p[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,i;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var n=(i=this.faces[t]).vertexNormals;3===n.length?(n[0].copy(i.normal),n[1].copy(i.normal),n[2].copy(i.normal)):(n[0]=i.normal.clone(),n[1]=i.normal.clone(),n[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,i,n,r;for(i=0,n=this.faces.length;i<n;i++)for((r=this.faces[i]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var o=new Ei;for(o.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var a=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(i=0,n=this.faces.length;i<n;i++)h=new De,c={a:new De,b:new De,c:new De},a.push(h),s.push(c)}var h,c,l=this.morphNormals[t];for(o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals(),i=0,n=this.faces.length;i<n;i++)r=this.faces[i],h=l.faceNormals[i],c=l.vertexNormals[i],h.copy(r.normal),c.a.copy(r.vertexNormals[0]),c.b.copy(r.vertexNormals[1]),c.c.copy(r.vertexNormals[2])}for(i=0,n=this.faces.length;i<n;i++)(r=this.faces[i]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ze),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new $e),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(t&&t.isGeometry){var n,r=this.vertices.length,o=this.vertices,a=t.vertices,s=this.faces,h=t.faces,c=this.faceVertexUvs[0],l=t.faceVertexUvs[0],u=this.colors,p=t.colors;void 0===i&&(i=0),void 0!==e&&(n=(new je).getNormalMatrix(e));for(var d=0,f=a.length;d<f;d++){var m=a[d].clone();void 0!==e&&m.applyMatrix4(e),o.push(m)}for(d=0,f=p.length;d<f;d++)u.push(p[d].clone());for(d=0,f=h.length;d<f;d++){var v,g,y,_=h[d],x=_.vertexNormals,b=_.vertexColors;(v=new pi(_.a+r,_.b+r,_.c+r)).normal.copy(_.normal),void 0!==n&&v.normal.applyMatrix3(n).normalize();for(var M=0,w=x.length;M<w;M++)g=x[M].clone(),void 0!==n&&g.applyMatrix3(n).normalize(),v.vertexNormals.push(g);v.color.copy(_.color);for(M=0,w=b.length;M<w;M++)y=b[M],v.vertexColors.push(y.clone());v.materialIndex=_.materialIndex+i,s.push(v)}for(d=0,f=l.length;d<f;d++){var E=l[d],T=[];if(void 0!==E){for(M=0,w=E.length;M<w;M++)T.push(E[M].clone());c.push(T)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,i,n,r,o,a,s,h={},c=[],l=[],u=Math.pow(10,4);for(i=0,n=this.vertices.length;i<n;i++)t=this.vertices[i],void 0===h[e=Math.round(t.x*u)+"_"+Math.round(t.y*u)+"_"+Math.round(t.z*u)]?(h[e]=i,c.push(this.vertices[i]),l[i]=c.length-1):l[i]=l[h[e]];var p=[];for(i=0,n=this.faces.length;i<n;i++){(r=this.faces[i]).a=l[r.a],r.b=l[r.b],r.c=l[r.c],o=[r.a,r.b,r.c];for(var d=0;d<3;d++)if(o[d]===o[(d+1)%3]){p.push(i);break}}for(i=p.length-1;i>=0;i--){var f=p[i];for(this.faces.splice(f,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(f,1)}var m=this.vertices.length-c.length;return this.vertices=c,m},setFromPoints:function(t){this.vertices=[];for(var e=0,i=t.length;e<i;e++){var n=t[e];this.vertices.push(new De(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,i=0;i<e;i++)t[i]._id=i;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var n,r,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===e&&(n=[]),a&&a.length===e&&(r=[]);for(i=0;i<e;i++){var s=t[i]._id;n&&n.push(o[s]),r&&r.push(a[s])}n&&(this.faceVertexUvs[0]=n),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var i in e)void 0!==e[i]&&(t[i]=e[i]);return t}for(var n=[],r=0;r<this.vertices.length;r++){var o=this.vertices[r];n.push(o.x,o.y,o.z)}var a=[],s=[],h={},c=[],l={},u=[],p={};for(r=0;r<this.faces.length;r++){var d=this.faces[r],f=void 0!==this.faceVertexUvs[0][r],m=d.normal.length()>0,v=d.vertexNormals.length>0,g=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=d.vertexColors.length>0,_=0;if(_=w(_=w(_=w(_=w(_=w(_=w(_=w(_=w(_,0,0),1,!0),2,!1),3,f),4,m),5,v),6,g),7,y),a.push(_),a.push(d.a,d.b,d.c),a.push(d.materialIndex),f){var x=this.faceVertexUvs[0][r];a.push(S(x[0]),S(x[1]),S(x[2]))}if(m&&a.push(E(d.normal)),v){var b=d.vertexNormals;a.push(E(b[0]),E(b[1]),E(b[2]))}if(g&&a.push(T(d.color)),y){var M=d.vertexColors;a.push(T(M[0]),T(M[1]),T(M[2]))}}function w(t,e,i){return i?t|1<<e:t&~(1<<e)}function E(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==h[e]?h[e]:(h[e]=s.length/3,s.push(t.x,t.y,t.z),h[e])}function T(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==l[e]?l[e]:(l[e]=c.length,c.push(t.getHex()),l[e])}function S(t){var e=t.x.toString()+t.y.toString();return void 0!==p[e]?p[e]:(p[e]=u.length/2,u.push(t.x,t.y),p[e])}return t.data={},t.data.vertices=n,t.data.normals=s,c.length>0&&(t.data.colors=c),u.length>0&&(t.data.uvs=[u]),t.data.faces=a,t},clone:function(){return(new Ei).copy(this)},copy:function(t){var e,i,n,r,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,i=s.length;e<i;e++)this.vertices.push(s[e].clone());var h=t.colors;for(e=0,i=h.length;e<i;e++)this.colors.push(h[e].clone());var c=t.faces;for(e=0,i=c.length;e<i;e++)this.faces.push(c[e].clone());for(e=0,i=t.faceVertexUvs.length;e<i;e++){var l=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),n=0,r=l.length;n<r;n++){var u=l[n],p=[];for(o=0,a=u.length;o<a;o++){var d=u[o];p.push(d.clone())}this.faceVertexUvs[e].push(p)}}var f=t.morphTargets;for(e=0,i=f.length;e<i;e++){var m={};if(m.name=f[e].name,void 0!==f[e].vertices)for(m.vertices=[],n=0,r=f[e].vertices.length;n<r;n++)m.vertices.push(f[e].vertices[n].clone());if(void 0!==f[e].normals)for(m.normals=[],n=0,r=f[e].normals.length;n<r;n++)m.normals.push(f[e].normals[n].clone());this.morphTargets.push(m)}var v=t.morphNormals;for(e=0,i=v.length;e<i;e++){var g={};if(void 0!==v[e].vertexNormals)for(g.vertexNormals=[],n=0,r=v[e].vertexNormals.length;n<r;n++){var y=v[e].vertexNormals[n],_={};_.a=y.a.clone(),_.b=y.b.clone(),_.c=y.c.clone(),g.vertexNormals.push(_)}if(void 0!==v[e].faceNormals)for(g.faceNormals=[],n=0,r=v[e].faceNormals.length;n<r;n++)g.faceNormals.push(v[e].faceNormals[n].clone());this.morphNormals.push(g)}var x=t.skinWeights;for(e=0,i=x.length;e<i;e++)this.skinWeights.push(x[e].clone());var b=t.skinIndices;for(e=0,i=b.length;e<i;e++)this.skinIndices.push(b[e].clone());var M=t.lineDistances;for(e=0,i=M.length;e<i;e++)this.lineDistances.push(M[e]);var w=t.boundingBox;null!==w&&(this.boundingBox=w.clone());var E=t.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Ti.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Ti.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var n=0,r=this.itemSize;n<r;n++)this.array[t+n]=e.array[i+n];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),o=new ai),e[i++]=o.r,e[i++]=o.g,e[i++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),o=new Ie),e[i++]=o.x,e[i++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new De),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),o=new Xe),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z,e[i++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),Si.prototype=Object.create(Ti.prototype),Si.prototype.constructor=Si,Ci.prototype=Object.create(Ti.prototype),Ci.prototype.constructor=Ci,Oi.prototype=Object.create(Ti.prototype),Oi.prototype.constructor=Oi,Ri.prototype=Object.create(Ti.prototype),Ri.prototype.constructor=Ri,Ai.prototype=Object.create(Ti.prototype),Ai.prototype.constructor=Ai,Li.prototype=Object.create(Ti.prototype),Li.prototype.constructor=Li,Pi.prototype=Object.create(Ti.prototype),Pi.prototype.constructor=Pi,Ii.prototype=Object.create(Ti.prototype),Ii.prototype.constructor=Ii,Ni.prototype=Object.create(Ti.prototype),Ni.prototype.constructor=Ni,Object.assign(Fi.prototype,{computeGroups:function(t){for(var e,i=[],n=void 0,r=t.faces,o=0;o<r.length;o++){var a=r[o];a.materialIndex!==n&&(n=a.materialIndex,void 0!==e&&(e.count=3*o-e.start,i.push(e)),e={start:3*o,materialIndex:n})}void 0!==e&&(e.count=3*o-e.start,i.push(e)),this.groups=i},fromGeometry:function(t){var e,i=t.faces,n=t.vertices,r=t.faceVertexUvs,o=r[0]&&r[0].length>0,a=r[1]&&r[1].length>0,s=t.morphTargets,h=s.length;if(h>0){e=[];for(var c=0;c<h;c++)e[c]={name:s[c].name,data:[]};this.morphTargets.position=e}var l,u=t.morphNormals,p=u.length;if(p>0){l=[];for(c=0;c<p;c++)l[c]={name:u[c].name,data:[]};this.morphTargets.normal=l}var d=t.skinIndices,f=t.skinWeights,m=d.length===n.length,v=f.length===n.length;n.length>0&&0===i.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(c=0;c<i.length;c++){var g=i[c];this.vertices.push(n[g.a],n[g.b],n[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var _=g.normal;this.normals.push(_,_,_)}var x,b=g.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{var M=g.color;this.colors.push(M,M,M)}if(!0===o)void 0!==(x=r[0][c])?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new Ie,new Ie,new Ie));if(!0===a)void 0!==(x=r[1][c])?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new Ie,new Ie,new Ie));for(var w=0;w<h;w++){var E=s[w].vertices;e[w].data.push(E[g.a],E[g.b],E[g.c])}for(w=0;w<p;w++){var T=u[w].vertexNormals[c];l[w].data.push(T.a,T.b,T.c)}m&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),v&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var ji=1;function ki(){Object.defineProperty(this,"id",{value:ji+=2}),this.uuid=Pe.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function Gi(t,e,i,n,r,o){Ei.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new Ui(t,e,i,n,r,o)),this.mergeVertices()}function Ui(t,e,i,n,r,o){ki.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:o};var a=this;t=t||1,e=e||1,i=i||1,n=Math.floor(n)||1,r=Math.floor(r)||1;var s=[],h=[],c=[],l=[],u=0,p=0;function d(t,e,i,n,r,o,d,f,m,v,g){var y,_,x=o/m,b=d/v,M=o/2,w=d/2,E=f/2,T=m+1,S=v+1,C=0,O=0,R=new De;for(_=0;_<S;_++){var A=_*b-w;for(y=0;y<T;y++){var L=y*x-M;R[t]=L*n,R[e]=A*r,R[i]=E,h.push(R.x,R.y,R.z),R[t]=0,R[e]=0,R[i]=f>0?1:-1,c.push(R.x,R.y,R.z),l.push(y/m),l.push(1-_/v),C+=1}}for(_=0;_<v;_++)for(y=0;y<m;y++){var P=u+y+T*_,I=u+y+T*(_+1),N=u+(y+1)+T*(_+1),F=u+(y+1)+T*_;s.push(P,I,F),s.push(I,N,F),O+=6}a.addGroup(p,O,g),p+=O,u+=C}d("z","y","x",-1,-1,i,e,t,o=Math.floor(o)||1,r,0),d("z","y","x",1,-1,i,e,-t,o,r,1),d("x","z","y",1,1,t,i,e,n,o,2),d("x","z","y",1,-1,t,i,-e,n,o,3),d("x","y","z",1,-1,t,e,i,n,r,4),d("x","y","z",-1,-1,t,e,-i,n,r,5),this.setIndex(s),this.addAttribute("position",new Ii(h,3)),this.addAttribute("normal",new Ii(c,3)),this.addAttribute("uv",new Ii(l,2))}function zi(t,e,i,n){Ei.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new Bi(t,e,i,n)),this.mergeVertices()}function Bi(t,e,i,n){ki.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};var r,o,a=(t=t||1)/2,s=(e=e||1)/2,h=Math.floor(i)||1,c=Math.floor(n)||1,l=h+1,u=c+1,p=t/h,d=e/c,f=[],m=[],v=[],g=[];for(o=0;o<u;o++){var y=o*d-s;for(r=0;r<l;r++){var _=r*p-a;m.push(_,-y,0),v.push(0,0,1),g.push(r/h),g.push(1-o/c)}}for(o=0;o<c;o++)for(r=0;r<h;r++){var x=r+l*o,b=r+l*(o+1),M=r+1+l*(o+1),w=r+1+l*o;f.push(x,b,w),f.push(b,M,w)}this.setIndex(f),this.addAttribute("position",new Ii(m,3)),this.addAttribute("normal",new Ii(v,3)),this.addAttribute("uv",new Ii(g,2))}ki.prototype=Object.assign(Object.create(n.prototype),{constructor:ki,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(Di(t)>65535?Pi:Ai)(t,1):this.index=t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new Ti(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var i=this.attributes.normal;void 0!==i&&((new je).getNormalMatrix(t).applyToBufferAttribute(i),i.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new Ne;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new Ne;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new Ne;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new Ne;return function(e,i,n){return t.makeTranslation(e,i,n),this.applyMatrix(t),this}}(),scale:function(){var t=new Ne;return function(e,i,n){return t.makeScale(e,i,n),this.applyMatrix(t),this}}(),lookAt:function(){var t=new xi;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new De;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var i=new Ii(3*e.vertices.length,3),n=new Ii(3*e.colors.length,3);if(this.addAttribute("position",i.copyVector3sArray(e.vertices)),this.addAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new Ii(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i];e.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new Ii(e,3)),this},updateFromObject:function(t){var e,i=t.geometry;if(t.isMesh){var n=i.__directGeometry;if(!0===i.elementsNeedUpdate&&(n=void 0,i.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(i);n.verticesNeedUpdate=i.verticesNeedUpdate,n.normalsNeedUpdate=i.normalsNeedUpdate,n.colorsNeedUpdate=i.colorsNeedUpdate,n.uvsNeedUpdate=i.uvsNeedUpdate,n.groupsNeedUpdate=i.groupsNeedUpdate,i.verticesNeedUpdate=!1,i.normalsNeedUpdate=!1,i.colorsNeedUpdate=!1,i.uvsNeedUpdate=!1,i.groupsNeedUpdate=!1,i=n}return!0===i.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(i.vertices),e.needsUpdate=!0),i.verticesNeedUpdate=!1),!0===i.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(i.normals),e.needsUpdate=!0),i.normalsNeedUpdate=!1),!0===i.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(i.colors),e.needsUpdate=!0),i.colorsNeedUpdate=!1),i.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(i.uvs),e.needsUpdate=!0),i.uvsNeedUpdate=!1),i.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(i.lineDistances),e.needsUpdate=!0),i.lineDistancesNeedUpdate=!1),i.groupsNeedUpdate&&(i.computeGroups(t.geometry),this.groups=i.groups,i.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Fi).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new Ti(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var i=new Float32Array(3*t.normals.length);this.addAttribute("normal",new Ti(i,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var n=new Float32Array(3*t.colors.length);this.addAttribute("color",new Ti(n,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new Ti(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new Ti(o,2).copyVector2sArray(t.uvs2))}for(var a in this.groups=t.groups,t.morphTargets){for(var s=[],h=t.morphTargets[a],c=0,l=h.length;c<l;c++){var u=h[c],p=new Ii(3*u.data.length,3);p.name=u.name,s.push(p.copyVector3sArray(u.data))}this.morphAttributes[a]=s}if(t.skinIndices.length>0){var d=new Ii(4*t.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var f=new Ii(4*t.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ze);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new Ze,e=new De;return function(){null===this.boundingSphere&&(this.boundingSphere=new $e);var i=this.attributes.position;if(i){var n=this.boundingSphere.center;t.setFromBufferAttribute(i),t.getCenter(n);for(var r=0,o=0,a=i.count;o<a;o++)e.x=i.getX(o),e.y=i.getY(o),e.z=i.getZ(o),r=Math.max(r,n.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var i=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new Ti(new Float32Array(i.length),3));else for(var n=e.normal.array,r=0,o=n.length;r<o;r++)n[r]=0;var a,s,h,c=e.normal.array,l=new De,u=new De,p=new De,d=new De,f=new De;if(t){var m=t.array;for(r=0,o=t.count;r<o;r+=3)a=3*m[r+0],s=3*m[r+1],h=3*m[r+2],l.fromArray(i,a),u.fromArray(i,s),p.fromArray(i,h),d.subVectors(p,u),f.subVectors(l,u),d.cross(f),c[a]+=d.x,c[a+1]+=d.y,c[a+2]+=d.z,c[s]+=d.x,c[s+1]+=d.y,c[s+2]+=d.z,c[h]+=d.x,c[h+1]+=d.y,c[h+2]+=d.z}else for(r=0,o=i.length;r<o;r+=9)l.fromArray(i,r),u.fromArray(i,r+3),p.fromArray(i,r+6),d.subVectors(p,u),f.subVectors(l,u),d.cross(f),c[r]=d.x,c[r+1]=d.y,c[r+2]=d.z,c[r+3]=d.x,c[r+4]=d.y,c[r+5]=d.z,c[r+6]=d.x,c[r+7]=d.y,c[r+8]=d.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var i=this.attributes;for(var n in i)if(void 0!==t.attributes[n])for(var r=i[n].array,o=t.attributes[n],a=o.array,s=0,h=o.itemSize*e;s<a.length;s++,h++)r[h]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){var t=new De;return function(){for(var e=this.attributes.normal,i=0,n=e.count;i<n;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.normalize(),e.setXYZ(i,t.x,t.y,t.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new ki,e=this.index.array,i=this.attributes;for(var n in i){for(var r=i[n],o=r.array,a=r.itemSize,s=new o.constructor(e.length*a),h=0,c=0,l=0,u=e.length;l<u;l++){h=e[l]*a;for(var p=0;p<a;p++)s[c++]=o[h++]}t.addAttribute(n,new Ti(s,a))}var d=this.groups;for(l=0,u=d.length;l<u;l++){var f=d[l];t.addGroup(f.start,f.count,f.materialIndex)}return t},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};var n=this.index;if(null!==n){var r=Array.prototype.slice.call(n.array);t.data.index={type:n.array.constructor.name,array:r}}var o=this.attributes;for(var i in o){var a=o[i];r=Array.prototype.slice.call(a.array);t.data.attributes[i]={itemSize:a.itemSize,type:a.array.constructor.name,array:r,normalized:a.normalized}}var s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));var h=this.boundingSphere;return null!==h&&(t.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),t},clone:function(){return(new ki).copy(this)},copy:function(t){var e,i,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var r=t.index;null!==r&&this.setIndex(r.clone());var o=t.attributes;for(e in o){var a=o[e];this.addAttribute(e,a.clone())}var s=t.morphAttributes;for(e in s){var h=[],c=s[e];for(i=0,n=c.length;i<n;i++)h.push(c[i].clone());this.morphAttributes[e]=h}var l=t.groups;for(i=0,n=l.length;i<n;i++){var u=l[i];this.addGroup(u.start,u.count,u.materialIndex)}var p=t.boundingBox;null!==p&&(this.boundingBox=p.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Gi.prototype=Object.create(Ei.prototype),Gi.prototype.constructor=Gi,Ui.prototype=Object.create(ki.prototype),Ui.prototype.constructor=Ui,zi.prototype=Object.create(Ei.prototype),zi.prototype.constructor=zi,Bi.prototype=Object.create(ki.prototype),Bi.prototype.constructor=Bi;var Hi,Vi,Wi,Xi,Yi,qi,Ki,Zi,$i,Ji,Qi,tn,en=0;function nn(){Object.defineProperty(this,"id",{value:en++}),this.uuid=Pe.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=O,this.side=b,this.flatShading=!1,this.vertexColors=E,this.opacity=1,this.transparent=!1,this.blendSrc=B,this.blendDst=H,this.blendEquation=I,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=J,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function rn(t){nn.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function on(t,e){this.origin=void 0!==t?t:new De,this.direction=void 0!==e?e:new De}function an(t,e,i){this.a=void 0!==t?t:new De,this.b=void 0!==e?e:new De,this.c=void 0!==i?i:new De}function sn(t){nn.call(this),this.type="MeshBasicMaterial",this.color=new ai(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=nt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function hn(t,e){xi.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new ki,this.material=void 0!==e?e:new sn({color:16777215*Math.random()}),this.drawMode=ye,this.updateMorphTargets()}function cn(t,e){return Math.abs(e[1])-Math.abs(t[1])}function ln(t,e,i,n,r,o,a,s,h,c){t=void 0!==t?t:[],e=void 0!==e?e:ut,We.call(this,t,e,i,n,r,o,a,s,h,c),this.flipY=!1}function un(t,e,i,n){We.call(this,null),this.image={data:t,width:e,height:i,depth:n},this.magFilter=bt,this.minFilter=bt,this.generateMipmaps=!1,this.flipY=!1}nn.prototype=Object.assign(Object.create(n.prototype),{constructor:nn,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var i=t[e];if(void 0!==i)if("shading"!==e){var n=this[e];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]="overdraw"===e?Number(i):i:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(t){var e=[];for(var i in t){var n=t[i];delete n.metadata,e.push(n)}return e}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearCoat&&(i.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(i.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,i.reflectivity=this.reflectivity,void 0!==this.combine&&(i.combine=this.combine),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==O&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),this.side!==b&&(i.side=this.side),this.vertexColors!==E&&(i.vertexColors=this.vertexColors),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),e){var r=n(t.textures),o=n(t.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,i=null;if(null!==e){var n=e.length;i=new Array(n);for(var r=0;r!==n;++r)i[r]=e[r].clone()}return this.clippingPlanes=i,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),rn.prototype=Object.create(nn.prototype),rn.prototype.constructor=rn,rn.prototype.isShaderMaterial=!0,rn.prototype.copy=function(t){return nn.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=ri.clone(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},rn.prototype.toJSON=function(t){var e=nn.prototype.toJSON.call(this,t);for(var i in e.uniforms={},this.uniforms){var n=this.uniforms[i].value;n.isTexture?e.uniforms[i]={type:"t",value:n.toJSON(t).uuid}:n.isColor?e.uniforms[i]={type:"c",value:n.getHex()}:n.isVector2?e.uniforms[i]={type:"v2",value:n.toArray()}:n.isVector3?e.uniforms[i]={type:"v3",value:n.toArray()}:n.isVector4?e.uniforms[i]={type:"v4",value:n.toArray()}:n.isMatrix4?e.uniforms[i]={type:"m4",value:n.toArray()}:e.uniforms[i]={value:n}}return Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},Object.assign(on.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new De),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new De;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new De),e.subVectors(t,this.origin);var i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new De;return function(e){var i=t.subVectors(e,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(i).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:(Vi=new De,Wi=new De,Xi=new De,function(t,e,i,n){Vi.copy(t).add(e).multiplyScalar(.5),Wi.copy(e).sub(t).normalize(),Xi.copy(this.origin).sub(Vi);var r,o,a,s,h=.5*t.distanceTo(e),c=-this.direction.dot(Wi),l=Xi.dot(this.direction),u=-Xi.dot(Wi),p=Xi.lengthSq(),d=Math.abs(1-c*c);if(d>0)if(o=c*l-u,s=h*d,(r=c*u-l)>=0)if(o>=-s)if(o<=s){var f=1/d;a=(r*=f)*(r+c*(o*=f)+2*l)+o*(c*r+o+2*u)+p}else o=h,a=-(r=Math.max(0,-(c*o+l)))*r+o*(o+2*u)+p;else o=-h,a=-(r=Math.max(0,-(c*o+l)))*r+o*(o+2*u)+p;else o<=-s?a=-(r=Math.max(0,-(-c*h+l)))*r+(o=r>0?-h:Math.min(Math.max(-h,-u),h))*(o+2*u)+p:o<=s?(r=0,a=(o=Math.min(Math.max(-h,-u),h))*(o+2*u)+p):a=-(r=Math.max(0,-(c*h+l)))*r+(o=r>0?h:Math.min(Math.max(-h,-u),h))*(o+2*u)+p;else o=c>0?-h:h,a=-(r=Math.max(0,-(c*o+l)))*r+o*(o+2*u)+p;return i&&i.copy(this.direction).multiplyScalar(r).add(this.origin),n&&n.copy(Wi).multiplyScalar(o).add(Vi),a}),intersectSphere:function(){var t=new De;return function(e,i){t.subVectors(e.center,this.origin);var n=t.dot(this.direction),r=t.dot(t)-n*n,o=e.radius*e.radius;if(r>o)return null;var a=Math.sqrt(o-r),s=n-a,h=n+a;return s<0&&h<0?null:s<0?this.at(h,i):this.at(s,i)}}(),intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null},intersectPlane:function(t,e){var i=this.distanceToPlane(t);return null===i?null:this.at(i,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var i,n,r,o,a,s,h=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,u=this.origin;return h>=0?(i=(t.min.x-u.x)*h,n=(t.max.x-u.x)*h):(i=(t.max.x-u.x)*h,n=(t.min.x-u.x)*h),c>=0?(r=(t.min.y-u.y)*c,o=(t.max.y-u.y)*c):(r=(t.max.y-u.y)*c,o=(t.min.y-u.y)*c),i>o||r>n?null:((r>i||i!=i)&&(i=r),(o<n||n!=n)&&(n=o),l>=0?(a=(t.min.z-u.z)*l,s=(t.max.z-u.z)*l):(a=(t.max.z-u.z)*l,s=(t.min.z-u.z)*l),i>s||a>n?null:((a>i||i!=i)&&(i=a),(s<n||n!=n)&&(n=s),n<0?null:this.at(i>=0?i:n,e)))},intersectsBox:(Hi=new De,function(t){return null!==this.intersectBox(t,Hi)}),intersectTriangle:function(){var t=new De,e=new De,i=new De,n=new De;return function(r,o,a,s,h){e.subVectors(o,r),i.subVectors(a,r),n.crossVectors(e,i);var c,l=this.direction.dot(n);if(l>0){if(s)return null;c=1}else{if(!(l<0))return null;c=-1,l=-l}t.subVectors(this.origin,r);var u=c*this.direction.dot(i.crossVectors(t,i));if(u<0)return null;var p=c*this.direction.dot(e.cross(t));if(p<0)return null;if(u+p>l)return null;var d=-c*t.dot(n);return d<0?null:this.at(d/l,h)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(an,{getNormal:(qi=new De,function(t,e,i,n){void 0===n&&(console.warn("THREE.Triangle: .getNormal() target is now required"),n=new De),n.subVectors(i,e),qi.subVectors(t,e),n.cross(qi);var r=n.lengthSq();return r>0?n.multiplyScalar(1/Math.sqrt(r)):n.set(0,0,0)}),getBarycoord:function(){var t=new De,e=new De,i=new De;return function(n,r,o,a,s){t.subVectors(a,r),e.subVectors(o,r),i.subVectors(n,r);var h=t.dot(t),c=t.dot(e),l=t.dot(i),u=e.dot(e),p=e.dot(i),d=h*u-c*c;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new De),0===d)return s.set(-2,-1,-1);var f=1/d,m=(u*l-c*p)*f,v=(h*p-c*l)*f;return s.set(1-m-v,v,m)}}(),containsPoint:function(){var t=new De;return function(e,i,n,r){return an.getBarycoord(e,i,n,r,t),t.x>=0&&t.y>=0&&t.x+t.y<=1}}(),getUV:(Yi=new De,function(t,e,i,n,r,o,a,s){return this.getBarycoord(t,e,i,n,Yi),s.set(0,0),s.addScaledVector(r,Yi.x),s.addScaledVector(o,Yi.y),s.addScaledVector(a,Yi.z),s})}),Object.assign(an.prototype,{set:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this},setFromPointsAndIndices:function(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){var t=new De,e=new De;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new De),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return an.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new De),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return an.getBarycoord(t,this.a,this.b,this.c,e)},containsPoint:function(t){return an.containsPoint(t,this.a,this.b,this.c)},getUV:function(t,e,i,n,r){return an.getUV(t,this.a,this.b,this.c,e,i,n,r)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:(Ki=new De,Zi=new De,$i=new De,Ji=new De,Qi=new De,tn=new De,function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new De);var i,n,r=this.a,o=this.b,a=this.c;Ki.subVectors(o,r),Zi.subVectors(a,r),Ji.subVectors(t,r);var s=Ki.dot(Ji),h=Zi.dot(Ji);if(s<=0&&h<=0)return e.copy(r);Qi.subVectors(t,o);var c=Ki.dot(Qi),l=Zi.dot(Qi);if(c>=0&&l<=c)return e.copy(o);var u=s*l-c*h;if(u<=0&&s>=0&&c<=0)return i=s/(s-c),e.copy(r).addScaledVector(Ki,i);tn.subVectors(t,a);var p=Ki.dot(tn),d=Zi.dot(tn);if(d>=0&&p<=d)return e.copy(a);var f=p*h-s*d;if(f<=0&&h>=0&&d<=0)return n=h/(h-d),e.copy(r).addScaledVector(Zi,n);var m=c*d-p*l;if(m<=0&&l-c>=0&&p-d>=0)return $i.subVectors(a,o),n=(l-c)/(l-c+(p-d)),e.copy(o).addScaledVector($i,n);var v=1/(m+f+u);return i=f*v,n=u*v,e.copy(r).addScaledVector(Ki,i).addScaledVector(Zi,n)}),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),sn.prototype=Object.create(nn.prototype),sn.prototype.constructor=sn,sn.prototype.isMeshBasicMaterial=!0,sn.prototype.copy=function(t){return nn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},hn.prototype=Object.assign(Object.create(xi.prototype),{constructor:hn,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return xi.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,i,n=this.geometry;if(n.isBufferGeometry){var r=n.morphAttributes,o=Object.keys(r);if(o.length>0){var a=r[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)i=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}else{var s=n.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=s.length;t<e;t++)i=s[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}},raycast:function(){var t=new Ne,e=new on,i=new $e,n=new De,r=new De,o=new De,a=new De,s=new De,h=new De,c=new Ie,l=new Ie,u=new Ie,p=new De,d=new De;function f(t,e,i,n,r,o,a,s){if(null===(e.side===M?n.intersectTriangle(a,o,r,!0,s):n.intersectTriangle(r,o,a,e.side!==w,s)))return null;d.copy(s),d.applyMatrix4(t.matrixWorld);var h=i.ray.origin.distanceTo(d);return h<i.near||h>i.far?null:{distance:h,point:d.clone(),object:t}}function m(t,e,i,a,s,h,d,m,v){n.fromBufferAttribute(s,d),r.fromBufferAttribute(s,m),o.fromBufferAttribute(s,v);var g=f(t,e,i,a,n,r,o,p);if(g){h&&(c.fromBufferAttribute(h,d),l.fromBufferAttribute(h,m),u.fromBufferAttribute(h,v),g.uv=an.getUV(p,n,r,o,c,l,u,new Ie));var y=new pi(d,m,v);an.getNormal(n,r,o,y.normal),g.face=y}return g}return function(d,v){var g,y=this.geometry,_=this.material,x=this.matrixWorld;if(void 0!==_&&(null===y.boundingSphere&&y.computeBoundingSphere(),i.copy(y.boundingSphere),i.applyMatrix4(x),!1!==d.ray.intersectsSphere(i)&&(t.getInverse(x),e.copy(d.ray).applyMatrix4(t),null===y.boundingBox||!1!==e.intersectsBox(y.boundingBox))))if(y.isBufferGeometry){var b,M,w,E,T,S,C,O,R,A=y.index,L=y.attributes.position,P=y.attributes.uv,I=y.groups,N=y.drawRange;if(null!==A)if(Array.isArray(_))for(E=0,S=I.length;E<S;E++)for(R=_[(O=I[E]).materialIndex],T=Math.max(O.start,N.start),C=Math.min(O.start+O.count,N.start+N.count);T<C;T+=3)b=A.getX(T),M=A.getX(T+1),w=A.getX(T+2),(g=m(this,R,d,e,L,P,b,M,w))&&(g.faceIndex=Math.floor(T/3),v.push(g));else for(E=Math.max(0,N.start),S=Math.min(A.count,N.start+N.count);E<S;E+=3)b=A.getX(E),M=A.getX(E+1),w=A.getX(E+2),(g=m(this,_,d,e,L,P,b,M,w))&&(g.faceIndex=Math.floor(E/3),v.push(g));else if(void 0!==L)if(Array.isArray(_))for(E=0,S=I.length;E<S;E++)for(R=_[(O=I[E]).materialIndex],T=Math.max(O.start,N.start),C=Math.min(O.start+O.count,N.start+N.count);T<C;T+=3)(g=m(this,R,d,e,L,P,b=T,M=T+1,w=T+2))&&(g.faceIndex=Math.floor(T/3),v.push(g));else for(E=Math.max(0,N.start),S=Math.min(L.count,N.start+N.count);E<S;E+=3)(g=m(this,_,d,e,L,P,b=E,M=E+1,w=E+2))&&(g.faceIndex=Math.floor(E/3),v.push(g))}else if(y.isGeometry){var F,D,j,k,G=Array.isArray(_),U=y.vertices,z=y.faces,B=y.faceVertexUvs[0];B.length>0&&(k=B);for(var H=0,V=z.length;H<V;H++){var W=z[H],X=G?_[W.materialIndex]:_;if(void 0!==X){if(F=U[W.a],D=U[W.b],j=U[W.c],!0===X.morphTargets){var Y=y.morphTargets,q=this.morphTargetInfluences;n.set(0,0,0),r.set(0,0,0),o.set(0,0,0);for(var K=0,Z=Y.length;K<Z;K++){var $=q[K];if(0!==$){var J=Y[K].vertices;n.addScaledVector(a.subVectors(J[W.a],F),$),r.addScaledVector(s.subVectors(J[W.b],D),$),o.addScaledVector(h.subVectors(J[W.c],j),$)}}n.add(F),r.add(D),o.add(j),F=n,D=r,j=o}if(g=f(this,X,d,e,F,D,j,p)){if(k&&k[H]){var Q=k[H];c.copy(Q[0]),l.copy(Q[1]),u.copy(Q[2]),g.uv=an.getUV(p,F,D,j,c,l,u,new Ie)}g.face=W,g.faceIndex=H,v.push(g)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ln.prototype=Object.create(We.prototype),ln.prototype.constructor=ln,ln.prototype.isCubeTexture=!0,Object.defineProperty(ln.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),un.prototype=Object.create(We.prototype),un.prototype.constructor=un,un.prototype.isDataTexture3D=!0;var pn=new We,dn=new un,fn=new ln;function mn(){this.seq=[],this.map={}}var vn=[],gn=[],yn=new Float32Array(16),_n=new Float32Array(9),xn=new Float32Array(4);function bn(t,e,i){var n=t[0];if(n<=0||n>0)return t;var r=e*i,o=vn[r];if(void 0===o&&(o=new Float32Array(r),vn[r]=o),0!==e){n.toArray(o,0);for(var a=1,s=0;a!==e;++a)s+=i,t[a].toArray(o,s)}return o}function Mn(t,e){if(t.length!==e.length)return!1;for(var i=0,n=t.length;i<n;i++)if(t[i]!==e[i])return!1;return!0}function wn(t,e){for(var i=0,n=e.length;i<n;i++)t[i]=e[i]}function En(t,e){var i=gn[e];void 0===i&&(i=new Int32Array(e),gn[e]=i);for(var n=0;n!==e;++n)i[n]=t.allocTextureUnit();return i}function Tn(t,e){var i=this.cache;i[0]!==e&&(t.uniform1f(this.addr,e),i[0]=e)}function Sn(t,e){var i=this.cache;i[0]!==e&&(t.uniform1i(this.addr,e),i[0]=e)}function Cn(t,e){var i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Mn(i,e))return;t.uniform2fv(this.addr,e),wn(i,e)}}function On(t,e){var i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else if(void 0!==e.r)i[0]===e.r&&i[1]===e.g&&i[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b);else{if(Mn(i,e))return;t.uniform3fv(this.addr,e),wn(i,e)}}function Rn(t,e){var i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z&&i[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Mn(i,e))return;t.uniform4fv(this.addr,e),wn(i,e)}}function An(t,e){var i=this.cache,n=e.elements;if(void 0===n){if(Mn(i,e))return;t.uniformMatrix2fv(this.addr,!1,e),wn(i,e)}else{if(Mn(i,n))return;xn.set(n),t.uniformMatrix2fv(this.addr,!1,xn),wn(i,n)}}function Ln(t,e){var i=this.cache,n=e.elements;if(void 0===n){if(Mn(i,e))return;t.uniformMatrix3fv(this.addr,!1,e),wn(i,e)}else{if(Mn(i,n))return;_n.set(n),t.uniformMatrix3fv(this.addr,!1,_n),wn(i,n)}}function Pn(t,e){var i=this.cache,n=e.elements;if(void 0===n){if(Mn(i,e))return;t.uniformMatrix4fv(this.addr,!1,e),wn(i,e)}else{if(Mn(i,n))return;yn.set(n),t.uniformMatrix4fv(this.addr,!1,yn),wn(i,n)}}function In(t,e,i){var n=this.cache,r=i.allocTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture2D(e||pn,r)}function Nn(t,e,i){var n=this.cache,r=i.allocTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(e||dn,r)}function Fn(t,e,i){var n=this.cache,r=i.allocTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTextureCube(e||fn,r)}function Dn(t,e){var i=this.cache;Mn(i,e)||(t.uniform2iv(this.addr,e),wn(i,e))}function jn(t,e){var i=this.cache;Mn(i,e)||(t.uniform3iv(this.addr,e),wn(i,e))}function kn(t,e){var i=this.cache;Mn(i,e)||(t.uniform4iv(this.addr,e),wn(i,e))}function Gn(t,e){var i=this.cache;Mn(i,e)||(t.uniform1fv(this.addr,e),wn(i,e))}function Un(t,e){var i=this.cache;Mn(i,e)||(t.uniform1iv(this.addr,e),wn(i,e))}function zn(t,e){var i=this.cache,n=bn(e,this.size,2);Mn(i,n)||(t.uniform2fv(this.addr,n),this.updateCache(n))}function Bn(t,e){var i=this.cache,n=bn(e,this.size,3);Mn(i,n)||(t.uniform3fv(this.addr,n),this.updateCache(n))}function Hn(t,e){var i=this.cache,n=bn(e,this.size,4);Mn(i,n)||(t.uniform4fv(this.addr,n),this.updateCache(n))}function Vn(t,e){var i=this.cache,n=bn(e,this.size,4);Mn(i,n)||(t.uniformMatrix2fv(this.addr,!1,n),this.updateCache(n))}function Wn(t,e){var i=this.cache,n=bn(e,this.size,9);Mn(i,n)||(t.uniformMatrix3fv(this.addr,!1,n),this.updateCache(n))}function Xn(t,e){var i=this.cache,n=bn(e,this.size,16);Mn(i,n)||(t.uniformMatrix4fv(this.addr,!1,n),this.updateCache(n))}function Yn(t,e,i){var n=this.cache,r=e.length,o=En(i,r);!1===Mn(n,o)&&(t.uniform1iv(this.addr,o),wn(n,o));for(var a=0;a!==r;++a)i.setTexture2D(e[a]||pn,o[a])}function qn(t,e,i){var n=this.cache,r=e.length,o=En(i,r);!1===Mn(n,o)&&(t.uniform1iv(this.addr,o),wn(n,o));for(var a=0;a!==r;++a)i.setTextureCube(e[a]||fn,o[a])}function Kn(t,e,i){this.id=t,this.addr=i,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Tn;case 35664:return Cn;case 35665:return On;case 35666:return Rn;case 35674:return An;case 35675:return Ln;case 35676:return Pn;case 35678:case 36198:return In;case 35679:return Nn;case 35680:return Fn;case 5124:case 35670:return Sn;case 35667:case 35671:return Dn;case 35668:case 35672:return jn;case 35669:case 35673:return kn}}(e.type)}function Zn(t,e,i){this.id=t,this.addr=i,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Gn;case 35664:return zn;case 35665:return Bn;case 35666:return Hn;case 35674:return Vn;case 35675:return Wn;case 35676:return Xn;case 35678:return Yn;case 35680:return qn;case 5124:case 35670:return Un;case 35667:case 35671:return Dn;case 35668:case 35672:return jn;case 35669:case 35673:return kn}}(e.type)}function $n(t){this.id=t,mn.call(this)}Zn.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),wn(e,t)},$n.prototype.setValue=function(t,e,i){for(var n=this.seq,r=0,o=n.length;r!==o;++r){var a=n[r];a.setValue(t,e[a.id],i)}};var Jn=/([\w\d_]+)(\])?(\[|\.)?/g;function Qn(t,e){t.seq.push(e),t.map[e.id]=e}function tr(t,e,i){var n=t.name,r=n.length;for(Jn.lastIndex=0;;){var o=Jn.exec(n),a=Jn.lastIndex,s=o[1],h="]"===o[2],c=o[3];if(h&&(s|=0),void 0===c||"["===c&&a+2===r){Qn(i,void 0===c?new Kn(s,t,e):new Zn(s,t,e));break}var l=i.map[s];void 0===l&&Qn(i,l=new $n(s)),i=l}}function er(t,e,i){mn.call(this),this.renderer=i;for(var n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r=0;r<n;++r){var o=t.getActiveUniform(e,r);tr(o,t.getUniformLocation(e,o.name),this)}}function ir(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),!1===t.getShaderParameter(n,t.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(n)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(n),function(t){for(var e=t.split("\n"),i=0;i<e.length;i++)e[i]=i+1+": "+e[i];return e.join("\n")}(i)),n}er.prototype.setValue=function(t,e,i){var n=this.map[e];void 0!==n&&n.setValue(t,i,this.renderer)},er.prototype.setOptional=function(t,e,i){var n=e[i];void 0!==n&&this.setValue(t,i,n)},er.upload=function(t,e,i,n){for(var r=0,o=e.length;r!==o;++r){var a=e[r],s=i[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,n)}},er.seqWithValue=function(t,e){for(var i=[],n=0,r=t.length;n!==r;++n){var o=t[n];o.id in e&&i.push(o)}return i};var nr=0;function rr(t){switch(t){case be:return["Linear","( value )"];case Me:return["sRGB","( value )"];case Ee:return["RGBE","( value )"];case Te:return["RGBM","( value, 7.0 )"];case Se:return["RGBM","( value, 16.0 )"];case Ce:return["RGBD","( value, 256.0 )"];case we:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function or(t,e){var i=rr(e);return"vec4 "+t+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function ar(t){return""!==t}function sr(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function hr(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function cr(t){return t.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function(t,e){var i=ni[e];if(void 0===i)throw new Error("Can not resolve #include <"+e+">");return cr(i)})}function lr(t){return t.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(t,e,i,n){for(var r="",o=parseInt(e);o<parseInt(i);o++)r+=n.replace(/\[ i \]/g,"[ "+o+" ]");return r})}function ur(t,e,i,n,r,o,a){var s=t.context,h=n.defines,c=r.vertexShader,l=r.fragmentShader,u="SHADOWMAP_TYPE_BASIC";o.shadowMapType===_?u="SHADOWMAP_TYPE_PCF":o.shadowMapType===x&&(u="SHADOWMAP_TYPE_PCF_SOFT");var p="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(n.envMap.mapping){case ut:case pt:p="ENVMAP_TYPE_CUBE";break;case vt:case gt:p="ENVMAP_TYPE_CUBE_UV";break;case dt:case ft:p="ENVMAP_TYPE_EQUIREC";break;case mt:p="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case pt:case ft:d="ENVMAP_MODE_REFRACTION"}switch(n.combine){case nt:f="ENVMAP_BLENDING_MULTIPLY";break;case rt:f="ENVMAP_BLENDING_MIX";break;case ot:f="ENVMAP_BLENDING_ADD"}}var m,v,g,y,b,M=t.gammaFactor>0?t.gammaFactor:1,w=a.isWebGL2?"":function(t,e,i){return[(t=t||{}).derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap&&!e.objectSpaceNormalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&i.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&i.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&i.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ar).join("\n")}(n.extensions,o,e),E=function(t){var e=[];for(var i in t){var n=t[i];!1!==n&&e.push("#define "+i+" "+n)}return e.join("\n")}(h),T=s.createProgram();if(n.isRawShaderMaterial?((m=[E].filter(ar).join("\n")).length>0&&(m+="\n"),(v=[w,E].filter(ar).join("\n")).length>0&&(v+="\n")):(m=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,E,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+M,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+u:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ar).join("\n"),v=[w,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,E,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+M,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+p:"",o.envMap?"#define "+d:"",o.envMap?"#define "+f:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+u:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||e.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==at?"#define TONE_MAPPING":"",o.toneMapping!==at?ni.tonemapping_pars_fragment:"",o.toneMapping!==at?function(t,e){var i;switch(e){case st:i="Linear";break;case ht:i="Reinhard";break;case ct:i="Uncharted2";break;case lt:i="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.matcapEncoding||o.envMapEncoding||o.emissiveMapEncoding?ni.encodings_pars_fragment:"",o.mapEncoding?or("mapTexelToLinear",o.mapEncoding):"",o.matcapEncoding?or("matcapTexelToLinear",o.matcapEncoding):"",o.envMapEncoding?or("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?or("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?(g="linearToOutputTexel",y=o.outputEncoding,b=rr(y),"vec4 "+g+"( vec4 value ) { return LinearTo"+b[0]+b[1]+"; }"):"",o.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(ar).join("\n")),c=hr(c=sr(c=cr(c),o),o),l=hr(l=sr(l=cr(l),o),o),c=lr(c),l=lr(l),a.isWebGL2&&!n.isRawShaderMaterial){var S=!1,C=/^\s*#version\s+300\s+es\s*\n/;n.isShaderMaterial&&null!==c.match(C)&&null!==l.match(C)&&(S=!0,c=c.replace(C,""),l=l.replace(C,"")),m=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,v=["#version 300 es\n","#define varying in",S?"":"out highp vec4 pc_fragColor;",S?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v}var O=m+c,R=v+l,A=ir(s,s.VERTEX_SHADER,O),L=ir(s,s.FRAGMENT_SHADER,R);s.attachShader(T,A),s.attachShader(T,L),void 0!==n.index0AttributeName?s.bindAttribLocation(T,0,n.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(T,0,"position"),s.linkProgram(T);var P,I,N=s.getProgramInfoLog(T).trim(),F=s.getShaderInfoLog(A).trim(),D=s.getShaderInfoLog(L).trim(),j=!0,k=!0;return!1===s.getProgramParameter(T,s.LINK_STATUS)?(j=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(T,s.VALIDATE_STATUS),"gl.getProgramInfoLog",N,F,D)):""!==N?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",N):""!==F&&""!==D||(k=!1),k&&(this.diagnostics={runnable:j,material:n,programLog:N,vertexShader:{log:F,prefix:m},fragmentShader:{log:D,prefix:v}}),s.deleteShader(A),s.deleteShader(L),this.getUniforms=function(){return void 0===P&&(P=new er(s,T,t)),P},this.getAttributes=function(){return void 0===I&&(I=function(t,e){for(var i={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),r=0;r<n;r++){var o=t.getActiveAttrib(e,r).name;i[o]=t.getAttribLocation(e,o)}return i}(s,T)),I},this.destroy=function(){s.deleteProgram(T),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=r.name,this.id=nr++,this.code=i,this.usedTimes=1,this.program=T,this.vertexShader=A,this.fragmentShader=L,this}function pr(t,e,i){var n=[],r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},o=["precision","supportsVertexTextures","map","mapEncoding","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(t,e){var i;return t?t.isTexture?i=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),i=t.texture.encoding):i=be,i===be&&e&&(i=we),i}this.getParameters=function(e,n,o,s,h,c,l){var u=r[e.type],p=l.isSkinnedMesh?function(t){var e=t.skeleton.bones;if(i.floatVertexTextures)return 1024;var n=i.maxVertexUniforms,r=Math.floor((n-20)/4),o=Math.min(r,e.length);return o<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+o+"."),0):o}(l):0,d=i.precision;null!==e.precision&&(d=i.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",d,"instead.");var f=t.getRenderTarget();return{shaderID:u,precision:d,supportsVertexTextures:i.vertexTextures,outputEncoding:a(f?f.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:a(e.map,t.gammaInput),matcap:!!e.matcap,matcapEncoding:a(e.matcap,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:a(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===vt||e.envMap.mapping===gt),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:a(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:e.normalMapType===Le,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexColors:e.vertexColors,fog:!!s,useFog:e.fog,fogExp:s&&s.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:i.logarithmicDepthBuffer,skinning:e.skinning&&p>0,maxBones:p,useVertexTexture:i.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:n.directional.length,numPointLights:n.point.length,numSpotLights:n.spot.length,numRectAreaLights:n.rectArea.length,numHemiLights:n.hemi.length,numClippingPlanes:h,numClipIntersection:c,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&l.receiveShadow&&o.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===w,flipSided:e.side===M,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,i){var n=[];if(i.shaderID?n.push(i.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);for(var a=0;a<o.length;a++)n.push(i[o[a]]);return n.push(e.onBeforeCompile.toString()),n.push(t.gammaOutput),n.join()},this.acquireProgram=function(r,o,a,s){for(var h,c=0,l=n.length;c<l;c++){var u=n[c];if(u.code===s){++(h=u).usedTimes;break}}return void 0===h&&(h=new ur(t,e,s,r,o,a,i),n.push(h)),h},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=n.indexOf(t);n[e]=n[n.length-1],n.pop(),t.destroy()}},this.programs=n}function dr(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program&&e.program&&t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function fr(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function mr(){var t={};return{get:function(e,i){var n=e.id+","+i.id,r=t[n];return void 0===r&&(r=new function(){var t=[],e=0,i=[],n=[];return{opaque:i,transparent:n,init:function(){e=0,i.length=0,n.length=0},push:function(r,o,a,s,h){var c=t[e];void 0===c?(c={id:r.id,object:r,geometry:o,material:a,program:a.program,renderOrder:r.renderOrder,z:s,group:h},t[e]=c):(c.id=r.id,c.object=r,c.geometry=o,c.material=a,c.program=a.program,c.renderOrder=r.renderOrder,c.z=s,c.group=h),(!0===a.transparent?n:i).push(c),e++},sort:function(){i.length>1&&i.sort(dr),n.length>1&&n.sort(fr)}}},t[n]=r),r},dispose:function(){t={}}}}var vr,gr,yr,_r,xr,br,Mr=0;function wr(){var t=new function(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var i;switch(e.type){case"DirectionalLight":i={direction:new De,color:new ai,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"SpotLight":i={position:new De,direction:new De,color:new ai,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"PointLight":i={position:new De,color:new ai,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ie,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":i={direction:new De,skyColor:new ai,groundColor:new ai};break;case"RectAreaLight":i={color:new ai,position:new De,halfWidth:new De,halfHeight:new De}}return t[e.id]=i,i}}},e={id:Mr++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=new De,n=new Ne,r=new Ne;return{setup:function(o,a,s){for(var h=0,c=0,l=0,u=0,p=0,d=0,f=0,m=0,v=s.matrixWorldInverse,g=0,y=o.length;g<y;g++){var _=o[g],x=_.color,b=_.intensity,M=_.distance,w=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)h+=x.r*b,c+=x.g*b,l+=x.b*b;else if(_.isDirectionalLight){if((T=t.get(_)).color.copy(_.color).multiplyScalar(_.intensity),T.direction.setFromMatrixPosition(_.matrixWorld),i.setFromMatrixPosition(_.target.matrixWorld),T.direction.sub(i),T.direction.transformDirection(v),T.shadow=_.castShadow,_.castShadow){var E=_.shadow;T.shadowBias=E.bias,T.shadowRadius=E.radius,T.shadowMapSize=E.mapSize}e.directionalShadowMap[u]=w,e.directionalShadowMatrix[u]=_.shadow.matrix,e.directional[u]=T,u++}else if(_.isSpotLight)(T=t.get(_)).position.setFromMatrixPosition(_.matrixWorld),T.position.applyMatrix4(v),T.color.copy(x).multiplyScalar(b),T.distance=M,T.direction.setFromMatrixPosition(_.matrixWorld),i.setFromMatrixPosition(_.target.matrixWorld),T.direction.sub(i),T.direction.transformDirection(v),T.coneCos=Math.cos(_.angle),T.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),T.decay=_.decay,T.shadow=_.castShadow,_.castShadow&&(E=_.shadow,T.shadowBias=E.bias,T.shadowRadius=E.radius,T.shadowMapSize=E.mapSize),e.spotShadowMap[d]=w,e.spotShadowMatrix[d]=_.shadow.matrix,e.spot[d]=T,d++;else if(_.isRectAreaLight)(T=t.get(_)).color.copy(x).multiplyScalar(b),T.position.setFromMatrixPosition(_.matrixWorld),T.position.applyMatrix4(v),r.identity(),n.copy(_.matrixWorld),n.premultiply(v),r.extractRotation(n),T.halfWidth.set(.5*_.width,0,0),T.halfHeight.set(0,.5*_.height,0),T.halfWidth.applyMatrix4(r),T.halfHeight.applyMatrix4(r),e.rectArea[f]=T,f++;else if(_.isPointLight)(T=t.get(_)).position.setFromMatrixPosition(_.matrixWorld),T.position.applyMatrix4(v),T.color.copy(_.color).multiplyScalar(_.intensity),T.distance=_.distance,T.decay=_.decay,T.shadow=_.castShadow,_.castShadow&&(E=_.shadow,T.shadowBias=E.bias,T.shadowRadius=E.radius,T.shadowMapSize=E.mapSize,T.shadowCameraNear=E.camera.near,T.shadowCameraFar=E.camera.far),e.pointShadowMap[p]=w,e.pointShadowMatrix[p]=_.shadow.matrix,e.point[p]=T,p++;else if(_.isHemisphereLight){var T;(T=t.get(_)).direction.setFromMatrixPosition(_.matrixWorld),T.direction.transformDirection(v),T.direction.normalize(),T.skyColor.copy(_.color).multiplyScalar(b),T.groundColor.copy(_.groundColor).multiplyScalar(b),e.hemi[m]=T,m++}}e.ambient[0]=h,e.ambient[1]=c,e.ambient[2]=l,e.directional.length=u,e.spot.length=d,e.rectArea.length=f,e.point.length=p,e.hemi.length=m,e.hash.stateID=e.id,e.hash.directionalLength=u,e.hash.pointLength=p,e.hash.spotLength=d,e.hash.rectAreaLength=f,e.hash.hemiLength=m,e.hash.shadowsLength=a.length},state:e}}function Er(){var t=new wr,e=[],i=[];return{init:function(){e.length=0,i.length=0},state:{lightsArray:e,shadowsArray:i,lights:t},setupLights:function(n){t.setup(e,i,n)},pushLight:function(t){e.push(t)},pushShadow:function(t){i.push(t)}}}function Tr(t){nn.call(this),this.type="MeshDepthMaterial",this.depthPacking=Oe,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function Sr(t){nn.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new De,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}function Cr(t,e,i){for(var n=new Qe,r=new Ne,o=new Ie,a=new Ie(i,i),s=new De,h=new De,c=1,l=2,u=1+(c|l),p=new Array(u),d=new Array(u),f={},m={0:M,1:b,2:w},v=[new De(1,0,0),new De(-1,0,0),new De(0,0,1),new De(0,0,-1),new De(0,1,0),new De(0,-1,0)],g=[new De(0,1,0),new De(0,1,0),new De(0,1,0),new De(0,1,0),new De(0,0,1),new De(0,0,-1)],y=[new Xe,new Xe,new Xe,new Xe,new Xe,new Xe],x=0;x!==u;++x){var E=0!=(x&c),T=0!=(x&l),S=new Tr({depthPacking:Re,morphTargets:E,skinning:T});p[x]=S;var C=new Sr({morphTargets:E,skinning:T});d[x]=C}var O=this;function R(e,i,n,r,o,a){var s=e.geometry,h=null,u=p,v=e.customDepthMaterial;if(n&&(u=d,v=e.customDistanceMaterial),v)h=v;else{var g=!1;i.morphTargets&&(s&&s.isBufferGeometry?g=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(g=s.morphTargets&&s.morphTargets.length>0)),e.isSkinnedMesh&&!1===i.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var y=e.isSkinnedMesh&&i.skinning,_=0;g&&(_|=c),y&&(_|=l),h=u[_]}if(t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){var x=h.uuid,b=i.uuid,M=f[x];void 0===M&&(M={},f[x]=M);var w=M[b];void 0===w&&(w=h.clone(),M[b]=w),h=w}return h.visible=i.visible,h.wireframe=i.wireframe,h.side=null!=i.shadowSide?i.shadowSide:m[i.side],h.clipShadows=i.clipShadows,h.clippingPlanes=i.clippingPlanes,h.clipIntersection=i.clipIntersection,h.wireframeLinewidth=i.wireframeLinewidth,h.linewidth=i.linewidth,n&&h.isMeshDistanceMaterial&&(h.referencePosition.copy(r),h.nearDistance=o,h.farDistance=a),h}function A(i,r,o,a){if(!1!==i.visible){if(i.layers.test(r.layers)&&(i.isMesh||i.isLine||i.isPoints)&&i.castShadow&&(!i.frustumCulled||n.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,i.matrixWorld);var s=e.update(i),c=i.material;if(Array.isArray(c))for(var l=s.groups,u=0,p=l.length;u<p;u++){var d=l[u],f=c[d.materialIndex];if(f&&f.visible){var m=R(i,f,a,h,o.near,o.far);t.renderBufferDirect(o,null,s,m,i,d)}}else if(c.visible){m=R(i,c,a,h,o.near,o.far);t.renderBufferDirect(o,null,s,m,i,null)}}for(var v=i.children,g=0,y=v.length;g<y;g++)A(v[g],r,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=_,this.render=function(e,i,c){if(!1!==O.enabled&&(!1!==O.autoUpdate||!1!==O.needsUpdate)&&0!==e.length){var l,u=t.context,p=t.state;p.disable(u.BLEND),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(var d=0,f=e.length;d<f;d++){var m=e[d],_=m.shadow,x=m&&m.isPointLight;if(void 0!==_){var b=_.camera;if(o.copy(_.mapSize),o.min(a),x){var M=o.x,w=o.y;y[0].set(2*M,w,M,w),y[1].set(0,w,M,w),y[2].set(3*M,w,M,w),y[3].set(M,w,M,w),y[4].set(3*M,0,M,w),y[5].set(M,0,M,w),o.x*=4,o.y*=2}if(null===_.map){var E={minFilter:bt,magFilter:bt,format:zt};_.map=new Ye(o.x,o.y,E),_.map.texture.name=m.name+".shadowMap",b.updateProjectionMatrix()}_.isSpotLightShadow&&_.update(m);var T=_.map,S=_.matrix;h.setFromMatrixPosition(m.matrixWorld),b.position.copy(h),x?(l=6,S.makeTranslation(-h.x,-h.y,-h.z)):(l=1,s.setFromMatrixPosition(m.target.matrixWorld),b.lookAt(s),b.updateMatrixWorld(),S.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),S.multiply(b.projectionMatrix),S.multiply(b.matrixWorldInverse)),t.setRenderTarget(T),t.clear();for(var C=0;C<l;C++){if(x){s.copy(b.position),s.add(v[C]),b.up.copy(g[C]),b.lookAt(s),b.updateMatrixWorld();var R=y[C];p.viewport(R)}r.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse),n.setFromMatrix(r),A(i,c,b,x)}}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}O.needsUpdate=!1}}}function Or(t,e,i,n,r,o,a){var s,h={};function c(t,e){if(t.width>e||t.height>e){if("data"in t)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+t.width+"x"+t.height+").");var i=e/Math.max(t.width,t.height),n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return n.width=Math.floor(t.width*i),n.height=Math.floor(t.height*i),n.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+n.width+"x"+n.height),n}return t}function l(t){return Pe.isPowerOfTwo(t.width)&&Pe.isPowerOfTwo(t.height)}function u(t,e){return t.generateMipmaps&&e&&t.minFilter!==bt&&t.minFilter!==Et}function p(e,i,r,o){t.generateMipmap(e),n.get(i).__maxMipLevel=Math.log(Math.max(r,o))*Math.LOG2E}function d(e,i){if(!r.isWebGL2)return e;if(e===t.RED){if(i===t.FLOAT)return t.R32F;if(i===t.HALF_FLOAT)return t.R16F;if(i===t.UNSIGNED_BYTE)return t.R8}if(e===t.RGB){if(i===t.FLOAT)return t.RGB32F;if(i===t.HALF_FLOAT)return t.RGB16F;if(i===t.UNSIGNED_BYTE)return t.RGB8}if(e===t.RGBA){if(i===t.FLOAT)return t.RGBA32F;if(i===t.HALF_FLOAT)return t.RGBA16F;if(i===t.UNSIGNED_BYTE)return t.RGBA8}return e}function f(e){return e===bt||e===Mt||e===wt?t.NEAREST:t.LINEAR}function m(e){var i=e.target;i.removeEventListener("dispose",m),function(e){var i=n.get(e);if(e.image&&i.__image__webglTextureCube)t.deleteTexture(i.__image__webglTextureCube);else{if(void 0===i.__webglInit)return;t.deleteTexture(i.__webglTexture)}n.remove(e)}(i),i.isVideoTexture&&delete h[i.id],a.memory.textures--}function v(e){var i=e.target;i.removeEventListener("dispose",v),function(e){var i=n.get(e),r=n.get(e.texture);if(!e)return;void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLRenderTargetCube)for(var o=0;o<6;o++)t.deleteFramebuffer(i.__webglFramebuffer[o]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[o]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer);n.remove(e.texture),n.remove(e)}(i),a.memory.textures--}function g(e,r){var o=n.get(e);if(e.isVideoTexture&&function(t){var e=t.id,i=a.render.frame;h[e]!==i&&(h[e]=i,t.update())}(e),e.version>0&&o.__version!==e.version){var s=e.image;if(void 0===s)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==s.complete)return void _(o,e,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.activeTexture(t.TEXTURE0+r),i.bindTexture(t.TEXTURE_2D,o.__webglTexture)}function y(i,a,s){var h;if(s?(t.texParameteri(i,t.TEXTURE_WRAP_S,o.convert(a.wrapS)),t.texParameteri(i,t.TEXTURE_WRAP_T,o.convert(a.wrapT)),t.texParameteri(i,t.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),t.texParameteri(i,t.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(t.texParameteri(i,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(i,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),a.wrapS===_t&&a.wrapT===_t||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(i,t.TEXTURE_MAG_FILTER,f(a.magFilter)),t.texParameteri(i,t.TEXTURE_MIN_FILTER,f(a.minFilter)),a.minFilter!==bt&&a.minFilter!==Et&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),h=e.get("EXT_texture_filter_anisotropic")){if(a.type===It&&null===e.get("OES_texture_float_linear"))return;if(a.type===Nt&&null===(r.isWebGL2||e.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||n.get(a).__currentAnisotropy)&&(t.texParameterf(i,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),n.get(a).__currentAnisotropy=a.anisotropy)}}function _(e,n,h){var f;f=n.isDataTexture3D?t.TEXTURE_3D:t.TEXTURE_2D,void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",m),e.__webglTexture=t.createTexture(),a.memory.textures++),i.activeTexture(t.TEXTURE0+h),i.bindTexture(f,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,n.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,n.unpackAlignment);var v=c(n.image,r.maxTextureSize);(function(t){return!r.isWebGL2&&(t.wrapS!==_t||t.wrapT!==_t||t.minFilter!==bt&&t.minFilter!==Et)})(n)&&!1===l(v)&&(v=function(t){return t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageBitmap?(void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),s.width=Pe.floorPowerOfTwo(t.width),s.height=Pe.floorPowerOfTwo(t.height),s.getContext("2d").drawImage(t,0,0,s.width,s.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+s.width+"x"+s.height),s):t}(v));var g=l(v),_=o.convert(n.format),x=o.convert(n.type),b=d(_,x);y(f,n,g);var M,w=n.mipmaps;if(n.isDepthTexture){if(b=t.DEPTH_COMPONENT,n.type===It){if(!r.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");b=t.DEPTH_COMPONENT32F}else r.isWebGL2&&(b=t.DEPTH_COMPONENT16);n.format===Vt&&b===t.DEPTH_COMPONENT&&n.type!==At&&n.type!==Pt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=At,x=o.convert(n.type)),n.format===Wt&&(b=t.DEPTH_STENCIL,n.type!==kt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=kt,x=o.convert(n.type))),i.texImage2D(t.TEXTURE_2D,0,b,v.width,v.height,0,_,x,null)}else if(n.isDataTexture)if(w.length>0&&g){for(var E=0,T=w.length;E<T;E++)M=w[E],i.texImage2D(t.TEXTURE_2D,E,b,M.width,M.height,0,_,x,M.data);n.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else i.texImage2D(t.TEXTURE_2D,0,b,v.width,v.height,0,_,x,v.data),e.__maxMipLevel=0;else if(n.isCompressedTexture){for(E=0,T=w.length;E<T;E++)M=w[E],n.format!==zt&&n.format!==Ut?i.getCompressedTextureFormats().indexOf(_)>-1?i.compressedTexImage2D(t.TEXTURE_2D,E,b,M.width,M.height,0,M.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(t.TEXTURE_2D,E,b,M.width,M.height,0,_,x,M.data);e.__maxMipLevel=w.length-1}else if(n.isDataTexture3D)i.texImage3D(t.TEXTURE_3D,0,b,v.width,v.height,v.depth,0,_,x,v.data),e.__maxMipLevel=0;else if(w.length>0&&g){for(E=0,T=w.length;E<T;E++)M=w[E],i.texImage2D(t.TEXTURE_2D,E,b,_,x,M);n.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else i.texImage2D(t.TEXTURE_2D,0,b,_,x,v),e.__maxMipLevel=0;u(n,g)&&p(t.TEXTURE_2D,n,v.width,v.height),e.__version=n.version,n.onUpdate&&n.onUpdate(n)}function x(e,r,a,s){var h=o.convert(r.texture.format),c=o.convert(r.texture.type),l=d(h,c);i.texImage2D(s,0,l,r.width,r.height,0,h,c,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,a,s,n.get(r.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function b(e,i){t.bindRenderbuffer(t.RENDERBUFFER,e),i.depthBuffer&&!i.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i.width,i.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):i.depthBuffer&&i.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.width,i.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,i.width,i.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}function M(e){var i=n.get(e),r=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,i){if(i&&i.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),g(i.depthTexture,0);var r=n.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===Vt)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,r,0);else{if(i.depthTexture.format!==Wt)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,r,0)}}(i.__webglFramebuffer,e)}else if(r){i.__webglDepthbuffer=[];for(var o=0;o<6;o++)t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=t.createRenderbuffer(),b(i.__webglDepthbuffer[o],e)}else t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),b(i.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}this.setTexture2D=g,this.setTexture3D=function(e,r){var o=n.get(e);e.version>0&&o.__version!==e.version?_(o,e,r):(i.activeTexture(t.TEXTURE0+r),i.bindTexture(t.TEXTURE_3D,o.__webglTexture))},this.setTextureCube=function(e,s){var h=n.get(e);if(6===e.image.length)if(e.version>0&&h.__version!==e.version){h.__image__webglTextureCube||(e.addEventListener("dispose",m),h.__image__webglTextureCube=t.createTexture(),a.memory.textures++),i.activeTexture(t.TEXTURE0+s),i.bindTexture(t.TEXTURE_CUBE_MAP,h.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var f=e&&e.isCompressedTexture,v=e.image[0]&&e.image[0].isDataTexture,g=[],_=0;_<6;_++)g[_]=f||v?v?e.image[_].image:e.image[_]:c(e.image[_],r.maxCubemapSize);var x=g[0],b=l(x),M=o.convert(e.format),w=o.convert(e.type),E=d(M,w);for(y(t.TEXTURE_CUBE_MAP,e,b),_=0;_<6;_++)if(f)for(var T,S=g[_].mipmaps,C=0,O=S.length;C<O;C++)T=S[C],e.format!==zt&&e.format!==Ut?i.getCompressedTextureFormats().indexOf(M)>-1?i.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_,C,E,T.width,T.height,0,T.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_,C,E,T.width,T.height,0,M,w,T.data);else v?i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_,0,E,g[_].width,g[_].height,0,M,w,g[_].data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_,0,E,M,w,g[_]);h.__maxMipLevel=f?S.length-1:0,u(e,b)&&p(t.TEXTURE_CUBE_MAP,e,x.width,x.height),h.__version=e.version,e.onUpdate&&e.onUpdate(e)}else i.activeTexture(t.TEXTURE0+s),i.bindTexture(t.TEXTURE_CUBE_MAP,h.__image__webglTextureCube)},this.setTextureCubeDynamic=function(e,r){i.activeTexture(t.TEXTURE0+r),i.bindTexture(t.TEXTURE_CUBE_MAP,n.get(e).__webglTexture)},this.setupRenderTarget=function(e){var r=n.get(e),o=n.get(e.texture);e.addEventListener("dispose",v),o.__webglTexture=t.createTexture(),a.memory.textures++;var s=!0===e.isWebGLRenderTargetCube,h=l(e);if(s){r.__webglFramebuffer=[];for(var c=0;c<6;c++)r.__webglFramebuffer[c]=t.createFramebuffer()}else r.__webglFramebuffer=t.createFramebuffer();if(s){for(i.bindTexture(t.TEXTURE_CUBE_MAP,o.__webglTexture),y(t.TEXTURE_CUBE_MAP,e.texture,h),c=0;c<6;c++)x(r.__webglFramebuffer[c],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+c);u(e.texture,h)&&p(t.TEXTURE_CUBE_MAP,e.texture,e.width,e.height),i.bindTexture(t.TEXTURE_CUBE_MAP,null)}else i.bindTexture(t.TEXTURE_2D,o.__webglTexture),y(t.TEXTURE_2D,e.texture,h),x(r.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),u(e.texture,h)&&p(t.TEXTURE_2D,e.texture,e.width,e.height),i.bindTexture(t.TEXTURE_2D,null);e.depthBuffer&&M(e)},this.updateRenderTargetMipmap=function(e){var r=e.texture;if(u(r,l(e))){var o=e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,a=n.get(r).__webglTexture;i.bindTexture(o,a),p(o,r,e.width,e.height),i.bindTexture(o,null)}}}function Rr(){xi.call(this),this.type="Group"}function Ar(){xi.call(this),this.type="Camera",this.matrixWorldInverse=new Ne,this.projectionMatrix=new Ne,this.projectionMatrixInverse=new Ne}function Lr(t,e,i,n){Ar.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Pr(t){Lr.call(this),this.cameras=t||[]}function Ir(t){var e=this,i=null,n=null,r=null,o=[],a=new Ne,s=new Ne,h="stage";"undefined"!=typeof window&&"VRFrameData"in window&&(n=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",y,!1));var c=new Ne,l=new Fe,u=new De,p=new Lr;p.bounds=new Xe(0,0,.5,1),p.layers.enable(1);var d=new Lr;d.bounds=new Xe(.5,0,.5,1),d.layers.enable(2);var f,m,v=new Pr([p,d]);function g(){return null!==i&&!0===i.isPresenting}function y(){if(g()){var n=i.getEyeParameters("left"),r=n.renderWidth,o=n.renderHeight;m=t.getPixelRatio(),f=t.getSize(),t.setDrawingBufferSize(2*r,o,1),b.start()}else e.enabled&&t.setDrawingBufferSize(f.width,f.height,m),b.stop()}v.layers.enable(1),v.layers.enable(2);var _=[];function x(t){for(var e=navigator.getGamepads&&navigator.getGamepads(),i=0,n=0,r=e.length;i<r;i++){var o=e[i];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))){if(n===t)return o;n++}}}this.enabled=!1,this.getController=function(t){var e=o[t];return void 0===e&&((e=new Rr).matrixAutoUpdate=!1,e.visible=!1,o[t]=e),e},this.getDevice=function(){return i},this.setDevice=function(t){void 0!==t&&(i=t),b.setContext(t)},this.setFrameOfReferenceType=function(t){h=t},this.setPoseTarget=function(t){void 0!==t&&(r=t)},this.getCamera=function(t){var e="stage"===h?1.6:0;if(null===i)return t.position.set(0,e,0),t;if(i.depthNear=t.near,i.depthFar=t.far,i.getFrameData(n),"stage"===h){var f=i.stageParameters;f?a.fromArray(f.sittingToStandingTransform):a.makeTranslation(0,e,0)}var m=n.pose,g=null!==r?r:t;if(g.matrix.copy(a),g.matrix.decompose(g.position,g.quaternion,g.scale),null!==m.orientation&&(l.fromArray(m.orientation),g.quaternion.multiply(l)),null!==m.position&&(l.setFromRotationMatrix(a),u.fromArray(m.position),u.applyQuaternion(l),g.position.add(u)),g.updateMatrixWorld(),!1===i.isPresenting)return t;p.near=t.near,d.near=t.near,p.far=t.far,d.far=t.far,v.matrixWorld.copy(t.matrixWorld),v.matrixWorldInverse.copy(t.matrixWorldInverse),p.matrixWorldInverse.fromArray(n.leftViewMatrix),d.matrixWorldInverse.fromArray(n.rightViewMatrix),s.getInverse(a),"stage"===h&&(p.matrixWorldInverse.multiply(s),d.matrixWorldInverse.multiply(s));var y=g.parent;null!==y&&(c.getInverse(y.matrixWorld),p.matrixWorldInverse.multiply(c),d.matrixWorldInverse.multiply(c)),p.matrixWorld.getInverse(p.matrixWorldInverse),d.matrixWorld.getInverse(d.matrixWorldInverse),p.projectionMatrix.fromArray(n.leftProjectionMatrix),d.projectionMatrix.fromArray(n.rightProjectionMatrix),v.projectionMatrix.copy(p.projectionMatrix);var b=i.getLayers();if(b.length){var M=b[0];null!==M.leftBounds&&4===M.leftBounds.length&&p.bounds.fromArray(M.leftBounds),null!==M.rightBounds&&4===M.rightBounds.length&&d.bounds.fromArray(M.rightBounds)}return function(){for(var t=0;t<o.length;t++){var e=o[t],i=x(t);if(void 0!==i&&void 0!==i.pose){if(null===i.pose)return;var n=i.pose;!1===n.hasPosition&&e.position.set(.2,-.6,-.05),null!==n.position&&e.position.fromArray(n.position),null!==n.orientation&&e.quaternion.fromArray(n.orientation),e.matrix.compose(e.position,e.quaternion,e.scale),e.matrix.premultiply(a),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0,e.visible=!0;var r="Daydream Controller"===i.id?0:1;_[t]!==i.buttons[r].pressed&&(_[t]=i.buttons[r].pressed,!0===_[t]?e.dispatchEvent({type:"selectstart"}):(e.dispatchEvent({type:"selectend"}),e.dispatchEvent({type:"select"})))}else e.visible=!1}}(),v},this.getStandingMatrix=function(){return a},this.isPresenting=g;var b=new li;this.setAnimationLoop=function(t){b.setAnimationLoop(t)},this.submitFrame=function(){g()&&i.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",y)}}function Nr(t){console.log("THREE.WebGLRenderer",m);var e=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),i=void 0!==t.context?t.context:null,n=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,h=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,c=void 0!==t.powerPreference?t.powerPreference:"default",l=null,u=null;this.domElement=e,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=st,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,d,f,_,x,E,T,S,nt,rt,ot,at,ht,ct,lt,ut,pt,dt,ft=this,mt=!1,vt=null,gt=null,ve=null,ge=-1,be={geometry:null,program:null,wireframe:!1},Me=null,we=null,Ee=new Xe,Te=new Xe,Se=null,Ce=0,Oe=e.width,Re=e.height,Ae=1,Le=new Xe(0,0,Oe,Re),Ie=new Xe(0,0,Oe,Re),Fe=!1,ke=new Qe,Ge=new function(){var t=this,e=null,i=0,n=!1,r=!1,o=new Je,a=new je,s={value:null,needsUpdate:!1};function h(){s.value!==e&&(s.value=e,s.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function c(e,i,n,r){var h=null!==e?e.length:0,c=null;if(0!==h){if(c=s.value,!0!==r||null===c){var l=n+4*h,u=i.matrixWorldInverse;a.getNormalMatrix(u),(null===c||c.length<l)&&(c=new Float32Array(l));for(var p=0,d=n;p!==h;++p,d+=4)o.copy(e[p]).applyMatrix4(u,a),o.normal.toArray(c,d),c[d+3]=o.constant}s.value=c,s.needsUpdate=!0}return t.numPlanes=h,c}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(t,r,o){var a=0!==t.length||r||0!==i||n;return n=r,e=c(t,o,0),i=t.length,a},this.beginShadows=function(){r=!0,c(null)},this.endShadows=function(){r=!1,h()},this.setState=function(t,o,a,l,u,p){if(!n||null===t||0===t.length||r&&!a)r?c(null):h();else{var d=r?0:i,f=4*d,m=u.clippingState||null;s.value=m,m=c(t,l,f,p);for(var v=0;v!==f;++v)m[v]=e[v];u.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=d}}},Ue=!1,ze=!1,Be=new Ne,He=new De;function Ve(){return null===gt?Ae:1}try{var We={alpha:n,depth:r,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:h,powerPreference:c};if(e.addEventListener("webglcontextlost",$e,!1),e.addEventListener("webglcontextrestored",ti,!1),null===(p=i||e.getContext("webgl",We)||e.getContext("experimental-webgl",We)))throw null!==e.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){console.error("THREE.WebGLRenderer: "+t.message)}function Ye(){d=new function(t){var e={};return{get:function(i){if(void 0!==e[i])return e[i];var n;switch(i){case"WEBGL_depth_texture":n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=t.getExtension(i)}return null===n&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),e[i]=n,n}}}(p),(f=new function(t,e,i){var n;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,a=void 0!==i.precision?i.precision:"highp",s=r(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var h=!0===i.logarithmicDepthBuffer,c=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),l=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),u=t.getParameter(t.MAX_TEXTURE_SIZE),p=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),d=t.getParameter(t.MAX_VERTEX_ATTRIBS),f=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),m=t.getParameter(t.MAX_VARYING_VECTORS),v=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),g=l>0,y=o||!!e.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==n)return n;var i=e.get("EXT_texture_filter_anisotropic");return n=null!==i?t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:h,maxTextures:c,maxVertexTextures:l,maxTextureSize:u,maxCubemapSize:p,maxAttributes:d,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y}}(p,d,t)).isWebGL2||(d.get("WEBGL_depth_texture"),d.get("OES_texture_float"),d.get("OES_texture_half_float"),d.get("OES_texture_half_float_linear"),d.get("OES_standard_derivatives"),d.get("OES_element_index_uint"),d.get("ANGLE_instanced_arrays")),d.get("OES_texture_float_linear"),dt=new function(t,e,i){return{convert:function(n){var r;if(n===yt)return t.REPEAT;if(n===_t)return t.CLAMP_TO_EDGE;if(n===xt)return t.MIRRORED_REPEAT;if(n===bt)return t.NEAREST;if(n===Mt)return t.NEAREST_MIPMAP_NEAREST;if(n===wt)return t.NEAREST_MIPMAP_LINEAR;if(n===Et)return t.LINEAR;if(n===Tt)return t.LINEAR_MIPMAP_NEAREST;if(n===St)return t.LINEAR_MIPMAP_LINEAR;if(n===Ct)return t.UNSIGNED_BYTE;if(n===Ft)return t.UNSIGNED_SHORT_4_4_4_4;if(n===Dt)return t.UNSIGNED_SHORT_5_5_5_1;if(n===jt)return t.UNSIGNED_SHORT_5_6_5;if(n===Ot)return t.BYTE;if(n===Rt)return t.SHORT;if(n===At)return t.UNSIGNED_SHORT;if(n===Lt)return t.INT;if(n===Pt)return t.UNSIGNED_INT;if(n===It)return t.FLOAT;if(n===Nt){if(i.isWebGL2)return t.HALF_FLOAT;if(null!==(r=e.get("OES_texture_half_float")))return r.HALF_FLOAT_OES}if(n===Gt)return t.ALPHA;if(n===Ut)return t.RGB;if(n===zt)return t.RGBA;if(n===Bt)return t.LUMINANCE;if(n===Ht)return t.LUMINANCE_ALPHA;if(n===Vt)return t.DEPTH_COMPONENT;if(n===Wt)return t.DEPTH_STENCIL;if(n===Xt)return t.RED;if(n===I)return t.FUNC_ADD;if(n===N)return t.FUNC_SUBTRACT;if(n===F)return t.FUNC_REVERSE_SUBTRACT;if(n===k)return t.ZERO;if(n===G)return t.ONE;if(n===U)return t.SRC_COLOR;if(n===z)return t.ONE_MINUS_SRC_COLOR;if(n===B)return t.SRC_ALPHA;if(n===H)return t.ONE_MINUS_SRC_ALPHA;if(n===V)return t.DST_ALPHA;if(n===W)return t.ONE_MINUS_DST_ALPHA;if(n===X)return t.DST_COLOR;if(n===Y)return t.ONE_MINUS_DST_COLOR;if(n===q)return t.SRC_ALPHA_SATURATE;if((n===Yt||n===qt||n===Kt||n===Zt)&&null!==(r=e.get("WEBGL_compressed_texture_s3tc"))){if(n===Yt)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===qt)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Kt)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Zt)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===$t||n===Jt||n===Qt||n===te)&&null!==(r=e.get("WEBGL_compressed_texture_pvrtc"))){if(n===$t)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Jt)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Qt)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===te)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===ee&&null!==(r=e.get("WEBGL_compressed_texture_etc1")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((n===ie||n===ne||n===re||n===oe||n===ae||n===se||n===he||n===ce||n===le||n===ue||n===pe||n===de||n===fe||n===me)&&null!==(r=e.get("WEBGL_compressed_texture_astc")))return n;if(n===D||n===j){if(i.isWebGL2){if(n===D)return t.MIN;if(n===j)return t.MAX}if(null!==(r=e.get("EXT_blend_minmax"))){if(n===D)return r.MIN_EXT;if(n===j)return r.MAX_EXT}}if(n===kt){if(i.isWebGL2)return t.UNSIGNED_INT_24_8;if(null!==(r=e.get("WEBGL_depth_texture")))return r.UNSIGNED_INT_24_8_WEBGL}return 0}}}(p,d,f),(_=new function(t,e,i,n){var r=new function(){var e=!1,i=new Xe,n=null,r=new Xe(0,0,0,0);return{setMask:function(i){n===i||e||(t.colorMask(i,i,i,i),n=i)},setLocked:function(t){e=t},setClear:function(e,n,o,a,s){!0===s&&(e*=a,n*=a,o*=a),i.set(e,n,o,a),!1===r.equals(i)&&(t.clearColor(e,n,o,a),r.copy(i))},reset:function(){e=!1,n=null,r.set(-1,0,0,0)}}},o=new function(){var e=!1,i=null,n=null,r=null;return{setTest:function(e){e?ot(t.DEPTH_TEST):at(t.DEPTH_TEST)},setMask:function(n){i===n||e||(t.depthMask(n),i=n)},setFunc:function(e){if(n!==e){if(e)switch(e){case K:t.depthFunc(t.NEVER);break;case Z:t.depthFunc(t.ALWAYS);break;case $:t.depthFunc(t.LESS);break;case J:t.depthFunc(t.LEQUAL);break;case Q:t.depthFunc(t.EQUAL);break;case tt:t.depthFunc(t.GEQUAL);break;case et:t.depthFunc(t.GREATER);break;case it:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);n=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,i=null,n=null,r=null}}},a=new function(){var e=!1,i=null,n=null,r=null,o=null,a=null,s=null,h=null,c=null;return{setTest:function(e){e?ot(t.STENCIL_TEST):at(t.STENCIL_TEST)},setMask:function(n){i===n||e||(t.stencilMask(n),i=n)},setFunc:function(e,i,a){n===e&&r===i&&o===a||(t.stencilFunc(e,i,a),n=e,r=i,o=a)},setOp:function(e,i,n){a===e&&s===i&&h===n||(t.stencilOp(e,i,n),a=e,s=i,h=n)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,i=null,n=null,r=null,o=null,a=null,s=null,h=null,c=null}}},s=t.getParameter(t.MAX_VERTEX_ATTRIBS),h=new Uint8Array(s),c=new Uint8Array(s),l=new Uint8Array(s),u={},p=null,d=null,f=null,m=null,_=null,x=null,b=null,E=null,T=null,S=null,N=!1,F=null,D=null,j=null,k=null,G=null,U=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),z=!1,B=0,H=t.getParameter(t.VERSION);-1!==H.indexOf("WebGL")?(B=parseFloat(/^WebGL\ ([0-9])/.exec(H)[1]),z=B>=1):-1!==H.indexOf("OpenGL ES")&&(B=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(H)[1]),z=B>=2);var V=null,W={},X=new Xe,Y=new Xe;function q(e,i,n){var r=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var a=0;a<n;a++)t.texImage2D(i+a,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r);return o}var nt={};function rt(i,r){h[i]=1,0===c[i]&&(t.enableVertexAttribArray(i),c[i]=1),l[i]!==r&&((n.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,r),l[i]=r)}function ot(e){!0!==u[e]&&(t.enable(e),u[e]=!0)}function at(e){!1!==u[e]&&(t.disable(e),u[e]=!1)}function st(e,n,r,o,a,s,h,c){if(e!==C){if(f||(ot(t.BLEND),f=!0),e===P)a=a||n,s=s||r,h=h||o,n===_&&a===E||(t.blendEquationSeparate(i.convert(n),i.convert(a)),_=n,E=a),r===x&&o===b&&s===T&&h===S||(t.blendFuncSeparate(i.convert(r),i.convert(o),i.convert(s),i.convert(h)),x=r,b=o,T=s,S=h),m=e,N=null;else if(e!==m||c!==N){if(_===I&&E===I||(t.blendEquation(t.FUNC_ADD),_=I,E=I),c)switch(e){case O:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case R:t.blendFunc(t.ONE,t.ONE);break;case A:t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA);break;case L:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case O:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case R:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case A:t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR);break;case L:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}x=null,b=null,T=null,S=null,m=e,N=c}}else f&&(at(t.BLEND),f=!1)}function ht(e){F!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),F=e)}function ct(e){e!==v?(ot(t.CULL_FACE),e!==D&&(e===g?t.cullFace(t.BACK):e===y?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):at(t.CULL_FACE),D=e}function lt(e,i,n){e?(ot(t.POLYGON_OFFSET_FILL),k===i&&G===n||(t.polygonOffset(i,n),k=i,G=n)):at(t.POLYGON_OFFSET_FILL)}function ut(e){void 0===e&&(e=t.TEXTURE0+U-1),V!==e&&(t.activeTexture(e),V=e)}return nt[t.TEXTURE_2D]=q(t.TEXTURE_2D,t.TEXTURE_2D,1),nt[t.TEXTURE_CUBE_MAP]=q(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r.setClear(0,0,0,1),o.setClear(1),a.setClear(0),ot(t.DEPTH_TEST),o.setFunc(J),ht(!1),ct(g),ot(t.CULL_FACE),st(C),{buffers:{color:r,depth:o,stencil:a},initAttributes:function(){for(var t=0,e=h.length;t<e;t++)h[t]=0},enableAttribute:function(t){rt(t,0)},enableAttributeAndDivisor:rt,disableUnusedAttributes:function(){for(var e=0,i=c.length;e!==i;++e)c[e]!==h[e]&&(t.disableVertexAttribArray(e),c[e]=0)},enable:ot,disable:at,getCompressedTextureFormats:function(){if(null===p&&(p=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var i=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),n=0;n<i.length;n++)p.push(i[n]);return p},useProgram:function(e){return d!==e&&(t.useProgram(e),d=e,!0)},setBlending:st,setMaterial:function(e,i){e.side===w?at(t.CULL_FACE):ot(t.CULL_FACE);var n=e.side===M;i&&(n=!n),ht(n),e.blending===O&&!1===e.transparent?st(C):st(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),r.setMask(e.colorWrite),lt(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:ht,setCullFace:ct,setLineWidth:function(e){e!==j&&(z&&t.lineWidth(e),j=e)},setPolygonOffset:lt,setScissorTest:function(e){e?ot(t.SCISSOR_TEST):at(t.SCISSOR_TEST)},activeTexture:ut,bindTexture:function(e,i){null===V&&ut();var n=W[V];void 0===n&&(n={type:void 0,texture:void 0},W[V]=n),n.type===e&&n.texture===i||(t.bindTexture(e,i||nt[e]),n.type=e,n.texture=i)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===X.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),X.copy(e))},viewport:function(e){!1===Y.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),Y.copy(e))},reset:function(){for(var e=0;e<c.length;e++)1===c[e]&&(t.disableVertexAttribArray(e),c[e]=0);u={},p=null,V=null,W={},d=null,m=null,F=null,D=null,r.reset(),o.reset(),a.reset()}}}(p,d,dt,f)).scissor(Te.copy(Ie).multiplyScalar(Ae)),_.viewport(Ee.copy(Le).multiplyScalar(Ae)),x=new function(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(i,n,r){switch(r=r||1,e.calls++,n){case t.TRIANGLES:e.triangles+=r*(i/3);break;case t.TRIANGLE_STRIP:case t.TRIANGLE_FAN:e.triangles+=r*(i-2);break;case t.LINES:e.lines+=r*(i/2);break;case t.LINE_STRIP:e.lines+=r*(i-1);break;case t.LINE_LOOP:e.lines+=r*i;break;case t.POINTS:e.points+=r*i;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}(p),E=new function(){var t=new WeakMap;return{get:function(e){var i=t.get(e);return void 0===i&&(i={},t.set(e,i)),i},remove:function(e){t.delete(e)},update:function(e,i,n){t.get(e)[i]=n},dispose:function(){t=new WeakMap}}},T=new Or(p,d,_,E,f,dt,x),S=new ui(p),nt=new function(t,e,i){var n={},r={};function o(t){var a=t.target,s=n[a.id];for(var h in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[h]);a.removeEventListener("dispose",o),delete n[a.id];var c=r[s.id];c&&(e.remove(c),delete r[s.id]),i.memory.geometries--}return{get:function(t,e){var r=n[e.id];return r||(e.addEventListener("dispose",o),e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new ki).setFromObject(t)),r=e._bufferGeometry),n[e.id]=r,i.memory.geometries++,r)},update:function(i){var n=i.index,r=i.attributes;for(var o in null!==n&&e.update(n,t.ELEMENT_ARRAY_BUFFER),r)e.update(r[o],t.ARRAY_BUFFER);var a=i.morphAttributes;for(var o in a)for(var s=a[o],h=0,c=s.length;h<c;h++)e.update(s[h],t.ARRAY_BUFFER)},getWireframeAttribute:function(i){var n=r[i.id];if(n)return n;var o,a=[],s=i.index,h=i.attributes;if(null!==s)for(var c=0,l=(o=s.array).length;c<l;c+=3){var u=o[c+0],p=o[c+1],d=o[c+2];a.push(u,p,p,d,d,u)}else for(c=0,l=(o=h.position.array).length/3-1;c<l;c+=3)u=c+0,p=c+1,d=c+2,a.push(u,p,p,d,d,u);return n=new(Di(a)>65535?Pi:Ai)(a,1),e.update(n,t.ELEMENT_ARRAY_BUFFER),r[i.id]=n,n}}}(p,S,x),rt=new function(t,e){var i={};return{update:function(n){var r=e.render.frame,o=n.geometry,a=t.get(n,o);return i[a.id]!==r&&(o.isGeometry&&a.updateFromObject(n),t.update(a),i[a.id]=r),a},dispose:function(){i={}}}}(nt,x),lt=new function(t){var e={},i=new Float32Array(8);return{update:function(n,r,o,a){var s=n.morphTargetInfluences,h=s.length,c=e[r.id];if(void 0===c){c=[];for(var l=0;l<h;l++)c[l]=[l,0];e[r.id]=c}var u=o.morphTargets&&r.morphAttributes.position,p=o.morphNormals&&r.morphAttributes.normal;for(l=0;l<h;l++)0!==(d=c[l])[1]&&(u&&r.removeAttribute("morphTarget"+l),p&&r.removeAttribute("morphNormal"+l));for(l=0;l<h;l++)(d=c[l])[0]=l,d[1]=s[l];for(c.sort(cn),l=0;l<8;l++){var d;if(d=c[l]){var f=d[0],m=d[1];if(m){u&&r.addAttribute("morphTarget"+l,u[f]),p&&r.addAttribute("morphNormal"+l,p[f]),i[l]=m;continue}}i[l]=0}a.getUniforms().setValue(t,"morphTargetInfluences",i)}}}(p),ot=new pr(ft,d,f),at=new mr,ht=new function(){var t={};return{get:function(e,i){var n;return void 0===t[e.id]?(n=new Er,t[e.id]={},t[e.id][i.id]=n):void 0===t[e.id][i.id]?(n=new Er,t[e.id][i.id]=n):n=t[e.id][i.id],n},dispose:function(){t={}}}},ct=new function(t,e,i,n){var r,o,a=new ai(0),s=0;function h(t,i){e.buffers.color.setClear(t.r,t.g,t.b,i,n)}return{getClearColor:function(){return a},setClearColor:function(t,e){a.set(t),h(a,s=void 0!==e?e:1)},getClearAlpha:function(){return s},setClearAlpha:function(t){h(a,s=t)},render:function(e,n,c,l){var u=n.background;null===u?h(a,s):u&&u.isColor&&(h(u,1),l=!0),(t.autoClear||l)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),u&&u.isCubeTexture?(void 0===o&&((o=new hn(new Ui(1,1,1),new rn({uniforms:ri.clone(ci.cube.uniforms),vertexShader:ci.cube.vertexShader,fragmentShader:ci.cube.fragmentShader,side:M,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(t,e,i){this.matrixWorld.copyPosition(i.matrixWorld)},i.update(o)),o.material.uniforms.tCube.value=u,e.push(o,o.geometry,o.material,0,null)):u&&u.isTexture&&(void 0===r&&((r=new hn(new Bi(2,2),new rn({uniforms:ri.clone(ci.background.uniforms),vertexShader:ci.background.vertexShader,fragmentShader:ci.background.fragmentShader,side:b,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),i.update(r)),r.material.uniforms.t2D.value=u,e.push(r,r.geometry,r.material,0,null))}}}(ft,_,rt,s),ut=new function(t,e,i,n){var r;this.setMode=function(t){r=t},this.render=function(e,n){t.drawArrays(r,e,n),i.update(n,r)},this.renderInstances=function(o,a,s){var h;if(n.isWebGL2)h=t;else if(null===(h=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[n.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](r,a,s,o.maxInstancedCount),i.update(s,r,o.maxInstancedCount)}}(p,d,x,f),pt=new function(t,e,i,n){var r,o,a;this.setMode=function(t){r=t},this.setIndex=function(t){o=t.type,a=t.bytesPerElement},this.render=function(e,n){t.drawElements(r,n,o,e*a),i.update(n,r)},this.renderInstances=function(s,h,c){var l;if(n.isWebGL2)l=t;else if(null===(l=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[n.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](r,c,o,h*a,s.maxInstancedCount),i.update(c,r,s.maxInstancedCount)}}(p,d,x,f),x.programs=ot.programs,ft.context=p,ft.capabilities=f,ft.extensions=d,ft.properties=E,ft.renderLists=at,ft.state=_,ft.info=x}Ye();var qe=null;"undefined"!=typeof navigator&&(qe="xr"in navigator?new function(t){var e=t.context,i=null,n=null,r=null,o="stage",a=null,s=[],h=[];function c(){return null!==n&&null!==r}var l=new Lr;l.layers.enable(1),l.viewport=new Xe;var u=new Lr;u.layers.enable(2),u.viewport=new Xe;var p=new Pr([l,u]);function d(t){var e=s[h.indexOf(t.inputSource)];e&&e.dispatchEvent({type:t.type})}function f(){t.setFramebuffer(null),g.stop()}function m(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}p.layers.enable(1),p.layers.enable(2),this.enabled=!1,this.getController=function(t){var e=s[t];return void 0===e&&((e=new Rr).matrixAutoUpdate=!1,e.visible=!1,s[t]=e),e},this.getDevice=function(){return i},this.setDevice=function(t){void 0!==t&&(i=t),t instanceof XRDevice&&e.setCompatibleXRDevice(t)},this.setFrameOfReferenceType=function(t){o=t},this.setSession=function(i){null!==(n=i)&&(n.addEventListener("select",d),n.addEventListener("selectstart",d),n.addEventListener("selectend",d),n.addEventListener("end",f),n.baseLayer=new XRWebGLLayer(n,e),n.requestFrameOfReference(o).then(function(e){r=e,t.setFramebuffer(n.baseLayer.framebuffer),g.setContext(n),g.start()}),h=n.getInputSources(),n.addEventListener("inputsourceschange",function(){h=n.getInputSources(),console.log(h)}))},this.getCamera=function(t){if(c()){var e=t.parent,i=p.cameras;m(p,e);for(var n=0;n<i.length;n++)m(i[n],e);t.matrixWorld.copy(p.matrixWorld);for(var r=t.children,o=(n=0,r.length);n<o;n++)r[n].updateMatrixWorld(!0);return p}return t},this.isPresenting=c;var v=null,g=new li;g.setAnimationLoop(function(t,e){if(null!==(a=e.getDevicePose(r)))for(var i=n.baseLayer,o=e.views,c=0;c<o.length;c++){var l=o[c],u=i.getViewport(l),d=a.getViewMatrix(l),f=p.cameras[c];f.matrix.fromArray(d).getInverse(f.matrix),f.projectionMatrix.fromArray(l.projectionMatrix),f.viewport.set(u.x,u.y,u.width,u.height),0===c&&(p.matrix.copy(f.matrix),p.projectionMatrix.copy(f.projectionMatrix))}for(c=0;c<s.length;c++){var m=s[c],g=h[c];if(g){var y=e.getInputPose(g,r);if(null!==y){"targetRay"in y?m.matrix.elements=y.targetRay.transformMatrix:"pointerMatrix"in y&&(m.matrix.elements=y.pointerMatrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.visible=!0;continue}}m.visible=!1}v&&v(t)}),this.setAnimationLoop=function(t){v=t},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}(ft):new Ir(ft)),this.vr=qe;var Ze=new Cr(ft,rt,f.maxTextureSize);function $e(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),mt=!0}function ti(){console.log("THREE.WebGLRenderer: Context Restored."),mt=!1,Ye()}function ei(t){var e=t.target;e.removeEventListener("dispose",ei),function(t){ii(t),E.remove(t)}(e)}function ii(t){var e=E.get(t).program;t.program=void 0,void 0!==e&&ot.releaseProgram(e)}this.shadowMap=Ze,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var t=d.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=d.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return Ae},this.setPixelRatio=function(t){void 0!==t&&(Ae=t,this.setSize(Oe,Re,!1))},this.getSize=function(){return{width:Oe,height:Re}},this.setSize=function(t,i,n){qe.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Oe=t,Re=i,e.width=t*Ae,e.height=i*Ae,!1!==n&&(e.style.width=t+"px",e.style.height=i+"px"),this.setViewport(0,0,t,i))},this.getDrawingBufferSize=function(){return{width:Oe*Ae,height:Re*Ae}},this.setDrawingBufferSize=function(t,i,n){Oe=t,Re=i,Ae=n,e.width=t*n,e.height=i*n,this.setViewport(0,0,t,i)},this.getCurrentViewport=function(){return Ee},this.setViewport=function(t,e,i,n){Le.set(t,Re-e-n,i,n),_.viewport(Ee.copy(Le).multiplyScalar(Ae))},this.setScissor=function(t,e,i,n){Ie.set(t,Re-e-n,i,n),_.scissor(Te.copy(Ie).multiplyScalar(Ae))},this.setScissorTest=function(t){_.setScissorTest(Fe=t)},this.getClearColor=function(){return ct.getClearColor()},this.setClearColor=function(){ct.setClearColor.apply(ct,arguments)},this.getClearAlpha=function(){return ct.getClearAlpha()},this.setClearAlpha=function(){ct.setClearAlpha.apply(ct,arguments)},this.clear=function(t,e,i){var n=0;(void 0===t||t)&&(n|=p.COLOR_BUFFER_BIT),(void 0===e||e)&&(n|=p.DEPTH_BUFFER_BIT),(void 0===i||i)&&(n|=p.STENCIL_BUFFER_BIT),p.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",$e,!1),e.removeEventListener("webglcontextrestored",ti,!1),at.dispose(),ht.dispose(),E.dispose(),rt.dispose(),qe.dispose(),si.stop()},this.renderBufferImmediate=function(t,e){_.initAttributes();var i=E.get(t);t.hasPositions&&!i.position&&(i.position=p.createBuffer()),t.hasNormals&&!i.normal&&(i.normal=p.createBuffer()),t.hasUvs&&!i.uv&&(i.uv=p.createBuffer()),t.hasColors&&!i.color&&(i.color=p.createBuffer());var n=e.getAttributes();t.hasPositions&&(p.bindBuffer(p.ARRAY_BUFFER,i.position),p.bufferData(p.ARRAY_BUFFER,t.positionArray,p.DYNAMIC_DRAW),_.enableAttribute(n.position),p.vertexAttribPointer(n.position,3,p.FLOAT,!1,0,0)),t.hasNormals&&(p.bindBuffer(p.ARRAY_BUFFER,i.normal),p.bufferData(p.ARRAY_BUFFER,t.normalArray,p.DYNAMIC_DRAW),_.enableAttribute(n.normal),p.vertexAttribPointer(n.normal,3,p.FLOAT,!1,0,0)),t.hasUvs&&(p.bindBuffer(p.ARRAY_BUFFER,i.uv),p.bufferData(p.ARRAY_BUFFER,t.uvArray,p.DYNAMIC_DRAW),_.enableAttribute(n.uv),p.vertexAttribPointer(n.uv,2,p.FLOAT,!1,0,0)),t.hasColors&&(p.bindBuffer(p.ARRAY_BUFFER,i.color),p.bufferData(p.ARRAY_BUFFER,t.colorArray,p.DYNAMIC_DRAW),_.enableAttribute(n.color),p.vertexAttribPointer(n.color,3,p.FLOAT,!1,0,0)),_.disableUnusedAttributes(),p.drawArrays(p.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,i,n,r,o){var a=r.isMesh&&r.normalMatrix.determinant()<0;_.setMaterial(n,a);var s=mi(t,e,n,r),h=!1;be.geometry===i.id&&be.program===s.id&&be.wireframe===(!0===n.wireframe)||(be.geometry=i.id,be.program=s.id,be.wireframe=!0===n.wireframe,h=!0),r.morphTargetInfluences&&(lt.update(r,i,n,s),h=!0);var c,l=i.index,u=i.attributes.position,m=1;!0===n.wireframe&&(l=nt.getWireframeAttribute(i),m=2);var v=ut;null!==l&&(c=S.get(l),(v=pt).setIndex(c)),h&&(!function(t,e,i){if(i&&i.isInstancedBufferGeometry&!f.isWebGL2&&null===d.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");_.initAttributes();var n=i.attributes,r=e.getAttributes(),o=t.defaultAttributeValues;for(var a in r){var s=r[a];if(s>=0){var h=n[a];if(void 0!==h){var c=h.normalized,l=h.itemSize,u=S.get(h);if(void 0===u)continue;var m=u.buffer,v=u.type,g=u.bytesPerElement;if(h.isInterleavedBufferAttribute){var y=h.data,x=y.stride,b=h.offset;y&&y.isInstancedInterleavedBuffer?(_.enableAttributeAndDivisor(s,y.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=y.meshPerAttribute*y.count)):_.enableAttribute(s),p.bindBuffer(p.ARRAY_BUFFER,m),p.vertexAttribPointer(s,l,v,c,x*g,b*g)}else h.isInstancedBufferAttribute?(_.enableAttributeAndDivisor(s,h.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=h.meshPerAttribute*h.count)):_.enableAttribute(s),p.bindBuffer(p.ARRAY_BUFFER,m),p.vertexAttribPointer(s,l,v,c,0,0)}else if(void 0!==o){var M=o[a];if(void 0!==M)switch(M.length){case 2:p.vertexAttrib2fv(s,M);break;case 3:p.vertexAttrib3fv(s,M);break;case 4:p.vertexAttrib4fv(s,M);break;default:p.vertexAttrib1fv(s,M)}}}}_.disableUnusedAttributes()}(n,s,i),null!==l&&p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,c.buffer));var g=1/0;null!==l?g=l.count:void 0!==u&&(g=u.count);var y=i.drawRange.start*m,x=i.drawRange.count*m,b=null!==o?o.start*m:0,M=null!==o?o.count*m:1/0,w=Math.max(y,b),E=Math.min(g,y+x,b+M)-1,T=Math.max(0,E-w+1);if(0!==T){if(r.isMesh)if(!0===n.wireframe)_.setLineWidth(n.wireframeLinewidth*Ve()),v.setMode(p.LINES);else switch(r.drawMode){case ye:v.setMode(p.TRIANGLES);break;case _e:v.setMode(p.TRIANGLE_STRIP);break;case xe:v.setMode(p.TRIANGLE_FAN)}else if(r.isLine){var C=n.linewidth;void 0===C&&(C=1),_.setLineWidth(C*Ve()),r.isLineSegments?v.setMode(p.LINES):r.isLineLoop?v.setMode(p.LINE_LOOP):v.setMode(p.LINE_STRIP)}else r.isPoints?v.setMode(p.POINTS):r.isSprite&&v.setMode(p.TRIANGLES);i&&i.isInstancedBufferGeometry?i.maxInstancedCount>0&&v.renderInstances(i,w,T):v.render(w,T)}},this.compile=function(t,e){(u=ht.get(t,e)).init(),t.traverse(function(t){t.isLight&&(u.pushLight(t),t.castShadow&&u.pushShadow(t))}),u.setupLights(e),t.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var i=0;i<e.material.length;i++)fi(e.material[i],t.fog,e);else fi(e.material,t.fog,e)})};var ni=null;var oi,si=new li;function pi(t,e,i,n){for(var r=0,o=t.length;r<o;r++){var a=t[r],s=a.object,h=a.geometry,c=void 0===n?a.material:n,l=a.group;if(i.isArrayCamera){we=i;for(var p=i.cameras,d=0,f=p.length;d<f;d++){var m=p[d];if(s.layers.test(m.layers)){if("viewport"in m)_.viewport(Ee.copy(m.viewport));else{var v=m.bounds,g=v.x*Oe,y=v.y*Re,x=v.z*Oe,b=v.w*Re;_.viewport(Ee.set(g,y,x,b).multiplyScalar(Ae))}u.setupLights(m),di(s,e,m,h,c,l)}}}else we=null,di(s,e,i,h,c,l)}}function di(t,e,i,n,r,o){if(t.onBeforeRender(ft,e,i,n,r,o),u=ht.get(e,we||i),t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){_.setMaterial(r);var a=mi(i,e.fog,r,t);be.geometry=null,be.program=null,be.wireframe=!1,function(t,e){t.render(function(t){ft.renderBufferImmediate(t,e)})}(t,a)}else ft.renderBufferDirect(i,e.fog,n,r,t,o);t.onAfterRender(ft,e,i,n,r,o),u=ht.get(e,we||i)}function fi(t,e,i){var n=E.get(t),r=u.state.lights,o=u.state.shadowsArray,a=n.lightsHash,s=r.state.hash,h=ot.getParameters(t,r.state,o,e,Ge.numPlanes,Ge.numIntersection,i),c=ot.getProgramCode(t,h),l=n.program,p=!0;if(void 0===l)t.addEventListener("dispose",ei);else if(l.code!==c)ii(t);else if(a.stateID!==s.stateID||a.directionalLength!==s.directionalLength||a.pointLength!==s.pointLength||a.spotLength!==s.spotLength||a.rectAreaLength!==s.rectAreaLength||a.hemiLength!==s.hemiLength||a.shadowsLength!==s.shadowsLength)a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,p=!1;else{if(void 0!==h.shaderID)return;p=!1}if(p){if(h.shaderID){var d=ci[h.shaderID];n.shader={name:t.type,uniforms:ri.clone(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else n.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(n.shader,ft),c=ot.getProgramCode(t,h),l=ot.acquireProgram(t,n.shader,h,c),n.program=l,t.program=l}var f=l.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var m=0;m<ft.maxMorphTargets;m++)f["morphTarget"+m]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(m=0;m<ft.maxMorphNormals;m++)f["morphNormal"+m]>=0&&t.numSupportedMorphNormals++}var v=n.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(n.numClippingPlanes=Ge.numPlanes,n.numIntersection=Ge.numIntersection,v.clippingPlanes=Ge.uniform),n.fog=e,void 0===a&&(n.lightsHash=a={}),a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,t.lights&&(v.ambientLightColor.value=r.state.ambient,v.directionalLights.value=r.state.directional,v.spotLights.value=r.state.spot,v.rectAreaLights.value=r.state.rectArea,v.pointLights.value=r.state.point,v.hemisphereLights.value=r.state.hemi,v.directionalShadowMap.value=r.state.directionalShadowMap,v.directionalShadowMatrix.value=r.state.directionalShadowMatrix,v.spotShadowMap.value=r.state.spotShadowMap,v.spotShadowMatrix.value=r.state.spotShadowMatrix,v.pointShadowMap.value=r.state.pointShadowMap,v.pointShadowMatrix.value=r.state.pointShadowMatrix);var g=n.program.getUniforms(),y=er.seqWithValue(g.seq,v);n.uniformsList=y}function mi(t,e,i,n){Ce=0;var r=E.get(i),o=u.state.lights,a=r.lightsHash,s=o.state.hash;if(Ue&&(ze||t!==Me)){var h=t===Me&&i.id===ge;Ge.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,t,r,h)}!1===i.needsUpdate&&(void 0===r.program?i.needsUpdate=!0:i.fog&&r.fog!==e?i.needsUpdate=!0:(!i.lights||a.stateID===s.stateID&&a.directionalLength===s.directionalLength&&a.pointLength===s.pointLength&&a.spotLength===s.spotLength&&a.rectAreaLength===s.rectAreaLength&&a.hemiLength===s.hemiLength&&a.shadowsLength===s.shadowsLength)&&(void 0===r.numClippingPlanes||r.numClippingPlanes===Ge.numPlanes&&r.numIntersection===Ge.numIntersection)||(i.needsUpdate=!0)),i.needsUpdate&&(fi(i,e,n),i.needsUpdate=!1);var c,l,d=!1,m=!1,v=!1,g=r.program,y=g.getUniforms(),x=r.shader.uniforms;if(_.useProgram(g.program)&&(d=!0,m=!0,v=!0),i.id!==ge&&(ge=i.id,m=!0),d||Me!==t){if(y.setValue(p,"projectionMatrix",t.projectionMatrix),f.logarithmicDepthBuffer&&y.setValue(p,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),Me!==t&&(Me=t,m=!0,v=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap){var b=y.map.cameraPosition;void 0!==b&&b.setValue(p,He.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&y.setValue(p,"viewMatrix",t.matrixWorldInverse)}if(i.skinning){y.setOptional(p,n,"bindMatrix"),y.setOptional(p,n,"bindMatrixInverse");var w=n.skeleton;if(w){var T=w.bones;if(f.floatVertexTextures){if(void 0===w.boneTexture){var S=Math.sqrt(4*T.length);S=Pe.ceilPowerOfTwo(S),S=Math.max(S,4);var C=new Float32Array(S*S*4);C.set(w.boneMatrices);var O=new Ke(C,S,S,zt,It);O.needsUpdate=!0,w.boneMatrices=C,w.boneTexture=O,w.boneTextureSize=S}y.setValue(p,"boneTexture",w.boneTexture),y.setValue(p,"boneTextureSize",w.boneTextureSize)}else y.setOptional(p,w,"boneMatrices")}}return m&&(y.setValue(p,"toneMappingExposure",ft.toneMappingExposure),y.setValue(p,"toneMappingWhitePoint",ft.toneMappingWhitePoint),i.lights&&(l=v,(c=x).ambientLightColor.needsUpdate=l,c.directionalLights.needsUpdate=l,c.pointLights.needsUpdate=l,c.spotLights.needsUpdate=l,c.rectAreaLights.needsUpdate=l,c.hemisphereLights.needsUpdate=l),e&&i.fog&&function(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}(x,e),i.isMeshBasicMaterial?vi(x,i):i.isMeshLambertMaterial?(vi(x,i),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(x,i)):i.isMeshPhongMaterial?(vi(x,i),i.isMeshToonMaterial?function(t,e){gi(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(x,i):gi(x,i)):i.isMeshStandardMaterial?(vi(x,i),i.isMeshPhysicalMaterial?function(t,e){yi(t,e),t.reflectivity.value=e.reflectivity,t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness}(x,i):yi(x,i)):i.isMeshMatcapMaterial?(vi(x,i),function(t,e){e.matcap&&(t.matcap.value=e.matcap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===M&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===M&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(x,i)):i.isMeshDepthMaterial?(vi(x,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(x,i)):i.isMeshDistanceMaterial?(vi(x,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(x,i)):i.isMeshNormalMaterial?(vi(x,i),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===M&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===M&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(x,i)):i.isLineBasicMaterial?(function(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}(x,i),i.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(x,i)):i.isPointsMaterial?function(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*Ae,t.scale.value=.5*Re,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}(x,i):i.isSpriteMaterial?function(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity,t.rotation.value=e.rotation,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}(x,i):i.isShadowMaterial&&(x.color.value=i.color,x.opacity.value=i.opacity),void 0!==x.ltc_1&&(x.ltc_1.value=hi.LTC_1),void 0!==x.ltc_2&&(x.ltc_2.value=hi.LTC_2),er.upload(p,r.uniformsList,x,ft)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(er.upload(p,r.uniformsList,x,ft),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&y.setValue(p,"center",n.center),y.setValue(p,"modelViewMatrix",n.modelViewMatrix),y.setValue(p,"normalMatrix",n.normalMatrix),y.setValue(p,"modelMatrix",n.matrixWorld),g}function vi(t,e){var i;t.opacity.value=e.opacity,e.color&&(t.diffuse.value=e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=E.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?i=e.map:e.specularMap?i=e.specularMap:e.displacementMap?i=e.displacementMap:e.normalMap?i=e.normalMap:e.bumpMap?i=e.bumpMap:e.roughnessMap?i=e.roughnessMap:e.metalnessMap?i=e.metalnessMap:e.alphaMap?i=e.alphaMap:e.emissiveMap&&(i=e.emissiveMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}function gi(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===M&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===M&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function yi(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===M&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===M&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}si.setAnimationLoop(function(t){qe.isPresenting()||ni&&ni(t)}),"undefined"!=typeof window&&si.setContext(window),this.setAnimationLoop=function(t){ni=t,qe.setAnimationLoop(t),si.start()},this.render=function(t,e,i,n){if(e&&e.isCamera){if(!mt){be.geometry=null,be.program=null,be.wireframe=!1,ge=-1,Me=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),qe.enabled&&(e=qe.getCamera(e)),(u=ht.get(t,e)).init(),t.onBeforeRender(ft,t,e,i),Be.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),ke.setFromMatrix(Be),ze=this.localClippingEnabled,Ue=Ge.init(this.clippingPlanes,ze,e),(l=at.get(t,e)).init(),function t(e,i,n){if(!1===e.visible)return;var r=e.layers.test(i.layers);if(r)if(e.isLight)u.pushLight(e),e.castShadow&&u.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||ke.intersectsSprite(e)){n&&He.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Be);var o=rt.update(e),a=e.material;l.push(e,o,a,He.z,null)}}else if(e.isImmediateRenderObject)n&&He.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Be),l.push(e,null,e.material,He.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||ke.intersectsObject(e))){n&&He.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Be);var o=rt.update(e),a=e.material;if(Array.isArray(a))for(var s=o.groups,h=0,c=s.length;h<c;h++){var p=s[h],d=a[p.materialIndex];d&&d.visible&&l.push(e,o,d,He.z,p)}else a.visible&&l.push(e,o,a,He.z,null)}var f=e.children;for(var h=0,c=f.length;h<c;h++)t(f[h],i,n)}(t,e,ft.sortObjects),!0===ft.sortObjects&&l.sort(),Ue&&Ge.beginShadows();var r=u.state.shadowsArray;Ze.render(r,t,e),u.setupLights(e),Ue&&Ge.endShadows(),this.info.autoReset&&this.info.reset(),void 0===i&&(i=null),this.setRenderTarget(i),ct.render(l,t,e,n);var o=l.opaque,a=l.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;o.length&&pi(o,t,e,s),a.length&&pi(a,t,e,s)}else o.length&&pi(o,t,e),a.length&&pi(a,t,e);i&&T.updateRenderTargetMipmap(i),_.buffers.depth.setTest(!0),_.buffers.depth.setMask(!0),_.buffers.color.setMask(!0),_.setPolygonOffset(!1),t.onAfterRender(ft,t,e),qe.enabled&&qe.submitFrame(),l=null,u=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var t=Ce;return t>=f.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+t+" texture units while this GPU supports only "+f.maxTextures),Ce+=1,t},this.setTexture2D=(oi=!1,function(t,e){t&&t.isWebGLRenderTarget&&(oi||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),oi=!0),t=t.texture),T.setTexture2D(t,e)}),this.setTexture3D=function(t,e){T.setTexture3D(t,e)},this.setTexture=function(){var t=!1;return function(e,i){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),T.setTexture2D(e,i)}}(),this.setTextureCube=function(){var t=!1;return function(e,i){e&&e.isWebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?T.setTextureCube(e,i):T.setTextureCubeDynamic(e,i)}}(),this.setFramebuffer=function(t){vt=t},this.getRenderTarget=function(){return gt},this.setRenderTarget=function(t){gt=t,t&&void 0===E.get(t).__webglFramebuffer&&T.setupRenderTarget(t);var e=vt,i=!1;if(t){var n=E.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(e=n[t.activeCubeFace],i=!0):e=n,Ee.copy(t.viewport),Te.copy(t.scissor),Se=t.scissorTest}else Ee.copy(Le).multiplyScalar(Ae),Te.copy(Ie).multiplyScalar(Ae),Se=Fe;if(ve!==e&&(p.bindFramebuffer(p.FRAMEBUFFER,e),ve=e),_.viewport(Ee),_.scissor(Te),_.setScissorTest(Se),i){var r=E.get(t.texture);p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,r.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,i,n,r,o){if(t&&t.isWebGLRenderTarget){var a=E.get(t).__webglFramebuffer;if(a){var s=!1;a!==ve&&(p.bindFramebuffer(p.FRAMEBUFFER,a),s=!0);try{var h=t.texture,c=h.format,l=h.type;if(c!==zt&&dt.convert(c)!==p.getParameter(p.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l===Ct||dt.convert(l)===p.getParameter(p.IMPLEMENTATION_COLOR_READ_TYPE)||l===It&&(f.isWebGL2||d.get("OES_texture_float")||d.get("WEBGL_color_buffer_float"))||l===Nt&&(f.isWebGL2?d.get("EXT_color_buffer_float"):d.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");p.checkFramebufferStatus(p.FRAMEBUFFER)===p.FRAMEBUFFER_COMPLETE?e>=0&&e<=t.width-n&&i>=0&&i<=t.height-r&&p.readPixels(e,i,n,r,dt.convert(c),dt.convert(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&p.bindFramebuffer(p.FRAMEBUFFER,ve)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,i){var n=e.image.width,r=e.image.height,o=dt.convert(e.format);this.setTexture2D(e,0),p.copyTexImage2D(p.TEXTURE_2D,i||0,o,t.x,t.y,n,r,0)},this.copyTextureToTexture=function(t,e,i,n){var r=e.image.width,o=e.image.height,a=dt.convert(i.format),s=dt.convert(i.type);this.setTexture2D(i,0),e.isDataTexture?p.texSubImage2D(p.TEXTURE_2D,n||0,t.x,t.y,r,o,a,s,e.image.data):p.texSubImage2D(p.TEXTURE_2D,n||0,t.x,t.y,a,s,e.image)}}function Fr(t,e){this.name="",this.color=new ai(t),this.density=void 0!==e?e:25e-5}function Dr(t,e,i){this.name="",this.color=new ai(t),this.near=void 0!==e?e:1,this.far=void 0!==i?i:1e3}function jr(){xi.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function kr(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Gr(t,e,i,n){this.data=t,this.itemSize=e,this.offset=i,this.normalized=!0===n}function Ur(t){nn.call(this),this.type="SpriteMaterial",this.color=new ai(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(t)}function zr(t){if(xi.call(this),this.type="Sprite",void 0===vr){vr=new ki;var e=new kr(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);vr.setIndex([0,1,2,0,2,3]),vr.addAttribute("position",new Gr(e,3,0,!1)),vr.addAttribute("uv",new Gr(e,2,3,!1))}this.geometry=vr,this.material=void 0!==t?t:new Ur,this.center=new Ie(.5,.5)}function Br(){xi.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Hr(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var i=0,n=this.bones.length;i<n;i++)this.boneInverses.push(new Ne)}}function Vr(){xi.call(this),this.type="Bone"}function Wr(t,e){hn.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ne,this.bindMatrixInverse=new Ne;var i=new Hr(this.initBones());this.bind(i,this.matrixWorld),this.normalizeSkinWeights()}function Xr(t){nn.call(this),this.type="LineBasicMaterial",this.color=new ai(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function Yr(t,e,i){1===i&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),xi.call(this),this.type="Line",this.geometry=void 0!==t?t:new ki,this.material=void 0!==e?e:new Xr({color:16777215*Math.random()})}function qr(t,e){Yr.call(this,t,e),this.type="LineSegments"}function Kr(t,e){Yr.call(this,t,e),this.type="LineLoop"}function Zr(t){nn.call(this),this.type="PointsMaterial",this.color=new ai(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function $r(t,e){xi.call(this),this.type="Points",this.geometry=void 0!==t?t:new ki,this.material=void 0!==e?e:new Zr({color:16777215*Math.random()})}function Jr(t,e,i,n,r,o,a,s,h){We.call(this,t,e,i,n,r,o,a,s,h),this.generateMipmaps=!1}function Qr(t,e,i,n,r,o,a,s,h,c,l,u){We.call(this,null,o,a,s,h,c,n,r,l,u),this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function to(t,e,i,n,r,o,a,s,h){We.call(this,t,e,i,n,r,o,a,s,h),this.needsUpdate=!0}function eo(t,e,i,n,r,o,a,s,h,c){if((c=void 0!==c?c:Vt)!==Vt&&c!==Wt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&c===Vt&&(i=At),void 0===i&&c===Wt&&(i=kt),We.call(this,null,n,r,o,a,s,c,i,h),this.image={width:t,height:e},this.magFilter=void 0!==a?a:bt,this.minFilter=void 0!==s?s:bt,this.flipY=!1,this.generateMipmaps=!1}function io(t){ki.call(this),this.type="WireframeGeometry";var e,i,n,r,o,a,s,h,c,l,u=[],p=[0,0],d={},f=["a","b","c"];if(t&&t.isGeometry){var m=t.faces;for(e=0,n=m.length;e<n;e++){var v=m[e];for(i=0;i<3;i++)s=v[f[i]],h=v[f[(i+1)%3]],p[0]=Math.min(s,h),p[1]=Math.max(s,h),void 0===d[c=p[0]+","+p[1]]&&(d[c]={index1:p[0],index2:p[1]})}for(c in d)a=d[c],l=t.vertices[a.index1],u.push(l.x,l.y,l.z),l=t.vertices[a.index2],u.push(l.x,l.y,l.z)}else if(t&&t.isBufferGeometry){var g,y,_,x,b,M,w;if(l=new De,null!==t.index){for(g=t.attributes.position,y=t.index,0===(_=t.groups).length&&(_=[{start:0,count:y.count,materialIndex:0}]),r=0,o=_.length;r<o;++r)for(e=b=(x=_[r]).start,n=b+x.count;e<n;e+=3)for(i=0;i<3;i++)s=y.getX(e+i),h=y.getX(e+(i+1)%3),p[0]=Math.min(s,h),p[1]=Math.max(s,h),void 0===d[c=p[0]+","+p[1]]&&(d[c]={index1:p[0],index2:p[1]});for(c in d)a=d[c],l.fromBufferAttribute(g,a.index1),u.push(l.x,l.y,l.z),l.fromBufferAttribute(g,a.index2),u.push(l.x,l.y,l.z)}else for(e=0,n=(g=t.attributes.position).count/3;e<n;e++)for(i=0;i<3;i++)M=3*e+i,l.fromBufferAttribute(g,M),u.push(l.x,l.y,l.z),w=3*e+(i+1)%3,l.fromBufferAttribute(g,w),u.push(l.x,l.y,l.z)}this.addAttribute("position",new Ii(u,3))}function no(t,e,i){Ei.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:i},this.fromBufferGeometry(new ro(t,e,i)),this.mergeVertices()}function ro(t,e,i){ki.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:i};var n,r,o=[],a=[],s=[],h=[],c=new De,l=new De,u=new De,p=new De,d=new De;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var f=e+1;for(n=0;n<=i;n++){var m=n/i;for(r=0;r<=e;r++){var v=r/e;t(v,m,l),a.push(l.x,l.y,l.z),v-1e-5>=0?(t(v-1e-5,m,u),p.subVectors(l,u)):(t(v+1e-5,m,u),p.subVectors(u,l)),m-1e-5>=0?(t(v,m-1e-5,u),d.subVectors(l,u)):(t(v,m+1e-5,u),d.subVectors(u,l)),c.crossVectors(p,d).normalize(),s.push(c.x,c.y,c.z),h.push(v,m)}}for(n=0;n<i;n++)for(r=0;r<e;r++){var g=n*f+r,y=n*f+r+1,_=(n+1)*f+r+1,x=(n+1)*f+r;o.push(g,y,x),o.push(y,_,x)}this.setIndex(o),this.addAttribute("position",new Ii(a,3)),this.addAttribute("normal",new Ii(s,3)),this.addAttribute("uv",new Ii(h,2))}function oo(t,e,i,n){Ei.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n},this.fromBufferGeometry(new ao(t,e,i,n)),this.mergeVertices()}function ao(t,e,i,n){ki.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n},i=i||1;var r=[],o=[];function a(t,e,i,n){var r,o,a=Math.pow(2,n),h=[];for(r=0;r<=a;r++){h[r]=[];var c=t.clone().lerp(i,r/a),l=e.clone().lerp(i,r/a),u=a-r;for(o=0;o<=u;o++)h[r][o]=0===o&&r===a?c:c.clone().lerp(l,o/u)}for(r=0;r<a;r++)for(o=0;o<2*(a-r)-1;o++){var p=Math.floor(o/2);o%2==0?(s(h[r][p+1]),s(h[r+1][p]),s(h[r][p])):(s(h[r][p+1]),s(h[r+1][p+1]),s(h[r+1][p]))}}function s(t){r.push(t.x,t.y,t.z)}function h(e,i){var n=3*e;i.x=t[n+0],i.y=t[n+1],i.z=t[n+2]}function c(t,e,i,n){n<0&&1===t.x&&(o[e]=t.x-1),0===i.x&&0===i.z&&(o[e]=n/2/Math.PI+.5)}function l(t){return Math.atan2(t.z,-t.x)}!function(t){for(var i=new De,n=new De,r=new De,o=0;o<e.length;o+=3)h(e[o+0],i),h(e[o+1],n),h(e[o+2],r),a(i,n,r,t)}(n=n||0),function(t){for(var e=new De,i=0;i<r.length;i+=3)e.x=r[i+0],e.y=r[i+1],e.z=r[i+2],e.normalize().multiplyScalar(t),r[i+0]=e.x,r[i+1]=e.y,r[i+2]=e.z}(i),function(){for(var t=new De,e=0;e<r.length;e+=3){t.x=r[e+0],t.y=r[e+1],t.z=r[e+2];var i=l(t)/2/Math.PI+.5,n=(a=t,Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5);o.push(i,1-n)}var a;(function(){for(var t=new De,e=new De,i=new De,n=new De,a=new Ie,s=new Ie,h=new Ie,u=0,p=0;u<r.length;u+=9,p+=6){t.set(r[u+0],r[u+1],r[u+2]),e.set(r[u+3],r[u+4],r[u+5]),i.set(r[u+6],r[u+7],r[u+8]),a.set(o[p+0],o[p+1]),s.set(o[p+2],o[p+3]),h.set(o[p+4],o[p+5]),n.copy(t).add(e).add(i).divideScalar(3);var d=l(n);c(a,p+0,t,d),c(s,p+2,e,d),c(h,p+4,i,d)}})(),function(){for(var t=0;t<o.length;t+=6){var e=o[t+0],i=o[t+2],n=o[t+4],r=Math.max(e,i,n),a=Math.min(e,i,n);r>.9&&a<.1&&(e<.2&&(o[t+0]+=1),i<.2&&(o[t+2]+=1),n<.2&&(o[t+4]+=1))}}()}(),this.addAttribute("position",new Ii(r,3)),this.addAttribute("normal",new Ii(r.slice(),3)),this.addAttribute("uv",new Ii(o,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}function so(t,e){Ei.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new ho(t,e)),this.mergeVertices()}function ho(t,e){ao.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function co(t,e){Ei.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new lo(t,e)),this.mergeVertices()}function lo(t,e){ao.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function uo(t,e){Ei.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new po(t,e)),this.mergeVertices()}function po(t,e){var i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1];ao.call(this,n,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function fo(t,e){Ei.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new mo(t,e)),this.mergeVertices()}function mo(t,e){var i=(1+Math.sqrt(5))/2,n=1/i,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n];ao.call(this,r,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function vo(t,e,i,n,r,o){Ei.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:r},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new go(t,e,i,n,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function go(t,e,i,n,r){ki.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:r},e=e||64,i=i||1,n=n||8,r=r||!1;var o=t.computeFrenetFrames(e,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,h=new De,c=new De,l=new Ie,u=new De,p=[],d=[],f=[],m=[];function v(r){u=t.getPointAt(r/e,u);var a=o.normals[r],l=o.binormals[r];for(s=0;s<=n;s++){var f=s/n*Math.PI*2,m=Math.sin(f),v=-Math.cos(f);c.x=v*a.x+m*l.x,c.y=v*a.y+m*l.y,c.z=v*a.z+m*l.z,c.normalize(),d.push(c.x,c.y,c.z),h.x=u.x+i*c.x,h.y=u.y+i*c.y,h.z=u.z+i*c.z,p.push(h.x,h.y,h.z)}}!function(){for(a=0;a<e;a++)v(a);v(!1===r?e:0),function(){for(a=0;a<=e;a++)for(s=0;s<=n;s++)l.x=a/e,l.y=s/n,f.push(l.x,l.y)}(),function(){for(s=1;s<=e;s++)for(a=1;a<=n;a++){var t=(n+1)*(s-1)+(a-1),i=(n+1)*s+(a-1),r=(n+1)*s+a,o=(n+1)*(s-1)+a;m.push(t,i,o),m.push(i,r,o)}}()}(),this.setIndex(m),this.addAttribute("position",new Ii(p,3)),this.addAttribute("normal",new Ii(d,3)),this.addAttribute("uv",new Ii(f,2))}function yo(t,e,i,n,r,o,a){Ei.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:r,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new _o(t,e,i,n,r,o)),this.mergeVertices()}function _o(t,e,i,n,r,o){ki.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:r,q:o},t=t||1,e=e||.4,i=Math.floor(i)||64,n=Math.floor(n)||8,r=r||2,o=o||3;var a,s,h=[],c=[],l=[],u=[],p=new De,d=new De,f=new De,m=new De,v=new De,g=new De,y=new De;for(a=0;a<=i;++a){var _=a/i*r*Math.PI*2;for(C(_,r,o,t,f),C(_+.01,r,o,t,m),g.subVectors(m,f),y.addVectors(m,f),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=n;++s){var x=s/n*Math.PI*2,b=-e*Math.cos(x),M=e*Math.sin(x);p.x=f.x+(b*y.x+M*v.x),p.y=f.y+(b*y.y+M*v.y),p.z=f.z+(b*y.z+M*v.z),c.push(p.x,p.y,p.z),d.subVectors(p,f).normalize(),l.push(d.x,d.y,d.z),u.push(a/i),u.push(s/n)}}for(s=1;s<=i;s++)for(a=1;a<=n;a++){var w=(n+1)*(s-1)+(a-1),E=(n+1)*s+(a-1),T=(n+1)*s+a,S=(n+1)*(s-1)+a;h.push(w,E,S),h.push(E,T,S)}function C(t,e,i,n,r){var o=Math.cos(t),a=Math.sin(t),s=i/e*t,h=Math.cos(s);r.x=n*(2+h)*.5*o,r.y=n*(2+h)*a*.5,r.z=n*Math.sin(s)*.5}this.setIndex(h),this.addAttribute("position",new Ii(c,3)),this.addAttribute("normal",new Ii(l,3)),this.addAttribute("uv",new Ii(u,2))}function xo(t,e,i,n,r){Ei.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},this.fromBufferGeometry(new bo(t,e,i,n,r)),this.mergeVertices()}function bo(t,e,i,n,r){ki.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},t=t||1,e=e||.4,i=Math.floor(i)||8,n=Math.floor(n)||6,r=r||2*Math.PI;var o,a,s=[],h=[],c=[],l=[],u=new De,p=new De,d=new De;for(o=0;o<=i;o++)for(a=0;a<=n;a++){var f=a/n*r,m=o/i*Math.PI*2;p.x=(t+e*Math.cos(m))*Math.cos(f),p.y=(t+e*Math.cos(m))*Math.sin(f),p.z=e*Math.sin(m),h.push(p.x,p.y,p.z),u.x=t*Math.cos(f),u.y=t*Math.sin(f),d.subVectors(p,u).normalize(),c.push(d.x,d.y,d.z),l.push(a/n),l.push(o/i)}for(o=1;o<=i;o++)for(a=1;a<=n;a++){var v=(n+1)*o+a-1,g=(n+1)*(o-1)+a-1,y=(n+1)*(o-1)+a,_=(n+1)*o+a;s.push(v,g,_),s.push(g,y,_)}this.setIndex(s),this.addAttribute("position",new Ii(h,3)),this.addAttribute("normal",new Ii(c,3)),this.addAttribute("uv",new Ii(l,2))}Tr.prototype=Object.create(nn.prototype),Tr.prototype.constructor=Tr,Tr.prototype.isMeshDepthMaterial=!0,Tr.prototype.copy=function(t){return nn.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Sr.prototype=Object.create(nn.prototype),Sr.prototype.constructor=Sr,Sr.prototype.isMeshDistanceMaterial=!0,Sr.prototype.copy=function(t){return nn.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},Rr.prototype=Object.assign(Object.create(xi.prototype),{constructor:Rr,isGroup:!0}),Ar.prototype=Object.assign(Object.create(xi.prototype),{constructor:Ar,isCamera:!0,copy:function(t,e){return xi.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new De),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){xi.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Lr.prototype=Object.assign(Object.create(Ar.prototype),{constructor:Lr,isPerspectiveCamera:!0,copy:function(t,e){return Ar.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*Pe.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*Pe.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Pe.RAD2DEG*Math.atan(Math.tan(.5*Pe.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,i,n,r,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*Pe.DEG2RAD*this.fov)/this.zoom,i=2*e,n=this.aspect*i,r=-.5*n,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;r+=o.offsetX*n/a,e-=o.offsetY*i/s,n*=o.width/a,i*=o.height/s}var h=this.filmOffset;0!==h&&(r+=t*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,e,e-i,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=xi.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),Pr.prototype=Object.assign(Object.create(Lr.prototype),{constructor:Pr,isArrayCamera:!0}),Fr.prototype.isFogExp2=!0,Fr.prototype.clone=function(){return new Fr(this.color,this.density)},Fr.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Dr.prototype.isFog=!0,Dr.prototype.clone=function(){return new Dr(this.color,this.near,this.far)},Dr.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},jr.prototype=Object.assign(Object.create(xi.prototype),{constructor:jr,copy:function(t,e){return xi.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=xi.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}),Object.defineProperty(kr.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(kr.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.stride,i*=e.stride;for(var n=0,r=this.stride;n<r;n++)this.array[t+n]=e.array[i+n];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Object.defineProperties(Gr.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Gr.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=r,this}}),Ur.prototype=Object.create(nn.prototype),Ur.prototype.constructor=Ur,Ur.prototype.isSpriteMaterial=!0,Ur.prototype.copy=function(t){return nn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this},zr.prototype=Object.assign(Object.create(xi.prototype),{constructor:zr,isSprite:!0,raycast:function(){var t=new De,e=new De,i=new De,n=new Ie,r=new Ie,o=new Ne,a=new De,s=new De,h=new De,c=new Ie,l=new Ie,u=new Ie;function p(t,e,i,a,s,h){n.subVectors(t,i).addScalar(.5).multiply(a),void 0!==s?(r.x=h*n.x-s*n.y,r.y=s*n.x+h*n.y):r.copy(n),t.copy(e),t.x+=r.x,t.y+=r.y,t.applyMatrix4(o)}return function(n,r){e.setFromMatrixScale(this.matrixWorld),o.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),i.setFromMatrixPosition(this.modelViewMatrix);var d,f,m=this.material.rotation;0!==m&&(f=Math.cos(m),d=Math.sin(m));var v=this.center;p(a.set(-.5,-.5,0),i,v,e,d,f),p(s.set(.5,-.5,0),i,v,e,d,f),p(h.set(.5,.5,0),i,v,e,d,f),c.set(0,0),l.set(1,0),u.set(1,1);var g=n.ray.intersectTriangle(a,s,h,!1,t);if(null!==g||(p(s.set(-.5,.5,0),i,v,e,d,f),l.set(0,1),null!==(g=n.ray.intersectTriangle(a,h,s,!1,t)))){var y=n.ray.origin.distanceTo(t);y<n.near||y>n.far||r.push({distance:y,point:t.clone(),uv:an.getUV(t,a,s,h,c,l,u,new Ie),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return xi.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),Br.prototype=Object.assign(Object.create(xi.prototype),{constructor:Br,copy:function(t){xi.prototype.copy.call(this,t,!1);for(var e=t.levels,i=0,n=e.length;i<n;i++){var r=e[i];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var i=this.levels,n=0;n<i.length&&!(e<i[n].distance);n++);i.splice(n,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,i=1,n=e.length;i<n&&!(t<e[i].distance);i++);return e[i-1].object},raycast:(gr=new De,function(t,e){gr.setFromMatrixPosition(this.matrixWorld);var i=t.ray.origin.distanceTo(gr);this.getObjectForDistance(i).raycast(t,e)}),update:function(){var t=new De,e=new De;return function(i){var n=this.levels;if(n.length>1){t.setFromMatrixPosition(i.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var r=t.distanceTo(e);n[0].object.visible=!0;for(var o=1,a=n.length;o<a&&r>=n[o].distance;o++)n[o-1].object.visible=!1,n[o].object.visible=!0;for(;o<a;o++)n[o].object.visible=!1}}}(),toJSON:function(t){var e=xi.prototype.toJSON.call(this,t);e.object.levels=[];for(var i=this.levels,n=0,r=i.length;n<r;n++){var o=i[n];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),Object.assign(Hr.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var i=new Ne;this.bones[t]&&i.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(i)}},pose:function(){var t,e,i;for(e=0,i=this.bones.length;e<i;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,i=this.bones.length;e<i;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:(yr=new Ne,_r=new Ne,function(){for(var t=this.bones,e=this.boneInverses,i=this.boneMatrices,n=this.boneTexture,r=0,o=t.length;r<o;r++){var a=t[r]?t[r].matrixWorld:_r;yr.multiplyMatrices(a,e[r]),yr.toArray(i,16*r)}void 0!==n&&(n.needsUpdate=!0)}),clone:function(){return new Hr(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,i=this.bones.length;e<i;e++){var n=this.bones[e];if(n.name===t)return n}}}),Vr.prototype=Object.assign(Object.create(xi.prototype),{constructor:Vr,isBone:!0}),Wr.prototype=Object.assign(Object.create(hn.prototype),{constructor:Wr,isSkinnedMesh:!0,initBones:function(){var t,e,i,n,r=[];if(this.geometry&&void 0!==this.geometry.bones){for(i=0,n=this.geometry.bones.length;i<n;i++)e=this.geometry.bones[i],t=new Vr,r.push(t),t.name=e.name,t.position.fromArray(e.pos),t.quaternion.fromArray(e.rotq),void 0!==e.scl&&t.scale.fromArray(e.scl);for(i=0,n=this.geometry.bones.length;i<n;i++)-1!==(e=this.geometry.bones[i]).parent&&null!==e.parent&&void 0!==r[e.parent]?r[e.parent].add(r[i]):this.add(r[i])}return this.updateMatrixWorld(!0),r},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var t,e;if(this.geometry&&this.geometry.isGeometry)for(e=0;e<this.geometry.skinWeights.length;e++){var i=this.geometry.skinWeights[e];(t=1/i.manhattanLength())!==1/0?i.multiplyScalar(t):i.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var n=new Xe,r=this.geometry.attributes.skinWeight;for(e=0;e<r.count;e++)n.x=r.getX(e),n.y=r.getY(e),n.z=r.getZ(e),n.w=r.getW(e),(t=1/n.manhattanLength())!==1/0?n.multiplyScalar(t):n.set(1,0,0,0),r.setXYZW(e,n.x,n.y,n.z,n.w)}},updateMatrixWorld:function(t){hn.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Xr.prototype=Object.create(nn.prototype),Xr.prototype.constructor=Xr,Xr.prototype.isLineBasicMaterial=!0,Xr.prototype.copy=function(t){return nn.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},Yr.prototype=Object.assign(Object.create(xi.prototype),{constructor:Yr,isLine:!0,computeLineDistances:(xr=new De,br=new De,function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,i=[0],n=1,r=e.count;n<r;n++)xr.fromBufferAttribute(e,n-1),br.fromBufferAttribute(e,n),i[n]=i[n-1],i[n]+=xr.distanceTo(br);t.addAttribute("lineDistance",new Ii(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var o=t.vertices;for((i=t.lineDistances)[0]=0,n=1,r=o.length;n<r;n++)i[n]=i[n-1],i[n]+=o[n-1].distanceTo(o[n])}return this}),raycast:function(){var t=new Ne,e=new on,i=new $e;return function(n,r){var o=n.linePrecision,a=this.geometry,s=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),i.copy(a.boundingSphere),i.applyMatrix4(s),i.radius+=o,!1!==n.ray.intersectsSphere(i)){t.getInverse(s),e.copy(n.ray).applyMatrix4(t);var h=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=h*h,l=new De,u=new De,p=new De,d=new De,f=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var m=a.index,v=a.attributes.position.array;if(null!==m)for(var g=m.array,y=0,_=g.length-1;y<_;y+=f){var x=g[y],b=g[y+1];if(l.fromArray(v,3*x),u.fromArray(v,3*b),!(e.distanceSqToSegment(l,u,d,p)>c))d.applyMatrix4(this.matrixWorld),(E=n.ray.origin.distanceTo(d))<n.near||E>n.far||r.push({distance:E,point:p.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}else for(y=0,_=v.length/3-1;y<_;y+=f){if(l.fromArray(v,3*y),u.fromArray(v,3*y+3),!(e.distanceSqToSegment(l,u,d,p)>c))d.applyMatrix4(this.matrixWorld),(E=n.ray.origin.distanceTo(d))<n.near||E>n.far||r.push({distance:E,point:p.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else if(a.isGeometry){var M=a.vertices,w=M.length;for(y=0;y<w-1;y+=f){var E;if(!(e.distanceSqToSegment(M[y],M[y+1],d,p)>c))d.applyMatrix4(this.matrixWorld),(E=n.ray.origin.distanceTo(d))<n.near||E>n.far||r.push({distance:E,point:p.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),qr.prototype=Object.assign(Object.create(Yr.prototype),{constructor:qr,isLineSegments:!0,computeLineDistances:function(){var t=new De,e=new De;return function(){var i=this.geometry;if(i.isBufferGeometry)if(null===i.index){for(var n=i.attributes.position,r=[],o=0,a=n.count;o<a;o+=2)t.fromBufferAttribute(n,o),e.fromBufferAttribute(n,o+1),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+t.distanceTo(e);i.addAttribute("lineDistance",new Ii(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(i.isGeometry){var s=i.vertices;for(r=i.lineDistances,o=0,a=s.length;o<a;o+=2)t.copy(s[o]),e.copy(s[o+1]),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+t.distanceTo(e)}return this}}()}),Kr.prototype=Object.assign(Object.create(Yr.prototype),{constructor:Kr,isLineLoop:!0}),Zr.prototype=Object.create(nn.prototype),Zr.prototype.constructor=Zr,Zr.prototype.isPointsMaterial=!0,Zr.prototype.copy=function(t){return nn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this},$r.prototype=Object.assign(Object.create(xi.prototype),{constructor:$r,isPoints:!0,raycast:function(){var t=new Ne,e=new on,i=new $e;return function(n,r){var o=this,a=this.geometry,s=this.matrixWorld,h=n.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),i.copy(a.boundingSphere),i.applyMatrix4(s),i.radius+=h,!1!==n.ray.intersectsSphere(i)){t.getInverse(s),e.copy(n.ray).applyMatrix4(t);var c=h/((this.scale.x+this.scale.y+this.scale.z)/3),l=c*c,u=new De,p=new De;if(a.isBufferGeometry){var d=a.index,f=a.attributes.position.array;if(null!==d)for(var m=d.array,v=0,g=m.length;v<g;v++){var y=m[v];u.fromArray(f,3*y),b(u,y)}else{v=0;for(var _=f.length/3;v<_;v++)u.fromArray(f,3*v),b(u,v)}}else{var x=a.vertices;for(v=0,_=x.length;v<_;v++)b(x[v],v)}}function b(t,i){var a=e.distanceSqToPoint(t);if(a<l){e.closestPointToPoint(t,p),p.applyMatrix4(s);var h=n.ray.origin.distanceTo(p);if(h<n.near||h>n.far)return;r.push({distance:h,distanceToRay:Math.sqrt(a),point:p.clone(),index:i,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Jr.prototype=Object.assign(Object.create(We.prototype),{constructor:Jr,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Qr.prototype=Object.create(We.prototype),Qr.prototype.constructor=Qr,Qr.prototype.isCompressedTexture=!0,to.prototype=Object.create(We.prototype),to.prototype.constructor=to,to.prototype.isCanvasTexture=!0,eo.prototype=Object.create(We.prototype),eo.prototype.constructor=eo,eo.prototype.isDepthTexture=!0,io.prototype=Object.create(ki.prototype),io.prototype.constructor=io,no.prototype=Object.create(Ei.prototype),no.prototype.constructor=no,ro.prototype=Object.create(ki.prototype),ro.prototype.constructor=ro,oo.prototype=Object.create(Ei.prototype),oo.prototype.constructor=oo,ao.prototype=Object.create(ki.prototype),ao.prototype.constructor=ao,so.prototype=Object.create(Ei.prototype),so.prototype.constructor=so,ho.prototype=Object.create(ao.prototype),ho.prototype.constructor=ho,co.prototype=Object.create(Ei.prototype),co.prototype.constructor=co,lo.prototype=Object.create(ao.prototype),lo.prototype.constructor=lo,uo.prototype=Object.create(Ei.prototype),uo.prototype.constructor=uo,po.prototype=Object.create(ao.prototype),po.prototype.constructor=po,fo.prototype=Object.create(Ei.prototype),fo.prototype.constructor=fo,mo.prototype=Object.create(ao.prototype),mo.prototype.constructor=mo,vo.prototype=Object.create(Ei.prototype),vo.prototype.constructor=vo,go.prototype=Object.create(ki.prototype),go.prototype.constructor=go,yo.prototype=Object.create(Ei.prototype),yo.prototype.constructor=yo,_o.prototype=Object.create(ki.prototype),_o.prototype.constructor=_o,xo.prototype=Object.create(Ei.prototype),xo.prototype.constructor=xo,bo.prototype=Object.create(ki.prototype),bo.prototype.constructor=bo;var Mo=function(t,e,i){i=i||2;var n,r,o,a,s,h,c,l=e&&e.length,u=l?e[0]*i:t.length,p=wo(t,0,u,i,!0),d=[];if(!p)return d;if(l&&(p=function(t,e,i,n){var r,o,a,s,h,c=[];for(r=0,o=e.length;r<o;r++)a=e[r]*n,s=r<o-1?e[r+1]*n:t.length,(h=wo(t,a,s,n,!1))===h.next&&(h.steiner=!0),c.push(Io(h));for(c.sort(Ao),r=0;r<c.length;r++)Lo(c[r],i),i=Eo(i,i.next);return i}(t,e,p,i)),t.length>80*i){n=o=t[0],r=a=t[1];for(var f=i;f<u;f+=i)s=t[f],h=t[f+1],s<n&&(n=s),h<r&&(r=h),s>o&&(o=s),h>a&&(a=h);c=0!==(c=Math.max(o-n,a-r))?1/c:0}return To(p,d,i,n,r,c),d};function wo(t,e,i,n,r){var o,a;if(r===function(t,e,i,n){for(var r=0,o=e,a=i-n;o<i;o+=n)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}(t,e,i,n)>0)for(o=e;o<i;o+=n)a=zo(o,t[o],t[o+1],a);else for(o=i-n;o>=e;o-=n)a=zo(o,t[o],t[o+1],a);return a&&jo(a,a.next)&&(Bo(a),a=a.next),a}function Eo(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!jo(n,n.next)&&0!==Do(n.prev,n,n.next))n=n.next;else{if(Bo(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function To(t,e,i,n,r,o,a){if(t){!a&&o&&function(t,e,i,n){var r=t;do{null===r.z&&(r.z=Po(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,o,a,s,h,c=1;do{for(i=t,t=null,o=null,a=0;i;){for(a++,n=i,s=0,e=0;e<c&&(s++,n=n.nextZ);e++);for(h=c;s>0||h>0&&n;)0!==s&&(0===h||!n||i.z<=n.z)?(r=i,i=i.nextZ,s--):(r=n,n=n.nextZ,h--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=n}o.nextZ=null,c*=2}while(a>1)}(r)}(t,n,r,o);for(var s,h,c=t;t.prev!==t.next;)if(s=t.prev,h=t.next,o?Co(t,n,r,o):So(t))e.push(s.i/i),e.push(t.i/i),e.push(h.i/i),Bo(t),t=h.next,c=h.next;else if((t=h)===c){a?1===a?To(t=Oo(t,e,i),e,i,n,r,o,2):2===a&&Ro(t,e,i,n,r,o):To(Eo(t),e,i,n,r,o,1);break}}}function So(t){var e=t.prev,i=t,n=t.next;if(Do(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(No(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&Do(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Co(t,e,i,n){var r=t.prev,o=t,a=t.next;if(Do(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,h=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,c=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,l=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,u=Po(s,h,e,i,n),p=Po(c,l,e,i,n),d=t.nextZ;d&&d.z<=p;){if(d!==t.prev&&d!==t.next&&No(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Do(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=t.prevZ;d&&d.z>=u;){if(d!==t.prev&&d!==t.next&&No(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Do(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function Oo(t,e,i){var n=t;do{var r=n.prev,o=n.next.next;!jo(r,o)&&ko(r,n,n.next,o)&&Go(r,o)&&Go(o,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(o.i/i),Bo(n),Bo(n.next),n=t=o),n=n.next}while(n!==t);return n}function Ro(t,e,i,n,r,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Fo(a,s)){var h=Uo(a,s);return a=Eo(a,a.next),h=Eo(h,h.next),To(a,e,i,n,r,o),void To(h,e,i,n,r,o)}s=s.next}a=a.next}while(a!==t)}function Ao(t,e){return t.x-e.x}function Lo(t,e){if(e=function(t,e){var i,n=e,r=t.x,o=t.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=r&&s>a){if(a=s,s===r){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===a)return i.prev;var h,c=i,l=i.x,u=i.y,p=1/0;n=i.next;for(;n!==c;)r>=n.x&&n.x>=l&&r!==n.x&&No(o<u?r:a,o,l,u,o<u?a:r,o,n.x,n.y)&&((h=Math.abs(o-n.y)/(r-n.x))<p||h===p&&n.x>i.x)&&Go(n,t)&&(i=n,p=h),n=n.next;return i}(t,e)){var i=Uo(e,t);Eo(i,i.next)}}function Po(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Io(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}function No(t,e,i,n,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(n-s)-(i-a)*(e-s)>=0&&(i-a)*(o-s)-(r-a)*(n-s)>=0}function Fo(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&ko(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&Go(t,e)&&Go(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)}function Do(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function jo(t,e){return t.x===e.x&&t.y===e.y}function ko(t,e,i,n){return!!(jo(t,e)&&jo(i,n)||jo(t,n)&&jo(i,e))||Do(t,e,i)>0!=Do(t,e,n)>0&&Do(i,n,t)>0!=Do(i,n,e)>0}function Go(t,e){return Do(t.prev,t,t.next)<0?Do(t,e,t.next)>=0&&Do(t,t.prev,e)>=0:Do(t,e,t.prev)<0||Do(t,t.next,e)<0}function Uo(t,e){var i=new Ho(t.i,t.x,t.y),n=new Ho(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function zo(t,e,i,n){var r=new Ho(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Bo(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ho(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Vo={area:function(t){for(var e=t.length,i=0,n=e-1,r=0;r<e;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*i},isClockWise:function(t){return Vo.area(t)<0},triangulateShape:function(t,e){var i=[],n=[],r=[];Wo(t),Xo(i,t);var o=t.length;e.forEach(Wo);for(var a=0;a<e.length;a++)n.push(o),o+=e[a].length,Xo(i,e[a]);var s=Mo(i,n);for(a=0;a<s.length;a+=3)r.push(s.slice(a,a+3));return r}};function Wo(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Xo(t,e){for(var i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}function Yo(t,e){Ei.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new qo(t,e)),this.mergeVertices()}function qo(t,e){ki.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e};for(var i=this,n=[],r=[],o=0,a=(t=Array.isArray(t)?t:[t]).length;o<a;o++){s(t[o])}function s(t){var o=[],a=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1,h=void 0!==e.depth?e.depth:100,c=void 0===e.bevelEnabled||e.bevelEnabled,l=void 0!==e.bevelThickness?e.bevelThickness:6,u=void 0!==e.bevelSize?e.bevelSize:l-2,p=void 0!==e.bevelSegments?e.bevelSegments:3,d=e.extrudePath,f=void 0!==e.UVGenerator?e.UVGenerator:Ko;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),h=e.amount);var m,v,g,y,_,x,b,M,w=!1;d&&(m=d.getSpacedPoints(s),w=!0,c=!1,v=d.computeFrenetFrames(s,!1),g=new De,y=new De,_=new De),c||(p=0,l=0,u=0);var E=t.extractPoints(a),T=E.shape,S=E.holes;if(!Vo.isClockWise(T))for(T=T.reverse(),b=0,M=S.length;b<M;b++)x=S[b],Vo.isClockWise(x)&&(S[b]=x.reverse());var C=Vo.triangulateShape(T,S),O=T;for(b=0,M=S.length;b<M;b++)x=S[b],T=T.concat(x);function R(t,e,i){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(i).add(t)}var A,L,P,I,N,F,D=T.length,j=C.length;function k(t,e,i){var n,r,o,a=t.x-e.x,s=t.y-e.y,h=i.x-t.x,c=i.y-t.y,l=a*a+s*s,u=a*c-s*h;if(Math.abs(u)>Number.EPSILON){var p=Math.sqrt(l),d=Math.sqrt(h*h+c*c),f=e.x-s/p,m=e.y+a/p,v=((i.x-c/d-f)*c-(i.y+h/d-m)*h)/(a*c-s*h),g=(n=f+a*v-t.x)*n+(r=m+s*v-t.y)*r;if(g<=2)return new Ie(n,r);o=Math.sqrt(g/2)}else{var y=!1;a>Number.EPSILON?h>Number.EPSILON&&(y=!0):a<-Number.EPSILON?h<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(c)&&(y=!0),y?(n=-s,r=a,o=Math.sqrt(l)):(n=a,r=s,o=Math.sqrt(l/2))}return new Ie(n/o,r/o)}for(var G=[],U=0,z=O.length,B=z-1,H=U+1;U<z;U++,B++,H++)B===z&&(B=0),H===z&&(H=0),G[U]=k(O[U],O[B],O[H]);var V,W,X=[],Y=G.concat();for(b=0,M=S.length;b<M;b++){for(x=S[b],V=[],U=0,B=(z=x.length)-1,H=U+1;U<z;U++,B++,H++)B===z&&(B=0),H===z&&(H=0),V[U]=k(x[U],x[B],x[H]);X.push(V),Y=Y.concat(V)}for(A=0;A<p;A++){for(P=A/p,I=l*Math.cos(P*Math.PI/2),L=u*Math.sin(P*Math.PI/2),U=0,z=O.length;U<z;U++)K((N=R(O[U],G[U],L)).x,N.y,-I);for(b=0,M=S.length;b<M;b++)for(x=S[b],V=X[b],U=0,z=x.length;U<z;U++)K((N=R(x[U],V[U],L)).x,N.y,-I)}for(L=u,U=0;U<D;U++)N=c?R(T[U],Y[U],L):T[U],w?(y.copy(v.normals[0]).multiplyScalar(N.x),g.copy(v.binormals[0]).multiplyScalar(N.y),_.copy(m[0]).add(y).add(g),K(_.x,_.y,_.z)):K(N.x,N.y,0);for(W=1;W<=s;W++)for(U=0;U<D;U++)N=c?R(T[U],Y[U],L):T[U],w?(y.copy(v.normals[W]).multiplyScalar(N.x),g.copy(v.binormals[W]).multiplyScalar(N.y),_.copy(m[W]).add(y).add(g),K(_.x,_.y,_.z)):K(N.x,N.y,h/s*W);for(A=p-1;A>=0;A--){for(P=A/p,I=l*Math.cos(P*Math.PI/2),L=u*Math.sin(P*Math.PI/2),U=0,z=O.length;U<z;U++)K((N=R(O[U],G[U],L)).x,N.y,h+I);for(b=0,M=S.length;b<M;b++)for(x=S[b],V=X[b],U=0,z=x.length;U<z;U++)N=R(x[U],V[U],L),w?K(N.x,N.y+m[s-1].y,m[s-1].x+I):K(N.x,N.y,h+I)}function q(t,e){var i,n;for(U=t.length;--U>=0;){i=U,(n=U-1)<0&&(n=t.length-1);var r=0,o=s+2*p;for(r=0;r<o;r++){var a=D*r,h=D*(r+1);$(e+i+a,e+n+a,e+n+h,e+i+h)}}}function K(t,e,i){o.push(t),o.push(e),o.push(i)}function Z(t,e,r){J(t),J(e),J(r);var o=n.length/3,a=f.generateTopUV(i,n,o-3,o-2,o-1);Q(a[0]),Q(a[1]),Q(a[2])}function $(t,e,r,o){J(t),J(e),J(o),J(e),J(r),J(o);var a=n.length/3,s=f.generateSideWallUV(i,n,a-6,a-3,a-2,a-1);Q(s[0]),Q(s[1]),Q(s[3]),Q(s[1]),Q(s[2]),Q(s[3])}function J(t){n.push(o[3*t+0]),n.push(o[3*t+1]),n.push(o[3*t+2])}function Q(t){r.push(t.x),r.push(t.y)}!function(){var t=n.length/3;if(c){var e=0,r=D*e;for(U=0;U<j;U++)Z((F=C[U])[2]+r,F[1]+r,F[0]+r);for(r=D*(e=s+2*p),U=0;U<j;U++)Z((F=C[U])[0]+r,F[1]+r,F[2]+r)}else{for(U=0;U<j;U++)Z((F=C[U])[2],F[1],F[0]);for(U=0;U<j;U++)Z((F=C[U])[0]+D*s,F[1]+D*s,F[2]+D*s)}i.addGroup(t,n.length/3-t,0)}(),function(){var t=n.length/3,e=0;for(q(O,e),e+=O.length,b=0,M=S.length;b<M;b++)q(x=S[b],e),e+=x.length;i.addGroup(t,n.length/3-t,1)}()}this.addAttribute("position",new Ii(n,3)),this.addAttribute("uv",new Ii(r,2)),this.computeVertexNormals()}Yo.prototype=Object.create(Ei.prototype),Yo.prototype.constructor=Yo,Yo.prototype.toJSON=function(){var t=Ei.prototype.toJSON.call(this);return Zo(this.parameters.shapes,this.parameters.options,t)},qo.prototype=Object.create(ki.prototype),qo.prototype.constructor=qo,qo.prototype.toJSON=function(){var t=ki.prototype.toJSON.call(this);return Zo(this.parameters.shapes,this.parameters.options,t)};var Ko={generateTopUV:function(t,e,i,n,r){var o=e[3*i],a=e[3*i+1],s=e[3*n],h=e[3*n+1],c=e[3*r],l=e[3*r+1];return[new Ie(o,a),new Ie(s,h),new Ie(c,l)]},generateSideWallUV:function(t,e,i,n,r,o){var a=e[3*i],s=e[3*i+1],h=e[3*i+2],c=e[3*n],l=e[3*n+1],u=e[3*n+2],p=e[3*r],d=e[3*r+1],f=e[3*r+2],m=e[3*o],v=e[3*o+1],g=e[3*o+2];return Math.abs(s-l)<.01?[new Ie(a,1-h),new Ie(c,1-u),new Ie(p,1-f),new Ie(m,1-g)]:[new Ie(s,1-h),new Ie(l,1-u),new Ie(d,1-f),new Ie(v,1-g)]}};function Zo(t,e,i){if(i.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++){var o=t[n];i.shapes.push(o.uuid)}else i.shapes.push(t.uuid);return void 0!==e.extrudePath&&(i.options.extrudePath=e.extrudePath.toJSON()),i}function $o(t,e){Ei.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Jo(t,e)),this.mergeVertices()}function Jo(t,e){var i=(e=e||{}).font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Ei;var n=i.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),qo.call(this,n,e),this.type="TextBufferGeometry"}function Qo(t,e,i,n,r,o,a){Ei.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new ta(t,e,i,n,r,o,a)),this.mergeVertices()}function ta(t,e,i,n,r,o,a){ki.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:o,thetaLength:a},t=t||1,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var s,h,c=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),l=0,u=[],p=new De,d=new De,f=[],m=[],v=[],g=[];for(h=0;h<=i;h++){var y=[],_=h/i;for(s=0;s<=e;s++){var x=s/e;p.x=-t*Math.cos(n+x*r)*Math.sin(o+_*a),p.y=t*Math.cos(o+_*a),p.z=t*Math.sin(n+x*r)*Math.sin(o+_*a),m.push(p.x,p.y,p.z),d.set(p.x,p.y,p.z).normalize(),v.push(d.x,d.y,d.z),g.push(x,1-_),y.push(l++)}u.push(y)}for(h=0;h<i;h++)for(s=0;s<e;s++){var b=u[h][s+1],M=u[h][s],w=u[h+1][s],E=u[h+1][s+1];(0!==h||o>0)&&f.push(b,M,E),(h!==i-1||c<Math.PI)&&f.push(M,w,E)}this.setIndex(f),this.addAttribute("position",new Ii(m,3)),this.addAttribute("normal",new Ii(v,3)),this.addAttribute("uv",new Ii(g,2))}function ea(t,e,i,n,r,o){Ei.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new ia(t,e,i,n,r,o)),this.mergeVertices()}function ia(t,e,i,n,r,o){ki.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:o},t=t||.5,e=e||1,r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,i=void 0!==i?Math.max(3,i):8;var a,s,h,c=[],l=[],u=[],p=[],d=t,f=(e-t)/(n=void 0!==n?Math.max(1,n):1),m=new De,v=new Ie;for(s=0;s<=n;s++){for(h=0;h<=i;h++)a=r+h/i*o,m.x=d*Math.cos(a),m.y=d*Math.sin(a),l.push(m.x,m.y,m.z),u.push(0,0,1),v.x=(m.x/e+1)/2,v.y=(m.y/e+1)/2,p.push(v.x,v.y);d+=f}for(s=0;s<n;s++){var g=s*(i+1);for(h=0;h<i;h++){var y=a=h+g,_=a+i+1,x=a+i+2,b=a+1;c.push(y,_,b),c.push(_,x,b)}}this.setIndex(c),this.addAttribute("position",new Ii(l,3)),this.addAttribute("normal",new Ii(u,3)),this.addAttribute("uv",new Ii(p,2))}function na(t,e,i,n){Ei.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},this.fromBufferGeometry(new ra(t,e,i,n)),this.mergeVertices()}function ra(t,e,i,n){ki.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},e=Math.floor(e)||12,i=i||0,n=n||2*Math.PI,n=Pe.clamp(n,0,2*Math.PI);var r,o,a,s=[],h=[],c=[],l=1/e,u=new De,p=new Ie;for(o=0;o<=e;o++){var d=i+o*l*n,f=Math.sin(d),m=Math.cos(d);for(a=0;a<=t.length-1;a++)u.x=t[a].x*f,u.y=t[a].y,u.z=t[a].x*m,h.push(u.x,u.y,u.z),p.x=o/e,p.y=a/(t.length-1),c.push(p.x,p.y)}for(o=0;o<e;o++)for(a=0;a<t.length-1;a++){var v=r=a+o*t.length,g=r+t.length,y=r+t.length+1,_=r+1;s.push(v,g,_),s.push(g,y,_)}if(this.setIndex(s),this.addAttribute("position",new Ii(h,3)),this.addAttribute("uv",new Ii(c,2)),this.computeVertexNormals(),n===2*Math.PI){var x=this.attributes.normal.array,b=new De,M=new De,w=new De;for(r=e*t.length*3,o=0,a=0;o<t.length;o++,a+=3)b.x=x[a+0],b.y=x[a+1],b.z=x[a+2],M.x=x[r+a+0],M.y=x[r+a+1],M.z=x[r+a+2],w.addVectors(b,M).normalize(),x[a+0]=x[r+a+0]=w.x,x[a+1]=x[r+a+1]=w.y,x[a+2]=x[r+a+2]=w.z}}function oa(t,e){Ei.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new aa(t,e)),this.mergeVertices()}function aa(t,e){ki.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var i=[],n=[],r=[],o=[],a=0,s=0;if(!1===Array.isArray(t))c(t);else for(var h=0;h<t.length;h++)c(t[h]),this.addGroup(a,s,h),a+=s,s=0;function c(t){var a,h,c,l=n.length/3,u=t.extractPoints(e),p=u.shape,d=u.holes;if(!1===Vo.isClockWise(p))for(p=p.reverse(),a=0,h=d.length;a<h;a++)c=d[a],!0===Vo.isClockWise(c)&&(d[a]=c.reverse());var f=Vo.triangulateShape(p,d);for(a=0,h=d.length;a<h;a++)c=d[a],p=p.concat(c);for(a=0,h=p.length;a<h;a++){var m=p[a];n.push(m.x,m.y,0),r.push(0,0,1),o.push(m.x,m.y)}for(a=0,h=f.length;a<h;a++){var v=f[a],g=v[0]+l,y=v[1]+l,_=v[2]+l;i.push(g,y,_),s+=3}}this.setIndex(i),this.addAttribute("position",new Ii(n,3)),this.addAttribute("normal",new Ii(r,3)),this.addAttribute("uv",new Ii(o,2))}function sa(t,e){if(e.shapes=[],Array.isArray(t))for(var i=0,n=t.length;i<n;i++){var r=t[i];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}function ha(t,e){ki.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var i,n,r,o,a=[],s=Math.cos(Pe.DEG2RAD*e),h=[0,0],c={},l=["a","b","c"];t.isBufferGeometry?(o=new Ei).fromBufferGeometry(t):o=t.clone(),o.mergeVertices(),o.computeFaceNormals();for(var u=o.vertices,p=o.faces,d=0,f=p.length;d<f;d++)for(var m=p[d],v=0;v<3;v++)i=m[l[v]],n=m[l[(v+1)%3]],h[0]=Math.min(i,n),h[1]=Math.max(i,n),void 0===c[r=h[0]+","+h[1]]?c[r]={index1:h[0],index2:h[1],face1:d,face2:void 0}:c[r].face2=d;for(r in c){var g=c[r];if(void 0===g.face2||p[g.face1].normal.dot(p[g.face2].normal)<=s){var y=u[g.index1];a.push(y.x,y.y,y.z),y=u[g.index2],a.push(y.x,y.y,y.z)}}this.addAttribute("position",new Ii(a,3))}function ca(t,e,i,n,r,o,a,s){Ei.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new la(t,e,i,n,r,o,a,s)),this.mergeVertices()}function la(t,e,i,n,r,o,a,s){ki.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s};var h=this;t=void 0!==t?t:1,e=void 0!==e?e:1,i=i||1,n=Math.floor(n)||8,r=Math.floor(r)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var c=[],l=[],u=[],p=[],d=0,f=[],m=i/2,v=0;function g(i){var r,o,f,g=new Ie,y=new De,_=0,x=!0===i?t:e,b=!0===i?1:-1;for(o=d,r=1;r<=n;r++)l.push(0,m*b,0),u.push(0,b,0),p.push(.5,.5),d++;for(f=d,r=0;r<=n;r++){var M=r/n*s+a,w=Math.cos(M),E=Math.sin(M);y.x=x*E,y.y=m*b,y.z=x*w,l.push(y.x,y.y,y.z),u.push(0,b,0),g.x=.5*w+.5,g.y=.5*E*b+.5,p.push(g.x,g.y),d++}for(r=0;r<n;r++){var T=o+r,S=f+r;!0===i?c.push(S,S+1,T):c.push(S+1,S,T),_+=3}h.addGroup(v,_,!0===i?1:2),v+=_}!function(){var o,g,y=new De,_=new De,x=0,b=(e-t)/i;for(g=0;g<=r;g++){var M=[],w=g/r,E=w*(e-t)+t;for(o=0;o<=n;o++){var T=o/n,S=T*s+a,C=Math.sin(S),O=Math.cos(S);_.x=E*C,_.y=-w*i+m,_.z=E*O,l.push(_.x,_.y,_.z),y.set(C,b,O).normalize(),u.push(y.x,y.y,y.z),p.push(T,1-w),M.push(d++)}f.push(M)}for(o=0;o<n;o++)for(g=0;g<r;g++){var R=f[g][o],A=f[g+1][o],L=f[g+1][o+1],P=f[g][o+1];c.push(R,A,P),c.push(A,L,P),x+=6}h.addGroup(v,x,0),v+=x}(),!1===o&&(t>0&&g(!0),e>0&&g(!1)),this.setIndex(c),this.addAttribute("position",new Ii(l,3)),this.addAttribute("normal",new Ii(u,3)),this.addAttribute("uv",new Ii(p,2))}function ua(t,e,i,n,r,o,a){ca.call(this,0,t,e,i,n,r,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:o,thetaLength:a}}function pa(t,e,i,n,r,o,a){la.call(this,0,t,e,i,n,r,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:o,thetaLength:a}}function da(t,e,i,n){Ei.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new fa(t,e,i,n)),this.mergeVertices()}function fa(t,e,i,n){ki.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},t=t||1,e=void 0!==e?Math.max(3,e):8,i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI;var r,o,a=[],s=[],h=[],c=[],l=new De,u=new Ie;for(s.push(0,0,0),h.push(0,0,1),c.push(.5,.5),o=0,r=3;o<=e;o++,r+=3){var p=i+o/e*n;l.x=t*Math.cos(p),l.y=t*Math.sin(p),s.push(l.x,l.y,l.z),h.push(0,0,1),u.x=(s[r]/t+1)/2,u.y=(s[r+1]/t+1)/2,c.push(u.x,u.y)}for(r=1;r<=e;r++)a.push(r,r+1,0);this.setIndex(a),this.addAttribute("position",new Ii(s,3)),this.addAttribute("normal",new Ii(h,3)),this.addAttribute("uv",new Ii(c,2))}$o.prototype=Object.create(Ei.prototype),$o.prototype.constructor=$o,Jo.prototype=Object.create(qo.prototype),Jo.prototype.constructor=Jo,Qo.prototype=Object.create(Ei.prototype),Qo.prototype.constructor=Qo,ta.prototype=Object.create(ki.prototype),ta.prototype.constructor=ta,ea.prototype=Object.create(Ei.prototype),ea.prototype.constructor=ea,ia.prototype=Object.create(ki.prototype),ia.prototype.constructor=ia,na.prototype=Object.create(Ei.prototype),na.prototype.constructor=na,ra.prototype=Object.create(ki.prototype),ra.prototype.constructor=ra,oa.prototype=Object.create(Ei.prototype),oa.prototype.constructor=oa,oa.prototype.toJSON=function(){var t=Ei.prototype.toJSON.call(this);return sa(this.parameters.shapes,t)},aa.prototype=Object.create(ki.prototype),aa.prototype.constructor=aa,aa.prototype.toJSON=function(){var t=ki.prototype.toJSON.call(this);return sa(this.parameters.shapes,t)},ha.prototype=Object.create(ki.prototype),ha.prototype.constructor=ha,ca.prototype=Object.create(Ei.prototype),ca.prototype.constructor=ca,la.prototype=Object.create(ki.prototype),la.prototype.constructor=la,ua.prototype=Object.create(ca.prototype),ua.prototype.constructor=ua,pa.prototype=Object.create(la.prototype),pa.prototype.constructor=pa,da.prototype=Object.create(Ei.prototype),da.prototype.constructor=da,fa.prototype=Object.create(ki.prototype),fa.prototype.constructor=fa;var ma=Object.freeze({WireframeGeometry:io,ParametricGeometry:no,ParametricBufferGeometry:ro,TetrahedronGeometry:so,TetrahedronBufferGeometry:ho,OctahedronGeometry:co,OctahedronBufferGeometry:lo,IcosahedronGeometry:uo,IcosahedronBufferGeometry:po,DodecahedronGeometry:fo,DodecahedronBufferGeometry:mo,PolyhedronGeometry:oo,PolyhedronBufferGeometry:ao,TubeGeometry:vo,TubeBufferGeometry:go,TorusKnotGeometry:yo,TorusKnotBufferGeometry:_o,TorusGeometry:xo,TorusBufferGeometry:bo,TextGeometry:$o,TextBufferGeometry:Jo,SphereGeometry:Qo,SphereBufferGeometry:ta,RingGeometry:ea,RingBufferGeometry:ia,PlaneGeometry:zi,PlaneBufferGeometry:Bi,LatheGeometry:na,LatheBufferGeometry:ra,ShapeGeometry:oa,ShapeBufferGeometry:aa,ExtrudeGeometry:Yo,ExtrudeBufferGeometry:qo,EdgesGeometry:ha,ConeGeometry:ua,ConeBufferGeometry:pa,CylinderGeometry:ca,CylinderBufferGeometry:la,CircleGeometry:da,CircleBufferGeometry:fa,BoxGeometry:Gi,BoxBufferGeometry:Ui});function va(t){nn.call(this),this.type="ShadowMaterial",this.color=new ai(0),this.transparent=!0,this.setValues(t)}function ga(t){rn.call(this,t),this.type="RawShaderMaterial"}function ya(t){nn.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ai(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ai(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ae,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function _a(t){ya.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function xa(t){nn.call(this),this.type="MeshPhongMaterial",this.color=new ai(16777215),this.specular=new ai(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ai(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ae,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=nt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function ba(t){xa.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function Ma(t){nn.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ae,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function wa(t){nn.call(this),this.type="MeshLambertMaterial",this.color=new ai(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ai(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=nt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ea(t){if(nn.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ai(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ae,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(t),null===this.matcap){var e=document.createElement("canvas");e.width=1,e.height=1;var i=e.getContext("2d");i.fillStyle="#fff",i.fillRect(0,0,1,1),this.matcap=new THREE.CanvasTexture(e)}}function Ta(t){Xr.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}va.prototype=Object.create(nn.prototype),va.prototype.constructor=va,va.prototype.isShadowMaterial=!0,va.prototype.copy=function(t){return nn.prototype.copy.call(this,t),this.color.copy(t.color),this},ga.prototype=Object.create(rn.prototype),ga.prototype.constructor=ga,ga.prototype.isRawShaderMaterial=!0,ya.prototype=Object.create(nn.prototype),ya.prototype.constructor=ya,ya.prototype.isMeshStandardMaterial=!0,ya.prototype.copy=function(t){return nn.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},_a.prototype=Object.create(ya.prototype),_a.prototype.constructor=_a,_a.prototype.isMeshPhysicalMaterial=!0,_a.prototype.copy=function(t){return ya.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},xa.prototype=Object.create(nn.prototype),xa.prototype.constructor=xa,xa.prototype.isMeshPhongMaterial=!0,xa.prototype.copy=function(t){return nn.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},ba.prototype=Object.create(xa.prototype),ba.prototype.constructor=ba,ba.prototype.isMeshToonMaterial=!0,ba.prototype.copy=function(t){return xa.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},Ma.prototype=Object.create(nn.prototype),Ma.prototype.constructor=Ma,Ma.prototype.isMeshNormalMaterial=!0,Ma.prototype.copy=function(t){return nn.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},wa.prototype=Object.create(nn.prototype),wa.prototype.constructor=wa,wa.prototype.isMeshLambertMaterial=!0,wa.prototype.copy=function(t){return nn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ea.prototype=Object.create(nn.prototype),Ea.prototype.constructor=Ea,Ea.prototype.isMeshMatcapMaterial=!0,Ea.prototype.copy=function(t){return nn.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ta.prototype=Object.create(Xr.prototype),Ta.prototype.constructor=Ta,Ta.prototype.isLineDashedMaterial=!0,Ta.prototype.copy=function(t){return Xr.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Sa=Object.freeze({ShadowMaterial:va,SpriteMaterial:Ur,RawShaderMaterial:ga,ShaderMaterial:rn,PointsMaterial:Zr,MeshPhysicalMaterial:_a,MeshStandardMaterial:ya,MeshPhongMaterial:xa,MeshToonMaterial:ba,MeshNormalMaterial:Ma,MeshLambertMaterial:wa,MeshDepthMaterial:Tr,MeshDistanceMaterial:Sr,MeshBasicMaterial:sn,MeshMatcapMaterial:Ea,LineDashedMaterial:Ta,LineBasicMaterial:Xr,Material:nn}),Ca={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function Oa(t,e,i){var n=this,r=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){a++,!1===r&&void 0!==n.onStart&&n.onStart(t,o,a),r=!0},this.itemEnd=function(t){o++,void 0!==n.onProgress&&n.onProgress(t,o,a),o===a&&(r=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(t){void 0!==n.onError&&n.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this}}var Ra=new Oa,Aa={};function La(t){this.manager=void 0!==t?t:Ra}function Pa(t){this.manager=void 0!==t?t:Ra,this._parser=null}function Ia(t){this.manager=void 0!==t?t:Ra}function Na(t){this.manager=void 0!==t?t:Ra}function Fa(t){this.manager=void 0!==t?t:Ra}function Da(){this.type="Curve",this.arcLengthDivisions=200}function ja(t,e,i,n,r,o,a,s){Da.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=i||1,this.yRadius=n||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function ka(t,e,i,n,r,o){ja.call(this,t,e,i,i,n,r,o),this.type="ArcCurve"}function Ga(){var t=0,e=0,i=0,n=0;function r(r,o,a,s){t=r,e=a,i=-3*r+3*o-2*a-s,n=2*r-2*o+a+s}return{initCatmullRom:function(t,e,i,n,o){r(e,i,o*(i-t),o*(n-e))},initNonuniformCatmullRom:function(t,e,i,n,o,a,s){var h=(e-t)/o-(i-t)/(o+a)+(i-e)/a,c=(i-e)/a-(n-e)/(a+s)+(n-i)/s;r(e,i,h*=a,c*=a)},calc:function(r){var o=r*r;return t+e*r+i*o+n*(o*r)}}}Object.assign(La.prototype,{load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=Ca.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;if(void 0===Aa[t]){var a=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],h=!!a[2],c=a[3];c=window.decodeURIComponent(c),h&&(c=window.atob(c));try{var l,u=(this.responseType||"").toLowerCase();switch(u){case"arraybuffer":case"blob":for(var p=new Uint8Array(c.length),d=0;d<c.length;d++)p[d]=c.charCodeAt(d);l="blob"===u?new Blob([p.buffer],{type:s}):p.buffer;break;case"document":var f=new DOMParser;l=f.parseFromString(c,s);break;case"json":l=JSON.parse(c);break;default:l=c}window.setTimeout(function(){e&&e(l),r.manager.itemEnd(t)},0)}catch(e){window.setTimeout(function(){n&&n(e),r.manager.itemEnd(t),r.manager.itemError(t)},0)}}else{Aa[t]=[],Aa[t].push({onLoad:e,onProgress:i,onError:n});var m=new XMLHttpRequest;for(var v in m.open("GET",t,!0),m.addEventListener("load",function(e){var i=this.response;Ca.add(t,i);var n=Aa[t];if(delete Aa[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=n.length;o<a;o++){(s=n[o]).onLoad&&s.onLoad(i)}r.manager.itemEnd(t)}else{for(o=0,a=n.length;o<a;o++){var s;(s=n[o]).onError&&s.onError(e)}r.manager.itemEnd(t),r.manager.itemError(t)}},!1),m.addEventListener("progress",function(e){for(var i=Aa[t],n=0,r=i.length;n<r;n++){var o=i[n];o.onProgress&&o.onProgress(e)}},!1),m.addEventListener("error",function(e){var i=Aa[t];delete Aa[t];for(var n=0,o=i.length;n<o;n++){var a=i[n];a.onError&&a.onError(e)}r.manager.itemEnd(t),r.manager.itemError(t)},!1),m.addEventListener("abort",function(e){var i=Aa[t];delete Aa[t];for(var n=0,o=i.length;n<o;n++){var a=i[n];a.onError&&a.onError(e)}r.manager.itemEnd(t),r.manager.itemError(t)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return r.manager.itemStart(t),m}Aa[t].push({onLoad:e,onProgress:i,onError:n})},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(function(t){this.manager=void 0!==t?t:Ra,this._parser=null}.prototype,{load:function(t,e,i,n){var r=this,o=[],a=new Qr;a.image=o;var s=new La(this.manager);function h(h){s.load(t[h],function(t){var i=r._parser(t,!0);o[h]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},6===(c+=1)&&(1===i.mipmapCount&&(a.minFilter=Et),a.format=i.format,a.needsUpdate=!0,e&&e(a))},i,n)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(t))for(var c=0,l=0,u=t.length;l<u;++l)h(l);else s.load(t,function(t){var i=r._parser(t,!0);if(i.isCubemap)for(var n=i.mipmaps.length/i.mipmapCount,s=0;s<n;s++){o[s]={mipmaps:[]};for(var h=0;h<i.mipmapCount;h++)o[s].mipmaps.push(i.mipmaps[s*i.mipmapCount+h]),o[s].format=i.format,o[s].width=i.width,o[s].height=i.height}else a.image.width=i.width,a.image.height=i.height,a.mipmaps=i.mipmaps;1===i.mipmapCount&&(a.minFilter=Et),a.format=i.format,a.needsUpdate=!0,e&&e(a)},i,n);return a},setPath:function(t){return this.path=t,this}}),Object.assign(Pa.prototype,{load:function(t,e,i,n){var r=this,o=new Ke,a=new La(this.manager);return a.setResponseType("arraybuffer"),a.load(t,function(t){var i=r._parser(t);i&&(void 0!==i.image?o.image=i.image:void 0!==i.data&&(o.image.width=i.width,o.image.height=i.height,o.image.data=i.data),o.wrapS=void 0!==i.wrapS?i.wrapS:_t,o.wrapT=void 0!==i.wrapT?i.wrapT:_t,o.magFilter=void 0!==i.magFilter?i.magFilter:Et,o.minFilter=void 0!==i.minFilter?i.minFilter:St,o.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.format&&(o.format=i.format),void 0!==i.type&&(o.type=i.type),void 0!==i.mipmaps&&(o.mipmaps=i.mipmaps),1===i.mipmapCount&&(o.minFilter=Et),o.needsUpdate=!0,e&&e(o,i))},i,n),o}}),Object.assign(Ia.prototype,{crossOrigin:"anonymous",load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=Ca.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",h,!1),Ca.add(t,this),e&&e(this),r.manager.itemEnd(t)}function h(e){a.removeEventListener("load",s,!1),a.removeEventListener("error",h,!1),n&&n(e),r.manager.itemEnd(t),r.manager.itemError(t)}return a.addEventListener("load",s,!1),a.addEventListener("error",h,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(t),a.src=t,a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Na.prototype,{crossOrigin:"anonymous",load:function(t,e,i,n){var r=new ln,o=new Ia(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(i){o.load(t[i],function(t){r.images[i]=t,6===++a&&(r.needsUpdate=!0,e&&e(r))},void 0,n)}for(var h=0;h<t.length;++h)s(h);return r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Fa.prototype,{crossOrigin:"anonymous",load:function(t,e,i,n){var r=new We,o=new Ia(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(i){r.image=i;var n=t.search(/\.jpe?g$/i)>0||0===t.search(/^data\:image\/jpeg/);r.format=n?Ut:zt,r.needsUpdate=!0,void 0!==e&&e(r)},i,n),r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Da.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var i=this.getUtoTmapping(t);return this.getPoint(i,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i,n=[],r=this.getPoint(0),o=0;for(n.push(0),i=1;i<=t;i++)o+=(e=this.getPoint(i/t)).distanceTo(r),n.push(o),r=e;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var i,n=this.getLengths(),r=0,o=n.length;i=e||t*n[o-1];for(var a,s=0,h=o-1;s<=h;)if((a=n[r=Math.floor(s+(h-s)/2)]-i)<0)s=r+1;else{if(!(a>0)){h=r;break}h=r-1}if(n[r=h]===i)return r/(o-1);var c=n[r];return(r+(i-c)/(n[r+1]-c))/(o-1)},getTangent:function(t){var e=t-1e-4,i=t+1e-4;e<0&&(e=0),i>1&&(i=1);var n=this.getPoint(e);return this.getPoint(i).clone().sub(n).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var i,n,r,o=new De,a=[],s=[],h=[],c=new De,l=new Ne;for(i=0;i<=t;i++)n=i/t,a[i]=this.getTangentAt(n),a[i].normalize();s[0]=new De,h[0]=new De;var u=Number.MAX_VALUE,p=Math.abs(a[0].x),d=Math.abs(a[0].y),f=Math.abs(a[0].z);for(p<=u&&(u=p,o.set(1,0,0)),d<=u&&(u=d,o.set(0,1,0)),f<=u&&o.set(0,0,1),c.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],c),h[0].crossVectors(a[0],s[0]),i=1;i<=t;i++)s[i]=s[i-1].clone(),h[i]=h[i-1].clone(),c.crossVectors(a[i-1],a[i]),c.length()>Number.EPSILON&&(c.normalize(),r=Math.acos(Pe.clamp(a[i-1].dot(a[i]),-1,1)),s[i].applyMatrix4(l.makeRotationAxis(c,r))),h[i].crossVectors(a[i],s[i]);if(!0===e)for(r=Math.acos(Pe.clamp(s[0].dot(s[t]),-1,1)),r/=t,a[0].dot(c.crossVectors(s[0],s[t]))>0&&(r=-r),i=1;i<=t;i++)s[i].applyMatrix4(l.makeRotationAxis(a[i],r*i)),h[i].crossVectors(a[i],s[i]);return{tangents:a,normals:s,binormals:h}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),ja.prototype=Object.create(Da.prototype),ja.prototype.constructor=ja,ja.prototype.isEllipseCurve=!0,ja.prototype.getPoint=function(t,e){for(var i=e||new Ie,n=2*Math.PI,r=this.aEndAngle-this.aStartAngle,o=Math.abs(r)<Number.EPSILON;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=o?0:n),!0!==this.aClockwise||o||(r===n?r=-n:r-=n);var a=this.aStartAngle+t*r,s=this.aX+this.xRadius*Math.cos(a),h=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var c=Math.cos(this.aRotation),l=Math.sin(this.aRotation),u=s-this.aX,p=h-this.aY;s=u*c-p*l+this.aX,h=u*l+p*c+this.aY}return i.set(s,h)},ja.prototype.copy=function(t){return Da.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},ja.prototype.toJSON=function(){var t=Da.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},ja.prototype.fromJSON=function(t){return Da.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},ka.prototype=Object.create(ja.prototype),ka.prototype.constructor=ka,ka.prototype.isArcCurve=!0;var Ua=new De,za=new Ga,Ba=new Ga,Ha=new Ga;function Va(t,e,i,n){Da.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=i||"centripetal",this.tension=n||.5}function Wa(t,e,i,n,r){var o=.5*(n-e),a=.5*(r-i),s=t*t;return(2*i-2*n+o+a)*(t*s)+(-3*i+3*n-2*o-a)*s+o*t+i}function Xa(t,e,i,n){return function(t,e){var i=1-t;return i*i*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,i)+function(t,e){return t*t*e}(t,n)}function Ya(t,e,i,n,r){return function(t,e){var i=1-t;return i*i*i*e}(t,e)+function(t,e){var i=1-t;return 3*i*i*t*e}(t,i)+function(t,e){return 3*(1-t)*t*t*e}(t,n)+function(t,e){return t*t*t*e}(t,r)}function qa(t,e,i,n){Da.call(this),this.type="CubicBezierCurve",this.v0=t||new Ie,this.v1=e||new Ie,this.v2=i||new Ie,this.v3=n||new Ie}function Ka(t,e,i,n){Da.call(this),this.type="CubicBezierCurve3",this.v0=t||new De,this.v1=e||new De,this.v2=i||new De,this.v3=n||new De}function Za(t,e){Da.call(this),this.type="LineCurve",this.v1=t||new Ie,this.v2=e||new Ie}function $a(t,e){Da.call(this),this.type="LineCurve3",this.v1=t||new De,this.v2=e||new De}function Ja(t,e,i){Da.call(this),this.type="QuadraticBezierCurve",this.v0=t||new Ie,this.v1=e||new Ie,this.v2=i||new Ie}function Qa(t,e,i){Da.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new De,this.v1=e||new De,this.v2=i||new De}function ts(t){Da.call(this),this.type="SplineCurve",this.points=t||[]}Va.prototype=Object.create(Da.prototype),Va.prototype.constructor=Va,Va.prototype.isCatmullRomCurve3=!0,Va.prototype.getPoint=function(t,e){var i,n,r,o,a=e||new De,s=this.points,h=s.length,c=(h-(this.closed?0:1))*t,l=Math.floor(c),u=c-l;if(this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/h)+1)*h:0===u&&l===h-1&&(l=h-2,u=1),this.closed||l>0?i=s[(l-1)%h]:(Ua.subVectors(s[0],s[1]).add(s[0]),i=Ua),n=s[l%h],r=s[(l+1)%h],this.closed||l+2<h?o=s[(l+2)%h]:(Ua.subVectors(s[h-1],s[h-2]).add(s[h-1]),o=Ua),"centripetal"===this.curveType||"chordal"===this.curveType){var p="chordal"===this.curveType?.5:.25,d=Math.pow(i.distanceToSquared(n),p),f=Math.pow(n.distanceToSquared(r),p),m=Math.pow(r.distanceToSquared(o),p);f<1e-4&&(f=1),d<1e-4&&(d=f),m<1e-4&&(m=f),za.initNonuniformCatmullRom(i.x,n.x,r.x,o.x,d,f,m),Ba.initNonuniformCatmullRom(i.y,n.y,r.y,o.y,d,f,m),Ha.initNonuniformCatmullRom(i.z,n.z,r.z,o.z,d,f,m)}else"catmullrom"===this.curveType&&(za.initCatmullRom(i.x,n.x,r.x,o.x,this.tension),Ba.initCatmullRom(i.y,n.y,r.y,o.y,this.tension),Ha.initCatmullRom(i.z,n.z,r.z,o.z,this.tension));return a.set(za.calc(u),Ba.calc(u),Ha.calc(u)),a},Va.prototype.copy=function(t){Da.prototype.copy.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Va.prototype.toJSON=function(){var t=Da.prototype.toJSON.call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++){var n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},Va.prototype.fromJSON=function(t){Da.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var n=t.points[e];this.points.push((new De).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},qa.prototype=Object.create(Da.prototype),qa.prototype.constructor=qa,qa.prototype.isCubicBezierCurve=!0,qa.prototype.getPoint=function(t,e){var i=e||new Ie,n=this.v0,r=this.v1,o=this.v2,a=this.v3;return i.set(Ya(t,n.x,r.x,o.x,a.x),Ya(t,n.y,r.y,o.y,a.y)),i},qa.prototype.copy=function(t){return Da.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},qa.prototype.toJSON=function(){var t=Da.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},qa.prototype.fromJSON=function(t){return Da.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Ka.prototype=Object.create(Da.prototype),Ka.prototype.constructor=Ka,Ka.prototype.isCubicBezierCurve3=!0,Ka.prototype.getPoint=function(t,e){var i=e||new De,n=this.v0,r=this.v1,o=this.v2,a=this.v3;return i.set(Ya(t,n.x,r.x,o.x,a.x),Ya(t,n.y,r.y,o.y,a.y),Ya(t,n.z,r.z,o.z,a.z)),i},Ka.prototype.copy=function(t){return Da.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Ka.prototype.toJSON=function(){var t=Da.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Ka.prototype.fromJSON=function(t){return Da.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Za.prototype=Object.create(Da.prototype),Za.prototype.constructor=Za,Za.prototype.isLineCurve=!0,Za.prototype.getPoint=function(t,e){var i=e||new Ie;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i},Za.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Za.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Za.prototype.copy=function(t){return Da.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Za.prototype.toJSON=function(){var t=Da.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Za.prototype.fromJSON=function(t){return Da.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},$a.prototype=Object.create(Da.prototype),$a.prototype.constructor=$a,$a.prototype.isLineCurve3=!0,$a.prototype.getPoint=function(t,e){var i=e||new De;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i},$a.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},$a.prototype.copy=function(t){return Da.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},$a.prototype.toJSON=function(){var t=Da.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},$a.prototype.fromJSON=function(t){return Da.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Ja.prototype=Object.create(Da.prototype),Ja.prototype.constructor=Ja,Ja.prototype.isQuadraticBezierCurve=!0,Ja.prototype.getPoint=function(t,e){var i=e||new Ie,n=this.v0,r=this.v1,o=this.v2;return i.set(Xa(t,n.x,r.x,o.x),Xa(t,n.y,r.y,o.y)),i},Ja.prototype.copy=function(t){return Da.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Ja.prototype.toJSON=function(){var t=Da.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Ja.prototype.fromJSON=function(t){return Da.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Qa.prototype=Object.create(Da.prototype),Qa.prototype.constructor=Qa,Qa.prototype.isQuadraticBezierCurve3=!0,Qa.prototype.getPoint=function(t,e){var i=e||new De,n=this.v0,r=this.v1,o=this.v2;return i.set(Xa(t,n.x,r.x,o.x),Xa(t,n.y,r.y,o.y),Xa(t,n.z,r.z,o.z)),i},Qa.prototype.copy=function(t){return Da.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Qa.prototype.toJSON=function(){var t=Da.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Qa.prototype.fromJSON=function(t){return Da.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},ts.prototype=Object.create(Da.prototype),ts.prototype.constructor=ts,ts.prototype.isSplineCurve=!0,ts.prototype.getPoint=function(t,e){var i=e||new Ie,n=this.points,r=(n.length-1)*t,o=Math.floor(r),a=r-o,s=n[0===o?o:o-1],h=n[o],c=n[o>n.length-2?n.length-1:o+1],l=n[o>n.length-3?n.length-1:o+2];return i.set(Wa(a,s.x,h.x,c.x,l.x),Wa(a,s.y,h.y,c.y,l.y)),i},ts.prototype.copy=function(t){Da.prototype.copy.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var n=t.points[e];this.points.push(n.clone())}return this},ts.prototype.toJSON=function(){var t=Da.prototype.toJSON.call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++){var n=this.points[e];t.points.push(n.toArray())}return t},ts.prototype.fromJSON=function(t){Da.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var n=t.points[e];this.points.push((new Ie).fromArray(n))}return this};var es=Object.freeze({ArcCurve:ka,CatmullRomCurve3:Va,CubicBezierCurve:qa,CubicBezierCurve3:Ka,EllipseCurve:ja,LineCurve:Za,LineCurve3:$a,QuadraticBezierCurve:Ja,QuadraticBezierCurve3:Qa,SplineCurve:ts});function is(){Da.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function ns(t){is.call(this),this.type="Path",this.currentPoint=new Ie,t&&this.setFromPoints(t)}function rs(t){ns.call(this,t),this.uuid=Pe.generateUUID(),this.type="Shape",this.holes=[]}function os(t,e){xi.call(this),this.type="Light",this.color=new ai(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function as(t,e,i){os.call(this,t,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(xi.DefaultUp),this.updateMatrix(),this.groundColor=new ai(e)}function ss(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new Ie(512,512),this.map=null,this.matrix=new Ne}function hs(){ss.call(this,new Lr(50,1,.5,500))}function cs(t,e,i,n,r,o){os.call(this,t,e),this.type="SpotLight",this.position.copy(xi.DefaultUp),this.updateMatrix(),this.target=new xi,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new hs}function ls(t,e,i,n){os.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==n?n:1,this.shadow=new ss(new Lr(90,1,.5,500))}function us(t,e,i,n,r,o){Ar.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function ps(){ss.call(this,new us(-5,5,5,-5,.5,500))}function ds(t,e){os.call(this,t,e),this.type="DirectionalLight",this.position.copy(xi.DefaultUp),this.updateMatrix(),this.target=new xi,this.shadow=new ps}function fs(t,e){os.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function ms(t,e,i,n){os.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==i?i:10,this.height=void 0!==n?n:10}is.prototype=Object.assign(Object.create(Da.prototype),{constructor:is,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Za(e,t))},getPoint:function(t){for(var e=t*this.getLength(),i=this.getCurveLengths(),n=0;n<i.length;){if(i[n]>=e){var r=i[n]-e,o=this.curves[n],a=o.getLength(),s=0===a?0:1-r/a;return o.getPointAt(s)}n++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,i=[],n=0,r=this.curves;n<r.length;n++)for(var o=r[n],a=o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a),h=0;h<s.length;h++){var c=s[h];e&&e.equals(c)||(i.push(c),e=c)}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},copy:function(t){Da.prototype.copy.call(this,t),this.curves=[];for(var e=0,i=t.curves.length;e<i;e++){var n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=Da.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,i=this.curves.length;e<i;e++){var n=this.curves[e];t.curves.push(n.toJSON())}return t},fromJSON:function(t){Da.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,i=t.curves.length;e<i;e++){var n=t.curves[e];this.curves.push((new es[n.type]).fromJSON(n))}return this}}),ns.prototype=Object.assign(Object.create(is.prototype),{constructor:ns,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var i=new Za(this.currentPoint.clone(),new Ie(t,e));this.curves.push(i),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,i,n){var r=new Ja(this.currentPoint.clone(),new Ie(t,e),new Ie(i,n));this.curves.push(r),this.currentPoint.set(i,n)},bezierCurveTo:function(t,e,i,n,r,o){var a=new qa(this.currentPoint.clone(),new Ie(t,e),new Ie(i,n),new Ie(r,o));this.curves.push(a),this.currentPoint.set(r,o)},splineThru:function(t){var e=new ts([this.currentPoint.clone()].concat(t));this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,i,n,r,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(t+a,e+s,i,n,r,o)},absarc:function(t,e,i,n,r,o){this.absellipse(t,e,i,i,n,r,o)},ellipse:function(t,e,i,n,r,o,a,s){var h=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(t+h,e+c,i,n,r,o,a,s)},absellipse:function(t,e,i,n,r,o,a,s){var h=new ja(t,e,i,n,r,o,a,s);if(this.curves.length>0){var c=h.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(h);var l=h.getPoint(1);this.currentPoint.copy(l)},copy:function(t){return is.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=is.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return is.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),rs.prototype=Object.assign(Object.create(ns.prototype),{constructor:rs,getPointsHoles:function(t){for(var e=[],i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){ns.prototype.copy.call(this,t),this.holes=[];for(var e=0,i=t.holes.length;e<i;e++){var n=t.holes[e];this.holes.push(n.clone())}return this},toJSON:function(){var t=ns.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,i=this.holes.length;e<i;e++){var n=this.holes[e];t.holes.push(n.toJSON())}return t},fromJSON:function(t){ns.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,i=t.holes.length;e<i;e++){var n=t.holes[e];this.holes.push((new ns).fromJSON(n))}return this}}),os.prototype=Object.assign(Object.create(xi.prototype),{constructor:os,isLight:!0,copy:function(t){return xi.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=xi.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),as.prototype=Object.assign(Object.create(os.prototype),{constructor:as,isHemisphereLight:!0,copy:function(t){return os.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(ss.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),hs.prototype=Object.assign(Object.create(ss.prototype),{constructor:hs,isSpotLightShadow:!0,update:function(t){var e=this.camera,i=2*Pe.RAD2DEG*t.angle,n=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;i===e.fov&&n===e.aspect&&r===e.far||(e.fov=i,e.aspect=n,e.far=r,e.updateProjectionMatrix())}}),cs.prototype=Object.assign(Object.create(os.prototype),{constructor:cs,isSpotLight:!0,copy:function(t){return os.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),ls.prototype=Object.assign(Object.create(os.prototype),{constructor:ls,isPointLight:!0,copy:function(t){return os.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),us.prototype=Object.assign(Object.create(Ar.prototype),{constructor:us,isOrthographicCamera:!0,copy:function(t,e){return Ar.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,i,n,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-t,o=i+t,a=n+e,s=n-e;if(null!==this.view&&this.view.enabled){var h=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),l=(this.right-this.left)/this.view.width,u=(this.top-this.bottom)/this.view.height;o=(r+=l*(this.view.offsetX/h))+l*(this.view.width/h),s=(a-=u*(this.view.offsetY/c))-u*(this.view.height/c)}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=xi.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),ps.prototype=Object.assign(Object.create(ss.prototype),{constructor:ps}),ds.prototype=Object.assign(Object.create(os.prototype),{constructor:ds,isDirectionalLight:!0,copy:function(t){return os.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),fs.prototype=Object.assign(Object.create(os.prototype),{constructor:fs,isAmbientLight:!0}),ms.prototype=Object.assign(Object.create(os.prototype),{constructor:ms,isRectAreaLight:!0,copy:function(t){return os.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=os.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}});var vs={arraySlice:function(t,e,i){return vs.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==i?i:t.length)):t.slice(e,i)},convertArray:function(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,i=new Array(e),n=0;n!==e;++n)i[n]=n;return i.sort(function(e,i){return t[e]-t[i]}),i},sortedArray:function(t,e,i){for(var n=t.length,r=new t.constructor(n),o=0,a=0;a!==n;++o)for(var s=i[o]*e,h=0;h!==e;++h)r[a++]=t[s+h];return r},flattenJSON:function(t,e,i,n){for(var r=1,o=t[0];void 0!==o&&void 0===o[n];)o=t[r++];if(void 0!==o){var a=o[n];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[n])&&(e.push(o.time),i.push.apply(i,a)),o=t[r++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[n])&&(e.push(o.time),a.toArray(i,i.length)),o=t[r++]}while(void 0!==o);else do{void 0!==(a=o[n])&&(e.push(o.time),i.push(a)),o=t[r++]}while(void 0!==o)}}};function gs(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i}function ys(t,e,i,n){gs.call(this,t,e,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function _s(t,e,i,n){gs.call(this,t,e,i,n)}function xs(t,e,i,n){gs.call(this,t,e,i,n)}function bs(t,e,i,n){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=vs.convertArray(e,this.TimeBufferType),this.values=vs.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function Ms(t,e,i){bs.call(this,t,e,i)}function ws(t,e,i,n){bs.call(this,t,e,i,n)}function Es(t,e,i,n){bs.call(this,t,e,i,n)}function Ts(t,e,i,n){gs.call(this,t,e,i,n)}function Ss(t,e,i,n){bs.call(this,t,e,i,n)}function Cs(t,e,i,n){bs.call(this,t,e,i,n)}function Os(t,e,i,n){bs.call(this,t,e,i,n)}function Rs(t,e,i){this.name=t,this.tracks=i,this.duration=void 0!==e?e:-1,this.uuid=Pe.generateUUID(),this.duration<0&&this.resetDuration()}function As(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Es;case"vector":case"vector2":case"vector3":case"vector4":return Os;case"color":return ws;case"quaternion":return Ss;case"bool":case"boolean":return Ms;case"string":return Cs}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var i=[],n=[];vs.flattenJSON(t.keys,i,n,"value"),t.times=i,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}function Ls(t){this.manager=void 0!==t?t:Ra,this.textures={}}function Ps(t){this.manager=void 0!==t?t:Ra}Object.assign(gs.prototype,{evaluate:function(t){var e=this.parameterPositions,i=this._cachedIndex,n=e[i],r=e[i-1];t:{e:{var o;i:{n:if(!(t<n)){for(var a=i+2;;){if(void 0===n){if(t<r)break n;return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,t,r)}if(i===a)break;if(r=n,t<(n=e[++i]))break e}o=e.length;break i}if(t>=r)break t;var s=e[1];t<s&&(i=2,r=s);for(a=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(i===a)break;if(n=r,t>=(r=e[--i-1]))break e}o=i,i=0}for(;i<o;){var h=i+o>>>1;t<e[h]?o=h:i=h+1}if(n=e[i],void 0===(r=e[i-1]))return this._cachedIndex=0,this.beforeStart_(0,t,n);if(void 0===n)return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,r,t)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=t*n,o=0;o!==n;++o)e[o]=i[r+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(gs.prototype,{beforeStart_:gs.prototype.copySampleValue_,afterEnd_:gs.prototype.copySampleValue_}),ys.prototype=Object.assign(Object.create(gs.prototype),{constructor:ys,DefaultSettings_:{endingStart:ge,endingEnd:ge},intervalChanged_:function(t,e,i){var n=this.parameterPositions,r=t-2,o=t+1,a=n[r],s=n[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:r=t,a=2*e-i;break;case 2402:a=e+n[r=n.length-2]-n[r+1];break;default:r=t,a=i}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=t,s=2*i-e;break;case 2402:o=1,s=i+n[1]-n[0];break;default:o=t-1,s=e}var h=.5*(i-e),c=this.valueSize;this._weightPrev=h/(e-a),this._weightNext=h/(s-i),this._offsetPrev=r*c,this._offsetNext=o*c},interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,h=s-a,c=this._offsetPrev,l=this._offsetNext,u=this._weightPrev,p=this._weightNext,d=(i-e)/(n-e),f=d*d,m=f*d,v=-u*m+2*u*f-u*d,g=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*d+1,y=(-1-p)*m+(1.5+p)*f+.5*d,_=p*m-p*f,x=0;x!==a;++x)r[x]=v*o[c+x]+g*o[h+x]+y*o[s+x]+_*o[l+x];return r}}),_s.prototype=Object.assign(Object.create(gs.prototype),{constructor:_s,interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,h=s-a,c=(i-e)/(n-e),l=1-c,u=0;u!==a;++u)r[u]=o[h+u]*l+o[s+u]*c;return r}}),xs.prototype=Object.assign(Object.create(gs.prototype),{constructor:xs,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(bs,{toJSON:function(t){var e,i=t.constructor;if(void 0!==i.toJSON)e=i.toJSON(t);else{e={name:t.name,times:vs.convertArray(t.times,Array),values:vs.convertArray(t.values,Array)};var n=t.getInterpolation();n!==t.DefaultInterpolation&&(e.interpolation=n)}return e.type=t.ValueTypeName,e}}),Object.assign(bs.prototype,{constructor:bs,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new xs(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new _s(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new ys(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]*=t;return this},trim:function(t,e){for(var i=this.times,n=i.length,r=0,o=n-1;r!==n&&i[r]<t;)++r;for(;-1!==o&&i[o]>e;)--o;if(++o,0!==r||o!==n){r>=o&&(r=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=vs.arraySlice(i,r,o),this.values=vs.arraySlice(this.values,r*a,o*a)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var i=this.times,n=this.values,r=i.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,a=0;a!==r;a++){var s=i[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),t=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),t=!1;break}o=s}if(void 0!==n&&vs.isTypedArray(n)){a=0;for(var h=n.length;a!==h;++a){var c=n[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),t=!1;break}}}return t},optimize:function(){for(var t=this.times,e=this.values,i=this.getValueSize(),n=2302===this.getInterpolation(),r=1,o=t.length-1,a=1;a<o;++a){var s=!1,h=t[a];if(h!==t[a+1]&&(1!==a||h!==h[0]))if(n)s=!0;else for(var c=a*i,l=c-i,u=c+i,p=0;p!==i;++p){var d=e[c+p];if(d!==e[l+p]||d!==e[u+p]){s=!0;break}}if(s){if(a!==r){t[r]=t[a];var f=a*i,m=r*i;for(p=0;p!==i;++p)e[m+p]=e[f+p]}++r}}if(o>0){t[r]=t[o];for(f=o*i,m=r*i,p=0;p!==i;++p)e[m+p]=e[f+p];++r}return r!==t.length&&(this.times=vs.arraySlice(t,0,r),this.values=vs.arraySlice(e,0,r*i)),this}}),Ms.prototype=Object.assign(Object.create(bs.prototype),{constructor:Ms,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ws.prototype=Object.assign(Object.create(bs.prototype),{constructor:ws,ValueTypeName:"color"}),Es.prototype=Object.assign(Object.create(bs.prototype),{constructor:Es,ValueTypeName:"number"}),Ts.prototype=Object.assign(Object.create(gs.prototype),{constructor:Ts,interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,h=(i-e)/(n-e),c=s+a;s!==c;s+=4)Fe.slerpFlat(r,0,o,s-a,o,s,h);return r}}),Ss.prototype=Object.assign(Object.create(bs.prototype),{constructor:Ss,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new Ts(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Cs.prototype=Object.assign(Object.create(bs.prototype),{constructor:Cs,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Os.prototype=Object.assign(Object.create(bs.prototype),{constructor:Os,ValueTypeName:"vector"}),Object.assign(Rs,{parse:function(t){for(var e=[],i=t.tracks,n=1/(t.fps||1),r=0,o=i.length;r!==o;++r)e.push(As(i[r]).scale(n));return new Rs(t.name,t.duration,e)},toJSON:function(t){for(var e=[],i=t.tracks,n={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid},r=0,o=i.length;r!==o;++r)e.push(bs.toJSON(i[r]));return n},CreateFromMorphTargetSequence:function(t,e,i,n){for(var r=e.length,o=[],a=0;a<r;a++){var s=[],h=[];s.push((a+r-1)%r,a,(a+1)%r),h.push(0,1,0);var c=vs.getKeyframeOrder(s);s=vs.sortedArray(s,1,c),h=vs.sortedArray(h,1,c),n||0!==s[0]||(s.push(r),h.push(h[0])),o.push(new Es(".morphTargetInfluences["+e[a].name+"]",s,h).scale(1/i))}return new Rs(t,-1,o)},findByName:function(t,e){var i=t;if(!Array.isArray(t)){var n=t;i=n.geometry&&n.geometry.animations||n.animations}for(var r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,i){for(var n={},r=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],h=s.name.match(r);if(h&&h.length>1){var c=n[u=h[1]];c||(n[u]=c=[]),c.push(s)}}var l=[];for(var u in n)l.push(Rs.CreateFromMorphTargetSequence(u,n[u],e,i));return l},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var i=function(t,e,i,n,r){if(0!==i.length){var o=[],a=[];vs.flattenJSON(i,o,a,n),0!==o.length&&r.push(new t(e,o,a))}},n=[],r=t.name||"default",o=t.length||-1,a=t.fps||30,s=t.hierarchy||[],h=0;h<s.length;h++){var c=s[h].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var l={},u=0;u<c.length;u++)if(c[u].morphTargets)for(var p=0;p<c[u].morphTargets.length;p++)l[c[u].morphTargets[p]]=-1;for(var d in l){var f=[],m=[];for(p=0;p!==c[u].morphTargets.length;++p){var v=c[u];f.push(v.time),m.push(v.morphTarget===d?1:0)}n.push(new Es(".morphTargetInfluence["+d+"]",f,m))}o=l.length*(a||1)}else{var g=".bones["+e[h].name+"]";i(Os,g+".position",c,"pos",n),i(Ss,g+".quaternion",c,"rot",n),i(Os,g+".scale",c,"scl",n)}}return 0===n.length?null:new Rs(r,o,n)}}),Object.assign(Rs.prototype,{resetDuration:function(){for(var t=0,e=0,i=this.tracks.length;e!==i;++e){var n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}}),Object.assign(Ls.prototype,{load:function(t,e,i,n){var r=this;new La(r.manager).load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},setTextures:function(t){this.textures=t},parse:function(t){var e=this.textures;function i(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var n=new Sa[t.type];if(void 0!==t.uuid&&(n.uuid=t.uuid),void 0!==t.name&&(n.name=t.name),void 0!==t.color&&n.color.setHex(t.color),void 0!==t.roughness&&(n.roughness=t.roughness),void 0!==t.metalness&&(n.metalness=t.metalness),void 0!==t.emissive&&n.emissive.setHex(t.emissive),void 0!==t.specular&&n.specular.setHex(t.specular),void 0!==t.shininess&&(n.shininess=t.shininess),void 0!==t.clearCoat&&(n.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(n.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.vertexColors&&(n.vertexColors=t.vertexColors),void 0!==t.fog&&(n.fog=t.fog),void 0!==t.flatShading&&(n.flatShading=t.flatShading),void 0!==t.blending&&(n.blending=t.blending),void 0!==t.combine&&(n.combine=t.combine),void 0!==t.side&&(n.side=t.side),void 0!==t.opacity&&(n.opacity=t.opacity),void 0!==t.transparent&&(n.transparent=t.transparent),void 0!==t.alphaTest&&(n.alphaTest=t.alphaTest),void 0!==t.depthTest&&(n.depthTest=t.depthTest),void 0!==t.depthWrite&&(n.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(n.colorWrite=t.colorWrite),void 0!==t.wireframe&&(n.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(n.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(n.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(n.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(n.rotation=t.rotation),1!==t.linewidth&&(n.linewidth=t.linewidth),void 0!==t.dashSize&&(n.dashSize=t.dashSize),void 0!==t.gapSize&&(n.gapSize=t.gapSize),void 0!==t.scale&&(n.scale=t.scale),void 0!==t.polygonOffset&&(n.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(n.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(n.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(n.skinning=t.skinning),void 0!==t.morphTargets&&(n.morphTargets=t.morphTargets),void 0!==t.dithering&&(n.dithering=t.dithering),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.uniforms)for(var r in t.uniforms){var o=t.uniforms[r];switch(n.uniforms[r]={},o.type){case"t":n.uniforms[r].value=i(o.value);break;case"c":n.uniforms[r].value=(new ai).setHex(o.value);break;case"v2":n.uniforms[r].value=(new Ie).fromArray(o.value);break;case"v3":n.uniforms[r].value=(new De).fromArray(o.value);break;case"v4":n.uniforms[r].value=(new Xe).fromArray(o.value);break;case"m4":n.uniforms[r].value=(new Ne).fromArray(o.value);break;default:n.uniforms[r].value=o.value}}if(void 0!==t.defines&&(n.defines=t.defines),void 0!==t.vertexShader&&(n.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(n.fragmentShader=t.fragmentShader),void 0!==t.shading&&(n.flatShading=1===t.shading),void 0!==t.size&&(n.size=t.size),void 0!==t.sizeAttenuation&&(n.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(n.map=i(t.map)),void 0!==t.alphaMap&&(n.alphaMap=i(t.alphaMap),n.transparent=!0),void 0!==t.bumpMap&&(n.bumpMap=i(t.bumpMap)),void 0!==t.bumpScale&&(n.bumpScale=t.bumpScale),void 0!==t.normalMap&&(n.normalMap=i(t.normalMap)),void 0!==t.normalMapType&&(n.normalMapType=t.normalMapType),void 0!==t.normalScale){var a=t.normalScale;!1===Array.isArray(a)&&(a=[a,a]),n.normalScale=(new Ie).fromArray(a)}return void 0!==t.displacementMap&&(n.displacementMap=i(t.displacementMap)),void 0!==t.displacementScale&&(n.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(n.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(n.roughnessMap=i(t.roughnessMap)),void 0!==t.metalnessMap&&(n.metalnessMap=i(t.metalnessMap)),void 0!==t.emissiveMap&&(n.emissiveMap=i(t.emissiveMap)),void 0!==t.emissiveIntensity&&(n.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(n.specularMap=i(t.specularMap)),void 0!==t.envMap&&(n.envMap=i(t.envMap)),void 0!==t.envMapIntensity&&(n.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(n.reflectivity=t.reflectivity),void 0!==t.lightMap&&(n.lightMap=i(t.lightMap)),void 0!==t.lightMapIntensity&&(n.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(n.aoMap=i(t.aoMap)),void 0!==t.aoMapIntensity&&(n.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(n.gradientMap=i(t.gradientMap)),n}}),Object.assign(Ps.prototype,{load:function(t,e,i,n){var r=this;new La(r.manager).load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},parse:function(t){var e=new ki,i=t.data.index;if(void 0!==i){var n=new js[i.type](i.array);e.setIndex(new Ti(n,1))}var r=t.data.attributes;for(var o in r){var a=r[o];n=new js[a.type](a.array);e.addAttribute(o,new Ti(n,a.itemSize,a.normalized))}var s=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==s)for(var h=0,c=s.length;h!==c;++h){var l=s[h];e.addGroup(l.start,l.count,l.materialIndex)}var u=t.data.boundingSphere;if(void 0!==u){var p=new De;void 0!==u.center&&p.fromArray(u.center),e.boundingSphere=new $e(p,u.radius)}return e}});var Is,Ns,Fs,Ds,js={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function ks(){}ks.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,i=0,n=e.length;i<n;i+=2){var r=e[i],o=e[i+1];if(r.test(t))return o}return null}},Object.assign(ks.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,i){for(var n=[],r=0;r<t.length;++r)n[r]=this.createMaterial(t[r],e,i);return n},createMaterial:(Is={NoBlending:C,NormalBlending:O,AdditiveBlending:R,SubtractiveBlending:A,MultiplyBlending:L,CustomBlending:P},Ns=new ai,Fs=new Fa,Ds=new Ls,function(t,e,i){var n={};function r(t,r,o,a,s){var h,c=e+t,l=ks.Handlers.get(c);null!==l?h=l.load(c):(Fs.setCrossOrigin(i),h=Fs.load(c)),void 0!==r&&(h.repeat.fromArray(r),1!==r[0]&&(h.wrapS=yt),1!==r[1]&&(h.wrapT=yt)),void 0!==o&&h.offset.fromArray(o),void 0!==a&&("repeat"===a[0]&&(h.wrapS=yt),"mirror"===a[0]&&(h.wrapS=xt),"repeat"===a[1]&&(h.wrapT=yt),"mirror"===a[1]&&(h.wrapT=xt)),void 0!==s&&(h.anisotropy=s);var u=Pe.generateUUID();return n[u]=h,u}var o={uuid:Pe.generateUUID(),type:"MeshLambertMaterial"};for(var a in t){var s=t[a];switch(a){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":o.name=s;break;case"blending":o.blending=Is[s];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",a,"is no longer supported.");break;case"colorDiffuse":o.color=Ns.fromArray(s).getHex();break;case"colorSpecular":o.specular=Ns.fromArray(s).getHex();break;case"colorEmissive":o.emissive=Ns.fromArray(s).getHex();break;case"specularCoef":o.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(o.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(o.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(o.type="MeshStandardMaterial");break;case"mapDiffuse":o.map=r(s,t.mapDiffuseRepeat,t.mapDiffuseOffset,t.mapDiffuseWrap,t.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":o.emissiveMap=r(s,t.mapEmissiveRepeat,t.mapEmissiveOffset,t.mapEmissiveWrap,t.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":o.lightMap=r(s,t.mapLightRepeat,t.mapLightOffset,t.mapLightWrap,t.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":o.aoMap=r(s,t.mapAORepeat,t.mapAOOffset,t.mapAOWrap,t.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":o.bumpMap=r(s,t.mapBumpRepeat,t.mapBumpOffset,t.mapBumpWrap,t.mapBumpAnisotropy);break;case"mapBumpScale":o.bumpScale=s;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":o.normalMap=r(s,t.mapNormalRepeat,t.mapNormalOffset,t.mapNormalWrap,t.mapNormalAnisotropy);break;case"mapNormalFactor":o.normalScale=s;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":o.specularMap=r(s,t.mapSpecularRepeat,t.mapSpecularOffset,t.mapSpecularWrap,t.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":o.metalnessMap=r(s,t.mapMetalnessRepeat,t.mapMetalnessOffset,t.mapMetalnessWrap,t.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":o.roughnessMap=r(s,t.mapRoughnessRepeat,t.mapRoughnessOffset,t.mapRoughnessWrap,t.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":o.alphaMap=r(s,t.mapAlphaRepeat,t.mapAlphaOffset,t.mapAlphaWrap,t.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":o.side=M;break;case"doubleSided":o.side=w;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),o.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":o[a]=s;break;case"vertexColors":!0===s&&(o.vertexColors=S),"face"===s&&(o.vertexColors=T);break;default:console.error("THREE.Loader.createMaterial: Unsupported",a,s)}}return"MeshBasicMaterial"===o.type&&delete o.emissive,"MeshPhongMaterial"!==o.type&&delete o.specular,o.opacity<1&&(o.transparent=!0),Ds.setTextures(n),Ds.parse(o)})});var Gs=function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)};function Us(t){"boolean"==typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:Ra,this.withCredentials=!1}Object.assign(Us.prototype,{crossOrigin:"anonymous",load:function(t,e,i,n){var r=this,o=void 0===this.path?Gs(t):this.path,a=new La(this.manager);a.setPath(this.path),a.setWithCredentials(this.withCredentials),a.load(t,function(i){var n=JSON.parse(i),a=n.metadata;if(void 0!==a){var s=a.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.")}var h=r.parse(n,o);e(h.geometry,h.materials)},i,n)},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setCrossOrigin:function(t){return this.crossOrigin=t,this},parse:function(){return function(t,e){void 0!==t.data&&(t=t.data),void 0!==t.scale?t.scale=1/t.scale:t.scale=1;var i=new Ei;return function(t,e){function i(t,e){return t&1<<e}var n,r,o,a,s,h,c,l,u,p,d,f,m,v,g,y,_,x,b,M,w,E,T,S,C,O=t.faces,R=t.vertices,A=t.normals,L=t.colors,P=t.scale,I=0;if(void 0!==t.uvs){for(n=0;n<t.uvs.length;n++)t.uvs[n].length&&I++;for(n=0;n<I;n++)e.faceVertexUvs[n]=[]}for(a=0,s=R.length;a<s;)(x=new De).x=R[a++]*P,x.y=R[a++]*P,x.z=R[a++]*P,e.vertices.push(x);for(a=0,s=O.length;a<s;)if(d=i(p=O[a++],0),f=i(p,1),m=i(p,3),v=i(p,4),g=i(p,5),y=i(p,6),_=i(p,7),d){if((M=new pi).a=O[a],M.b=O[a+1],M.c=O[a+3],(w=new pi).a=O[a+1],w.b=O[a+2],w.c=O[a+3],a+=4,f&&(u=O[a++],M.materialIndex=u,w.materialIndex=u),o=e.faces.length,m)for(n=0;n<I;n++)for(S=t.uvs[n],e.faceVertexUvs[n][o]=[],e.faceVertexUvs[n][o+1]=[],r=0;r<4;r++)C=new Ie(S[2*(l=O[a++])],S[2*l+1]),2!==r&&e.faceVertexUvs[n][o].push(C),0!==r&&e.faceVertexUvs[n][o+1].push(C);if(v&&(c=3*O[a++],M.normal.set(A[c++],A[c++],A[c]),w.normal.copy(M.normal)),g)for(n=0;n<4;n++)c=3*O[a++],T=new De(A[c++],A[c++],A[c]),2!==n&&M.vertexNormals.push(T),0!==n&&w.vertexNormals.push(T);if(y&&(E=L[h=O[a++]],M.color.setHex(E),w.color.setHex(E)),_)for(n=0;n<4;n++)E=L[h=O[a++]],2!==n&&M.vertexColors.push(new ai(E)),0!==n&&w.vertexColors.push(new ai(E));e.faces.push(M),e.faces.push(w)}else{if((b=new pi).a=O[a++],b.b=O[a++],b.c=O[a++],f&&(u=O[a++],b.materialIndex=u),o=e.faces.length,m)for(n=0;n<I;n++)for(S=t.uvs[n],e.faceVertexUvs[n][o]=[],r=0;r<3;r++)C=new Ie(S[2*(l=O[a++])],S[2*l+1]),e.faceVertexUvs[n][o].push(C);if(v&&(c=3*O[a++],b.normal.set(A[c++],A[c++],A[c])),g)for(n=0;n<3;n++)c=3*O[a++],T=new De(A[c++],A[c++],A[c]),b.vertexNormals.push(T);if(y&&(h=O[a++],b.color.setHex(L[h])),_)for(n=0;n<3;n++)h=O[a++],b.vertexColors.push(new ai(L[h]));e.faces.push(b)}}(t,i),function(t,e){var i=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var n=0,r=t.skinWeights.length;n<r;n+=i){var o=t.skinWeights[n],a=i>1?t.skinWeights[n+1]:0,s=i>2?t.skinWeights[n+2]:0,h=i>3?t.skinWeights[n+3]:0;e.skinWeights.push(new Xe(o,a,s,h))}if(t.skinIndices)for(n=0,r=t.skinIndices.length;n<r;n+=i){var c=t.skinIndices[n],l=i>1?t.skinIndices[n+1]:0,u=i>2?t.skinIndices[n+2]:0,p=i>3?t.skinIndices[n+3]:0;e.skinIndices.push(new Xe(c,l,u,p))}e.bones=t.bones,e.bones&&e.bones.length>0&&(e.skinWeights.length!==e.skinIndices.length||e.skinIndices.length!==e.vertices.length)&&console.warn("When skinning, number of vertices ("+e.vertices.length+"), skinIndices ("+e.skinIndices.length+"), and skinWeights ("+e.skinWeights.length+") should match.")}(t,i),function(t,e){var i=t.scale;if(void 0!==t.morphTargets)for(var n=0,r=t.morphTargets.length;n<r;n++){e.morphTargets[n]={},e.morphTargets[n].name=t.morphTargets[n].name,e.morphTargets[n].vertices=[];for(var o=e.morphTargets[n].vertices,a=t.morphTargets[n].vertices,s=0,h=a.length;s<h;s+=3){var c=new De;c.x=a[s]*i,c.y=a[s+1]*i,c.z=a[s+2]*i,o.push(c)}}if(void 0!==t.morphColors&&t.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var l=e.faces,u=t.morphColors[0].colors;for(n=0,r=l.length;n<r;n++)l[n].color.fromArray(u,3*n)}}(t,i),function(t,e){var i=[],n=[];void 0!==t.animation&&n.push(t.animation),void 0!==t.animations&&(t.animations.length?n=n.concat(t.animations):n.push(t.animations));for(var r=0;r<n.length;r++){var o=Rs.parseAnimation(n[r],e.bones);o&&i.push(o)}if(e.morphTargets){var a=Rs.CreateClipsFromMorphTargetSequences(e.morphTargets,10);i=i.concat(a)}i.length>0&&(e.animations=i)}(t,i),i.computeFaceNormals(),i.computeBoundingSphere(),void 0===t.materials||0===t.materials.length?{geometry:i}:{geometry:i,materials:ks.prototype.initMaterials(t.materials,this.resourcePath||e,this.crossOrigin)}}}()}),Object.assign(function(t){this.manager=void 0!==t?t:Ra,this.texturePath=""}.prototype,{crossOrigin:"anonymous",load:function(t,e,i,n){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var r=this;new La(r.manager).load(t,function(i){var o=null;try{o=JSON.parse(i)}catch(e){return void 0!==n&&n(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?r.parse(o,e):console.error("THREE.ObjectLoader: Can't load "+t+". Use THREE.JSONLoader instead.")},i,n)},setTexturePath:function(t){return this.texturePath=t,this},setCrossOrigin:function(t){return this.crossOrigin=t,this},parse:function(t,e){var i=this.parseShape(t.shapes),n=this.parseGeometries(t.geometries,i),r=this.parseImages(t.images,function(){void 0!==e&&e(s)}),o=this.parseTextures(t.textures,r),a=this.parseMaterials(t.materials,o),s=this.parseObject(t.object,n,a);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var i=0,n=t.length;i<n;i++){var r=(new rs).fromJSON(t[i]);e[r.uuid]=r}return e},parseGeometries:function(t,e){var i={};if(void 0!==t)for(var n=new Us,r=new Ps,o=0,a=t.length;o<a;o++){var s,h=t[o];switch(h.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new ma[h.type](h.width,h.height,h.widthSegments,h.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new ma[h.type](h.width,h.height,h.depth,h.widthSegments,h.heightSegments,h.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new ma[h.type](h.radius,h.segments,h.thetaStart,h.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new ma[h.type](h.radiusTop,h.radiusBottom,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new ma[h.type](h.radius,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new ma[h.type](h.radius,h.widthSegments,h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new ma[h.type](h.radius,h.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new ma[h.type](h.innerRadius,h.outerRadius,h.thetaSegments,h.phiSegments,h.thetaStart,h.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new ma[h.type](h.radius,h.tube,h.radialSegments,h.tubularSegments,h.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new ma[h.type](h.radius,h.tube,h.tubularSegments,h.radialSegments,h.p,h.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new ma[h.type](h.points,h.segments,h.phiStart,h.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new ma[h.type](h.vertices,h.indices,h.radius,h.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],l=0,u=h.shapes.length;l<u;l++){var p=e[h.shapes[l]];c.push(p)}s=new ma[h.type](c,h.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(c=[],l=0,u=h.shapes.length;l<u;l++){p=e[h.shapes[l]];c.push(p)}var d=h.options.extrudePath;void 0!==d&&(h.options.extrudePath=(new es[d.type]).fromJSON(d)),s=new ma[h.type](c,h.options);break;case"BufferGeometry":s=r.parse(h);break;case"Geometry":s=n.parse(h,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+h.type+'"');continue}s.uuid=h.uuid,void 0!==h.name&&(s.name=h.name),!0===s.isBufferGeometry&&void 0!==h.userData&&(s.userData=h.userData),i[h.uuid]=s}return i},parseMaterials:function(t,e){var i={};if(void 0!==t){var n=new Ls;n.setTextures(e);for(var r=0,o=t.length;r<o;r++){var a=t[r];if("MultiMaterial"===a.type){for(var s=[],h=0;h<a.materials.length;h++)s.push(n.parse(a.materials[h]));i[a.uuid]=s}else i[a.uuid]=n.parse(a)}}return i},parseAnimations:function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i],r=Rs.parse(n);void 0!==n.uuid&&(r.uuid=n.uuid),e.push(r)}return e},parseImages:function(t,e){var i=this,n={};function r(t){return i.manager.itemStart(t),o.load(t,function(){i.manager.itemEnd(t)},void 0,function(){i.manager.itemEnd(t),i.manager.itemError(t)})}if(void 0!==t&&t.length>0){var o=new Ia(new Oa(e));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=t.length;a<s;a++){var h=t[a],c=h.url;if(Array.isArray(c)){n[h.uuid]=[];for(var l=0,u=c.length;l<u;l++){var p=c[l],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:i.texturePath+p;n[h.uuid].push(r(d))}}else{d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h.url)?h.url:i.texturePath+h.url;n[h.uuid]=r(d)}}}return n},parseTextures:function(t,e){function i(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var n={};if(void 0!==t)for(var r=0,o=t.length;r<o;r++){var a,s=t[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(e[s.image])?new ln(e[s.image]):new We(e[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=i(s.mapping,Bs)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=i(s.wrap[0],Hs),a.wrapT=i(s.wrap[1],Hs)),void 0!==s.format&&(a.format=s.format),void 0!==s.minFilter&&(a.minFilter=i(s.minFilter,Vs)),void 0!==s.magFilter&&(a.magFilter=i(s.magFilter,Vs)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),n[s.uuid]=a}return n},parseObject:function(t,e,i){var n;function r(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function o(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],n=0,r=t.length;n<r;n++){var o=t[n];void 0===i[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),e.push(i[o])}return e}return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),i[t]}}switch(t.type){case"Scene":n=new jr,void 0!==t.background&&Number.isInteger(t.background)&&(n.background=new ai(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?n.fog=new Dr(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(n.fog=new Fr(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":n=new Lr(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(n.focus=t.focus),void 0!==t.zoom&&(n.zoom=t.zoom),void 0!==t.filmGauge&&(n.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(n.filmOffset=t.filmOffset),void 0!==t.view&&(n.view=Object.assign({},t.view));break;case"OrthographicCamera":n=new us(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(n.zoom=t.zoom),void 0!==t.view&&(n.view=Object.assign({},t.view));break;case"AmbientLight":n=new fs(t.color,t.intensity);break;case"DirectionalLight":n=new ds(t.color,t.intensity);break;case"PointLight":n=new ls(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":n=new ms(t.color,t.intensity,t.width,t.height);break;case"SpotLight":n=new cs(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":n=new as(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=r(t.geometry),s=o(t.material);n=a.bones&&a.bones.length>0?new Wr(a,s):new hn(a,s);break;case"LOD":n=new Br;break;case"Line":n=new Yr(r(t.geometry),o(t.material),t.mode);break;case"LineLoop":n=new Kr(r(t.geometry),o(t.material));break;case"LineSegments":n=new qr(r(t.geometry),o(t.material));break;case"PointCloud":case"Points":n=new $r(r(t.geometry),o(t.material));break;case"Sprite":n=new zr(o(t.material));break;case"Group":n=new Rr;break;default:n=new xi}if(n.uuid=t.uuid,void 0!==t.name&&(n.name=t.name),void 0!==t.matrix?(n.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(n.matrixAutoUpdate=t.matrixAutoUpdate),n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)):(void 0!==t.position&&n.position.fromArray(t.position),void 0!==t.rotation&&n.rotation.fromArray(t.rotation),void 0!==t.quaternion&&n.quaternion.fromArray(t.quaternion),void 0!==t.scale&&n.scale.fromArray(t.scale)),void 0!==t.castShadow&&(n.castShadow=t.castShadow),void 0!==t.receiveShadow&&(n.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(n.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(n.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&n.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(n.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.frustumCulled&&(n.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(n.renderOrder=t.renderOrder),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.layers&&(n.layers.mask=t.layers),void 0!==t.children)for(var h=t.children,c=0;c<h.length;c++)n.add(this.parseObject(h[c],e,i));if("LOD"===t.type)for(var l=t.levels,u=0;u<l.length;u++){var p=l[u],d=n.getObjectByProperty("uuid",p.object);void 0!==d&&n.addLevel(d,p.distance)}return n}});var zs,Bs={UVMapping:300,CubeReflectionMapping:ut,CubeRefractionMapping:pt,EquirectangularReflectionMapping:dt,EquirectangularRefractionMapping:ft,SphericalReflectionMapping:mt,CubeUVReflectionMapping:vt,CubeUVRefractionMapping:gt},Hs={RepeatWrapping:yt,ClampToEdgeWrapping:_t,MirroredRepeatWrapping:xt},Vs={NearestFilter:bt,NearestMipMapNearestFilter:Mt,NearestMipMapLinearFilter:wt,LinearFilter:Et,LinearMipMapNearestFilter:Tt,LinearMipMapLinearFilter:St};function Ws(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==t?t:Ra,this.options=void 0}function Xs(){this.type="ShapePath",this.color=new ai,this.subPaths=[],this.currentPath=null}function Ys(t){this.type="Font",this.data=t}function qs(t,e,i,n,r){var o=r.glyphs[t]||r.glyphs["?"];if(o){var a,s,h,c,l,u,p,d,f=new Xs;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,g=m.length;v<g;){switch(m[v++]){case"m":a=m[v++]*e+i,s=m[v++]*e+n,f.moveTo(a,s);break;case"l":a=m[v++]*e+i,s=m[v++]*e+n,f.lineTo(a,s);break;case"q":h=m[v++]*e+i,c=m[v++]*e+n,l=m[v++]*e+i,u=m[v++]*e+n,f.quadraticCurveTo(l,u,h,c);break;case"b":h=m[v++]*e+i,c=m[v++]*e+n,l=m[v++]*e+i,u=m[v++]*e+n,p=m[v++]*e+i,d=m[v++]*e+n,f.bezierCurveTo(l,u,p,d,h,c)}}return{offsetX:o.ha*e,path:f}}}Ws.prototype={constructor:Ws,setOptions:function(t){return this.options=t,this},load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=Ca.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;fetch(t).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,r.options)}).then(function(i){Ca.add(t,i),e&&e(i),r.manager.itemEnd(t)}).catch(function(e){n&&n(e),r.manager.itemEnd(t),r.manager.itemError(t)})},setCrossOrigin:function(){return this},setPath:function(t){return this.path=t,this}},Object.assign(Xs.prototype,{moveTo:function(t,e){this.currentPath=new ns,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,i,n){this.currentPath.quadraticCurveTo(t,e,i,n)},bezierCurveTo:function(t,e,i,n,r,o){this.currentPath.bezierCurveTo(t,e,i,n,r,o)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function i(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i],o=new rs;o.curves=r.curves,e.push(o)}return e}function n(t,e){for(var i=e.length,n=!1,r=i-1,o=0;o<i;r=o++){var a=e[r],s=e[o],h=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=e[o],h=-h,s=e[r],c=-c),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var l=c*(t.x-a.x)-h*(t.y-a.y);if(0===l)return!0;if(l<0)continue;n=!n}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return n}var r=Vo.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return i(o);var a,s,h,c=[];if(1===o.length)return s=o[0],(h=new rs).curves=s.curves,c.push(h),c;var l=!r(o[0].getPoints());l=t?!l:l;var u,p,d=[],f=[],m=[],v=0;f[v]=void 0,m[v]=[];for(var g=0,y=o.length;g<y;g++)a=r(u=(s=o[g]).getPoints()),(a=t?!a:a)?(!l&&f[v]&&v++,f[v]={s:new rs,p:u},f[v].s.curves=s.curves,l&&v++,m[v]=[]):m[v].push({h:s,p:u[0]});if(!f[0])return i(o);if(f.length>1){for(var _=!1,x=[],b=0,M=f.length;b<M;b++)d[b]=[];for(b=0,M=f.length;b<M;b++)for(var w=m[b],E=0;E<w.length;E++){for(var T=w[E],S=!0,C=0;C<f.length;C++)n(T.p,f[C].p)&&(b!==C&&x.push({froms:b,tos:C,hole:E}),S?(S=!1,d[C].push(T)):_=!0);S&&d[b].push(T)}x.length>0&&(_||(m=d))}g=0;for(var O=f.length;g<O;g++){h=f[g].s,c.push(h);for(var R=0,A=(p=m[g]).length;R<A;R++)h.holes.push(p[R].h)}return c}}),Object.assign(Ys.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var i=[],n=function(t,e,i){for(var n=Array.from?Array.from(t):String(t).split(""),r=e/i.resolution,o=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*r,a=[],s=0,h=0,c=0;c<n.length;c++){var l=n[c];if("\n"===l)s=0,h-=o;else{var u=qs(l,r,s,h,i);s+=u.offsetX,a.push(u.path)}}return a}(t,e,this.data),r=0,o=n.length;r<o;r++)Array.prototype.push.apply(i,n[r].toShapes());return i}}),Object.assign(function(t){this.manager=void 0!==t?t:Ra}.prototype,{load:function(t,e,i,n){var r=this,o=new La(this.manager);o.setPath(this.path),o.load(t,function(t){var i;try{i=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(t.substring(65,t.length-2))}var n=r.parse(i);e&&e(n)},i,n)},parse:function(t){return new Ys(t)},setPath:function(t){return this.path=t,this}});var Ks,Zs,$s,Js,Qs,th,eh,ih,nh,rh,oh={getContext:function(){return void 0===zs&&(zs=new(window.AudioContext||window.webkitAudioContext)),zs},setContext:function(t){zs=t}};function ah(t){this.manager=void 0!==t?t:Ra}function sh(t,e,i){xi.call(this),this.type="CubeCamera";var n=new Lr(90,1,t,e);n.up.set(0,-1,0),n.lookAt(new De(1,0,0)),this.add(n);var r=new Lr(90,1,t,e);r.up.set(0,-1,0),r.lookAt(new De(-1,0,0)),this.add(r);var o=new Lr(90,1,t,e);o.up.set(0,0,1),o.lookAt(new De(0,1,0)),this.add(o);var a=new Lr(90,1,t,e);a.up.set(0,0,-1),a.lookAt(new De(0,-1,0)),this.add(a);var s=new Lr(90,1,t,e);s.up.set(0,-1,0),s.lookAt(new De(0,0,1)),this.add(s);var h=new Lr(90,1,t,e);h.up.set(0,-1,0),h.lookAt(new De(0,0,-1)),this.add(h);var c={format:Ut,magFilter:Et,minFilter:Et};this.renderTarget=new qe(i,i,c),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var i=this.renderTarget,c=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,i.activeCubeFace=0,t.render(e,n,i),i.activeCubeFace=1,t.render(e,r,i),i.activeCubeFace=2,t.render(e,o,i),i.activeCubeFace=3,t.render(e,a,i),i.activeCubeFace=4,t.render(e,s,i),i.texture.generateMipmaps=c,i.activeCubeFace=5,t.render(e,h,i),t.setRenderTarget(null)},this.clear=function(t,e,i,n){for(var r=this.renderTarget,o=0;o<6;o++)r.activeCubeFace=o,t.setRenderTarget(r),t.clear(e,i,n);t.setRenderTarget(null)}}function hh(){xi.call(this),this.type="AudioListener",this.context=oh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function ch(t){xi.call(this),this.type="Audio",this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function lh(t){ch.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function uh(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function ph(t,e,i){this.binding=t,this.valueSize=i;var n,r=Float64Array;switch(e){case"quaternion":n=this._slerp;break;case"string":case"bool":r=Array,n=this._select;break;default:n=this._lerp}this.buffer=new r(4*i),this._mixBufferRegion=n,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(ah.prototype,{load:function(t,e,i,n){var r=new La(this.manager);r.setResponseType("arraybuffer"),r.load(t,function(t){var i=t.slice(0);oh.getContext().decodeAudioData(i,function(t){e(t)})},i,n)}}),Object.assign(function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Lr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Lr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}.prototype,{update:(nh=new Ne,rh=new Ne,function(t){if(Ks!==this||Zs!==t.focus||$s!==t.fov||Js!==t.aspect*this.aspect||Qs!==t.near||th!==t.far||eh!==t.zoom||ih!==this.eyeSep){Ks=this,Zs=t.focus,$s=t.fov,Js=t.aspect*this.aspect,Qs=t.near,th=t.far,eh=t.zoom;var e,i,n=t.projectionMatrix.clone(),r=(ih=this.eyeSep/2)*Qs/Zs,o=Qs*Math.tan(Pe.DEG2RAD*$s*.5)/eh;rh.elements[12]=-ih,nh.elements[12]=ih,e=-o*Js+r,i=o*Js+r,n.elements[0]=2*Qs/(i-e),n.elements[8]=(i+e)/(i-e),this.cameraL.projectionMatrix.copy(n),e=-o*Js-r,i=o*Js-r,n.elements[0]=2*Qs/(i-e),n.elements[8]=(i+e)/(i-e),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(rh),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(nh)})}),sh.prototype=Object.create(xi.prototype),sh.prototype.constructor=sh,hh.prototype=Object.assign(Object.create(xi.prototype),{constructor:hh,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(){var t=new De,e=new Fe,i=new De,n=new De;return function(r){xi.prototype.updateMatrixWorld.call(this,r);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(t,e,i),n.set(0,0,-1).applyQuaternion(e),o.positionX?(o.positionX.setValueAtTime(t.x,this.context.currentTime),o.positionY.setValueAtTime(t.y,this.context.currentTime),o.positionZ.setValueAtTime(t.z,this.context.currentTime),o.forwardX.setValueAtTime(n.x,this.context.currentTime),o.forwardY.setValueAtTime(n.y,this.context.currentTime),o.forwardZ.setValueAtTime(n.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(t.x,t.y,t.z),o.setOrientation(n.x,n.y,n.z,a.x,a.y,a.z))}}()}),ch.prototype=Object.assign(Object.create(xi.prototype),{constructor:ch,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}),lh.prototype=Object.assign(Object.create(ch.prototype),{constructor:lh,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,i){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=i,this},updateMatrixWorld:function(){var t=new De,e=new Fe,i=new De,n=new De;return function(r){xi.prototype.updateMatrixWorld.call(this,r);var o=this.panner;this.matrixWorld.decompose(t,e,i),n.set(0,0,1).applyQuaternion(e),o.setPosition(t.x,t.y,t.z),o.setOrientation(n.x,n.y,n.z)}}()}),Object.assign(uh.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),i=0;i<e.length;i++)t+=e[i];return t/e.length}}),Object.assign(ph.prototype,{accumulate:function(t,e){var i=this.buffer,n=this.valueSize,r=t*n+n,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==n;++a)i[r+a]=i[a];o=e}else{var s=e/(o+=e);this._mixBufferRegion(i,r,0,s,n)}this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,i=this.buffer,n=t*e+e,r=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,r<1){var a=3*e;this._mixBufferRegion(i,n,a,1-r,e)}for(var s=e,h=e+e;s!==h;++s)if(i[s]!==i[s+e]){o.setValue(i,n);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,i=this.valueSize,n=3*i;t.getValue(e,n);for(var r=i,o=n;r!==o;++r)e[r]=e[n+r%i];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,i,n,r){if(n>=.5)for(var o=0;o!==r;++o)t[e+o]=t[i+o]},_slerp:function(t,e,i,n){Fe.slerpFlat(t,e,t,e,t,i,n)},_lerp:function(t,e,i,n,r){for(var o=1-n,a=0;a!==r;++a){var s=e+a;t[s]=t[s]*o+t[i+a]*n}}});var dh,fh,mh,vh,gh,yh,_h,xh,bh,Mh,wh,Eh,Th,Sh,Ch;function Oh(t,e,i){var n=i||Rh.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,n)}function Rh(t,e,i){this.path=e,this.parsedPath=i||Rh.parseTrackName(e),this.node=Rh.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Ah(t,e,i){this._mixer=t,this._clip=e,this._localRoot=i||null;for(var n=e.tracks,r=n.length,o=new Array(r),a={endingStart:ge,endingEnd:ge},s=0;s!==r;++s){var h=n[s].createInterpolant(null);o[s]=h,h.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ve,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Lh(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Ph(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function Ih(){ki.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Nh(t,e,i){kr.call(this,t,e),this.meshPerAttribute=i||1}function Fh(t,e,i,n){"number"==typeof i&&(n=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Ti.call(this,t,e,i),this.meshPerAttribute=n||1}function Dh(t,e,i,n){this.ray=new on(t,e),this.near=i||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function jh(t,e){return t.distance-e.distance}function kh(t,e,i,n){if(!1!==t.visible&&(t.raycast(e,i),!0===n))for(var r=t.children,o=0,a=r.length;o<a;o++)kh(r[o],e,i,!0)}function Gh(t,e){this.min=void 0!==t?t:new Ie(1/0,1/0),this.max=void 0!==e?e:new Ie(-1/0,-1/0)}function Uh(t,e){this.start=void 0!==t?t:new De,this.end=void 0!==e?e:new De}function zh(t){xi.call(this),this.material=t,this.render=function(){}}function Bh(t,e,i,n){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==i?i:16711680,o=void 0!==n?n:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var h=new ki,c=new Ii(2*a*3,3);h.addAttribute("position",c),qr.call(this,h,new Xr({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Hh(t,e){xi.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var i=new ki,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,o=1;r<32;r++,o++){var a=r/32*Math.PI*2,s=o/32*Math.PI*2;n.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}i.addAttribute("position",new Ii(n,3));var h=new Xr({fog:!1});this.cone=new qr(i,h),this.add(this.cone),this.update()}function Vh(t){for(var e=function t(e){var i=[];e&&e.isBone&&i.push(e);for(var n=0;n<e.children.length;n++)i.push.apply(i,t(e.children[n]));return i}(t),i=new ki,n=[],r=[],o=new ai(0,0,1),a=new ai(0,1,0),s=0;s<e.length;s++){var h=e[s];h.parent&&h.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}i.addAttribute("position",new Ii(n,3)),i.addAttribute("color",new Ii(r,3));var c=new Xr({vertexColors:S,depthTest:!1,depthWrite:!1,transparent:!0});qr.call(this,i,c),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function Wh(t,e,i){this.light=t,this.light.updateMatrixWorld(),this.color=i;var n=new ta(e,4,2),r=new sn({wireframe:!0,fog:!1});hn.call(this,n,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Xh(t,e){xi.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;var i=new Xr({fog:!1}),n=new ki;n.addAttribute("position",new Ti(new Float32Array(15),3)),this.line=new Yr(n,i),this.add(this.line),this.update()}function Yh(t,e,i){xi.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;var n=new lo(e);n.rotateY(.5*Math.PI),this.material=new sn({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=S);var r=n.getAttribute("position"),o=new Float32Array(3*r.count);n.addAttribute("color",new Ti(o,3)),this.add(new hn(n,this.material)),this.update()}function qh(t,e,i,n){t=t||10,e=e||10,i=new ai(void 0!==i?i:4473924),n=new ai(void 0!==n?n:8947848);for(var r=e/2,o=t/e,a=t/2,s=[],h=[],c=0,l=0,u=-a;c<=e;c++,u+=o){s.push(-a,0,u,a,0,u),s.push(u,0,-a,u,0,a);var p=c===r?i:n;p.toArray(h,l),l+=3,p.toArray(h,l),l+=3,p.toArray(h,l),l+=3,p.toArray(h,l),l+=3}var d=new ki;d.addAttribute("position",new Ii(s,3)),d.addAttribute("color",new Ii(h,3));var f=new Xr({vertexColors:S});qr.call(this,d,f)}function Kh(t,e,i,n,r,o){t=t||10,e=e||16,i=i||8,n=n||64,r=new ai(void 0!==r?r:4473924),o=new ai(void 0!==o?o:8947848);var a,s,h,c,l,u,p,d=[],f=[];for(c=0;c<=e;c++)h=c/e*(2*Math.PI),a=Math.sin(h)*t,s=Math.cos(h)*t,d.push(0,0,0),d.push(a,0,s),p=1&c?r:o,f.push(p.r,p.g,p.b),f.push(p.r,p.g,p.b);for(c=0;c<=i;c++)for(p=1&c?r:o,u=t-t/i*c,l=0;l<n;l++)h=l/n*(2*Math.PI),a=Math.sin(h)*u,s=Math.cos(h)*u,d.push(a,0,s),f.push(p.r,p.g,p.b),h=(l+1)/n*(2*Math.PI),a=Math.sin(h)*u,s=Math.cos(h)*u,d.push(a,0,s),f.push(p.r,p.g,p.b);var m=new ki;m.addAttribute("position",new Ii(d,3)),m.addAttribute("color",new Ii(f,3));var v=new Xr({vertexColors:S});qr.call(this,m,v)}function Zh(t,e,i,n){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==i?i:16776960,o=void 0!==n?n:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var h=new ki,c=new Ii(2*a*3,3);h.addAttribute("position",c),qr.call(this,h,new Xr({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function $h(t,e,i){xi.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,void 0===e&&(e=1);var n=new ki;n.addAttribute("position",new Ii([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var r=new Xr({fog:!1});this.lightPlane=new Yr(n,r),this.add(this.lightPlane),(n=new ki).addAttribute("position",new Ii([0,0,0,0,0,1],3)),this.targetLine=new Yr(n,r),this.add(this.targetLine),this.update()}function Jh(t){var e=new ki,i=new Xr({color:16777215,vertexColors:T}),n=[],r=[],o={},a=new ai(16755200),s=new ai(16711680),h=new ai(43775),c=new ai(16777215),l=new ai(3355443);function u(t,e,i){p(t,i),p(e,i)}function p(t,e){n.push(0,0,0),r.push(e.r,e.g,e.b),void 0===o[t]&&(o[t]=[]),o[t].push(n.length/3-1)}u("n1","n2",a),u("n2","n4",a),u("n4","n3",a),u("n3","n1",a),u("f1","f2",a),u("f2","f4",a),u("f4","f3",a),u("f3","f1",a),u("n1","f1",a),u("n2","f2",a),u("n3","f3",a),u("n4","f4",a),u("p","n1",s),u("p","n2",s),u("p","n3",s),u("p","n4",s),u("u1","u2",h),u("u2","u3",h),u("u3","u1",h),u("c","t",c),u("p","c",l),u("cn1","cn2",l),u("cn3","cn4",l),u("cf1","cf2",l),u("cf3","cf4",l),e.addAttribute("position",new Ii(n,3)),e.addAttribute("color",new Ii(r,3)),qr.call(this,e,i),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Qh(t,e){this.object=t,void 0===e&&(e=16776960);var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new ki;r.setIndex(new Ti(i,1)),r.addAttribute("position",new Ti(n,3)),qr.call(this,r,new Xr({color:e})),this.matrixAutoUpdate=!1,this.update()}function tc(t,e){this.type="Box3Helper",this.box=t;var i=void 0!==e?e:16776960,n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new ki;r.setIndex(new Ti(n,1)),r.addAttribute("position",new Ii([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),qr.call(this,r,new Xr({color:i})),this.geometry.computeBoundingSphere()}function ec(t,e,i){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var n=void 0!==i?i:16776960,r=new ki;r.addAttribute("position",new Ii([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),Yr.call(this,r,new Xr({color:n}));var o=new ki;o.addAttribute("position",new Ii([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new hn(o,new sn({color:n,opacity:.2,transparent:!0,depthWrite:!1})))}function ic(t,e,i,n,r,o){xi.call(this),void 0===n&&(n=16776960),void 0===i&&(i=1),void 0===r&&(r=.2*i),void 0===o&&(o=.2*r),void 0===Eh&&((Eh=new ki).addAttribute("position",new Ii([0,0,0,0,1,0],3)),(Th=new la(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new Yr(Eh,new Xr({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new hn(Th,new sn({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,r,o)}function nc(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t],i=new ki;i.addAttribute("position",new Ii(e,3)),i.addAttribute("color",new Ii([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var n=new Xr({vertexColors:S});qr.call(this,i,n)}Object.assign(Oh.prototype,{getValue:function(t,e){this.bind();var i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(t,e)},setValue:function(t,e){for(var i=this._bindings,n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}),Object.assign(Rh,{Composite:Oh,create:function(t,e,i){return t&&t.isAnimationObjectGroup?new Rh.Composite(t,e,i):new Rh(t,e,i)},sanitizeNodeName:(bh=new RegExp("[\\[\\]\\.:\\/]","g"),function(t){return t.replace(/\s/g,"_").replace(bh,"")}),parseTrackName:(dh="[^\\[\\]\\.:\\/]",fh="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",mh=/((?:WC+[\/:])*)/.source.replace("WC",dh),vh=/(WCOD+)?/.source.replace("WCOD",fh),gh=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",dh),yh=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",dh),_h=new RegExp("^"+mh+vh+gh+yh+"$"),xh=["material","materials","bones"],function(t){var e=_h.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){var r=i.nodeName.substring(n+1);-1!==xh.indexOf(r)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=r)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}),findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var i=t.skeleton.getBoneByName(e);if(void 0!==i)return i}if(t.children){var n=function(t){for(var i=0;i<t.length;i++){var r=t[i];if(r.name===e||r.uuid===e)return r;var o=n(r.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}}),Object.assign(Rh.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)t[e++]=i[n]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,i=e.objectName,n=e.propertyName,r=e.propertyIndex;if(t||(t=Rh.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(i){var o=e.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var a=0;a<t.length;a++)if(t[a].name===o){o=a;break}break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var s=t[n];if(void 0!==s){var h=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?h=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(h=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(t.geometry.morphAttributes.position[a].name===r){r=a;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(t.geometry.morphTargets[a].name===r){r=a;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=n;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][h]}else{var l=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+n+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Rh.prototype,{_getValue_unbound:Rh.prototype.getValue,_setValue_unbound:Rh.prototype.setValue}),Object.assign(function(){this.uuid=Pe.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,i=arguments.length;e!==i;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,h=void 0,c=0,l=arguments.length;c!==l;++c){var u=arguments[c],p=u.uuid,d=n[p];if(void 0===d){d=e++,n[p]=d,t.push(u);for(var f=0,m=s;f!==m;++f)a[f].push(new Rh(u,r[f],o[f]))}else if(d<i){h=t[d];var v=--i,g=t[v];n[g.uuid]=d,t[d]=g,n[p]=v,t[v]=u;for(f=0,m=s;f!==m;++f){var y=a[f],_=y[v],x=y[d];y[d]=_,void 0===x&&(x=new Rh(u,r[f],o[f])),y[v]=x}}else t[d]!==h&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=i},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,i=this._indicesByUUID,n=this._bindings,r=n.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],h=s.uuid,c=i[h];if(void 0!==c&&c>=e){var l=e++,u=t[l];i[u.uuid]=c,t[c]=u,i[h]=l,t[l]=s;for(var p=0,d=r;p!==d;++p){var f=n[p],m=f[l],v=f[c];f[c]=m,f[l]=v}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,o=r.length,a=0,s=arguments.length;a!==s;++a){var h=arguments[a].uuid,c=n[h];if(void 0!==c)if(delete n[h],c<i){var l=--i,u=t[l],p=t[g=--e];n[u.uuid]=c,t[c]=u,n[p.uuid]=l,t[l]=p,t.pop();for(var d=0,f=o;d!==f;++d){var m=(y=r[d])[l],v=y[g];y[c]=m,y[l]=v,y.pop()}}else{var g;n[(p=t[g=--e]).uuid]=c,t[c]=p,t.pop();for(d=0,f=o;d!==f;++d){var y;(y=r[d])[c]=y[g],y.pop()}}}this.nCachedObjects_=i},subscribe_:function(t,e){var i=this._bindingsIndicesByPath,n=i[t],r=this._bindings;if(void 0!==n)return r[n];var o=this._paths,a=this._parsedPaths,s=this._objects,h=s.length,c=this.nCachedObjects_,l=new Array(h);n=r.length,i[t]=n,o.push(t),a.push(e),r.push(l);for(var u=c,p=s.length;u!==p;++u){var d=s[u];l[u]=new Rh(d,t,e)}return l},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,i=e[t];if(void 0!==i){var n=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];e[t[a]]=i,o[i]=s,o.pop(),r[i]=r[a],r.pop(),n[i]=n[a],n.pop()}}}),Object.assign(Ah.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){var n=this._clip.duration,r=t._clip.duration,o=r/n,a=n/r;t.warp(1,o,e),this.warp(a,1,e)}return this},crossFadeTo:function(t,e,i){return t.crossFadeFrom(this,e,i)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,i){var n=this._mixer,r=n.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=n._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,h=o.sampleValues;return s[0]=r,s[1]=r+i,h[0]=t/a,h[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,i,n){if(this.enabled){var r=this._startTime;if(null!==r){var o=(t-r)*i;if(o<0||0===i)return;this._startTime=null,e=i*o}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var h=this._interpolants,c=this._propertyBindings,l=0,u=h.length;l!==u;++l)h[l].evaluate(a),c[l].accumulate(n,s)}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var i=this._weightInterpolant;if(null!==i){var n=i.evaluate(t)[0];e*=n,t>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var i=this._timeScaleInterpolant;if(null!==i)e*=i.evaluate(t)[0],t>i.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t,i=this._clip.duration,n=this.loop,r=this._loopCount,o=2202===n;if(0===t)return-1===r?e:o&&1==(1&r)?i-e:e;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=i)e=i;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),e>=i||e<0){var a=Math.floor(e/i);e-=i*a,r+=Math.abs(a);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var h=t<0;this._setEndings(h,!h,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1==(1&r))return this.time=e,i-e}return this.time=e,e},_setEndings:function(t,e,i){var n=this._interpolantSettings;i?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=t?this.zeroSlopeAtStart?2401:ge:2402,n.endingEnd=e?this.zeroSlopeAtEnd?2401:ge:2402)},_scheduleFading:function(t,e,i){var n=this._mixer,r=n.time,o=this._weightInterpolant;null===o&&(o=n._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=e,a[1]=r+t,s[1]=i,this}}),Lh.prototype=Object.assign(Object.create(n.prototype),{constructor:Lh,_bindAction:function(t,e){var i=t._localRoot||this._root,n=t._clip.tracks,r=n.length,o=t._propertyBindings,a=t._interpolants,s=i.uuid,h=this._bindingsByRootAndName,c=h[s];void 0===c&&(c={},h[s]=c);for(var l=0;l!==r;++l){var u=n[l],p=u.name,d=c[p];if(void 0!==d)o[l]=d;else{if(void 0!==(d=o[l])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,p));continue}var f=e&&e._propertyBindings[l].binding.parsedPath;++(d=new ph(Rh.create(i,p,f),u.ValueTypeName,u.getValueSize())).referenceCount,this._addInactiveBinding(d,s,p),o[l]=d}a[l].resultBuffer=d.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,i=t._clip.uuid,n=this._actionsByClip[i];this._bindAction(t,n&&n.knownActions[0]),this._addInactiveAction(t,i,e)}for(var r=t._propertyBindings,o=0,a=r.length;o!==a;++o){var s=r[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,i=0,n=e.length;i!==n;++i){var r=e[i];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,i){var n=this._actions,r=this._actionsByClip,o=r[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=o;else{var a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=n.length,n.push(t),o.actionByRoot[i]=t},_removeInactiveAction:function(t){var e=this._actions,i=e[e.length-1],n=t._cacheIndex;i._cacheIndex=n,e[n]=i,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,h=s[s.length-1],c=t._byClipCacheIndex;h._byClipCacheIndex=c,s[c]=h,s.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,i=0,n=e.length;i!==n;++i){var r=e[i];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,i=t._cacheIndex,n=this._nActiveActions++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackAction:function(t){var e=this._actions,i=t._cacheIndex,n=--this._nActiveActions,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_addInactiveBinding:function(t,e,i){var n=this._bindingsByRootAndName,r=n[e],o=this._bindings;void 0===r&&(r={},n[e]=r),r[i]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,i=t.binding,n=i.rootNode.uuid,r=i.path,o=this._bindingsByRootAndName,a=o[n],s=e[e.length-1],h=t._cacheIndex;s._cacheIndex=h,e[h]=s,e.pop(),delete a[r];t:{for(var c in a)break t;delete o[n]}},_lendBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=this._nActiveBindings++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=--this._nActiveBindings,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,i=t[e];return void 0===i&&((i=new _s(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=i),i},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,i=t.__cacheIndex,n=--this._nActiveControlInterpolants,r=e[n];t.__cacheIndex=n,e[n]=t,r.__cacheIndex=i,e[i]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var i=e||this._root,n=i.uuid,r="string"==typeof t?Rs.findByName(i,t):t,o=null!==r?r.uuid:t,a=this._actionsByClip[o],s=null;if(void 0!==a){var h=a.actionByRoot[n];if(void 0!==h)return h;s=a.knownActions[0],null===r&&(r=s._clip)}if(null===r)return null;var c=new Ah(this,r,e);return this._bindAction(c,s),this._addInactiveAction(c,o,n),c},existingAction:function(t,e){var i=e||this._root,n=i.uuid,r="string"==typeof t?Rs.findByName(i,t):t,o=r?r.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[n]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,i=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==e;++r)t[r].reset();for(r=0;r!==n;++r)i[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,i=this._nActiveActions,n=this.time+=t,r=Math.sign(t),o=this._accuIndex^=1,a=0;a!==i;++a){e[a]._update(n,t,r,o)}var s=this._bindings,h=this._nActiveBindings;for(a=0;a!==h;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,i=t.uuid,n=this._actionsByClip,r=n[i];if(void 0!==r){for(var o=r.knownActions,a=0,s=o.length;a!==s;++a){var h=o[a];this._deactivateAction(h);var c=h._cacheIndex,l=e[e.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,l._cacheIndex=c,e[c]=l,e.pop(),this._removeInactiveBindingsForAction(h)}delete n[i]}},uncacheRoot:function(t){var e=t.uuid,i=this._actionsByClip;for(var n in i){var r=i[n].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var o=this._bindingsByRootAndName[e];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(t,e){var i=this.existingAction(t,e);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}),Ph.prototype.clone=function(){return new Ph(void 0===this.value.clone?this.value:this.value.clone())},Ih.prototype=Object.assign(Object.create(ki.prototype),{constructor:Ih,isInstancedBufferGeometry:!0,copy:function(t){return ki.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Nh.prototype=Object.assign(Object.create(kr.prototype),{constructor:Nh,isInstancedInterleavedBuffer:!0,copy:function(t){return kr.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Fh.prototype=Object.assign(Object.create(Ti.prototype),{constructor:Fh,isInstancedBufferAttribute:!0,copy:function(t){return Ti.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(Dh.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,i){var n=i||[];return kh(t,this,n,e),n.sort(jh),n},intersectObjects:function(t,e,i){var n=i||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var r=0,o=t.length;r<o;r++)kh(t[r],this,n,e);return n.sort(jh),n}}),Object.assign(function(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),Object.assign(function(t,e,i){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==i?i:0,this}.prototype,{set:function(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(Pe.clamp(e/this.radius,-1,1))),this}}),Object.assign(function(t,e,i){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==i?i:0,this}.prototype,{set:function(t,e,i){return this.radius=t,this.theta=e,this.y=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=e,this}}),Object.assign(Gh.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new Ie;return function(e,i){var n=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Ie),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new Ie),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new Ie),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new Ie),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new Ie;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(Uh.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new De),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new De),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new De),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:(Mh=new De,wh=new De,function(t,e){Mh.subVectors(t,this.start),wh.subVectors(this.end,this.start);var i=wh.dot(wh),n=wh.dot(Mh)/i;return e&&(n=Pe.clamp(n,0,1)),n}),closestPointToPoint:function(t,e,i){var n=this.closestPointToPointParameter(t,e);return void 0===i&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new De),this.delta(i).multiplyScalar(n).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),zh.prototype=Object.create(xi.prototype),zh.prototype.constructor=zh,zh.prototype.isImmediateRenderObject=!0,Bh.prototype=Object.create(qr.prototype),Bh.prototype.constructor=Bh,Bh.prototype.update=function(){var t=new De,e=new De,i=new je;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,h=a.faces,c=0,l=0,u=h.length;l<u;l++)for(var p=h[l],d=0,f=p.vertexNormals.length;d<f;d++){var m=s[p[n[d]]],v=p.vertexNormals[d];t.copy(m).applyMatrix4(r),e.copy(v).applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),o.setXYZ(c,t.x,t.y,t.z),c+=1,o.setXYZ(c,e.x,e.y,e.z),c+=1}else if(a&&a.isBufferGeometry){var g=a.attributes.position,y=a.attributes.normal;for(c=0,d=0,f=g.count;d<f;d++)t.set(g.getX(d),g.getY(d),g.getZ(d)).applyMatrix4(r),e.set(y.getX(d),y.getY(d),y.getZ(d)),e.applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),o.setXYZ(c,t.x,t.y,t.z),c+=1,o.setXYZ(c,e.x,e.y,e.z),c+=1}o.needsUpdate=!0}}(),Hh.prototype=Object.create(xi.prototype),Hh.prototype.constructor=Hh,Hh.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Hh.prototype.update=function(){var t=new De,e=new De;return function(){this.light.updateMatrixWorld();var i=this.light.distance?this.light.distance:1e3,n=i*Math.tan(this.light.angle);this.cone.scale.set(n,n,i),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Vh.prototype=Object.create(qr.prototype),Vh.prototype.constructor=Vh,Vh.prototype.updateMatrixWorld=function(){var t=new De,e=new Ne,i=new Ne;return function(n){var r=this.bones,o=this.geometry,a=o.getAttribute("position");i.getInverse(this.root.matrixWorld);for(var s=0,h=0;s<r.length;s++){var c=r[s];c.parent&&c.parent.isBone&&(e.multiplyMatrices(i,c.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(h,t.x,t.y,t.z),e.multiplyMatrices(i,c.parent.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(h+1,t.x,t.y,t.z),h+=2)}o.getAttribute("position").needsUpdate=!0,xi.prototype.updateMatrixWorld.call(this,n)}}(),Wh.prototype=Object.create(hn.prototype),Wh.prototype.constructor=Wh,Wh.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Wh.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Xh.prototype=Object.create(xi.prototype),Xh.prototype.constructor=Xh,Xh.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Xh.prototype.update=function(){var t=.5*this.light.width,e=.5*this.light.height,i=this.line.geometry.attributes.position,n=i.array;n[0]=t,n[1]=-e,n[2]=0,n[3]=t,n[4]=e,n[5]=0,n[6]=-t,n[7]=e,n[8]=0,n[9]=-t,n[10]=-e,n[11]=0,n[12]=t,n[13]=-e,n[14]=0,i.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},Yh.prototype=Object.create(xi.prototype),Yh.prototype.constructor=Yh,Yh.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Yh.prototype.update=function(){var t=new De,e=new ai,i=new ai;return function(){var n=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=n.geometry.getAttribute("color");e.copy(this.light.color),i.copy(this.light.groundColor);for(var o=0,a=r.count;o<a;o++){var s=o<a/2?e:i;r.setXYZ(o,s.r,s.g,s.b)}r.needsUpdate=!0}n.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),qh.prototype=Object.create(qr.prototype),qh.prototype.constructor=qh,Kh.prototype=Object.create(qr.prototype),Kh.prototype.constructor=Kh,Zh.prototype=Object.create(qr.prototype),Zh.prototype.constructor=Zh,Zh.prototype.update=function(){var t=new De,e=new De,i=new je;return function(){this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,r=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,h=0,c=0,l=s.length;c<l;c++){var u=s[c],p=u.normal;t.copy(a[u.a]).add(a[u.b]).add(a[u.c]).divideScalar(3).applyMatrix4(n),e.copy(p).applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),r.setXYZ(h,t.x,t.y,t.z),h+=1,r.setXYZ(h,e.x,e.y,e.z),h+=1}r.needsUpdate=!0}}(),$h.prototype=Object.create(xi.prototype),$h.prototype.constructor=$h,$h.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},$h.prototype.update=function(){var t=new De,e=new De,i=new De;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),i.subVectors(e,t),this.lightPlane.lookAt(i),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(i),this.targetLine.scale.z=i.length()}}(),Jh.prototype=Object.create(qr.prototype),Jh.prototype.constructor=Jh,Jh.prototype.update=function(){var t,e,i=new De,n=new Ar;function r(r,o,a,s){i.set(o,a,s).unproject(n);var h=e[r];if(void 0!==h)for(var c=t.getAttribute("position"),l=0,u=h.length;l<u;l++)c.setXYZ(h[l],i.x,i.y,i.z)}return function(){t=this.geometry,e=this.pointMap;n.projectionMatrix.copy(this.camera.projectionMatrix),r("c",0,0,-1),r("t",0,0,1),r("n1",-1,-1,-1),r("n2",1,-1,-1),r("n3",-1,1,-1),r("n4",1,1,-1),r("f1",-1,-1,1),r("f2",1,-1,1),r("f3",-1,1,1),r("f4",1,1,1),r("u1",.7,1.1,-1),r("u2",-.7,1.1,-1),r("u3",0,2,-1),r("cf1",-1,0,1),r("cf2",1,0,1),r("cf3",0,-1,1),r("cf4",0,1,1),r("cn1",-1,0,-1),r("cn2",1,0,-1),r("cn3",0,-1,-1),r("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),Qh.prototype=Object.create(qr.prototype),Qh.prototype.constructor=Qh,Qh.prototype.update=function(){var t=new Ze;return function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&t.setFromObject(this.object),!t.isEmpty()){var i=t.min,n=t.max,r=this.geometry.attributes.position,o=r.array;o[0]=n.x,o[1]=n.y,o[2]=n.z,o[3]=i.x,o[4]=n.y,o[5]=n.z,o[6]=i.x,o[7]=i.y,o[8]=n.z,o[9]=n.x,o[10]=i.y,o[11]=n.z,o[12]=n.x,o[13]=n.y,o[14]=i.z,o[15]=i.x,o[16]=n.y,o[17]=i.z,o[18]=i.x,o[19]=i.y,o[20]=i.z,o[21]=n.x,o[22]=i.y,o[23]=i.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Qh.prototype.setFromObject=function(t){return this.object=t,this.update(),this},tc.prototype=Object.create(qr.prototype),tc.prototype.constructor=tc,tc.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),xi.prototype.updateMatrixWorld.call(this,t))},ec.prototype=Object.create(Yr.prototype),ec.prototype.constructor=ec,ec.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?M:b,this.lookAt(this.plane.normal),xi.prototype.updateMatrixWorld.call(this,t)},ic.prototype=Object.create(xi.prototype),ic.prototype.constructor=ic,ic.prototype.setDirection=(Ch=new De,function(t){t.y>.99999?this.quaternion.set(0,0,0,1):t.y<-.99999?this.quaternion.set(1,0,0,0):(Ch.set(t.z,0,-t.x).normalize(),Sh=Math.acos(t.y),this.quaternion.setFromAxisAngle(Ch,Sh))}),ic.prototype.setLength=function(t,e,i){void 0===e&&(e=.2*t),void 0===i&&(i=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()},ic.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},nc.prototype=Object.create(qr.prototype),nc.prototype.constructor=nc;function rc(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Va.call(this,t),this.type="catmullrom"}Da.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Da.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(is.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new Ei,i=0,n=t.length;i<n;i++){var r=t[i];e.vertices.push(new De(r.x,r.y,r.z||0))}return e}}),Object.assign(ns.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),Object.create(Va.prototype),Object.create(Va.prototype),rc.prototype=Object.create(Va.prototype),Object.assign(rc.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),qh.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Vh.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(ks.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Gs(t)}}),Object.assign(Us.prototype,{setTexturePath:function(t){return console.warn("THREE.JSONLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(Gh.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(Ze.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Uh.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(Pe,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Pe.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Pe.ceilPowerOfTwo(t)}}),Object.assign(je.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Ne.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new De),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,i,n,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,n,i,r,o)}}),Je.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Fe.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(on.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(an.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(an,{barycoordFromPoint:function(t,e,i,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),an.getBarycoord(t,e,i,n,r)},normal:function(t,e,i,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),an.getNormal(t,e,i,n)}}),Object.assign(rs.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Yo(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new oa(this,t)}}),Object.assign(Ie.prototype,{fromAttribute:function(t,e,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(De.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Xe.prototype,{fromAttribute:function(t,e,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ei.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(xi.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(xi.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Br.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Hr.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Da.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),Lr.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(os.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Ti.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(ki.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(ki.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(qo.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Ph.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(nn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ai}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}}}),Object.defineProperties(xa.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(rn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Nr.prototype,{clearTarget:function(t,e,i,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,i,n)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(Nr.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Cr.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Ye.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Ir.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),ch.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new ah).load(t,function(t){e.setBuffer(t)}),this},uh.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},sh.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};He.crossOrigin=void 0,He.loadTexture=function(t,e,i,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new Fa;r.setCrossOrigin(this.crossOrigin);var o=r.load(t,i,void 0,n);return e&&(o.mapping=e),o},He.loadTextureCube=function(t,e,i,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new Na;r.setCrossOrigin(this.crossOrigin);var o=r.load(t,i,void 0,n);return e&&(o.mapping=e),o},He.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},He.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},MmMw:function(t,e,i){var n=i("EqjI");t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},NBiL:function(t,e,i){"use strict";e.a={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"}},NNCy:function(t,e,i){"use strict";e.a={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"}},"NWt+":function(t,e,i){var n=i("+ZMJ"),r=i("msXi"),o=i("Mhyx"),a=i("77Pl"),s=i("QRG4"),h=i("3fs2"),c={},l={};(e=t.exports=function(t,e,i,u,p){var d,f,m,v,g=p?function(){return t}:h(t),y=n(i,u,e?2:1),_=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(d=s(t.length);d>_;_++)if((v=e?y(a(f=t[_])[0],f[1]):y(t[_]))===c||v===l)return v}else for(m=g.call(t);!(f=m.next()).done;)if((v=r(m,y,f.value,e))===c||v===l)return v}).BREAK=c,e.RETURN=l},O4g8:function(t,e){t.exports=!0},OEyb:function(t,e,i){"use strict";e.a=function(t,e){if(!t)throw new n.a(e)};var n=i("AU1m")},ON07:function(t,e,i){var n=i("EqjI"),r=i("7KvD").document,o=n(r)&&n(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},Oeue:function(t,e,i){"use strict";i.d(e,"c",function(){return h}),i.d(e,"b",function(){return c}),i.d(e,"d",function(){return l}),i.d(e,"e",function(){return u}),i.d(e,"f",function(){return p}),i.d(e,"g",function(){return d}),i.d(e,"i",function(){return f}),i.d(e,"k",function(){return m}),i.d(e,"l",function(){return v}),i.d(e,"m",function(){return g}),i.d(e,"j",function(){return y}),i.d(e,"h",function(){return _}),i.d(e,"o",function(){return x}),i.d(e,"a",function(){return E}),i.d(e,"p",function(){return O}),e.q=function(t,e){var i=T();t!=i.font&&(i.font=t);return i.measureText(e).width},e.s=function(t,e,i,n){0!==e&&(t.translate(i,n),t.rotate(e),t.translate(-i,-n))},i.d(e,"r",function(){return R}),e.n=function(t,e,i,n,r,o,a,s,h,c,l){var u;1!=i&&(u=t.globalAlpha,t.globalAlpha=u*i);e&&t.setTransform.apply(t,e);t.drawImage(n,r,o,a,s,h,c,a*l,s*l),u&&(t.globalAlpha=u);e&&t.setTransform.apply(t,R)};var n=i("CTDj"),r=i("w2Al"),o=i("tFCN"),a=i("9JMd"),s=i("azsZ"),h="10px sans-serif",c=[0,0,0,1],l="round",u=[],p=0,d="round",f=10,m=[0,0,0,1],v="center",g="middle",y=[0,0,0,0],_=1,x=new a.a,b={},M=null,w={},E=function(){var t,e,i=60,r=b,a="32px ",s=["monospace","serif"],h=s.length,c="wmytzilWMYTZIL@#/&?$%10";function l(t){for(var i=T(),n=100;n<=700;n+=300){for(var r=n+" ",o=!0,l=0;l<h;++l){var u=s[l];if(i.font=r+a+u,e=i.measureText(c).width,t!=u){i.font=r+a+t+","+u;var p=i.measureText(c).width;o=o&&p!=e}}if(o)return!0}return!1}function u(){var e=!0;for(var n in r)r[n]<i&&(l(n)?(r[n]=i,Object(o.b)(w),M=null,x.clear()):(++r[n],e=!1));e&&(clearInterval(t),t=void 0)}return function(e){var o=Object(n.e)(e);if(o)for(var a=0,s=o.length;a<s;++a){var h=o[a];h in r||(r[h]=i,l(h)||(r[h]=0,void 0===t&&(t=setInterval(u,32))))}}}();function T(){return M||(M=Object(r.a)(1,1)),M}var S,C,O=(C=w,function(t){var e=C[t];return void 0==e&&(S||((S=document.createElement("span")).textContent="M",S.style.margin=S.style.padding="0 !important",S.style.position="absolute !important",S.style.left="-99999px !important"),S.style.font=t,document.body.appendChild(S),e=C[t]=S.offsetHeight,document.body.removeChild(S)),e});var R=Object(s.c)()},OrOo:function(t,e,i){"use strict";var n=i("XOen"),r=i("jP9t"),o=i("o1z/"),a=i("tFCN"),s=function(t){function e(e){t.call(this);var i=Object(a.a)({},e);i[r.a.OPACITY]=void 0!==e.opacity?e.opacity:1,i[r.a.VISIBLE]=void 0===e.visible||e.visible,i[r.a.Z_INDEX]=e.zIndex,i[r.a.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,i[r.a.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,this.setProperties(i),this.state_={layer:this,managed:!0},this.type}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return this.type},e.prototype.getLayerState=function(){return this.state_.opacity=Object(o.a)(this.getOpacity(),0,1),this.state_.sourceState=this.getSourceState(),this.state_.visible=this.getVisible(),this.state_.extent=this.getExtent(),this.state_.zIndex=this.getZIndex()||0,this.state_.maxResolution=this.getMaxResolution(),this.state_.minResolution=Math.max(this.getMinResolution(),0),this.state_},e.prototype.getLayersArray=function(t){},e.prototype.getLayerStatesArray=function(t){},e.prototype.getExtent=function(){return this.get(r.a.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(r.a.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(r.a.MIN_RESOLUTION)},e.prototype.getOpacity=function(){return this.get(r.a.OPACITY)},e.prototype.getSourceState=function(){},e.prototype.getVisible=function(){return this.get(r.a.VISIBLE)},e.prototype.getZIndex=function(){return this.get(r.a.Z_INDEX)},e.prototype.setExtent=function(t){this.set(r.a.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(r.a.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(r.a.MIN_RESOLUTION,t)},e.prototype.setOpacity=function(t){this.set(r.a.OPACITY,t)},e.prototype.setVisible=function(t){this.set(r.a.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(r.a.Z_INDEX,t)},e}(n.a);e.a=s},PXmv:function(t,e,i){"use strict";
/**
  * vue-custom-element v3.2.5
  * (c) 2018 Karol Fabjańczuk
  * @license MIT
  */function n(t,e){return t.__proto__=e,t}Object.setPrototypeOf=Object.setPrototypeOf||n;n.bind(Object);var r="undefined"!=typeof Symbol&&"undefined"!=typeof Reflect,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("undefined"!=typeof customElements){if(r){var i=function(t){function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),n=t?HTMLElement.call(t):e;return h.call(n),a(e,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,s),o(i,null,[{key:"observedAttributes",get:function(){return e.observedAttributes||[]}}]),i}();return i.prototype.connectedCallback=c,i.prototype.disconnectedCallback=l,i.prototype.attributeChangedCallback=u,p(t,i),i}var n=function(t){var e=t?HTMLElement.call(t):this;return h.call(e),e};return n.observedAttributes=e.observedAttributes||[],(n.prototype=Object.create(HTMLElement.prototype,{constructor:{configurable:!0,writable:!0,value:n}})).connectedCallback=c,n.prototype.disconnectedCallback=l,n.prototype.attributeChangedCallback=u,p(t,n),n}function h(){!0===e.shadow&&HTMLElement.prototype.attachShadow&&this.attachShadow({mode:"open"}),"function"==typeof e.constructorCallback&&e.constructorCallback.call(this)}function c(){"function"==typeof e.connectedCallback&&e.connectedCallback.call(this)}function l(){"function"==typeof e.disconnectedCallback&&e.disconnectedCallback.call(this)}function u(t,i,n){"function"==typeof e.attributeChangedCallback&&e.attributeChangedCallback.call(this,t,i,n)}function p(t,e){var i=customElements.get(t);return void 0!==i?i:customElements.define(t,e)}}Object.setPrototypeOf(s.prototype,HTMLElement.prototype),Object.setPrototypeOf(s,HTMLElement);var c=/-(\w)/g,l=function(t){return t.replace(c,function(t,e){return e?e.toUpperCase():""})},u=/([^-])([A-Z])/g,p=function(t){return t.replace(u,"$1-$2").replace(u,"$1-$2").toLowerCase()};function d(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t.length-e,n=new Array(i);i--;)n[i]=t[i+e];return n}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function m(t,e){var i=t,n=["true","false"].indexOf(t)>-1,r=parseFloat(i,10),o=!isNaN(r)&&isFinite(i)&&"string"==typeof i&&!i.match(/^0+[^.]\d*$/g);return e&&e!==Boolean&&(void 0===i?"undefined":f(i))!==e?i=e(t):n||e===Boolean?i=""===i||"true"===i:o&&(i=r),i}function v(t,e){if(t&&t.length)t.forEach(function(t){var i=l(t);-1===e.camelCase.indexOf(i)&&e.camelCase.push(i)});else if(t&&"object"===(void 0===t?"undefined":f(t)))for(var i in t){var n=l(i);-1===e.camelCase.indexOf(n)&&e.camelCase.push(n),t[n]&&t[n].type&&(e.types[i]=[].concat(t[n].type)[0])}}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={camelCase:[],hyphenate:[],types:{}};(t.mixins&&t.mixins.forEach(function(t){v(t.props,e)}),t.extends&&t.extends.props)&&v(t.extends.props,e);return v(t.props,e),e.camelCase.forEach(function(t){e.hyphenate.push(p(t))}),e}function y(t){var e={};return d(t.attributes).forEach(function(t){e["vue-slot"===t.nodeName?"slot":t.nodeName]=t.nodeValue}),e}function _(t,e,i){var n=d(function(t){if(t.childNodes.length)return t.childNodes;if(t.content&&t.content.childNodes&&t.content.childNodes.length)return t.content.childNodes;var e=document.createElement("div");return e.innerHTML=t.innerHTML,e.childNodes}(e)).map(function(e){return"#text"===e.nodeName?e.nodeValue:t(e.tagName,{attrs:y(e),domProps:{innerHTML:e.innerHTML}})});return i.slot=e.id,t("template",i,n)}function x(t,e){for(var i=arguments.length,n=Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];var o=function(t,e){var i={bubbles:!1,cancelable:!1,detail:e},n=void 0;return"function"==typeof window.CustomEvent?n=new CustomEvent(t,i):(n=document.createEvent("CustomEvent")).initCustomEvent(t,i.bubbles,i.cancelable,i.detail),n}(e,[].concat(n));t.dispatchEvent(o)}function b(t,e,i,n,r){if(!t.__vue_custom_element__){var o=e.util.extend({},i),a=function(t,e,i){var n=e.propsData||{};return i.hyphenate.forEach(function(e,r){var o=i.camelCase[r],a=t.attributes[e]||t[o],s=null;i.types[o]&&(s=i.types[o]),a instanceof Attr?n[o]=m(a.value,s):void 0!==a&&(n[o]=a)}),n}(t,o,n),s=e.version&&parseInt(e.version.split(".")[0],10)||0;if(o.beforeCreate=[].concat(o.beforeCreate||[],function(){this.$emit=function(){for(var e,i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];x.apply(void 0,[t].concat(n)),this.__proto__&&(e=this.__proto__.$emit).call.apply(e,[this].concat(n))}}),o._compiled){var h={};o._Ctor&&(h=Object.values(o._Ctor)[0].options),h.beforeCreate=o.beforeCreate}var c=void 0;if(s>=2){var l=t.cloneNode(!0).childNodes;c={propsData:a,props:n.camelCase,computed:{reactiveProps:function(){var t=this,e={};return n.camelCase.forEach(function(i){void 0!==t[i]&&(e[i]=t[i])}),e}},render:function(t){var e={props:this.reactiveProps};return t(o,e,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],i=[];return d(t).forEach(function(t){if("#text"===t.nodeName)t.nodeValue.trim()&&i.push(e("span",t.nodeValue));else if("#comment"!==t.nodeName){var n=y(t),r={attrs:n,domProps:{innerHTML:""===t.innerHTML?t.innerText:t.innerHTML}};n.slot&&(r.slot=n.slot,n.slot=void 0);var o="TEMPLATE"===t.tagName?_(e,t,r):e(t.tagName,r);i.push(o)}}),i}(l,t))}}}else if(1===s)(c=o).propsData=a;else{c=o;var u={};Object.keys(a).forEach(function(t){u[t]={default:a[t]}}),c.props=u}var p=s>=2?"<div></div>":("<div>"+t.innerHTML+"</div>").replace(/vue-slot=/g,"slot=");if(r.shadow&&t.shadowRoot?(t.shadowRoot.innerHTML=p,c.el=t.shadowRoot.children[0]):(t.innerHTML=p,c.el=t.children[0]),function(t,e){e.camelCase.forEach(function(i,n){Object.defineProperty(t,i,{get:function(){return this.__vue_custom_element__[i]},set:function(t){if("object"!==(void 0===t?"undefined":f(t))&&"function"!=typeof t||!this.__vue_custom_element__){var i=e.types[e.camelCase[n]];this.setAttribute(e.hyphenate[n],m(t,i))}else{var r=e.camelCase[n];this.__vue_custom_element__[r]=t}}})})}(t,n),"function"==typeof r.beforeCreateVueInstance&&(c=r.beforeCreateVueInstance(c)||c),t.__vue_custom_element__=new e(c),t.__vue_custom_element_props__=n,t.getVueInstance=function(){return t.__vue_custom_element__.$children[0]},r.shadow&&r.shadowCss&&t.shadowRoot){var v=document.createElement("style");v.type="text/css",v.appendChild(document.createTextNode(r.shadowCss)),t.shadowRoot.appendChild(v)}t.removeAttribute("vce-cloak"),t.setAttribute("vce-ready",""),x(t,"vce-ready")}}function M(t){t.customElement=function(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="function"==typeof i,o=r&&{props:n.props||[]},a=g(r?o:i);return h(e,{constructorCallback:function(){"function"==typeof n.constructorCallback&&n.constructorCallback.call(this)},connectedCallback:function(){var o=this,s=r&&i(),h=s&&s.then&&"function"==typeof s.then;if("function"==typeof n.connectedCallback&&n.connectedCallback.call(this),r&&!h)throw new Error("Async component "+e+" do not returns Promise");this.__detached__||(h?s.then(function(e){var i=g(e);b(o,t,e,i,n),"function"==typeof n.vueInstanceCreatedCallback&&n.vueInstanceCreatedCallback.call(o)}):(b(this,t,i,a,n),"function"==typeof n.vueInstanceCreatedCallback&&n.vueInstanceCreatedCallback.call(this))),this.__detached__=!1},disconnectedCallback:function(){var t=this;this.__detached__=!0,"function"==typeof n.disconnectedCallback&&n.disconnectedCallback.call(this),setTimeout(function(){t.__detached__&&t.__vue_custom_element__&&(t.__vue_custom_element__.$destroy(!0),delete t.__vue_custom_element__,delete t.__vue_custom_element_props__)},n.destroyTimeout||3e3)},attributeChangedCallback:function(t,e,i){if(this.__vue_custom_element__&&void 0!==i){var r=l(t);"function"==typeof n.attributeChangedCallback&&n.attributeChangedCallback.call(this,t,e,i);var o=this.__vue_custom_element_props__.types[r];this.__vue_custom_element__[r]=m(i,o)}},observedAttributes:a.hyphenate,shadow:!!n.shadow&&!!HTMLElement.prototype.attachShadow})}}"undefined"!=typeof window&&window.Vue&&(window.Vue.use(M),M.installed&&(M.installed=!1)),e.a=M},PzxK:function(t,e,i){var n=i("D2L2"),r=i("sB3e"),o=i("ax3d")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},QBya:function(t,e,i){"use strict";e.a=function(t){return function(t){return"string"==typeof t||t instanceof CanvasPattern||t instanceof CanvasGradient}(t)?t:Object(n.c)(t)};var n=i("FeXB")},QRG4:function(t,e,i){var n=i("UuGF"),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},R9M2:function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},RPLV:function(t,e,i){var n=i("7KvD").document;t.exports=n&&n.documentElement},RUSk:function(t,e,i){"use strict";e.c=function(t,e,i,n,r,o){for(var a=o||[],s=0,h=e;h<i;h+=n){var c=t[h],l=t[h+1];a[s++]=r[0]*c+r[2]*l+r[4],a[s++]=r[1]*c+r[3]*l+r[5]}o&&a.length!=s&&(a.length=s);return a},e.a=function(t,e,i,n,r,o,a){for(var s=a||[],h=Math.cos(r),c=Math.sin(r),l=o[0],u=o[1],p=0,d=e;d<i;d+=n){var f=t[d]-l,m=t[d+1]-u;s[p++]=l+f*h-m*c,s[p++]=u+f*c+m*h;for(var v=d+2;v<d+n;++v)s[p++]=t[v]}a&&s.length!=p&&(s.length=p);return s},e.b=function(t,e,i,n,r,o,a,s){for(var h=s||[],c=a[0],l=a[1],u=0,p=e;p<i;p+=n){var d=t[p]-c,f=t[p+1]-l;h[u++]=c+r*d,h[u++]=l+o*f;for(var m=p+2;m<p+n;++m)h[u++]=t[m]}s&&h.length!=u&&(h.length=u);return h},e.d=function(t,e,i,n,r,o,a){for(var s=a||[],h=0,c=e;c<i;c+=n){s[h++]=t[c]+r,s[h++]=t[c+1]+o;for(var l=c+2;l<c+n;++l)s[h++]=t[l]}a&&s.length!=h&&(s.length=h);return s}},"RY/4":function(t,e,i){var n=i("R9M2"),r=i("dSzd")("toStringTag"),o="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,i,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?i:o?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},S82l:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},SfB7:function(t,e,i){t.exports=!i("+E39")&&!i("S82l")(function(){return 7!=Object.defineProperty(i("ON07")("div"),"a",{get:function(){return 7}}).a})},SfaQ:function(t,e,i){"use strict";var n=i("XOen"),r=i("/LWt"),o=i("V2dr"),a=i("RUSk"),s=i("yGLh"),h=i("vv/+"),c=i("azsZ"),l=Object(c.c)(),u=function(t){function e(){t.call(this),this.extent_=Object(r.j)(),this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){},e.prototype.closestPointXY=function(t,e,i,n){},e.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),Object(r.I)(this.extent_,t)},e.prototype.rotate=function(t,e){},e.prototype.scale=function(t,e,i){},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){},e.prototype.getType=function(){},e.prototype.applyTransform=function(t){},e.prototype.intersectsExtent=function(t){},e.prototype.translate=function(t,e){},e.prototype.transform=function(t,e){var i=(t=Object(s.d)(t)).getUnits()==h.b.TILE_PIXELS?function(i,n,o){var h=t.getExtent(),u=t.getWorldExtent(),p=Object(r.A)(u)/Object(r.A)(h);return Object(c.b)(l,u[0],u[3],p,-p,0,0,0),Object(a.c)(i,0,i.length,o,l,n),Object(s.f)(t,e)(i,n,o)}:Object(s.f)(t,e);return this.applyTransform(i),this},e}(n.a);u.prototype.containsXY=o.a,e.a=u},SpdK:function(t,e,i){var n;n=function(){"use strict";function t(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function e(t,e){return t<e?-1:t>e?1:0}return function(i,n,r,o,a){!function e(i,n,r,o,a){for(;o>r;){if(o-r>600){var s=o-r+1,h=n-r+1,c=Math.log(s),l=.5*Math.exp(2*c/3),u=.5*Math.sqrt(c*l*(s-l)/s)*(h-s/2<0?-1:1),p=Math.max(r,Math.floor(n-h*l/s+u)),d=Math.min(o,Math.floor(n+(s-h)*l/s+u));e(i,n,p,d,a)}var f=i[n],m=r,v=o;for(t(i,r,n),a(i[o],f)>0&&t(i,r,o);m<v;){for(t(i,m,v),m++,v--;a(i[m],f)<0;)m++;for(;a(i[v],f)>0;)v--}0===a(i[r],f)?t(i,r,v):t(i,++v,o),v<=n&&(r=v+1),n<=v&&(o=v-1)}}(i,n,r||0,o||i.length-1,a||e)}},t.exports=n()},T18w:function(t,e,i){"use strict";var n=i("/LWt"),r=i("Fu+J"),o=i("VgFP"),a=i("hrLW"),s=i("o1z/"),h=function(t){function e(e,i){t.call(this),this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){var r=this.flatCoordinates,o=Object(s.f)(t,e,r[0],r[1]);if(o<n){for(var a=this.stride,h=0;h<a;++h)i[h]=r[h];return i.length=a,o}return n},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Object(n.m)(this.flatCoordinates,t)},e.prototype.getType=function(){return r.a.POINT},e.prototype.intersectsExtent=function(t){return Object(n.h)(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(a.a)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(o.a);e.a=h},TcQ7:function(t,e,i){var n=i("MU5D"),r=i("52gC");t.exports=function(t){return n(r(t))}},U5ju:function(t,e,i){i("M6a0"),i("zQR9"),i("+tPU"),i("CXw9"),i("EqBC"),i("jKW+"),t.exports=i("FeBl").Promise},Umvz:function(t,e,i){"use strict";var n=i("v5fe"),r=i("+iwx"),o=i("iVNI"),a=i("tFCN"),s=i("Mjwz"),h="renderOrder",c=function(t){function e(e){var i=e||{},r=Object(a.a)({},i);delete r.style,delete r.renderBuffer,delete r.updateWhileAnimating,delete r.updateWhileInteracting,t.call(this,r),this.declutter_=void 0!==i.declutter&&i.declutter,this.renderBuffer_=void 0!==i.renderBuffer?i.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(i.style),this.updateWhileAnimating_=void 0!==i.updateWhileAnimating&&i.updateWhileAnimating,this.updateWhileInteracting_=void 0!==i.updateWhileInteracting&&i.updateWhileInteracting,this.renderMode_=i.renderMode||o.a.VECTOR,this.type=n.a.VECTOR}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.setDeclutter=function(t){this.declutter_=t},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(h)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(h,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:s.a,this.styleFunction_=null===t?void 0:Object(s.d)(this.style_),this.changed()},e.prototype.getRenderMode=function(){return this.renderMode_},e}(r.a);c.prototype.getSource,e.a=c},UuGF:function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},V2dr:function(t,e,i){"use strict";e.b=function(){return!0},e.a=function(){return!1},e.c=function(){}},"VU/8":function(t,e){t.exports=function(t,e,i,n,r,o){var a,s=t=t||{},h=typeof t.default;"object"!==h&&"function"!==h||(a=t,s=t.default);var c,l="function"==typeof s?s.options:s;if(e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0),i&&(l.functional=!0),r&&(l._scopeId=r),o?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=c):n&&(c=n),c){var u=l.functional,p=u?l.render:l.beforeCreate;u?(l._injectStyles=c,l.render=function(t,e){return c.call(e),p(t,e)}):l.beforeCreate=p?[].concat(p,c):[c]}return{esModule:a,exports:s,options:l}}},VgFP:function(t,e,i){"use strict";e.b=function(t,e,i){var n=t.getFlatCoordinates();if(n){var r=t.getStride();return Object(s.c)(n,0,n.length,r,e,i)}return null};var n=i("V2dr"),r=i("/LWt"),o=i("SfaQ"),a=i("5MGX"),s=i("RUSk"),h=i("tFCN"),c=function(t){function e(){t.call(this),this.layout=a.a.XY,this.stride=2,this.flatCoordinates=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeExtent=function(t){return Object(r.o)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Object(h.b)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=i,i):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=l(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){},e.prototype.setLayout=function(t,e,i){var n;if(t)n=l(t);else{for(var r=0;r<i;++r){if(0===e.length)return this.layout=a.a.XY,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=a.a.XY:3==t?e=a.a.XYZ:4==t&&(e=a.a.XYZM);return e}(n=e.length)}this.layout=t,this.stride=n},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();Object(s.a)(i,0,i.length,n,t,e,i),this.changed()}},e.prototype.scale=function(t,e,i){var n=e;void 0===n&&(n=t);var o=i;o||(o=Object(r.x)(this.getExtent()));var a=this.getFlatCoordinates();if(a){var h=this.getStride();Object(s.b)(a,0,a.length,h,t,n,o,a),this.changed()}},e.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();Object(s.d)(i,0,i.length,n,t,e,i),this.changed()}},e}(o.a);function l(t){var e;return t==a.a.XY?e=2:t==a.a.XYZ||t==a.a.XYM?e=3:t==a.a.XYZM&&(e=4),e}c.prototype.containsXY=n.a,e.a=c},WMwB:function(t,e,i){"use strict";var n=i("3ciB"),r=i("A90D"),o=i("DM+O"),a=i("XDHy"),s=i("zF6X"),h=i("OEyb"),c=i("6t+W"),l=i("LKHy"),u=i("57Gy"),p=i("/LWt"),d=i("V2dr"),f=i("NBiL");function m(t,e){return function(t,e,i,n){return function(r,o,a){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(r,o,a):t,!0),e.getType()==f.a.ARRAY_BUFFER&&(s.responseType="arraybuffer"),s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){var r,o=e.getType();o==f.a.JSON||o==f.a.TEXT?r=s.responseText:o==f.a.XML?(r=s.responseXML)||(r=(new DOMParser).parseFromString(s.responseText,"application/xml")):o==f.a.ARRAY_BUFFER&&(r=s.response),r?i.call(this,e.readFeatures(r,{featureProjection:a}),e.readProjection(r),e.getLastExtent()):n.call(this)}else n.call(this)}.bind(this),s.onerror=function(){n.call(this)}.bind(this),s.send()}}(t,e,function(t,e){this.addFeatures(t)},d.c)}function v(t,e){return[[-1/0,-1/0,1/0,1/0]]}var g=i("tFCN"),y=i("A7Qc"),_=i("9Ewl"),x=i("NNCy"),b=i("YxaZ");i.d(e,"a",function(){return M});var M=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(l.a),w=function(t){function e(e){var i=e||{};t.call(this,{attributions:i.attributions,projection:void 0,state:_.a.READY,wrapX:void 0===i.wrapX||i.wrapX}),this.loader_=d.c,this.format_=i.format,this.overlaps_=void 0==i.overlaps||i.overlaps,this.url_=i.url,void 0!==i.loader?this.loader_=i.loader:void 0!==this.url_&&(Object(h.a)(this.format_,7),this.loader_=m(this.url_,this.format_)),this.strategy_=void 0!==i.strategy?i.strategy:v;var n,o,a=void 0===i.useSpatialIndex||i.useSpatialIndex;this.featuresRtree_=a?new b.a:null,this.loadedExtentsRtree_=new b.a,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,i.features instanceof r.b?o=(n=i.features).getArray():Array.isArray(i.features)&&(o=i.features),a||void 0!==n||(n=new r.b(o)),void 0!==o&&this.addFeaturesInternal(o),void 0!==n&&this.bindFeaturesCollection_(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=Object(n.b)(t).toString();if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new M(x.a.ADDFEATURE,t))}},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Object(c.a)(e,u.a.CHANGE,this.handleFeatureChange_,this),Object(c.a)(e,a.a.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var i=!0,n=e.getId();return void 0!==n?n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e:(Object(h.a)(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),i},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],i=[],r=[],o=0,a=t.length;o<a;o++){var s=t[o],h=Object(n.b)(s).toString();this.addToIndex_(h,s)&&i.push(s)}for(var c=0,l=i.length;c<l;c++){var u=i[c],p=Object(n.b)(u).toString();this.setupChangeEvents_(p,u);var d=u.getGeometry();if(d){var f=d.getExtent();e.push(f),r.push(u)}else this.nullGeometryFeatures_[p]=u}this.featuresRtree_&&this.featuresRtree_.load(e,r);for(var m=0,v=i.length;m<v;m++)this.dispatchEvent(new M(x.a.ADDFEATURE,i[m]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;Object(c.a)(this,x.a.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),Object(c.a)(this,x.a.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),Object(c.a)(t,o.a.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)},this),Object(c.a)(t,o.a.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)},this),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(c.e)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var i in this.featuresRtree_.forEach(this.removeFeatureInternal,this),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var n=new M(x.a.CLEAR);this.dispatchEvent(n),this.changed()},e.prototype.forEachFeature=function(t){return this.featuresRtree_?this.featuresRtree_.forEach(t):this.featuresCollection_?this.featuresCollection_.forEach(t):void 0},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(i){return i.getGeometry().intersectsCoordinate(t)?e(i):void 0})},e.prototype.forEachFeatureInExtent=function(t,e){return this.featuresRtree_?this.featuresRtree_.forEachInExtent(t,e):this.featuresCollection_?this.featuresCollection_.forEach(e):void 0},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){var n=e(i);if(n)return n}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Object(g.d)(this.nullGeometryFeatures_)||Object(s.c)(t,Object(g.c)(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},e.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],n=t[1],r=null,o=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],h=e||d.b;return this.featuresRtree_.forEachInExtent(s,function(t){if(h(t)){var e=t.getGeometry(),c=a;if((a=e.closestPointXY(i,n,o,a))<c){r=t;var l=Math.sqrt(a);s[0]=i-l,s[1]=n-l,s[2]=i+l,s[3]=n+l}}}),r},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getResolutions=function(){},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,i=Object(n.b)(e).toString(),r=e.getGeometry();if(r){var o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var a=e.getId();if(void 0!==a){var s=a.toString();i in this.undefIdIndex_?(delete this.undefIdIndex_[i],this.idIndex_[s]=e):this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else i in this.undefIdIndex_||(this.removeFromIdIndex_(e),this.undefIdIndex_[i]=e);this.changed(),this.dispatchEvent(new M(x.a.CHANGEFEATURE,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:Object(n.b)(t).toString()in this.undefIdIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Object(g.d)(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,i){var n=this,r=this.loadedExtentsRtree_,o=this.strategy_(t,e);this.loading=!1;for(var a=function(t,a){var s=o[t];r.forEachInExtent(s,function(t){return Object(p.g)(t.extent,s)})||(n.loader_.call(n,s,e,i),r.insert(s,{extent:s.slice()}),n.loading=!0)},s=0,h=o.length;s<h;++s)a(s)},e.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,function(i){if(Object(p.p)(i.extent,t))return e=i,!0}),e&&i.remove(e)},e.prototype.removeFeature=function(t){var e=Object(n.b)(t).toString();e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=Object(n.b)(t).toString();this.featureChangeKeys_[e].forEach(c.e),delete this.featureChangeKeys_[e];var i=t.getId();void 0!==i?delete this.idIndex_[i.toString()]:delete this.undefIdIndex_[e],this.dispatchEvent(new M(x.a.REMOVEFEATURE,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e}(y.a);e.b=w},WiOa:function(t,e,i){"use strict";var n=i("09IN"),r=i("3ciB"),o=i("DL7K"),a=i("2S6f"),s=i("bhTf"),h=i("57Gy"),c=function(t){function e(e,i,n){t.call(this);var r=n||{};this.tileCoord=e,this.state=i,this.interimTile=null,this.key="",this.transition_=void 0===r.transition?250:r.transition,this.transitionStarts_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(h.a.CHANGE)},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==o.a.LOADED)return t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==o.a.LOADED){t.interimTile=null;break}t.getState()==o.a.LOADING?e=t:t.getState()==o.a.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){this.state=t,this.changed()},e.prototype.load=function(){},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var n=e-i+1e3/60;return n>=this.transition_?1:Object(a.a)(n/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(s.a),l=i("w2Al"),u=i("6t+W");function p(){var t=Object(l.a)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var d=function(t){function e(e,i,n,r,o,a){t.call(this,e,i,a),this.crossOrigin_=r,this.src_=n,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.imageListenerKeys_=null,this.tileLoadFunction_=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==o.a.LOADING&&(this.unlistenImage_(),this.image_=p()),this.interimTile&&this.interimTile.dispose(),this.state=o.a.ABORT,this.changed(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){this.state=o.a.ERROR,this.unlistenImage_(),this.image_=p(),this.changed()},e.prototype.handleImageLoad_=function(){this.image_.naturalWidth&&this.image_.naturalHeight?this.state=o.a.LOADED:this.state=o.a.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==o.a.ERROR&&(this.state=o.a.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==o.a.IDLE&&(this.state=o.a.LOADING,this.changed(),this.imageListenerKeys_=[Object(u.b)(this.image_,h.a.ERROR,this.handleImageError_,this),Object(u.b)(this.image_,h.a.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(u.e),this.imageListenerKeys_=null},e}(c);function f(t,e,i,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}function m(t,e,i){return t+"/"+e+"/"+i}function v(t){return m(t[0],t[1],t[2])}var g=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.expireCache=function(t){for(;this.canExpireCache();){var e=this.peekLast(),i=e.tileCoord[0].toString();if(i in t&&t[i].contains(e.tileCoord))break;this.pop().dispose()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=function(t){return t.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(v(e.tileCoord)),e.dispose())},this)}},e}(i("9JMd").a),y=i("yGLh"),_=i("/LWt"),x=i("o1z/");function b(t,e,i,n){var r=i-t,o=n-e,a=Math.sqrt(r*r+o*o);return[Math.round(i+r/a),Math.round(n+o/a)]}var M=function(t,e,i,n,r){this.sourceProj_=t,this.targetProj_=e;var o={},a=Object(y.f)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return o[e]||(o[e]=a(t)),o[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&Object(_.E)(n)==Object(_.E)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Object(_.E)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Object(_.E)(this.targetProj_.getExtent()):null;var s=Object(_.C)(i),h=Object(_.D)(i),c=Object(_.w)(i),l=Object(_.v)(i),u=this.transformInv_(s),p=this.transformInv_(h),d=this.transformInv_(c),f=this.transformInv_(l);if(this.addQuad_(s,h,c,l,u,p,d,f,10),this.wrapsXInSource_){var m=1/0;this.triangles_.forEach(function(t,e,i){m=Math.min(m,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-m>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-m>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-m>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-m>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var i=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-i<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}o={}};M.prototype.addTriangle_=function(t,e,i,n,r,o){this.triangles_.push({source:[n,r,o],target:[t,e,i]})},M.prototype.addQuad_=function(t,e,i,n,r,o,a,s,h){var c=Object(_.b)([r,o,a,s]),l=this.sourceWorldWidth_?Object(_.E)(c)/this.sourceWorldWidth_:null,u=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&l>.5&&l<1,d=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var f=Object(_.b)([t,e,i,n]);d|=Object(_.E)(f)/this.targetWorldWidth_>.25}!p&&this.sourceProj_.isGlobal()&&l&&(d|=l>.25)}if(d||!this.maxSourceExtent_||Object(_.F)(c,this.maxSourceExtent_)){if(!(d||isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1]))){if(!(h>0))return;d=!0}if(h>0){if(!d){var m,v=[(t[0]+i[0])/2,(t[1]+i[1])/2],g=this.transformInv_(v);if(p)m=(Object(x.d)(r[0],u)+Object(x.d)(a[0],u))/2-Object(x.d)(g[0],u);else m=(r[0]+a[0])/2-g[0];var y=(r[1]+a[1])/2-g[1];d=m*m+y*y>this.errorThresholdSquared_}if(d){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var b=[(e[0]+i[0])/2,(e[1]+i[1])/2],M=this.transformInv_(b),w=[(n[0]+t[0])/2,(n[1]+t[1])/2],E=this.transformInv_(w);this.addQuad_(t,e,b,w,r,o,M,E,h-1),this.addQuad_(w,b,i,n,E,M,a,s,h-1)}else{var T=[(t[0]+e[0])/2,(t[1]+e[1])/2],S=this.transformInv_(T),C=[(i[0]+n[0])/2,(i[1]+n[1])/2],O=this.transformInv_(C);this.addQuad_(t,T,C,n,r,S,O,s,h-1),this.addQuad_(T,e,i,C,S,o,a,O,h-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,i,n,r,a,s),this.addTriangle_(t,e,i,r,o,a)}},M.prototype.calculateSourceExtent=function(){var t=Object(_.j)();return this.triangles_.forEach(function(e,i,n){var r=e.source;Object(_.r)(t,r[0]),Object(_.r)(t,r[1]),Object(_.r)(t,r[2])}),t},M.prototype.getTriangles=function(){return this.triangles_};var w=M,E=function(t){function e(e,i,r,a,s,h,c,l,u,p,d){t.call(this,s,o.a.IDLE),this.renderEdges_=void 0!==d&&d,this.pixelRatio_=c,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=i,this.targetTileGrid_=a,this.wrappedTileCoord_=h||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var f=a.getTileCoordExtent(this.wrappedTileCoord_),m=this.targetTileGrid_.getExtent(),v=this.sourceTileGrid_.getExtent(),g=m?Object(_.B)(f,m):f;if(0!==Object(_.u)(g)){var b=e.getExtent();b&&(v=v?Object(_.B)(v,b):b);var M=a.getResolution(this.wrappedTileCoord_[0]),E=function(t,e,i,n){var r=Object(y.g)(i,e,t),o=Object(y.e)(e,n,i),a=e.getMetersPerUnit();void 0!==a&&(o*=a);var s=t.getMetersPerUnit();void 0!==s&&(o/=s);var h=t.getExtent();if(!h||Object(_.f)(h,r)){var c=Object(y.e)(t,o,r)/o;isFinite(c)&&c>0&&(o/=c)}return o}(e,r,Object(_.x)(g),M);if(!isFinite(E)||E<=0)this.state=o.a.EMPTY;else{var T=void 0!==p?p:n.b;if(this.triangulation_=new w(e,r,g,v,E*T),0!==this.triangulation_.getTriangles().length){this.sourceZ_=i.getZForResolution(E);var S=this.triangulation_.calculateSourceExtent();if(v&&(e.canWrapX()?(S[1]=Object(x.a)(S[1],v[1],v[3]),S[3]=Object(x.a)(S[3],v[1],v[3])):S=Object(_.B)(S,v)),Object(_.u)(S)){for(var C=i.getTileRangeForExtentAndZ(S,this.sourceZ_),O=C.minX;O<=C.maxX;O++)for(var R=C.minY;R<=C.maxY;R++){var A=u(this.sourceZ_,O,R,c);A&&this.sourceTiles_.push(A)}0===this.sourceTiles_.length&&(this.state=o.a.EMPTY)}else this.state=o.a.EMPTY}else this.state=o.a.EMPTY}}else this.state=o.a.EMPTY}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==o.a.LOADING&&this.unlistenSources_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,i,n){e&&e.getState()==o.a.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=o.a.ERROR;else{var e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],r="number"==typeof i?i:i[1],a=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function(t,e,i,n,r,o,a,s,h,c,u){var p=Object(l.a)(Math.round(i*t),Math.round(i*e));if(0===h.length)return p.canvas;p.scale(i,i);var d=Object(_.j)();h.forEach(function(t,e,i){Object(_.q)(d,t.extent)});var f=Object(_.E)(d),m=Object(_.A)(d),v=Object(l.a)(Math.round(i*f/n),Math.round(i*m/n)),g=i/n;h.forEach(function(t,e,i){var n=t.extent[0]-d[0],r=-(t.extent[3]-d[3]),o=Object(_.E)(t.extent),a=Object(_.A)(t.extent);v.drawImage(t.image,c,c,t.image.width-2*c,t.image.height-2*c,n*g,r*g,o*g,a*g)});var y=Object(_.C)(a);return s.getTriangles().forEach(function(t,e,r){var a=t.source,s=t.target,h=a[0][0],c=a[0][1],l=a[1][0],u=a[1][1],f=a[2][0],m=a[2][1],g=(s[0][0]-y[0])/o,_=-(s[0][1]-y[1])/o,M=(s[1][0]-y[0])/o,w=-(s[1][1]-y[1])/o,E=(s[2][0]-y[0])/o,T=-(s[2][1]-y[1])/o,S=h,C=c;h=0,c=0;var O=[[l-=S,u-=C,0,0,M-g],[f-=S,m-=C,0,0,E-g],[0,0,l,u,w-_],[0,0,f,m,T-_]],R=Object(x.e)(O);if(R){p.save(),p.beginPath();var A=(g+M+E)/3,L=(_+w+T)/3,P=b(A,L,g,_),I=b(A,L,M,w),N=b(A,L,E,T);p.moveTo(I[0],I[1]),p.lineTo(P[0],P[1]),p.lineTo(N[0],N[1]),p.clip(),p.transform(R[0],R[2],R[1],R[3],g,_),p.translate(d[0]-S,d[3]-C),p.scale(n/i,-n/i),p.drawImage(v.canvas,0,0),p.restore()}}),u&&(p.save(),p.strokeStyle="black",p.lineWidth=1,s.getTriangles().forEach(function(t,e,i){var n=t.target,r=(n[0][0]-y[0])/o,a=-(n[0][1]-y[1])/o,s=(n[1][0]-y[0])/o,h=-(n[1][1]-y[1])/o,c=(n[2][0]-y[0])/o,l=-(n[2][1]-y[1])/o;p.beginPath(),p.moveTo(s,h),p.lineTo(r,a),p.lineTo(c,l),p.closePath(),p.stroke()}),p.restore()),p.canvas}(n,r,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),a,h,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=o.a.LOADED}this.changed()},e.prototype.load=function(){if(this.state==o.a.IDLE){this.state=o.a.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,n){var r=e.getState();if(r==o.a.IDLE||r==o.a.LOADING){t++;var a=Object(u.a)(e,h.a.CHANGE,function(i){var n=e.getState();n!=o.a.LOADED&&n!=o.a.ERROR&&n!=o.a.EMPTY||(Object(u.e)(a),0===--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(a)}}.bind(this)),this.sourceTiles_.forEach(function(t,e,i){t.getState()==o.a.IDLE&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(u.e),this.sourcesListenerKeys_=null},e}(c),T=i("OEyb");function S(t,e){var i=/\{z\}/g,n=/\{x\}/g,r=/\{y\}/g,o=/\{-y\}/g;return function(a,s,h){return a?t.replace(i,a[0].toString()).replace(n,a[1].toString()).replace(r,function(){return(-a[2]-1).toString()}).replace(o,function(){var t=a[0],i=e.getFullTileRange(t);return Object(T.a)(i,55),(i.getHeight()+a[2]).toString()}):void 0}}function C(t,e){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=S(t[r],e);return function(t){if(1===t.length)return t[0];return function(e,i,n){if(e){var r=function(t){return(t[1]<<t[0])+t[2]}(e),o=Object(x.d)(r,t.length);return t[o](e,i,n)}}}(n)}function O(t,e,i){}var R=i("V2dr"),A=i("LKHy"),L=i("xifc"),P=i("A7Qc"),I=i("Wrfv"),N=i("7XOM"),F=i("tFCN"),D=i("vv/+"),j=i("o1CS"),k=i("zF6X"),G=[0,0,0],U=function(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Object(T.a)(Object(k.e)(this.resolutions_,function(t,e){return e-t},!0),17),!t.origins)for(var i=0,n=this.resolutions_.length-1;i<n;++i)if(e){if(this.resolutions_[i]/this.resolutions_[i+1]!==e){e=void 0;break}}else e=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Object(T.a)(this.origins_.length==this.resolutions_.length,20));var r=t.extent;void 0===r||this.origin_||this.origins_||(this.origin_=Object(_.C)(r)),Object(T.a)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Object(T.a)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:I.b,Object(T.a)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==r?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new j.b(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):r&&this.calculateTileRanges_(r)};U.prototype.forEachTileCoord=function(t,e,i){for(var n=this.getTileRangeForExtentAndZ(t,e),r=n.minX,o=n.maxX;r<=o;++r)for(var a=n.minY,s=n.maxY;a<=s;++a)i([e,r,a])},U.prototype.forEachTileCoordParentTileRange=function(t,e,i,n,r){var o,a,s,h=null,c=t[0]-1;for(2===this.zoomFactor_?(a=t[1],s=t[2]):h=this.getTileCoordExtent(t,r);c>=this.minZoom;){if(2===this.zoomFactor_?(a=Math.floor(a/2),s=Math.floor(s/2),o=Object(j.a)(a,a,s,s,n)):o=this.getTileRangeForExtentAndZ(h,c,n),e.call(i,c,o))return!0;--c}return!1},U.prototype.getExtent=function(){return this.extent_},U.prototype.getMaxZoom=function(){return this.maxZoom},U.prototype.getMinZoom=function(){return this.minZoom},U.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},U.prototype.getResolution=function(t){return this.resolutions_[t]},U.prototype.getResolutions=function(){return this.resolutions_},U.prototype.getTileCoordChildTileRange=function(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],r=2*t[2];return Object(j.a)(n,n+1,r,r+1,e)}var o=this.getTileCoordExtent(t,i);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},U.prototype.getTileRangeExtent=function(t,e,i){var n=this.getOrigin(t),r=this.getResolution(t),o=Object(L.c)(this.getTileSize(t),this.tmpSize_),a=n[0]+e.minX*o[0]*r,s=n[0]+(e.maxX+1)*o[0]*r,h=n[1]+e.minY*o[1]*r,c=n[1]+(e.maxY+1)*o[1]*r;return Object(_.k)(a,h,s,c,i)},U.prototype.getTileRangeForExtentAndZ=function(t,e,i){var n=G;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n);var r=n[1],o=n[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,n),Object(j.a)(r,n[1],o,n[2],i)},U.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=Object(L.c)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]+(t[2]+.5)*n[1]*i]},U.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=Object(L.c)(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*r[0]*n,a=i[1]+t[2]*r[1]*n,s=o+r[0]*n,h=a+r[1]*n;return Object(_.k)(o,a,s,h,e)},U.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},U.prototype.getTileCoordForXYAndResolution_=function(t,e,i,n,r){var o=this.getZForResolution(i),a=i/this.getResolution(o),s=this.getOrigin(o),h=Object(L.c)(this.getTileSize(o),this.tmpSize_),c=n?.5:0,l=n?0:.5,u=Math.floor((t-s[0])/i+c),p=Math.floor((e-s[1])/i+l),d=a*u/h[0],m=a*p/h[1];return n?(d=Math.ceil(d)-1,m=Math.ceil(m)-1):(d=Math.floor(d),m=Math.floor(m)),f(o,d,m,r)},U.prototype.getTileCoordForXYAndZ_=function(t,e,i,n,r){var o=this.getOrigin(i),a=this.getResolution(i),s=Object(L.c)(this.getTileSize(i),this.tmpSize_),h=n?.5:0,c=n?0:.5,l=Math.floor((t-o[0])/a+h),u=Math.floor((e-o[1])/a+c),p=l/s[0],d=u/s[1];return n?(p=Math.ceil(p)-1,d=Math.ceil(d)-1):(p=Math.floor(p),d=Math.floor(d)),f(i,p,d,r)},U.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},U.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},U.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},U.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},U.prototype.getZForResolution=function(t,e){var i=Object(k.f)(this.resolutions_,t,e||0);return Object(x.a)(i,this.minZoom,this.maxZoom)},U.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i};var z=U;function B(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,i,n){return function(t,e,i,n){var r=void 0!==n?n:N.a.TOP_LEFT,o=H(t,e,i);return new z({extent:t,origin:Object(_.y)(t,r),resolutions:o,tileSize:i})}(V(t),e,i,n)}(t),t.setDefaultTileGrid(e)),e}function H(t,e,i){for(var n=void 0!==e?e:I.a,r=Object(_.A)(t),o=Object(_.E)(t),a=Object(L.c)(void 0!==i?i:I.b),s=Math.max(o/a[0],r/a[1]),h=n+1,c=new Array(h),l=0;l<h;++l)c[l]=s/Math.pow(2,l);return c}function V(t){var e=(t=Object(y.d)(t)).getExtent();if(!e){var i=180*y.a[D.b.DEGREES]/t.getMetersPerUnit();e=Object(_.k)(-i,-i,i,i)}return e}var W=function(t){function e(e){t.call(this,{attributions:e.attributions,extent:e.extent,projection:e.projection,state:e.state,wrapX:e.wrapX}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileCache=new g(e.cacheSize),this.tmpSize=[0,0],this.key_="",this.tileOptions={transition:e.transition}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,i,n){var r=this.getTileCacheForProjection(t);if(!r)return!1;for(var a,s,h,c=!0,l=i.minX;l<=i.maxX;++l)for(var u=i.minY;u<=i.maxY;++u)s=m(e,l,u),h=!1,r.containsKey(s)&&(h=(a=r.get(s)).getState()===o.a.LOADED)&&(h=!1!==n(a)),h||(c=!1);return c},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,i,n,r){},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:B(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!Object(y.c)(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,i){var n=this.getTileGridForProjection(i),r=this.getTilePixelRatio(e),o=Object(L.c)(n.getTileSize(t),this.tmpSize);return 1==r?o:Object(L.b)(o,r,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),n=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=function(t,e,i){var n=e[0],r=t.getTileCoordCenter(e),o=V(i);if(Object(_.f)(o,r))return e;var a=Object(_.E)(o),s=Math.ceil((o[0]-r[0])/a);return r[0]+=a*s,t.getTileCoordForCoordAndZ(r,n)}(n,t,i)),function(t,e){var i=t[0],n=t[1],r=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;var o,a=e.getExtent();return!(o=a?e.getTileRangeForExtentAndZ(a,i):e.getFullTileRange(i))||o.containsXY(n,r)}(t,n)?t:null},e.prototype.refresh=function(){this.tileCache.clear(),this.changed()},e}(P.a);W.prototype.useTile=R.c;var X=function(t){function e(e,i){t.call(this,e),this.tile=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(A.a),Y="tileloadstart",q="tileloadend",K="tileloaderror",Z=function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,extent:e.extent,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition}),this.tileLoadFunction=e.tileLoadFunction,this.tileUrlFunction=this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):O,this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),e.tileUrlFunction&&this.setTileUrlFunction(e.tileUrlFunction),this.tileLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,i=t.target,n=Object(r.b)(i),a=i.getState();a==o.a.LOADING?(this.tileLoadingKeys_[n]=!0,e=Y):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],e=a==o.a.ERROR?K:a==o.a.LOADED||a==o.a.ABORT?q:void 0),void 0!=e&&this.dispatchEvent(new X(e,i))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=this.urls=function(t){var e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var n,r=i[1].charCodeAt(0),o=i[2].charCodeAt(0);for(n=r;n<=o;++n)e.push(t.replace(i[0],String.fromCharCode(n)));return e}if(i=i=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(i[2],10),s=parseInt(i[1],10);s<=a;s++)e.push(t.replace(i[0],s.toString()));return e}return e.push(t),e}(t);this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):C(e,this.tileGrid),t)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):C(t,this.tileGrid),e)},e.prototype.useTile=function(t,e,i){var n=m(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(W);function $(t,e){t.getImage().src=e}Z.prototype.fixedTileUrlFunction;var J='&#169; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',Q=function(t){function e(e){var i,n=e||{};i=void 0!==n.attributions?n.attributions:[J];var r=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",o=void 0!==n.url?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";t.call(this,{attributions:i,cacheSize:n.cacheSize,crossOrigin:r,opaque:void 0===n.opaque||n.opaque,maxZoom:void 0!==n.maxZoom?n.maxZoom:19,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,url:o,wrapX:n.wrapX})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(function(t){function e(e){var i=e||{},n=void 0!==i.projection?i.projection:"EPSG:3857",r=void 0!==i.tileGrid?i.tileGrid:function(t){var e={};return Object(F.a)(e,void 0!==t?t:{}),void 0===e.extent&&(e.extent=Object(y.d)("EPSG:3857").getExtent()),e.resolutions=H(e.extent,e.maxZoom,e.tileSize),delete e.maxZoom,new z(e)}({extent:V(n),maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,opaque:i.opaque,projection:n,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,extent:e.extent,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:$,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:d,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){if(!n.a)return t.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1},e.prototype.expireCache=function(e,i){if(n.a){var r=this.getTileCacheForProjection(e);for(var o in this.tileCache.expireCache(this.tileCache==r?i:{}),this.tileCacheForProjection){var a=this.tileCacheForProjection[o];a.expireCache(a==r?i:{})}}else t.prototype.expireCache.call(this,e,i)},e.prototype.getGutterForProjection=function(t){return n.a&&this.getProjection()&&t&&!Object(y.c)(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(n.a&&this.getProjection()&&e&&!Object(y.c)(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(e){if(!n.a)return t.prototype.getTileGridForProjection.call(this,e);var i=this.getProjection();if(!this.tileGrid||i&&!Object(y.c)(i,e)){var o=Object(r.b)(e).toString();return o in this.tileGridForProjection||(this.tileGridForProjection[o]=B(e)),this.tileGridForProjection[o]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(e){if(!n.a)return t.prototype.getTileCacheForProjection.call(this,e);var i=this.getProjection();if(!i||Object(y.c)(i,e))return this.tileCache;var o=Object(r.b)(e).toString();return o in this.tileCacheForProjection||(this.tileCacheForProjection[o]=new g(this.tileCache.highWaterMark)),this.tileCacheForProjection[o]},e.prototype.createTile_=function(t,e,i,n,r,a){var s=[t,e,i],c=this.getTileCoordForTileUrlFunction(s,r),l=c?this.tileUrlFunction(c,n,r):void 0,p=new this.tileClass(s,void 0!==l?o.a.IDLE:o.a.EMPTY,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return p.key=a,Object(u.a)(p,h.a.CHANGE,this.handleTileChange,this),p},e.prototype.getTile=function(t,e,i,r,o){var a=this.getProjection();if(n.a&&a&&o&&!Object(y.c)(a,o)){var s,h=this.getTileCacheForProjection(o),c=[t,e,i],l=v(c);h.containsKey(l)&&(s=h.get(l));var u=this.getKey();if(s&&s.key==u)return s;var p=this.getTileGridForProjection(a),d=this.getTileGridForProjection(o),f=this.getTileCoordForTileUrlFunction(c,o),m=new E(a,p,o,d,c,f,this.getTilePixelRatio(r),this.getGutter(),function(t,e,i,n){return this.getTileInternal(t,e,i,n,a)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return m.key=u,s?(m.interimTile=s,m.refreshInterimChain(),h.replace(l,m)):h.set(l,m),m}return this.getTileInternal(t,e,i,r,a||o)},e.prototype.getTileInternal=function(t,e,i,n,r){var a=null,s=m(t,e,i),h=this.getKey();if(this.tileCache.containsKey(s)){if((a=this.tileCache.get(s)).key!=h){var c=a;a=this.createTile_(t,e,i,n,r,h),c.getState()==o.a.IDLE?a.interimTile=c.interimTile:a.interimTile=c,a.refreshInterimChain(),this.tileCache.replace(s,a)}}else a=this.createTile_(t,e,i,n,r,h),this.tileCache.set(s,a);return a},e.prototype.setRenderReprojectionEdges=function(t){if(n.a&&this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){if(n.a){var i=Object(y.d)(t);if(i){var o=Object(r.b)(i).toString();o in this.tileGridForProjection||(this.tileGridForProjection[o]=e)}}},e}(Z)));e.a=Q},Wrfv:function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r});var n=42,r=256},X8DO:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},XDHy:function(t,e,i){"use strict";e.a={PROPERTYCHANGE:"propertychange"}},XOen:function(t,e,i){"use strict";e.b=u;var n=i("3ciB"),r=i("XDHy"),o=i("nxYM"),a=i("LKHy"),s=i("tFCN"),h=function(t){function e(e,i,n){t.call(this,e),this.key=i,this.oldValue=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.a),c=function(t){function e(e){t.call(this),Object(n.b)(this),this.values_={},void 0!==e&&this.setProperties(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return Object(s.a)({},this.values_)},e.prototype.notify=function(t,e){var i;i=u(t),this.dispatchEvent(new h(i,t,e)),i=r.a.PROPERTYCHANGE,this.dispatchEvent(new h(i,t,e))},e.prototype.set=function(t,e,i){if(i)this.values_[t]=e;else{var n=this.values_[t];this.values_[t]=e,n!==e&&this.notify(t,n)}},e.prototype.setProperties=function(t,e){for(var i in t)this.set(i,t[i],e)},e.prototype.unset=function(t,e){if(t in this.values_){var i=this.values_[t];delete this.values_[t],e||this.notify(t,i)}},e}(o.a),l={};function u(t){return l.hasOwnProperty(t)?l[t]:l[t]="change:"+t}e.a=c},Yobk:function(t,e,i){var n=i("77Pl"),r=i("qio6"),o=i("xnc9"),a=i("ax3d")("IE_PROTO"),s=function(){},h=function(){var t,e=i("ON07")("iframe"),n=o.length;for(e.style.display="none",i("RPLV").appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),h=t.F;n--;)delete h.prototype[o[n]];return h()};t.exports=Object.create||function(t,e){var i;return null!==t?(s.prototype=n(t),i=new s,s.prototype=null,i[a]=t):i=h(),void 0===e?i:r(i,e)}},YxaZ:function(t,e,i){"use strict";var n=i("3ciB"),r=i("emf4"),o=i.n(r),a=i("/LWt"),s=i("tFCN"),h=function(t){this.rbush_=o()(t,void 0),this.items_={}};h.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[Object(n.b)(e)]=i},h.prototype.load=function(t,e){for(var i=new Array(e.length),r=0,o=e.length;r<o;r++){var a=t[r],s=e[r],h={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:s};i[r]=h,this.items_[Object(n.b)(s)]=h}this.rbush_.load(i)},h.prototype.remove=function(t){var e=Object(n.b)(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},h.prototype.update=function(t,e){var i=this.items_[Object(n.b)(e)],r=[i.minX,i.minY,i.maxX,i.maxY];Object(a.p)(r,t)||(this.remove(e),this.insert(t,e))},h.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},h.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},h.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},h.prototype.forEachInExtent=function(t,e,i){return this.forEach_(this.getInExtent(t),e,i)},h.prototype.forEach_=function(t,e,i){for(var n,r=0,o=t.length;r<o;r++)if(n=e.call(i,t[r]))return n;return n},h.prototype.isEmpty=function(){return Object(s.d)(this.items_)},h.prototype.clear=function(){this.rbush_.clear(),this.items_={}},h.prototype.getExtent=function(t){var e=this.rbush_.data;return Object(a.k)(e.minX,e.minY,e.maxX,e.maxY,t)},h.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[0|e]=t.items_[0|e]},e.a=h},ZXW8:function(t,e,i){"use strict";e.a=function(t,e,i,o,a){return!Object(n.t)(a,function(n){return!r(t,e,i,o,n[0],n[1])})},e.b=r,e.c=o,e.d=function(t,e,i,n,r,a){if(0===i.length)return!1;for(var s=0,h=i.length;s<h;++s){var c=i[s];if(o(t,e,c,n,r,a))return!0;e=c[c.length-1]}return!1};var n=i("/LWt");function r(t,e,i,n,r,o){for(var a=0,s=t[i-n],h=t[i-n+1];e<i;e+=n){var c=t[e],l=t[e+1];h<=o?l>o&&(c-s)*(o-h)-(r-s)*(l-h)>0&&a++:l<=o&&(c-s)*(o-h)-(r-s)*(l-h)<0&&a--,s=c,h=l}return 0!==a}function o(t,e,i,n,o,a){if(0===i.length)return!1;if(!r(t,e,i[0],n,o,a))return!1;for(var s=1,h=i.length;s<h;++s)if(r(t,i[s-1],i[s],n,o,a))return!1;return!0}},ZYQ1:function(t,e,i){"use strict";var n=i("zF6X"),r=i("/LWt"),o=i("5MGX"),a=i("Fu+J"),s=i("VgFP"),h=i("+b92"),c=i("bmSR"),l=i("hrLW"),u=i("wupX"),p=i("LmAy"),d=function(t){function e(e,i){t.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(r.e)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(c.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(c.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.getArea=function(){return Object(h.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Object(u.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Object(p.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,o.a.XY)},e.prototype.getType=function(){return a.a.LINEAR_RING},e.prototype.intersectsExtent=function(t){},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(l.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(s.a),f=i("T18w"),m=(i("1avf"),i("ZXW8")),v=i("vhPq"),g=i("pWpL"),y=i("piqq"),_=i("o1z/");e.c=function(t){var e=t[0],i=t[1],n=t[2],r=t[3],a=[e,i,e,r,n,r,n,i,e,i];return new x(a,o.a.XY,[a.length])},e.b=function(t,e,i){for(var n=e||32,r=t.getStride(),o=t.getLayout(),a=t.getCenter(),s=r*(n+1),h=new Array(s),c=0;c<s;c+=r){h[c]=0,h[c+1]=0;for(var l=2;l<r;l++)h[c+l]=a[l]}var u=[h.length],p=new x(h,o,u);return b(p,a,t.getRadius(),i),p},e.d=b;var x=function(t){function e(e,i,n){t.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==i&&n?(this.setFlatCoordinates(i,e),this.ends_=n):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLinearRing=function(t){this.flatCoordinates?Object(n.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(r.e)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(c.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(c.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return Object(m.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Object(h.b)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(y.c)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Object(u.b)(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Object(r.x)(this.getExtent());this.flatInteriorPoint_=Object(v.a)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new f.a(this.getFlatInteriorPoint(),o.a.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new d(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[],r=0,o=0,a=i.length;o<a;++o){var s=i[o],h=new d(e.slice(r,s),t);n.push(h),r=s}return n},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(y.a)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(y.c)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=Object(p.c)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,n),new e(i,o.a.XY,n)},e.prototype.getType=function(){return a.a.POLYGON},e.prototype.intersectsExtent=function(t){return Object(g.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Object(l.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(s.a);e.a=x;function b(t,e,i,n){for(var r=t.getFlatCoordinates(),o=t.getStride(),a=r.length/o-1,s=n||0,h=0;h<=a;++h){var c=h*o,l=s+2*Object(_.d)(h,a)*Math.PI/a;r[c]=e[0]+i*Math.cos(l),r[c+1]=e[1]+i*Math.sin(l)}t.changed()}},aUhy:function(t,e,i){"use strict";var n=i("OEyb"),r=i("nq2H"),o=i("SfaQ"),a=i("tFCN"),s=i("yGLh"),h=function(){this.dataProjection=null,this.defaultFeatureProjection=null};h.prototype.getReadOptions=function(t,e){var i;return e&&(i={dataProjection:e.dataProjection?e.dataProjection:this.readProjection(t),featureProjection:e.featureProjection}),this.adaptOptions(i)},h.prototype.adaptOptions=function(t){return Object(a.a)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},h.prototype.getLastExtent=function(){return null},h.prototype.getType=function(){},h.prototype.readFeature=function(t,e){},h.prototype.readFeatures=function(t,e){},h.prototype.readGeometry=function(t,e){},h.prototype.readProjection=function(t){},h.prototype.writeFeature=function(t,e){},h.prototype.writeFeatures=function(t,e){},h.prototype.writeGeometry=function(t,e){};var c=h;function l(t,e,i){var n,r=i?Object(s.d)(i.featureProjection):null,a=i?Object(s.d)(i.dataProjection):null;if(n=r&&a&&!Object(s.c)(r,a)?t instanceof o.a?(e?t.clone():t).transform(e?r:a,e?a:r):Object(s.h)(t,a,r):t,e&&i&&void 0!==i.decimals){var h=Math.pow(10,i.decimals);n===t&&(n=n.clone()),n.applyTransform(function(t){for(var e=0,i=t.length;e<i;++e)t[e]=Math.round(t[e]*h)/h;return t})}return n}var u=i("NBiL");function p(t){if("string"==typeof t){var e=JSON.parse(t);return e||null}return null!==t?t:null}var d=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return u.a.JSON},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(p(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(p(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){},e.prototype.readFeaturesFromObject=function(t,e){},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(p(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){},e.prototype.readProjection=function(t){return this.readProjectionFromObject(p(t))},e.prototype.readProjectionFromObject=function(t){},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){},e}(c),f=i("6t+W"),m=i("57Gy"),v=i("/LWt"),g=i("Fu+J");function y(t){for(var e=[],i=0,n=t.length;i<n;++i)e.push(t[i].clone());return e}var _=function(t){function e(e){t.call(this),this.geometries_=e||null,this.listenGeometriesChange_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.unlistenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)Object(f.c)(this.geometries_[t],m.a.CHANGE,this.changed,this)},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)Object(f.a)(this.geometries_[t],m.a.CHANGE,this.changed,this)},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,i,n){if(n<Object(v.e)(this.getExtent(),t,e))return n;for(var r=this.geometries_,o=0,a=r.length;o<a;++o)n=r[o].closestPointXY(t,e,i,n);return n},e.prototype.containsXY=function(t,e){for(var i=this.geometries_,n=0,r=i.length;n<r;++n)if(i[n].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){Object(v.l)(t);for(var e=this.geometries_,i=0,n=e.length;i<n;++i)Object(v.q)(t,e[i].getExtent());return t},e.prototype.getGeometries=function(){return y(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Object(a.b)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var i=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(i))return this.simplifiedGeometryCache[i];for(var n=[],r=this.geometries_,o=!1,s=0,h=r.length;s<h;++s){var c=r[s],l=c.getSimplifiedGeometry(t);n.push(l),l!==c&&(o=!0)}if(o){var u=new e(null);return u.setGeometriesArray(n),this.simplifiedGeometryCache[i]=u,u}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return g.a.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,i=0,n=e.length;i<n;++i)if(e[i].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var i=this.geometries_,n=0,r=i.length;n<r;++n)i[n].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,i){var n=i;n||(n=Object(v.x)(this.getExtent()));for(var r=this.geometries_,o=0,a=r.length;o<a;++o)r[o].scale(t,e,n);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(y(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,i=0,n=e.length;i<n;++i)e[i].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var i=this.geometries_,n=0,r=i.length;n<r;++n)i[n].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(o.a),x=i("grfP"),b=i("5t69"),M=i("i3aX"),w=i("AT16"),E=i("T18w"),T=i("ZYQ1"),S=function(t){function e(e){var i=e||{};t.call(this),this.dataProjection=Object(s.d)(i.dataProjection?i.dataProjection:"EPSG:4326"),i.featureProjection&&(this.defaultFeatureProjection=Object(s.d)(i.featureProjection)),this.geometryName_=i.geometryName,this.extractGeometryName_=i.extractGeometryName}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeatureFromObject=function(t,e){var i=null,n=R((i="Feature"===t.type?t:{type:"Feature",geometry:t}).geometry,e),o=new r.a;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&void 0!==i.geometry_name&&o.setGeometryName(i.geometry_name),o.setGeometry(n),void 0!==i.id&&o.setId(i.id),i.properties&&o.setProperties(i.properties),o},e.prototype.readFeaturesFromObject=function(t,e){var i=null;if("FeatureCollection"===t.type){i=[];for(var n=t.features,r=0,o=n.length;r<o;++r)i.push(this.readFeatureFromObject(n[r],e))}else i=[this.readFeatureFromObject(t,e)];return i},e.prototype.readGeometryFromObject=function(t,e){return R(t,e)},e.prototype.readProjectionFromObject=function(t){var e,i=t.crs;return i?"name"==i.type?e=Object(s.d)(i.properties.name):Object(n.a)(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={type:"Feature"},n=t.getId();void 0!==n&&(i.id=n);var r=t.getGeometry();i.geometry=r?A(r,e):null;var o=t.getProperties();return delete o[t.getGeometryName()],Object(a.d)(o)?i.properties=null:i.properties=o,i},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var i=[],n=0,r=t.length;n<r;++n)i.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:i}},e.prototype.writeGeometryObject=function(t,e){return A(t,this.adaptOptions(e))},e}(d),C={Point:function(t){return new E.a(t.coordinates)},LineString:function(t){return new x.a(t.coordinates)},Polygon:function(t){return new T.a(t.coordinates)},MultiPoint:function(t){return new M.a(t.coordinates)},MultiLineString:function(t){return new b.a(t.coordinates)},MultiPolygon:function(t){return new w.a(t.coordinates)},GeometryCollection:function(t,e){var i=t.geometries.map(function(t){return R(t,e)});return new _(i)}},O={Point:function(t,e){return{type:"Point",coordinates:t.getCoordinates()}},LineString:function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}},Polygon:function(t,e){var i;e&&(i=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(i)}},MultiPoint:function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}},MultiLineString:function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}},MultiPolygon:function(t,e){var i;e&&(i=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(i)}},GeometryCollection:function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(t){var i=Object(a.a)({},e);return delete i.featureProjection,A(t,i)})}},Circle:function(t){return{type:"GeometryCollection",geometries:[]}}};function R(t,e){return t?l((0,C[t.type])(t),!1,e):null}function A(t,e){return(0,O[t.getType()])(l(t,!0,e),e)}e.a=S},ax3d:function(t,e,i){var n=i("e8AB")("keys"),r=i("3Eo+");t.exports=function(t){return n[t]||(n[t]=r(t))}},azsZ:function(t,e,i){"use strict";e.c=function(){return[1,0,0,1,0,0]},e.e=function(t){return a(t,1,0,0,1,0,0)},e.g=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.a=function(t,e){var i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e},e.f=function(t,e,i){return o(t,a(r,e,0,0,i,0,0))},e.h=function(t,e,i){return o(t,a(r,1,0,0,1,e,i))},e.b=function(t,e,i,n,r,o,a,s){var h=Math.sin(o),c=Math.cos(o);return t[0]=n*c,t[1]=r*h,t[2]=-n*h,t[3]=r*c,t[4]=a*n*c-s*n*h+e,t[5]=a*r*h+s*r*c+i,t},e.d=function(t){var e=(i=t,i[0]*i[3]-i[1]*i[2]);var i;Object(n.a)(0!==e,32);var r=t[0],o=t[1],a=t[2],s=t[3],h=t[4],c=t[5];return t[0]=s/e,t[1]=-o/e,t[2]=-a/e,t[3]=r/e,t[4]=(a*c-s*h)/e,t[5]=-(r*c-o*h)/e,t};var n=i("OEyb"),r=new Array(6);function o(t,e){var i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],s=t[5],h=e[0],c=e[1],l=e[2],u=e[3],p=e[4],d=e[5];return t[0]=i*h+r*c,t[1]=n*h+o*c,t[2]=i*l+r*u,t[3]=n*l+o*u,t[4]=i*p+r*d+a,t[5]=n*p+o*d+s,t}function a(t,e,i,n,r,o,a){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=o,t[5]=a,t}},bRrM:function(t,e,i){"use strict";var n=i("7KvD"),r=i("FeBl"),o=i("evD5"),a=i("+E39"),s=i("dSzd")("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:n[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},bhTf:function(t,e,i){"use strict";var n=i("IU0A"),r=i("6t+W"),o=i("V2dr"),a=i("LKHy"),s=function(t){function e(){t.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addEventListener=function(t,e){var i=this.listeners_[t];i||(i=this.listeners_[t]=[]),-1===i.indexOf(e)&&i.push(e)},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new a.a(t):t,i=e.type;e.target=this;var n,r=this.listeners_[i];if(r){i in this.dispatching_||(this.dispatching_[i]=0,this.pendingRemovals_[i]=0),++this.dispatching_[i];for(var s=0,h=r.length;s<h;++s)if(!1===r[s].call(this,e)||e.propagationStopped){n=!1;break}if(--this.dispatching_[i],0===this.dispatching_[i]){var c=this.pendingRemovals_[i];for(delete this.pendingRemovals_[i];c--;)this.removeEventListener(i,o.c);delete this.dispatching_[i]}return n}},e.prototype.disposeInternal=function(){Object(r.d)(this)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var i=this.listeners_[t];if(i){var n=i.indexOf(e);t in this.pendingRemovals_?(i[n]=o.c,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t])}},e}(n.a);e.a=s},bmSR:function(t,e,i){"use strict";e.e=o,e.a=a,e.f=function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var h=i[o];r=a(t,e,h,n,r),e=h[h.length-1]}return r},e.d=s,e.b=h,e.c=function(t,e,i,n,r,o,a,s,c,l,u){for(var p=u||[NaN,NaN],d=0,f=i.length;d<f;++d){var m=i[d];l=h(t,e,m,n,r,o,a,s,c,l,p),e=m[m.length-1]}return l};var n=i("o1z/");function r(t,e,i,r,o,a,s){var h,c=t[e],l=t[e+1],u=t[i]-c,p=t[i+1]-l;if(0===u&&0===p)h=e;else{var d=((o-c)*u+(a-l)*p)/(u*u+p*p);if(d>1)h=i;else{if(d>0){for(var f=0;f<r;++f)s[f]=Object(n.c)(t[e+f],t[i+f],d);return void(s.length=r)}h=e}}for(var m=0;m<r;++m)s[m]=t[h+m];s.length=r}function o(t,e,i,r,o){var a=t[e],s=t[e+1];for(e+=r;e<i;e+=r){var h=t[e],c=t[e+1],l=Object(n.f)(a,s,h,c);l>o&&(o=l),a=h,s=c}return o}function a(t,e,i,n,r){for(var a=0,s=i.length;a<s;++a){var h=i[a];r=o(t,e,h,n,r),e=h}return r}function s(t,e,i,o,a,s,h,c,l,u,p){if(e==i)return u;var d,f;if(0===a){if((f=Object(n.f)(h,c,t[e],t[e+1]))<u){for(d=0;d<o;++d)l[d]=t[e+d];return l.length=o,f}return u}for(var m=p||[NaN,NaN],v=e+o;v<i;)if(r(t,v-o,v,o,h,c,m),(f=Object(n.f)(h,c,m[0],m[1]))<u){for(u=f,d=0;d<o;++d)l[d]=m[d];l.length=o,v+=o}else v+=o*Math.max((Math.sqrt(f)-Math.sqrt(u))/a|0,1);if(s&&(r(t,i-o,e,o,h,c,m),(f=Object(n.f)(h,c,m[0],m[1]))<u)){for(u=f,d=0;d<o;++d)l[d]=m[d];l.length=o}return u}function h(t,e,i,n,r,o,a,h,c,l,u){for(var p=u||[NaN,NaN],d=0,f=i.length;d<f;++d){var m=i[d];l=s(t,e,m,n,r,o,a,h,c,l,p),e=m}return l}},dNDb:function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},dSzd:function(t,e,i){var n=i("e8AB")("wks"),r=i("3Eo+"),o=i("7KvD").Symbol,a="function"==typeof o;(t.exports=function(t){return n[t]||(n[t]=a&&o[t]||(a?o:r)("Symbol."+t))}).store=n},dY0y:function(t,e,i){var n=i("dSzd")("iterator"),r=!1;try{var o=[7][n]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var o=[7],a=o[n]();a.next=function(){return{done:i=!0}},o[n]=function(){return a},t(o)}catch(t){}return i}},"dw+W":function(t,e,i){"use strict";var n=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale};n.prototype.getOpacity=function(){return this.opacity_},n.prototype.getRotateWithView=function(){return this.rotateWithView_},n.prototype.getRotation=function(){return this.rotation_},n.prototype.getScale=function(){return this.scale_},n.prototype.getSnapToPixel=function(){return!1},n.prototype.getAnchor=function(){},n.prototype.getImage=function(t){},n.prototype.getHitDetectionImage=function(t){},n.prototype.getImageState=function(){},n.prototype.getImageSize=function(){},n.prototype.getHitDetectionImageSize=function(){},n.prototype.getOrigin=function(){},n.prototype.getSize=function(){},n.prototype.setOpacity=function(t){this.opacity_=t},n.prototype.setRotateWithView=function(t){this.rotateWithView_=t},n.prototype.setRotation=function(t){this.rotation_=t},n.prototype.setScale=function(t){this.scale_=t},n.prototype.setSnapToPixel=function(t){},n.prototype.listenImageChange=function(t,e){},n.prototype.load=function(){},n.prototype.unlistenImageChange=function(t,e){},e.a=n},e6n0:function(t,e,i){var n=i("evD5").f,r=i("D2L2"),o=i("dSzd")("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},e8AB:function(t,e,i){var n=i("FeBl"),r=i("7KvD"),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:i("O4g8")?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},emf4:function(t,e,i){"use strict";t.exports=r,t.exports.default=r;var n=i("SpdK");function r(t,e){if(!(this instanceof r))return new r(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,i,n,r){r||(r=m(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,a=e;a<i;a++)o=t.children[a],h(r,t.leaf?n(o):o);return r}function h(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function m(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,e,i,r,o){for(var a,s=[e,i];s.length;)(i=s.pop())-(e=s.pop())<=r||(a=e+Math.ceil((i-e)/r/2)*r,n(t,a,e,i,o),s.push(e,a,a,i))}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!f(t,e))return i;for(var r,o,a,s,h=[];e;){for(r=0,o=e.children.length;r<o;r++)a=e.children[r],f(t,s=e.leaf?n(a):a)&&(e.leaf?i.push(a):d(t,s)?this._all(a,i):h.push(a));e=h.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!f(t,e))return!1;for(var n,r,o,a,s=[];e;){for(n=0,r=e.children.length;n<r;n++)if(o=e.children[n],f(t,a=e.leaf?i(o):o)){if(e.leaf||d(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=m([]),this},remove:function(t,e){if(!t)return this;for(var i,n,r,a,s=this.data,h=this.toBBox(t),c=[],l=[];s||c.length;){if(s||(s=c.pop(),n=c[c.length-1],i=l.pop(),a=!0),s.leaf&&-1!==(r=o(t,s.children,e)))return s.children.splice(r,1),c.push(s),this._condense(c),this;a||s.leaf||!d(s,h)?n?(i++,s=n.children[i],a=!1):s=null:(c.push(s),l.push(i),i=0,n=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:c,compareMinY:l,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var r,o=i-e+1,s=this._maxEntries;if(o<=s)return a(r=m(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,n-1))),(r=m([])).leaf=!1,r.height=n;var h,c,l,u,p=Math.ceil(o/s),d=p*Math.ceil(Math.sqrt(s));for(v(t,e,i,d,this.compareMinX),h=e;h<=i;h+=d)for(v(t,h,l=Math.min(h+d-1,i),p,this.compareMinY),c=h;c<=l;c+=p)u=Math.min(c+p-1,l),r.children.push(this._build(t,c,u,n-1));return a(r,this.toBBox),r},_chooseSubtree:function(t,e,i,n){for(var r,o,a,s,h,c,l,p,d,f;n.push(e),!e.leaf&&n.length-1!==i;){for(l=p=1/0,r=0,o=e.children.length;r<o;r++)h=u(a=e.children[r]),d=t,f=a,(c=(Math.max(f.maxX,d.maxX)-Math.min(f.minX,d.minX))*(Math.max(f.maxY,d.maxY)-Math.min(f.minY,d.minY))-h)<p?(p=c,l=h<l?h:l,s=a):c===p&&h<l&&(l=h,s=a);e=s||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,r=i?t:n(t),o=[],a=this._chooseSubtree(r,this.data,e,o);for(a.children.push(t),h(a,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var o=this._chooseSplitIndex(i,r,n),s=m(i.children.splice(o,i.children.length-o));s.height=i.height,s.leaf=i.leaf,a(i,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(i,s)},_splitRoot:function(t,e){this.data=m([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var n,r,o,a,h,c,l,p,d,f,m,v,g,y;for(c=l=1/0,n=e;n<=i-e;n++)r=s(t,0,n,this.toBBox),o=s(t,n,i,this.toBBox),d=r,f=o,void 0,void 0,void 0,void 0,m=Math.max(d.minX,f.minX),v=Math.max(d.minY,f.minY),g=Math.min(d.maxX,f.maxX),y=Math.min(d.maxY,f.maxY),a=Math.max(0,g-m)*Math.max(0,y-v),h=u(r)+u(o),a<c?(c=a,p=n,l=h<l?h:l):a===c&&h<l&&(l=h,p=n);return p},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:c,r=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);var r,o,a=this.toBBox,c=s(t,0,e,a),l=s(t,i-e,i,a),u=p(c)+p(l);for(r=e;r<i-e;r++)o=t.children[r],h(c,t.leaf?a(o):o),u+=p(c);for(r=i-e-1;r>=e;r--)o=t.children[r],h(l,t.leaf?a(o):o),u+=p(l);return u},_adjustParentBBoxes:function(t,e,i){for(var n=i;n>=0;n--)h(e[n],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},evD5:function(t,e,i){var n=i("77Pl"),r=i("SfB7"),o=i("MmMw"),a=Object.defineProperty;e.f=i("+E39")?Object.defineProperty:function(t,e,i){if(n(t),e=o(e,!0),n(i),r)try{return a(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},fJUb:function(t,e,i){var n=i("77Pl"),r=i("EqjI"),o=i("qARP");t.exports=function(t,e){if(n(t),r(e)&&e.constructor===t)return e;var i=o.f(t);return(0,i.resolve)(e),i.promise}},fkB2:function(t,e,i){var n=i("UuGF"),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=n(t))<0?r(t+e,0):o(t,e)}},grfP:function(t,e,i){"use strict";var n=i("zF6X"),r=i("/LWt"),o=i("5MGX"),a=i("Fu+J"),s=i("VgFP"),h=i("bmSR"),c=i("hrLW"),l=i("wupX"),u=i("MB6k"),p=i("pWpL"),d=i("3ahG"),f=i("vkQb"),m=i("LmAy"),v=function(t){function e(e,i){t.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendCoordinate=function(t){this.flatCoordinates?Object(n.c)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(r.e)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(h.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(h.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.forEachSegment=function(t){return Object(f.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=o.a.XYM&&this.layout!=o.a.XYZM)return null;var i=void 0!==e&&e;return Object(u.b)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return Object(l.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Object(u.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return Object(d.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Object(m.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,o.a.XY)},e.prototype.getType=function(){return a.a.LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(p.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(c.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(s.a);e.a=v},h65t:function(t,e,i){var n=i("UuGF"),r=i("52gC");t.exports=function(t){return function(e,i){var o,a,s=String(r(e)),h=n(i),c=s.length;return h<0||h>=c?t?"":void 0:(o=s.charCodeAt(h))<55296||o>56319||h+1===c||(a=s.charCodeAt(h+1))<56320||a>57343?t?s.charAt(h):o:t?s.slice(h,h+2):a-56320+(o-55296<<10)+65536}}},hJx8:function(t,e,i){var n=i("evD5"),r=i("X8DO");t.exports=i("+E39")?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},hTFF:function(t,e,i){"use strict";e.a={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render",RENDERCOMPLETE:"rendercomplete"}},hrLW:function(t,e,i){"use strict";function n(t,e,i,n){for(var r=0,o=i.length;r<o;++r)for(var a=i[r],s=0;s<n;++s)t[e++]=a[s];return e}function r(t,e,i,r,o){for(var a=o||[],s=0,h=0,c=i.length;h<c;++h){var l=n(t,e,i[h],r);a[s++]=l,e=l}return a.length=s,a}e.a=function(t,e,i,n){for(var r=0,o=i.length;r<o;++r)t[e++]=i[r];return e},e.b=n,e.c=r,e.d=function(t,e,i,n,o){for(var a=o||[],s=0,h=0,c=i.length;h<c;++h){var l=r(t,e,i[h],n,a[s]);a[s++]=l,e=l[l.length-1]}return a.length=s,a}},i3aX:function(t,e,i){"use strict";var n=i("zF6X"),r=i("/LWt"),o=i("Fu+J"),a=i("T18w"),s=i("VgFP"),h=i("hrLW"),c=i("wupX"),l=i("o1z/"),u=function(t){function e(e,i){t.call(this),i&&!Array.isArray(e[0])?this.setFlatCoordinates(i,e):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendPoint=function(t){this.flatCoordinates?Object(n.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){if(n<Object(r.e)(this.getExtent(),t,e))return n;for(var o=this.flatCoordinates,a=this.stride,s=0,h=o.length;s<h;s+=a){var c=Object(l.f)(t,e,o[s],o[s+1]);if(c<n){n=c;for(var u=0;u<a;++u)i[u]=o[s+u];i.length=a}}return n},e.prototype.getCoordinates=function(){return Object(c.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new a.a(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,i=this.stride,n=[],r=0,o=t.length;r<o;r+=i){var s=new a.a(t.slice(r,r+i),e);n.push(s)}return n},e.prototype.getType=function(){return o.a.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,i=this.stride,n=0,o=e.length;n<o;n+=i){var a=e[n],s=e[n+1];if(Object(r.h)(t,a,s))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(h.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(s.a);e.a=u},iUbK:function(t,e,i){var n=i("7KvD").navigator;t.exports=n&&n.userAgent||""},iVNI:function(t,e,i){"use strict";e.a={IMAGE:"image",VECTOR:"vector"}},"jKW+":function(t,e,i){"use strict";var n=i("kM2E"),r=i("qARP"),o=i("dNDb");n(n.S,"Promise",{try:function(t){var e=r.f(this),i=o(t);return(i.e?e.reject:e.resolve)(i.v),e.promise}})},jP9t:function(t,e,i){"use strict";e.a={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"}},kM2E:function(t,e,i){var n=i("7KvD"),r=i("FeBl"),o=i("+ZMJ"),a=i("hJx8"),s=i("D2L2"),h=function(t,e,i){var c,l,u,p=t&h.F,d=t&h.G,f=t&h.S,m=t&h.P,v=t&h.B,g=t&h.W,y=d?r:r[e]||(r[e]={}),_=y.prototype,x=d?n:f?n[e]:(n[e]||{}).prototype;for(c in d&&(i=e),i)(l=!p&&x&&void 0!==x[c])&&s(y,c)||(u=l?x[c]:i[c],y[c]=d&&"function"!=typeof x[c]?i[c]:v&&l?o(u,n):g&&x[c]==u?function(t){var e=function(e,i,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(u):m&&"function"==typeof u?o(Function.call,u):u,m&&((y.virtual||(y.virtual={}))[c]=u,t&h.R&&_&&!_[c]&&a(_,c,u)))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,t.exports=h},knuC:function(t,e){t.exports=function(t,e,i){var n=void 0===i;switch(e.length){case 0:return n?t():t.call(i);case 1:return n?t(e[0]):t.call(i,e[0]);case 2:return n?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},lOnJ:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},lktj:function(t,e,i){var n=i("Ibhu"),r=i("xnc9");t.exports=Object.keys||function(t){return n(t,r)}},msXi:function(t,e,i){var n=i("77Pl");t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(e){var o=t.return;throw void 0!==o&&n(o.call(t)),e}}},nq2H:function(t,e,i){"use strict";var n=i("OEyb"),r=i("6t+W"),o=i("57Gy"),a=i("XOen"),s=i("SfaQ"),h=i("Mjwz"),c=function(t){function e(e){if(t.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,Object(r.a)(this,Object(a.b)(this.geometryName_),this.handleGeometryChanged_,this),void 0!==e)if(e instanceof s.a||!e){var i=e;this.setGeometry(i)}else{var n=e;this.setProperties(n)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(r.e)(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Object(r.a)(t,o.a.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){var e,i;this.style_=t,this.styleFunction_=t?"function"==typeof(e=t)?e:(Array.isArray(e)?i=e:(Object(n.a)(e instanceof h.c,41),i=[e]),function(){return i}):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){Object(r.c)(this,Object(a.b)(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,Object(r.a)(this,Object(a.b)(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},e}(a.a);e.a=c},nvAS:function(t,e,i){"use strict";var n=1,r=2,o=4,a=5,s=484813681109536e-20,h=Math.PI/2,c=.16666666666666666,l=.04722222222222222,u=.022156084656084655,p=1e-10,d=.017453292519943295,f=57.29577951308232,m=Math.PI/4,v=2*Math.PI,g=3.14159265359,y={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},_={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},x=/[\s_\-\/\(\)]/g;function b(t,e){if(t[e])return t[e];for(var i,n=Object.keys(t),r=e.toLowerCase().replace(x,""),o=-1;++o<n.length;)if((i=n[o]).toLowerCase().replace(x,"")===r)return t[i]}var M=function(t){var e,i,n,r={},o=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var i=e.split("=");return i.push(!0),t[i[0].toLowerCase()]=i[1],t},{}),a={proj:"projName",datum:"datumCode",rf:function(t){r.rf=parseFloat(t)},lat_0:function(t){r.lat0=t*d},lat_1:function(t){r.lat1=t*d},lat_2:function(t){r.lat2=t*d},lat_ts:function(t){r.lat_ts=t*d},lon_0:function(t){r.long0=t*d},lon_1:function(t){r.long1=t*d},lon_2:function(t){r.long2=t*d},alpha:function(t){r.alpha=parseFloat(t)*d},lonc:function(t){r.longc=t*d},x_0:function(t){r.x0=parseFloat(t)},y_0:function(t){r.y0=parseFloat(t)},k_0:function(t){r.k0=parseFloat(t)},k:function(t){r.k0=parseFloat(t)},a:function(t){r.a=parseFloat(t)},b:function(t){r.b=parseFloat(t)},r_a:function(){r.R_A=!0},zone:function(t){r.zone=parseInt(t,10)},south:function(){r.utmSouth=!0},towgs84:function(t){r.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){r.to_meter=parseFloat(t)},units:function(t){r.units=t;var e=b(_,t);e&&(r.to_meter=e.to_meter)},from_greenwich:function(t){r.from_greenwich=t*d},pm:function(t){var e=b(y,t);r.from_greenwich=(e||parseFloat(t))*d},nadgrids:function(t){"@null"===t?r.datumCode="none":r.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(r.axis=t)}};for(e in o)i=o[e],e in a?"function"==typeof(n=a[e])?n(i):r[n]=i:r[e]=i;return"string"==typeof r.datumCode&&"WGS84"!==r.datumCode&&(r.datumCode=r.datumCode.toLowerCase()),r},w=function(t){return new A(t).output()},E=1,T=/\s/,S=/[A-Za-z]/,C=/[A-Za-z84]/,O=/[,\]]/,R=/[\d\.E\-\+]/;function A(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=E}function L(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var n=e?{}:t,r=i.reduce(function(t,e){return P(e,t),t},n);e&&(t[e]=r)}function P(t,e){if(Array.isArray(t)){var i,n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void P(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n)switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&P(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&P(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void L(e,n,t);default:for(i=-1;++i<t.length;)if(!Array.isArray(t[i]))return P(t,e[n]);return L(e,n,t)}else e[n]=t;else e[n]=!0}else e[t]=!0}A.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;T.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case E:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},A.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(O.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},A.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=E)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=E,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},A.prototype.number=function(t){if(!R.test(t)){if(O.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},A.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},A.prototype.keyword=function(t){if(C.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=E)}if(!O.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},A.prototype.neutral=function(t){if(S.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(R.test(t))return this.word=t,void(this.state=3);if(!O.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},A.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var I=.017453292519943295;function N(t){return t*I}var F=function(t){var e=w(t),i=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",i]);var r={};return P(e,r),function(t){"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var e=t.GEOGCS;function i(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(e=t),e&&(e.DATUM?t.datumCode=e.DATUM.name.toLowerCase():t.datumCode=e.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),e.DATUM&&e.DATUM.SPHEROID&&(t.ellps=e.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=e.DATUM.SPHEROID.a,t.rf=parseFloat(e.DATUM.SPHEROID.rf,10)),e.DATUM&&e.DATUM.TOWGS84&&(t.datum_params=e.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",N],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",N],["x0","false_easting",i],["y0","false_northing",i],["long0","central_meridian",N],["lat0","latitude_of_origin",N],["lat0","standard_parallel_1",N],["lat1","standard_parallel_1",N],["lat2","standard_parallel_2",N],["azimuth","Azimuth"],["alpha","azimuth",N],["srsCode","name"]].forEach(function(e){return i=t,r=(n=e)[0],o=n[1],void(!(r in i)&&o in i&&(i[r]=i[o],3===n.length&&(i[r]=n[2](i[r]))));var i,n,r,o}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=N(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(r),r};function D(t){var e=this;if(2===arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?D[t]=M(arguments[1]):D[t]=F(arguments[1]):D[t]=i}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?D.apply(e,t):D(t)});if("string"==typeof t){if(t in D)return D[t]}else"EPSG"in t?D["EPSG:"+t.EPSG]=t:"ESRI"in t?D["ESRI:"+t.ESRI]=t:"IAU2000"in t?D["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(D);var j=D;var k=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var G=["3857","900913","3785","102113"];var U=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in j}(t))return j[t];if(function(t){return k.some(function(e){return t.indexOf(e)>-1})}(t)){var e=F(t);if(function(t){var e=b(t,"authority");if(e){var i=b(e,"epsg");return i&&G.indexOf(i)>-1}}(e))return j["EPSG:3857"];var i=function(t){var e=b(t,"extension");if(e)return b(e,"proj4")}(e);return i?M(i):e}return function(t){return"+"===t[0]}(t)?M(t):void 0},z=function(t,e){var i,n;if(t=t||{},!e)return t;for(n in e)void 0!==(i=e[n])&&(t[n]=i);return t},B=function(t,e,i){var n=t*e;return i/Math.sqrt(1-n*n)},H=function(t){return t<0?-1:1},V=function(t){return Math.abs(t)<=g?t:t-H(t)*v},W=function(t,e,i){var n=t*i,r=.5*t;return n=Math.pow((1-n)/(1+n),r),Math.tan(.5*(h-e))/n},X=function(t,e){for(var i,n,r=.5*t,o=h-2*Math.atan(e),a=0;a<=15;a++)if(i=t*Math.sin(o),o+=n=h-2*Math.atan(e*Math.pow((1-i)/(1+i),r))-o,Math.abs(n)<=1e-10)return o;return-9999};function Y(t){return t}var q=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=B(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,i,n=t.x,r=t.y;if(r*f>90&&r*f<-90&&n*f>180&&n*f<-180)return null;if(Math.abs(Math.abs(r)-h)<=p)return null;if(this.sphere)e=this.x0+this.a*this.k0*V(n-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(m+.5*r));else{var o=Math.sin(r),a=W(this.e,r,o);e=this.x0+this.a*this.k0*V(n-this.long0),i=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n=t.x-this.x0,r=t.y-this.y0;if(this.sphere)i=h-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var o=Math.exp(-r/(this.a*this.k0));if(-9999===(i=X(this.e,o)))return null}return e=V(this.long0+n/(this.a*this.k0)),t.x=e,t.y=i,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:Y,inverse:Y,names:["longlat","identity"]}],K={},Z=[];function $(t,e){var i=Z.length;return t.names?(Z[i]=t,t.names.forEach(function(t){K[t.toLowerCase()]=i}),this):(console.log(e),!0)}var J={start:function(){q.forEach($)},add:$,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==K[e]&&Z[K[e]]?Z[K[e]]:void 0}},Q={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},tt=Q.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Q.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var et={};et.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},et.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},et.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},et.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},et.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},et.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},et.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},et.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},et.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},et.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},et.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},et.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},et.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},et.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},et.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},et.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},et.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var it=function(t,e,i,h,c,l){var u={};return u.datum_type=void 0===t||"none"===t?a:o,e&&(u.datum_params=e.map(parseFloat),0===u.datum_params[0]&&0===u.datum_params[1]&&0===u.datum_params[2]||(u.datum_type=n),u.datum_params.length>3&&(0===u.datum_params[3]&&0===u.datum_params[4]&&0===u.datum_params[5]&&0===u.datum_params[6]||(u.datum_type=r,u.datum_params[3]*=s,u.datum_params[4]*=s,u.datum_params[5]*=s,u.datum_params[6]=u.datum_params[6]/1e6+1))),u.a=i,u.b=h,u.es=c,u.ep2=l,u};function nt(t,e){if(!(this instanceof nt))return new nt(t);e=e||function(t){if(t)throw t};var i=U(t);if("object"==typeof i){var n=nt.projections.get(i.projName);if(n){if(i.datumCode&&"none"!==i.datumCode){var r=b(et,i.datumCode);r&&(i.datum_params=r.towgs84?r.towgs84.split(","):null,i.ellps=r.ellipse,i.datumName=r.datumName?r.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84";var o,a,s,h,d,f,m,v=function(t,e,i,n,r){if(!t){var o=b(Q,n);o||(o=tt),t=o.a,e=o.b,i=o.rf}return i&&!e&&(e=(1-1/i)*t),(0===i||Math.abs(t-e)<p)&&(r=!0,e=t),{a:t,b:e,rf:i,sphere:r}}(i.a,i.b,i.rf,i.ellps,i.sphere),g=(o=v.a,a=v.b,v.rf,s=i.R_A,f=((h=o*o)-(d=a*a))/h,m=0,s?(h=(o*=1-f*(c+f*(l+f*u)))*o,f=0):m=Math.sqrt(f),{es:f,e:m,ep2:(h-d)/d}),y=i.datum||it(i.datumCode,i.datum_params,v.a,v.b,g.es,g.ep2);z(this,i),z(this,n),this.a=v.a,this.b=v.b,this.rf=v.rf,this.sphere=v.sphere,this.es=g.es,this.e=g.e,this.ep2=g.ep2,this.datum=y,this.init(),e(null,this)}else e(t)}else e(t)}nt.projections=J,nt.projections.start();var rt=nt;function ot(t){return t===n||t===r}var at=function(t,e,i){return function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===n?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==r||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e)?i:t.datum_type===a||e.datum_type===a?i:t.es!==e.es||t.a!==e.a||ot(t.datum_type)||ot(e.datum_type)?(i=function(t,e,i){var n,r,o,a,s=t.x,c=t.y,l=t.z?t.z:0;if(c<-h&&c>-1.001*h)c=-h;else if(c>h&&c<1.001*h)c=h;else{if(c<-h)return{x:-1/0,y:-1/0,z:t.z};if(c>h)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),r=Math.sin(c),a=Math.cos(c),o=r*r,{x:((n=i/Math.sqrt(1-e*o))+l)*a*Math.cos(s),y:(n+l)*a*Math.sin(s),z:(n*(1-e)+l)*r}}(i,t.es,t.a),ot(t.datum_type)&&(i=function(t,e,i){if(e===n)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(e===r){var o=i[0],a=i[1],s=i[2],h=i[3],c=i[4],l=i[5],u=i[6];return{x:u*(t.x-l*t.y+c*t.z)+o,y:u*(l*t.x+t.y-h*t.z)+a,z:u*(-c*t.x+h*t.y+t.z)+s}}}(i,t.datum_type,t.datum_params)),ot(e.datum_type)&&(i=function(t,e,i){if(e===n)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(e===r){var o=i[0],a=i[1],s=i[2],h=i[3],c=i[4],l=i[5],u=i[6],p=(t.x-o)/u,d=(t.y-a)/u,f=(t.z-s)/u;return{x:p+l*d-c*f,y:-l*p+d+h*f,z:c*p-h*d+f}}}(i,e.datum_type,e.datum_params)),function(t,e,i,n){var r,o,a,s,h,c,l,u,p,d,f,m,v,g,y,_=t.x,x=t.y,b=t.z?t.z:0;if(r=Math.sqrt(_*_+x*x),o=Math.sqrt(_*_+x*x+b*b),r/i<1e-12){if(g=0,o/i<1e-12)return y=-n,{x:t.x,y:t.y,z:t.z}}else g=Math.atan2(x,_);a=b/o,u=(s=r/o)*(1-e)*(h=1/Math.sqrt(1-e*(2-e)*s*s)),p=a*h,v=0;do{v++,c=e*(l=i/Math.sqrt(1-e*p*p))/(l+(y=r*u+b*p-l*(1-e*p*p))),m=(f=a*(h=1/Math.sqrt(1-c*(2-c)*s*s)))*u-(d=s*(1-c)*h)*p,u=d,p=f}while(m*m>1e-24&&v<30);return{x:g,y:Math.atan(f/Math.abs(d)),z:y}}(i,e.es,e.a,e.b)):i},st=function(t,e,i){var n,r,o,a=i.x,s=i.y,h=i.z||0,c={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==i.z)switch(0===o?(n=a,r="x"):1===o?(n=s,r="y"):(n=h,r="z"),t.axis[o]){case"e":c[r]=n;break;case"w":c[r]=-n;break;case"n":c[r]=n;break;case"s":c[r]=-n;break;case"u":void 0!==i[r]&&(c.z=n);break;case"d":void 0!==i[r]&&(c.z=-n);break;default:return null}return c},ht=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e},ct=function(t){lt(t.x),lt(t.y)};function lt(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function ut(t,e,i){var o;return Array.isArray(i)&&(i=ht(i)),ct(i),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===n||t.datum.datum_type===r)&&"WGS84"!==e.datumCode||(e.datum.datum_type===n||e.datum.datum_type===r)&&"WGS84"!==t.datumCode}(t,e)&&(i=ut(t,o=new rt("WGS84"),i),t=o),"enu"!==t.axis&&(i=st(t,!1,i)),"longlat"===t.projName?i={x:i.x*d,y:i.y*d}:(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter}),i=t.inverse(i)),t.from_greenwich&&(i.x+=t.from_greenwich),i=at(t.datum,e.datum,i),e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y}),"longlat"===e.projName?i={x:i.x*f,y:i.y*f}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter})),"enu"!==e.axis?st(e,!0,i):i}var pt=rt("WGS84");function dt(t,e,i){var n,r,o;return Array.isArray(i)?(n=ut(t,e,i),3===i.length?[n.x,n.y,n.z]:[n.x,n.y]):(r=ut(t,e,i),2===(o=Object.keys(i)).length?r:(o.forEach(function(t){"x"!==t&&"y"!==t&&(r[t]=i[t])}),r))}function ft(t){return t instanceof rt?t:t.oProj?t.oProj:rt(t)}var mt=function(t,e,i){t=ft(t);var n,r=!1;return void 0===e?(e=t,t=pt,r=!0):(void 0!==e.x||Array.isArray(e))&&(i=e,e=t,t=pt,r=!0),e=ft(e),i?dt(t,e,i):(n={forward:function(i){return dt(t,e,i)},inverse:function(i){return dt(e,t,i)}},r&&(n.oProj=e),n)},vt=6,gt="AJSAJS",yt="AFAFAF",_t=65,xt=73,bt=79,Mt=86,wt=90,Et={forward:Tt,inverse:function(t){var e=Rt(Lt(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:St};function Tt(t,e){return e=e||5,function(t,e){var i="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(d=t.easting,f=t.northing,m=t.zoneNumber,v=At(m),g=Math.floor(d/1e5),y=Math.floor(f/1e5)%20,r=g,o=y,a=v,s=a-1,h=gt.charCodeAt(s),c=yt.charCodeAt(s),l=h+r-1,u=c+o,p=!1,l>wt&&(l=l-wt+_t-1,p=!0),(l===xt||h<xt&&l>xt||(l>xt||h<xt)&&p)&&l++,(l===bt||h<bt&&l>bt||(l>bt||h<bt)&&p)&&++l===xt&&l++,l>wt&&(l=l-wt+_t-1),u>Mt?(u=u-Mt+_t-1,p=!0):p=!1,(u===xt||c<xt&&u>xt||(u>xt||c<xt)&&p)&&u++,(u===bt||c<bt&&u>bt||(u>bt||c<bt)&&p)&&++u===xt&&u++,u>Mt&&(u=u-Mt+_t-1),String.fromCharCode(l)+String.fromCharCode(u))+i.substr(i.length-5,e)+n.substr(n.length-5,e);var r,o,a,s,h,c,l,u,p;var d,f,m,v,g,y}(function(t){var e,i,n,r,o,a,s,h=t.lat,c=t.lon,l=6378137,u=Ct(h),p=Ct(c);s=Math.floor((c+180)/6)+1,180===c&&(s=60);h>=56&&h<64&&c>=3&&c<12&&(s=32);h>=72&&h<84&&(c>=0&&c<9?s=31:c>=9&&c<21?s=33:c>=21&&c<33?s=35:c>=33&&c<42&&(s=37));a=Ct(6*(s-1)-180+3),.006739496752268451,e=l/Math.sqrt(1-.00669438*Math.sin(u)*Math.sin(u)),i=Math.tan(u)*Math.tan(u),n=.006739496752268451*Math.cos(u)*Math.cos(u),r=Math.cos(u)*(p-a),o=l*(.9983242984503243*u-.002514607064228144*Math.sin(2*u)+2639046602129982e-21*Math.sin(4*u)-3.418046101696858e-9*Math.sin(6*u));var d=.9996*e*(r+(1-i+n)*r*r*r/6+(5-18*i+i*i+72*n-.39089081163157013)*r*r*r*r*r/120)+5e5,f=.9996*(o+e*Math.tan(u)*(r*r/2+(5-i+9*n+4*n*n)*r*r*r*r/24+(61-58*i+i*i+600*n-2.2240339282485886)*r*r*r*r*r*r/720));h<0&&(f+=1e7);return{northing:Math.round(f),easting:Math.round(d),zoneNumber:s,zoneLetter:function(t){var e="Z";84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C");return e}(h)}}({lat:t[1],lon:t[0]}),e)}function St(t){var e=Rt(Lt(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Ct(t){return t*(Math.PI/180)}function Ot(t){return t/Math.PI*180}function Rt(t){var e=t.northing,i=t.easting,n=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var o,a,s,h,c,l,u,p,d=6378137,f=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),m=i-5e5,v=e;n<"N"&&(v-=1e7),l=6*(r-1)-180+3,p=(u=v/.9996/6367449.145945056)+(3*f/2-27*f*f*f/32)*Math.sin(2*u)+(21*f*f/16-55*f*f*f*f/32)*Math.sin(4*u)+151*f*f*f/96*Math.sin(6*u),o=d/Math.sqrt(1-.00669438*Math.sin(p)*Math.sin(p)),a=Math.tan(p)*Math.tan(p),s=.006739496752268451*Math.cos(p)*Math.cos(p),h=.99330562*d/Math.pow(1-.00669438*Math.sin(p)*Math.sin(p),1.5),c=m/(.9996*o);var g=p-o*Math.tan(p)/h*(c*c/2-(5+3*a+10*s-4*s*s-.06065547077041606)*c*c*c*c/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*c*c*c*c*c*c/720);g=Ot(g);var y,_=(c-(1+2*a+s)*c*c*c/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*c*c*c*c*c/120)/Math.cos(p);if(_=l+Ot(_),t.accuracy){var x=Rt({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});y={top:x.lat,right:x.lon,bottom:g,left:_}}else y={lat:g,lon:_};return y}function At(t){var e=t%vt;return 0===e&&(e=vt),e}function Lt(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,i=t.length,n=null,r="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;r+=e,o++}var a=parseInt(r,10);if(0===o||o+3>i)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;n=t.substring(o,o+=2);for(var h=At(a),c=function(t,e){var i=gt.charCodeAt(e-1),n=1e5,r=!1;for(;i!==t.charCodeAt(0);){if(++i===xt&&i++,i===bt&&i++,i>wt){if(r)throw"Bad character: "+t;i=_t,r=!0}n+=1e5}return n}(n.charAt(0),h),l=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var i=yt.charCodeAt(e-1),n=0,r=!1;for(;i!==t.charCodeAt(0);){if(++i===xt&&i++,i===bt&&i++,i>Mt){if(r)throw"Bad character: "+t;i=_t,r=!0}n+=1e5}return n}(n.charAt(1),h);l<Pt(s);)l+=2e6;var u=i-o;if(u%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var p,d,f,m=u/2,v=0,g=0;return m>0&&(p=1e5/Math.pow(10,m),d=t.substring(o,o+m),v=parseFloat(d)*p,f=t.substring(o+m),g=parseFloat(f)*p),{easting:v+c,northing:g+l,zoneLetter:s,zoneNumber:a,accuracy:p}}function Pt(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function It(t,e,i){if(!(this instanceof It))return new It(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}It.fromMGRS=function(t){return new It(St(t))},It.prototype.toMGRS=function(t){return Tt([this.x,this.y],t)};var Nt=It,Ft=i("lQeg"),Dt=.01068115234375,jt=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+t*Dt))),e[1]=t*(.75-t*(.046875+t*(.01953125+t*Dt)));var i=t*t;return e[2]=i*(.46875-t*(.013020833333333334+.007120768229166667*t)),i*=t,e[3]=i*(.3645833333333333-.005696614583333333*t),e[4]=i*t*.3076171875,e},kt=function(t,e,i,n){return i*=e,e*=e,n[0]*t-i*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))},Gt=function(t,e,i){for(var n=1/(1-e),r=t,o=20;o;--o){var a=Math.sin(r),s=1-e*a*a;if(r-=s=(kt(r,a,Math.cos(r),i)-t)*(s*Math.sqrt(s))*n,Math.abs(s)<p)return r}return r};var Ut={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=jt(this.es),this.ml0=kt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,i,n,r=t.x,o=t.y,a=V(r-this.long0),s=Math.sin(o),h=Math.cos(o);if(this.es){var c=h*a,l=Math.pow(c,2),u=this.ep2*Math.pow(h,2),d=Math.pow(u,2),f=Math.abs(h)>p?Math.tan(o):0,m=Math.pow(f,2),v=Math.pow(m,2);e=1-this.es*Math.pow(s,2),c/=Math.sqrt(e);var g=kt(o,s,h,this.en);i=this.a*(this.k0*c*(1+l/6*(1-m+u+l/20*(5-18*m+v+14*u-58*m*u+l/42*(61+179*v-v*m-479*m)))))+this.x0,n=this.a*(this.k0*(g-this.ml0+s*a*c/2*(1+l/12*(5-m+9*u+4*d+l/30*(61+v-58*m+270*u-330*m*u+l/56*(1385+543*v-v*m-3111*m))))))+this.y0}else{var y=h*Math.sin(a);if(Math.abs(Math.abs(y)-1)<p)return 93;if(i=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,n=h*Math.cos(a)/Math.sqrt(1-Math.pow(y,2)),(y=Math.abs(n))>=1){if(y-1>p)return 93;n=0}else n=Math.acos(n);o<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=i,t.y=n,t},inverse:function(t){var e,i,n,r,o=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,i=Gt(e,this.es,this.en),Math.abs(i)<h){var s=Math.sin(i),c=Math.cos(i),l=Math.abs(c)>p?Math.tan(i):0,u=this.ep2*Math.pow(c,2),d=Math.pow(u,2),f=Math.pow(l,2),m=Math.pow(f,2);e=1-this.es*Math.pow(s,2);var v=o*Math.sqrt(e)/this.k0,g=Math.pow(v,2);n=i-(e*=l)*g/(1-this.es)*.5*(1-g/12*(5+3*f-9*u*f+u-4*d-g/30*(61+90*f-252*u*f+45*m+46*u-g/56*(1385+3633*f+4095*m+1574*m*f)))),r=V(this.long0+v*(1-g/6*(1+2*f+u-g/20*(5+28*f+24*m+8*u*f+6*u-g/42*(61+662*f+1320*m+720*m*f))))/c)}else n=h*H(a),r=0;else{var y=Math.exp(o/this.k0),_=.5*(y-1/y),x=this.lat0+a/this.k0,b=Math.cos(x);e=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(_,2))),n=Math.asin(e),a<0&&(n=-n),r=0===_&&0===b?0:V(Math.atan2(_,b)+this.long0)}return t.x=r,t.y=n,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},zt=function(t){var e=Math.exp(t);return e=(e-1/e)/2},Bt=function(t,e){t=Math.abs(t),e=Math.abs(e);var i=Math.max(t,e),n=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(n,2))},Ht=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,i=e-1;return 0===i?t:t*Math.log(e)/i}(e*(1+e/(Bt(1,e)+1))),t<0?-e:e},Vt=function(t,e){for(var i,n=2*Math.cos(2*e),r=t.length-1,o=t[r],a=0;--r>=0;)i=n*o-a+t[r],a=o,o=i;return e+i*Math.sin(2*e)},Wt=function(t,e){for(var i,n=2*Math.cos(e),r=t.length-1,o=t[r],a=0;--r>=0;)i=n*o-a+t[r],a=o,o=i;return Math.sin(e)*i},Xt=function(t,e,i){for(var n,r,o=Math.sin(e),a=Math.cos(e),s=zt(i),h=function(t){var e=Math.exp(t);return e=(e+1/e)/2}(i),c=2*a*h,l=-2*o*s,u=t.length-1,p=t[u],d=0,f=0,m=0;--u>=0;)n=f,r=d,p=c*(f=p)-n-l*(d=m)+t[u],m=l*f-r+c*d;return[(c=o*h)*p-(l=a*s)*m,c*m+l*p]};var Yt={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),i*=e,this.cgb[1]=i*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),i*=e,this.cgb[2]=i*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=i*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),i*=e,this.cgb[3]=i*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=i*(1237/630+e*(e*(-24832/14175)-2.4)),i*=e,this.cgb[4]=i*(4174/315+e*(-144838/6237)),this.cbg[4]=i*(-734/315+e*(109598/31185)),i*=e,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(.25+i*(1/64+i/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=i*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),i*=e,this.utg[2]=i*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),i*=e,this.utg[3]=i*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=i*(49561/161280+e*(-179/168+e*(6601661/7257600))),i*=e,this.utg[4]=i*(-4583/161280+e*(108847/3991680)),this.gtu[4]=i*(34729/80640+e*(-3418889/1995840)),i*=e,this.utg[5]=-.03233083094085698*i,this.gtu[5]=.6650675310896665*i;var n=Vt(this.cbg,this.lat0);this.Zb=-this.Qn*(n+Wt(this.gtu,2*n))},forward:function(t){var e=V(t.x-this.long0),i=t.y;i=Vt(this.cbg,i);var n=Math.sin(i),r=Math.cos(i),o=Math.sin(e),a=Math.cos(e);i=Math.atan2(n,a*r),e=Math.atan2(o*r,Bt(n,r*a)),e=Ht(Math.tan(e));var s,h,c=Xt(this.gtu,2*i,2*e);return i+=c[0],e+=c[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,h=this.a*(this.Qn*i+this.Zb)+this.y0):(s=1/0,h=1/0),t.x=s,t.y=h,t},inverse:function(t){var e,i,n=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);if(r=(r-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var o=Xt(this.utg,2*r,2*n);r+=o[0],n+=o[1],n=Math.atan(zt(n));var a=Math.sin(r),s=Math.cos(r),h=Math.sin(n),c=Math.cos(n);r=Math.atan2(a*c,Bt(h,c*s)),n=Math.atan2(h,c*s),e=V(n+this.long0),i=Vt(this.cgb,r)}else e=1/0,i=1/0;return t.x=e,t.y=i,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]},qt=function(t,e){if(void 0===t){if((t=Math.floor(30*(V(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t};var Kt={init:function(){var t=qt(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*d,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Yt.init.apply(this),this.forward=Yt.forward,this.inverse=Yt.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},Zt=function(t,e){return Math.pow((1-t)/(1+t),e)},$t=20;var Jt={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+m)/(Math.pow(Math.tan(.5*this.lat0+m),this.C)*Zt(this.e*t,this.ratexp))},forward:function(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+m),this.C)*Zt(this.e*Math.sin(i),this.ratexp))-h,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,i=t.y,n=Math.pow(Math.tan(.5*i+m)/this.K,1/this.C),r=$t;r>0&&(i=2*Math.atan(n*Zt(this.e*Math.sin(t.y),-.5*this.e))-h,!(Math.abs(i-t.y)<1e-14));--r)t.y=i;return r?(t.x=e,t.y=i,t):null},names:["gauss"]};var Qt={init:function(){Jt.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,i,n,r;return t.x=V(t.x-this.long0),Jt.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),n=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*n),t.x=r*i*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*i*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,i,n,r,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),i=Math.cos(a),r=Math.asin(i*this.sinc0+t.y*e*this.cosc0/o),n=Math.atan2(t.x*e,o*this.cosc0*i-t.y*this.sinc0*e)}else r=this.phic0,n=0;return t.x=n,t.y=r,Jt.inverse.apply(this,[t]),t.x=V(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var te={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=p&&(this.k0=.5*(1+H(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=p&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=p&&(this.k0=.5*this.cons*B(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/W(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=B(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-h,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,i,n,r,o,a,s=t.x,c=t.y,l=Math.sin(c),u=Math.cos(c),d=V(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=p&&Math.abs(c+this.lat0)<=p?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*u*Math.cos(d)),t.x=this.a*e*u*Math.sin(d)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*u*Math.cos(d))+this.y0,t):(i=2*Math.atan(this.ssfn_(c,l,this.e))-h,r=Math.cos(i),n=Math.sin(i),Math.abs(this.coslat0)<=p?(o=W(this.e,c*this.con,this.con*l),a=2*this.a*this.k0*o/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<p?(e=2*this.a*this.k0/(1+r*Math.cos(d)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*r*Math.cos(d))),t.y=e*(this.cosX0*n-this.sinX0*r*Math.cos(d))+this.y0),t.x=e*r*Math.sin(d)+this.x0,t))},inverse:function(t){var e,i,n,r,o;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,i=this.lat0,a<=p?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<p?this.lat0>0?V(this.long0+Math.atan2(t.x,-1*t.y)):V(this.long0+Math.atan2(t.x,t.y)):V(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=i,t)}if(Math.abs(this.coslat0)<=p){if(a<=p)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,n=a*this.cons/(2*this.a*this.k0),i=this.con*X(this.e,n),e=this.con*V(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=p?o=this.X0:(o=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/a),e=V(this.long0+Math.atan2(t.x*Math.sin(r),a*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),i=-1*X(this.e,Math.tan(.5*(h+o)));return t.x=e,t.y=i,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,i){return e*=i,Math.tan(.5*(h+t))*Math.pow((1-e)/(1+e),.5*i)}};var ee={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,n=1/this.rf,r=2*n-Math.pow(n,2),o=this.e=Math.sqrt(r);this.R=this.k0*i*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),h=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*h},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+i)+this.K,r=2*(Math.atan(Math.exp(n))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,i=t.y-this.y0,n=e/this.R,r=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(r))),s=this.lambda0+a/this.alpha,h=0,c=o,l=-1e3,u=0;Math.abs(c-l)>1e-7;){if(++u>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),l=c,c=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=s,t.y=c,t},names:["somerc"]};var ie={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),i=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-i*i);var n,r,o=W(this.e,this.lat0,t),a=this.bl/e*Math.sqrt((1-this.es)/(1-i*i));if(a*a<1&&(a=1),isNaN(this.longc)){var s=W(this.e,this.lat1,Math.sin(this.lat1)),h=W(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(a+Math.sqrt(a*a-1))*Math.pow(o,this.bl):this.el=(a-Math.sqrt(a*a-1))*Math.pow(o,this.bl);var c=Math.pow(s,this.bl),l=Math.pow(h,this.bl);r=.5*((n=this.el/c)-1/n);var u=(this.el*this.el-l*c)/(this.el*this.el+l*c),p=(l-c)/(l+c),d=V(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(u*Math.tan(.5*this.bl*d)/p)/this.bl,this.long0=V(this.long0);var f=V(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*f)/r),this.alpha=Math.asin(a*Math.sin(this.gamma0))}else n=this.lat0>=0?a+Math.sqrt(a*a-1):a-Math.sqrt(a*a-1),this.el=n*Math.pow(o,this.bl),r=.5*(n-1/n),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(r*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))},forward:function(t){var e,i,n,r=t.x,o=t.y,a=V(r-this.long0);if(Math.abs(Math.abs(o)-h)<=p)n=o>0?-1:1,i=this.al/this.bl*Math.log(Math.tan(m+n*this.gamma0*.5)),e=-1*n*h*this.al/this.bl;else{var s=W(this.e,o,Math.sin(o)),c=this.el/Math.pow(s,this.bl),l=.5*(c-1/c),u=.5*(c+1/c),d=Math.sin(this.bl*a),f=(l*Math.sin(this.gamma0)-d*Math.cos(this.gamma0))/u;i=Math.abs(Math.abs(f)-1)<=p?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-f)/(1+f))/this.bl,e=Math.abs(Math.cos(this.bl*a))<=p?this.al*this.bl*a:this.al*Math.atan2(l*Math.cos(this.gamma0)+d*Math.sin(this.gamma0),Math.cos(this.bl*a))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+i):(e-=this.uc,t.x=this.x0+i*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-i*Math.sin(this.alpha)),t},inverse:function(t){var e,i;this.no_rot?(i=t.y-this.y0,e=t.x-this.x0):(i=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var n=Math.exp(-1*this.bl*i/this.al),r=.5*(n-1/n),o=.5*(n+1/n),a=Math.sin(this.bl*e/this.al),s=(a*Math.cos(this.gamma0)+r*Math.sin(this.gamma0))/o,c=Math.pow(this.el/Math.sqrt((1+s)/(1-s)),1/this.bl);return Math.abs(s-1)<p?(t.x=this.long0,t.y=h):Math.abs(s+1)<p?(t.x=this.long0,t.y=-1*h):(t.y=X(this.e,c),t.x=V(this.long0-Math.atan2(r*Math.cos(this.gamma0)-a*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};var ne={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<p)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),n=B(this.e,e,i),r=W(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=B(this.e,o,a),h=W(this.e,this.lat2,o),c=W(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>p?this.ns=Math.log(n/s)/Math.log(r/h):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=p&&(i=H(i)*(h-2*p));var n,r,o=Math.abs(Math.abs(i)-h);if(o>p)n=W(this.e,i,Math.sin(i)),r=this.a*this.f0*Math.pow(n,this.ns);else{if((o=i*this.ns)<=0)return null;r=0}var a=this.ns*V(e-this.long0);return t.x=this.k0*(r*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-r*Math.cos(a))+this.y0,t},inverse:function(t){var e,i,n,r,o,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),i=1):(e=-Math.sqrt(a*a+s*s),i=-1);var c=0;if(0!==e&&(c=Math.atan2(i*a,i*s)),0!==e||this.ns>0){if(i=1/this.ns,n=Math.pow(e/(this.a*this.f0),i),-9999===(r=X(this.e,n)))return null}else r=-h;return o=V(c/this.ns+this.long0),t.x=o,t.y=r,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};var re={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,i,n,r,o,a,s,h=t.x,c=t.y,l=V(h-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),n=-l*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),o=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(r)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,i,n,r,o,a,s,h=t.x;t.x=t.y,t.y=h,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),i=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(e)),t.x=this.long0-i/this.alfa,a=e,s=0;var c=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,c+=1}while(0===s&&c<15);return c>=15?null:t},names:["Krovak","krovak"]},oe=function(t,e,i,n,r){return t*r-e*Math.sin(2*r)+i*Math.sin(4*r)-n*Math.sin(6*r)},ae=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},se=function(t){return.375*t*(1+.25*t*(1+.46875*t))},he=function(t){return.05859375*t*t*(1+.75*t)},ce=function(t){return t*t*t*(35/3072)},le=function(t,e,i){var n=e*i;return t/Math.sqrt(1-n*n)},ue=function(t){return Math.abs(t)<h?t:t-H(t)*Math.PI},pe=function(t,e,i,n,r){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-i*Math.sin(2*o)+n*Math.sin(4*o)-r*Math.sin(6*o)))/(e-2*i*Math.cos(2*o)+4*n*Math.cos(4*o)-6*r*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN};var de={init:function(){this.sphere||(this.e0=ae(this.es),this.e1=se(this.es),this.e2=he(this.es),this.e3=ce(this.es),this.ml0=this.a*oe(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,i,n=t.x,r=t.y;if(n=V(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(n)),i=this.a*(Math.atan2(Math.tan(r),Math.cos(n))-this.lat0);else{var o=Math.sin(r),a=Math.cos(r),s=le(this.a,this.e,o),h=Math.tan(r)*Math.tan(r),c=n*Math.cos(r),l=c*c,u=this.es*a*a/(1-this.es);e=s*c*(1-l*h*(1/6-(8-h+8*u)*l/120)),i=this.a*oe(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+s*o/a*l*(.5+(5-h+6*u)*l/24)}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n=t.x/this.a,r=t.y/this.a;if(this.sphere){var o=r+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(n)),i=Math.atan2(Math.tan(n),Math.cos(o))}else{var a=this.ml0/this.a+r,s=pe(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-h)<=p)return t.x=this.long0,t.y=h,r<0&&(t.y*=-1),t;var c=le(this.a,this.e,Math.sin(s)),l=c*c*c/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(s),2),d=n*this.a/c,f=d*d;e=s-c*Math.tan(s)/l*d*d*(.5-(1+3*u)*d*d/24),i=d*(1-f*(u/3+(1+3*u)*u*f/15))/Math.cos(s)}return t.x=V(i+this.long0),t.y=ue(e),t},names:["Cassini","Cassini_Soldner","cass"]},fe=function(t,e){var i;return t>1e-7?(1-t*t)*(e/(1-(i=t*e)*i)-.5/t*Math.log((1-i)/(1+i))):2*e};var me=.3333333333333333,ve=.17222222222222222,ge=.10257936507936508,ye=.06388888888888888,_e=.0664021164021164,xe=.016415012942191543;var be={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-h)<p?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<p?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=fe(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,i=[];return i[0]=t*me,e=t*t,i[0]+=e*ve,i[1]=e*ye,e*=t,i[0]+=e*ge,i[1]+=e*_e,i[2]=e*xe,i}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=fe(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,i,n,r,o,a,s,c,l,u,d=t.x,f=t.y;if(d=V(d-this.long0),this.sphere){if(o=Math.sin(f),u=Math.cos(f),n=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+u*n:1+this.sinph0*o+this.cosph0*u*n)<=p)return null;e=(i=Math.sqrt(2/i))*u*Math.sin(d),i*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*u*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(f+this.phi0)<p)return null;i=m-.5*f,e=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(d),i*=n}}else{switch(s=0,c=0,l=0,n=Math.cos(d),r=Math.sin(d),o=Math.sin(f),a=fe(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,c=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:l=1+this.sinb1*s+this.cosb1*c*n;break;case this.EQUIT:l=1+c*n;break;case this.N_POLE:l=h+f,a=this.qp-a;break;case this.S_POLE:l=f-h,a=this.qp+a}if(Math.abs(l)<p)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),i=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*s-this.sinb1*c*n):(l=Math.sqrt(2/(1+c*n)))*s*this.ymf,e=this.xmf*l*c*r;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(l=Math.sqrt(a))*r,i=n*(this.mode===this.S_POLE?l:-l)):e=i=0}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n,r,o,a,s,c,l,u,d=t.x/this.a,f=t.y/this.a;if(this.sphere){var m,v=0,g=0;if((i=.5*(m=Math.sqrt(d*d+f*f)))>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(g=Math.sin(i),v=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(m)<=p?0:Math.asin(f*g/m),d*=g,f=v*m;break;case this.OBLIQ:i=Math.abs(m)<=p?this.phi0:Math.asin(v*this.sinph0+f*g*this.cosph0/m),d*=g*this.cosph0,f=(v-Math.sin(i)*this.sinph0)*m;break;case this.N_POLE:f=-f,i=h-i;break;case this.S_POLE:i-=h}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(d,f):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(d/=this.dd,f*=this.dd,(a=Math.sqrt(d*d+f*f))<p)return t.x=0,t.y=this.phi0,t;r=2*Math.asin(.5*a/this.rq),n=Math.cos(r),d*=r=Math.sin(r),this.mode===this.OBLIQ?(s=n*this.sinb1+f*r*this.cosb1/a,o=this.qp*s,f=a*this.cosb1*n-f*this.sinb1*r):(s=f*r/a,o=this.qp*s,f=a*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(o=d*d+f*f))return t.x=0,t.y=this.phi0,t;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(d,f),c=Math.asin(s),l=this.apa,u=c+c,i=c+l[0]*Math.sin(u)+l[1]*Math.sin(u+u)+l[2]*Math.sin(u+u+u)}return t.x=V(this.long0+e),t.y=i,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},Me=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)};var we={init:function(){Math.abs(this.lat1+this.lat2)<p||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=B(this.e3,this.sin_po,this.cos_po),this.qs1=fe(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=B(this.e3,this.sin_po,this.cos_po),this.qs2=fe(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=fe(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>p?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=fe(this.e3,this.sin_phi,this.cos_phi),r=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,o=this.ns0*V(e-this.long0),a=r*Math.sin(o)+this.x0,s=this.rh-r*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,i,n,r,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),r=0,0!==e&&(r=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,i)),o=V(r/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var i,n,r,o,a,s=Me(.5*e);if(t<p)return s;for(var h=t*t,c=1;c<=25;c++)if(i=Math.sin(s),n=Math.cos(s),s+=a=.5*(o=1-(r=t*i)*r)*o/n*(e/(1-h)-i/o+.5/t*Math.log((1-r)/(1+r))),Math.abs(a)<=1e-7)return s;return null}};var Ee={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,i,n,r,o,a,s,h=t.x,c=t.y;return n=V(h-this.long0),e=Math.sin(c),i=Math.cos(c),r=Math.cos(n),(o=this.sin_p14*e+this.cos_p14*i*r)>0||Math.abs(o)<=p?(a=this.x0+1*this.a*i*Math.sin(n)/o,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*r)/o):(a=this.x0+this.infinity_dist*i*Math.sin(n),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*r)),t.x=a,t.y=s,t},inverse:function(t){var e,i,n,r,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),i=Math.sin(r),n=Math.cos(r),a=Me(n*this.sin_p14+t.y*i*this.cos_p14/e),o=Math.atan2(t.x*i,e*this.cos_p14*n-t.y*this.sin_p14*i),o=V(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]},Te=function(t,e){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return e<0?-1*h:h;for(var n,r,o,a,s=Math.asin(.5*e),c=0;c<30;c++)if(r=Math.sin(s),o=Math.cos(s),a=t*r,s+=n=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-r/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(n)<=1e-10)return s;return NaN};var Se={init:function(){this.sphere||(this.k0=B(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,i,n=t.x,r=t.y,o=V(n-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var a=fe(this.e,Math.sin(r));e=this.x0+this.a*this.k0*o,i=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=i,t},inverse:function(t){var e,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=V(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=Te(this.e,2*t.y*this.k0/this.a),e=V(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t},names:["cea"]};var Ce={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,i=t.y,n=V(e-this.long0),r=ue(i-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*r,t},inverse:function(t){var e=t.x,i=t.y;return t.x=V(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=ue(this.lat0+(i-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Oe=20;var Re={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ae(this.es),this.e1=se(this.es),this.e2=he(this.es),this.e3=ce(this.es),this.ml0=this.a*oe(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,i,n,r=t.x,o=t.y,a=V(r-this.long0);if(n=a*Math.sin(o),this.sphere)Math.abs(o)<=p?(e=this.a*a,i=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(o),i=this.a*(ue(o-this.lat0)+(1-Math.cos(n))/Math.tan(o)));else if(Math.abs(o)<=p)e=this.a*a,i=-1*this.ml0;else{var s=le(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(n),i=this.a*oe(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(n))}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){var e,i,n,r,o,a,s,h,c;if(n=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=p)e=V(n/this.a+this.long0),i=0;else{var l;for(a=this.lat0+r/this.a,s=n*n/this.a/this.a+a*a,h=a,o=Oe;o;--o)if(h+=c=-1*(a*(h*(l=Math.tan(h))+1)-h-.5*(h*h+s)*l)/((h-a)/l-1),Math.abs(c)<=p){i=h;break}e=V(this.long0+Math.asin(n*Math.tan(h)/this.a)/Math.sin(i))}else if(Math.abs(r+this.ml0)<=p)i=0,e=V(this.long0+n/this.a);else{var u,d,f,m,v;for(a=(this.ml0+r)/this.a,s=n*n/this.a/this.a+a*a,h=a,o=Oe;o;--o)if(v=this.e*Math.sin(h),u=Math.sqrt(1-v*v)*Math.tan(h),d=this.a*oe(this.e0,this.e1,this.e2,this.e3,h),f=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),h-=c=(a*(u*(m=d/this.a)+1)-m-.5*u*(m*m+s))/(this.es*Math.sin(2*h)*(m*m+s-2*a*m)/(4*u)+(a-m)*(u*f-2/Math.sin(2*h))-f),Math.abs(c)<=p){i=h;break}u=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=V(this.long0+Math.asin(n*u/this.a)/Math.sin(i))}return t.x=e,t.y=i,t},names:["Polyconic","poly"]};var Ae={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,i=t.x,n=t.y-this.lat0,r=i-this.long0,o=n/s*1e-5,a=r,h=1,c=0;for(e=1;e<=10;e++)h*=o,c+=this.A[e]*h;var l,u=c,p=a,d=1,f=0,m=0,v=0;for(e=1;e<=6;e++)l=f*u+d*p,d=d*u-f*p,f=l,m=m+this.B_re[e]*d-this.B_im[e]*f,v=v+this.B_im[e]*d+this.B_re[e]*f;return t.x=v*this.a+this.x0,t.y=m*this.a+this.y0,t},inverse:function(t){var e,i,n=t.x,r=t.y,o=n-this.x0,a=(r-this.y0)/this.a,h=o/this.a,c=1,l=0,u=0,p=0;for(e=1;e<=6;e++)i=l*a+c*h,c=c*a-l*h,l=i,u=u+this.C_re[e]*c-this.C_im[e]*l,p=p+this.C_im[e]*c+this.C_re[e]*l;for(var d=0;d<this.iterations;d++){var f,m=u,v=p,g=a,y=h;for(e=2;e<=6;e++)f=v*u+m*p,m=m*u-v*p,v=f,g+=(e-1)*(this.B_re[e]*m-this.B_im[e]*v),y+=(e-1)*(this.B_im[e]*m+this.B_re[e]*v);m=1,v=0;var _=this.B_re[1],x=this.B_im[1];for(e=2;e<=6;e++)f=v*u+m*p,m=m*u-v*p,v=f,_+=e*(this.B_re[e]*m-this.B_im[e]*v),x+=e*(this.B_im[e]*m+this.B_re[e]*v);var b=_*_+x*x;u=(g*_+y*x)/b,p=(y*_-g*x)/b}var M=u,w=p,E=1,T=0;for(e=1;e<=9;e++)E*=M,T+=this.D[e]*E;var S=this.lat0+T*s*1e5,C=this.long0+w;return t.x=C,t.y=S,t},names:["New_Zealand_Map_Grid","nzmg"]};var Le={init:function(){},forward:function(t){var e=t.x,i=t.y,n=V(e-this.long0),r=this.x0+this.a*n,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=r,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=V(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t},names:["Miller_Cylindrical","mill"]},Pe=20;var Ie={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=jt(this.es)},forward:function(t){var e,i,n=t.x,r=t.y;if(n=V(n-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(r),a=Pe;a;--a){var s=(this.m*r+Math.sin(r)-o)/(this.m+Math.cos(r));if(r-=s,Math.abs(s)<p)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;e=this.a*this.C_x*n*(this.m+Math.cos(r)),i=this.a*this.C_y*r}else{var h=Math.sin(r),c=Math.cos(r);i=this.a*kt(r,h,c,this.en),e=this.a*n*c/Math.sqrt(1-this.es*h*h)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n,r;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=Me((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Me(Math.sin(e)/this.n)),n=V(n+this.long0),e=ue(e)):(e=Gt(t.y/this.a,this.es,this.en),(r=Math.abs(e))<h?(r=Math.sin(e),i=this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)),n=V(i)):r-p<h&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]};var Ne={init:function(){},forward:function(t){for(var e=t.x,i=t.y,n=V(e-this.long0),r=i,o=Math.PI*Math.sin(i);;){var a=-(r+Math.sin(r)-o)/(1+Math.cos(r));if(r+=a,Math.abs(a)<p)break}r/=2,Math.PI/2-Math.abs(i)<p&&(n=0);var s=.900316316158*this.a*n*Math.cos(r)+this.x0,h=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=s,t.y=h,t},inverse:function(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var n=V(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var r=Math.asin(i);return t.x=n,t.y=r,t},names:["Mollweide","moll"]};var Fe={init:function(){Math.abs(this.lat1+this.lat2)<p||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ae(this.es),this.e1=se(this.es),this.e2=he(this.es),this.e3=ce(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=B(this.e,this.sinphi,this.cosphi),this.ml1=oe(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<p?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=B(this.e,this.sinphi,this.cosphi),this.ml2=oe(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=oe(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,i=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var r=oe(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-r)}var o=this.ns*V(i-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,i,n,r;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==i&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return r=V(this.long0+o/this.ns),n=ue(this.g-i/this.a),t.x=r,t.y=n,t;var a=this.g-i/this.a;return n=pe(a,this.e0,this.e1,this.e2,this.e3),r=V(this.long0+o/this.ns),t.x=r,t.y=n,t},names:["Equidistant_Conic","eqdc"]};var De={init:function(){this.R=this.a},forward:function(t){var e,i,n=t.x,r=t.y,o=V(n-this.long0);Math.abs(r)<=p&&(e=this.x0+this.R*o,i=this.y0);var a=Me(2*Math.abs(r/Math.PI));(Math.abs(o)<=p||Math.abs(Math.abs(r)-h)<=p)&&(e=this.x0,i=r>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),c=s*s,l=Math.sin(a),u=Math.cos(a),d=u/(l+u-1),f=d*d,m=d*(2/l-1),v=m*m,g=Math.PI*this.R*(s*(d-v)+Math.sqrt(c*(d-v)*(d-v)-(v+c)*(f-v)))/(v+c);o<0&&(g=-g),e=this.x0+g;var y=c+d;return g=Math.PI*this.R*(m*y-s*Math.sqrt((v+c)*(c+1)-y*y))/(v+c),i=r>=0?this.y0+g:this.y0-g,t.x=e,t.y=i,t},inverse:function(t){var e,i,n,r,o,a,s,h,c,l,u,d;return t.x-=this.x0,t.y-=this.y0,u=Math.PI*this.R,o=(n=t.x/u)*n+(r=t.y/u)*r,u=3*(r*r/(h=-2*(a=-Math.abs(r)*(1+o))+1+2*r*r+o*o)+(2*(s=a-2*r*r+n*n)*s*s/h/h/h-9*a*s/h/h)/27)/(c=(a-s*s/3/h)/h)/(l=2*Math.sqrt(-c/3)),Math.abs(u)>1&&(u=u>=0?1:-1),d=Math.acos(u)/3,i=t.y>=0?(-l*Math.cos(d+Math.PI/3)-s/3/h)*Math.PI:-(-l*Math.cos(d+Math.PI/3)-s/3/h)*Math.PI,e=Math.abs(n)<p?this.long0:V(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(n*n-r*r)+o*o))/2/n),t.x=e,t.y=i,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var je={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,i,n,r,o,a,s,c,l,u,d,f,m,v,g,y,_,x,b,M,w,E,T=t.x,S=t.y,C=Math.sin(t.y),O=Math.cos(t.y),R=V(T-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=p?(t.x=this.x0+this.a*(h-S)*Math.sin(R),t.y=this.y0-this.a*(h-S)*Math.cos(R),t):Math.abs(this.sin_p12+1)<=p?(t.x=this.x0+this.a*(h+S)*Math.sin(R),t.y=this.y0+this.a*(h+S)*Math.cos(R),t):(x=this.sin_p12*C+this.cos_p12*O*Math.cos(R),_=(y=Math.acos(x))/Math.sin(y),t.x=this.x0+this.a*_*O*Math.sin(R),t.y=this.y0+this.a*_*(this.cos_p12*C-this.sin_p12*O*Math.cos(R)),t):(e=ae(this.es),i=se(this.es),n=he(this.es),r=ce(this.es),Math.abs(this.sin_p12-1)<=p?(o=this.a*oe(e,i,n,r,h),a=this.a*oe(e,i,n,r,S),t.x=this.x0+(o-a)*Math.sin(R),t.y=this.y0-(o-a)*Math.cos(R),t):Math.abs(this.sin_p12+1)<=p?(o=this.a*oe(e,i,n,r,h),a=this.a*oe(e,i,n,r,S),t.x=this.x0+(o+a)*Math.sin(R),t.y=this.y0+(o+a)*Math.cos(R),t):(s=C/O,c=le(this.a,this.e,this.sin_p12),l=le(this.a,this.e,C),u=Math.atan((1-this.es)*s+this.es*c*this.sin_p12/(l*O)),b=0===(d=Math.atan2(Math.sin(R),this.cos_p12*Math.tan(u)-this.sin_p12*Math.cos(R)))?Math.asin(this.cos_p12*Math.sin(u)-this.sin_p12*Math.cos(u)):Math.abs(Math.abs(d)-Math.PI)<=p?-Math.asin(this.cos_p12*Math.sin(u)-this.sin_p12*Math.cos(u)):Math.asin(Math.sin(R)*Math.cos(u)/Math.sin(d)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),y=c*b*(1-(M=b*b)*(g=(m=this.e*this.cos_p12*Math.cos(d)/Math.sqrt(1-this.es))*m)*(1-g)/6+(w=M*b)/8*(v=f*m)*(1-2*g)+(E=w*b)/120*(g*(4-7*g)-3*f*f*(1-7*g))-E*b/48*v),t.x=this.x0+y*Math.sin(d),t.y=this.y0+y*Math.cos(d),t))},inverse:function(t){var e,i,n,r,o,a,s,c,l,u,d,f,m,v,g,y,_,x,b,M,w,E;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*h*this.a)return;return i=e/this.a,n=Math.sin(i),r=Math.cos(i),o=this.long0,Math.abs(e)<=p?a=this.lat0:(a=Me(r*this.sin_p12+t.y*n*this.cos_p12/e),s=Math.abs(this.lat0)-h,o=Math.abs(s)<=p?this.lat0>=0?V(this.long0+Math.atan2(t.x,-t.y)):V(this.long0-Math.atan2(-t.x,t.y)):V(this.long0+Math.atan2(t.x*n,e*this.cos_p12*r-t.y*this.sin_p12*n))),t.x=o,t.y=a,t}return c=ae(this.es),l=se(this.es),u=he(this.es),d=ce(this.es),Math.abs(this.sin_p12-1)<=p?(f=this.a*oe(c,l,u,d,h),e=Math.sqrt(t.x*t.x+t.y*t.y),a=pe((f-e)/this.a,c,l,u,d),o=V(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=a,t):Math.abs(this.sin_p12+1)<=p?(f=this.a*oe(c,l,u,d,h),e=Math.sqrt(t.x*t.x+t.y*t.y),a=pe((e-f)/this.a,c,l,u,d),o=V(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),g=Math.atan2(t.x,t.y),m=le(this.a,this.e,this.sin_p12),y=Math.cos(g),x=-(_=this.e*this.cos_p12*y)*_/(1-this.es),b=3*this.es*(1-x)*this.sin_p12*this.cos_p12*y/(1-this.es),E=1-x*(w=(M=e/m)-x*(1+x)*Math.pow(M,3)/6-b*(1+3*x)*Math.pow(M,4)/24)*w/2-M*w*w*w/6,v=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*y),o=V(this.long0+Math.asin(Math.sin(g)*Math.sin(w)/Math.cos(v))),a=Math.atan((1-this.es*E*this.sin_p12/Math.sin(v))*Math.tan(v)/(1-this.es)),t.x=o,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]};var ke={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,i,n,r,o,a,s,h=t.x,c=t.y;return n=V(h-this.long0),e=Math.sin(c),i=Math.cos(c),r=Math.cos(n),((o=this.sin_p14*e+this.cos_p14*i*r)>0||Math.abs(o)<=p)&&(a=1*this.a*i*Math.sin(n),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*r)),t.x=a,t.y=s,t},inverse:function(t){var e,i,n,r,o,a,s;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),i=Me(e/this.a),n=Math.sin(i),r=Math.cos(i),a=this.long0,Math.abs(e)<=p?(s=this.lat0,t.x=a,t.y=s,t):(s=Me(r*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.abs(this.lat0)-h,Math.abs(o)<=p?(a=this.lat0>=0?V(this.long0+Math.atan2(t.x,-t.y)):V(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=V(this.long0+Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n)),t.x=a,t.y=s,t))},names:["ortho"]},Ge={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Ue={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function ze(t,e,i,n){var r;return t<p?(n.value=Ue.AREA_0,r=0):(r=Math.atan2(e,i),Math.abs(r)<=m?n.value=Ue.AREA_0:r>m&&r<=h+m?(n.value=Ue.AREA_1,r-=h):r>h+m||r<=-(h+m)?(n.value=Ue.AREA_2,r=r>=0?r-g:r+g):(n.value=Ue.AREA_3,r+=h)),r}function Be(t,e){var i=t+e;return i<-g?i+=v:i>+g&&(i-=v),i}var He={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=h-m/2?this.face=Ge.TOP:this.lat0<=-(h-m/2)?this.face=Ge.BOTTOM:Math.abs(this.long0)<=m?this.face=Ge.FRONT:Math.abs(this.long0)<=h+m?this.face=this.long0>0?Ge.RIGHT:Ge.LEFT:this.face=Ge.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,i,n,r,o,a,s={x:0,y:0},c={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,i=t.x,this.face===Ge.TOP)r=h-e,i>=m&&i<=h+m?(c.value=Ue.AREA_0,n=i-h):i>h+m||i<=-(h+m)?(c.value=Ue.AREA_1,n=i>0?i-g:i+g):i>-(h+m)&&i<=-m?(c.value=Ue.AREA_2,n=i+h):(c.value=Ue.AREA_3,n=i);else if(this.face===Ge.BOTTOM)r=h+e,i>=m&&i<=h+m?(c.value=Ue.AREA_0,n=-i+h):i<m&&i>=-m?(c.value=Ue.AREA_1,n=-i):i<-m&&i>=-(h+m)?(c.value=Ue.AREA_2,n=-i-h):(c.value=Ue.AREA_3,n=i>0?-i+g:-i-g);else{var l,u,p,d,f,v;this.face===Ge.RIGHT?i=Be(i,+h):this.face===Ge.BACK?i=Be(i,+g):this.face===Ge.LEFT&&(i=Be(i,-h)),d=Math.sin(e),f=Math.cos(e),v=Math.sin(i),l=f*Math.cos(i),u=f*v,p=d,this.face===Ge.FRONT?n=ze(r=Math.acos(l),p,u,c):this.face===Ge.RIGHT?n=ze(r=Math.acos(u),p,-l,c):this.face===Ge.BACK?n=ze(r=Math.acos(-l),p,-u,c):this.face===Ge.LEFT?n=ze(r=Math.acos(-u),p,l,c):(r=n=0,c.value=Ue.AREA_0)}return a=Math.atan(12/g*(n+Math.acos(Math.sin(n)*Math.cos(m))-h)),o=Math.sqrt((1-Math.cos(r))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),c.value===Ue.AREA_1?a+=h:c.value===Ue.AREA_2?a+=g:c.value===Ue.AREA_3&&(a+=1.5*g),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,i,n,r,o,a,s,c,l,u,p,d,f={lam:0,phi:0},m={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?m.value=Ue.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(m.value=Ue.AREA_1,e-=h):t.x<0&&-t.x>=Math.abs(t.y)?(m.value=Ue.AREA_2,e=e<0?e+g:e-g):(m.value=Ue.AREA_3,e+=h),l=g/12*Math.tan(e),o=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(n=Math.cos(e))*n*(r=Math.tan(i))*r*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===Ge.TOP)c=Math.acos(s),f.phi=h-c,m.value===Ue.AREA_0?f.lam=a+h:m.value===Ue.AREA_1?f.lam=a<0?a+g:a-g:m.value===Ue.AREA_2?f.lam=a-h:f.lam=a;else if(this.face===Ge.BOTTOM)c=Math.acos(s),f.phi=c-h,m.value===Ue.AREA_0?f.lam=-a+h:m.value===Ue.AREA_1?f.lam=-a:m.value===Ue.AREA_2?f.lam=-a-h:f.lam=a<0?-a-g:-a+g;else{var v,y,_;l=(v=s)*v,y=(l+=(_=l>=1?0:Math.sqrt(1-l)*Math.sin(a))*_)>=1?0:Math.sqrt(1-l),m.value===Ue.AREA_1?(l=y,y=-_,_=l):m.value===Ue.AREA_2?(y=-y,_=-_):m.value===Ue.AREA_3&&(l=y,y=_,_=-l),this.face===Ge.RIGHT?(l=v,v=-y,y=l):this.face===Ge.BACK?(v=-v,y=-y):this.face===Ge.LEFT&&(l=v,v=y,y=-l),f.phi=Math.acos(-_)-h,f.lam=Math.atan2(y,v),this.face===Ge.RIGHT?f.lam=Be(f.lam,-h):this.face===Ge.BACK?f.lam=Be(f.lam,-g):this.face===Ge.LEFT&&(f.lam=Be(f.lam,+h))}return 0!==this.es&&(u=f.phi<0?1:0,p=Math.tan(f.phi),d=this.b/Math.sqrt(p*p+this.one_minus_f_squared),f.phi=Math.atan(Math.sqrt(this.a*this.a-d*d)/(this.one_minus_f*d)),u&&(f.phi=-f.phi)),f.lam+=this.long0,t.x=f.lam,t.y=f.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Ve=[[1,2.2199e-17,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],We=[[-5.20417e-18,.0124,1.21431e-18,-8.45284e-11],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Xe=.8487,Ye=1.3523,qe=f/5,Ke=1/qe,Ze=18,$e=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},Je=function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])};var Qe,ti={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=V(t.x-this.long0),i=Math.abs(t.y),n=Math.floor(i*qe);n<0?n=0:n>=Ze&&(n=Ze-1),i=f*(i-Ke*n);var r={x:$e(Ve[n],i)*e,y:$e(We[n],i)};return t.y<0&&(r.y=-r.y),r.x=r.x*this.a*Xe+this.x0,r.y=r.y*this.a*Ye+this.y0,r},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*Xe),y:Math.abs(t.y-this.y0)/(this.a*Ye)};if(e.y>=1)e.x/=Ve[Ze][0],e.y=t.y<0?-h:h;else{var i=Math.floor(e.y*Ze);for(i<0?i=0:i>=Ze&&(i=Ze-1);;)if(We[i][0]>e.y)--i;else{if(!(We[i+1][0]<=e.y))break;++i}var n=We[i],r=5*(e.y-n[0])/(We[i+1][0]-n[0]);r=function(t,e,i,n){for(var r=e;n;--n){var o=t(r);if(r-=o,Math.abs(o)<i)break}return r}(function(t){return($e(n,t)-e.y)/Je(n,t)},r,p,100),e.x/=$e(Ve[i],r),e.y=(5*i+r)*d,t.y<0&&(e.y=-e.y)}return e.x=V(e.x+this.long0),e},names:["Robinson","robin"]};mt.defaultDatum="WGS84",mt.Proj=rt,mt.WGS84=new mt.Proj("WGS84"),mt.Point=Nt,mt.toPoint=ht,mt.defs=j,mt.transform=ut,mt.mgrs=Et,mt.version=Ft.version,(Qe=mt).Proj.projections.add(Ut),Qe.Proj.projections.add(Yt),Qe.Proj.projections.add(Kt),Qe.Proj.projections.add(Qt),Qe.Proj.projections.add(te),Qe.Proj.projections.add(ee),Qe.Proj.projections.add(ie),Qe.Proj.projections.add(ne),Qe.Proj.projections.add(re),Qe.Proj.projections.add(de),Qe.Proj.projections.add(be),Qe.Proj.projections.add(we),Qe.Proj.projections.add(Ee),Qe.Proj.projections.add(Se),Qe.Proj.projections.add(Ce),Qe.Proj.projections.add(Re),Qe.Proj.projections.add(Ae),Qe.Proj.projections.add(Le),Qe.Proj.projections.add(Ie),Qe.Proj.projections.add(Ne),Qe.Proj.projections.add(Fe),Qe.Proj.projections.add(De),Qe.Proj.projections.add(je),Qe.Proj.projections.add(ke),Qe.Proj.projections.add(He),Qe.Proj.projections.add(ti);e.a=mt},nxYM:function(t,e,i){"use strict";var n=i("6t+W"),r=i("bhTf"),o=i("57Gy"),a=function(t){function e(){t.call(this),this.revision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){++this.revision_,this.dispatchEvent(o.a.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var i=t.length,r=new Array(i),o=0;o<i;++o)r[o]=Object(n.a)(this,t[o],e);return r}return Object(n.a)(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var i=t.length,r=new Array(i),o=0;o<i;++o)r[o]=Object(n.b)(this,t[o],e);return r}return Object(n.b)(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var i=0,r=t.length;i<r;++i)Object(n.c)(this,t[i],e);else Object(n.c)(this,t,e)},e}(r.a);e.a=a},o1CS:function(t,e,i){"use strict";e.a=function(t,e,i,r,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=i,o.maxY=r,o):new n(t,e,i,r)};var n=function(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n};n.prototype.contains=function(t){return this.containsXY(t[1],t[2])},n.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},n.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},n.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},n.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},n.prototype.getHeight=function(){return this.maxY-this.minY+1},n.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},n.prototype.getWidth=function(){return this.maxX-this.minX+1},n.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},e.b=n},"o1z/":function(t,e,i){"use strict";e.a=function(t,e,i){return Math.min(Math.max(t,e),i)},i.d(e,"b",function(){return n}),e.g=function(t,e,i,n,o,a){var s=o-i,h=a-n;if(0!==s||0!==h){var c=((t-i)*s+(e-n)*h)/(s*s+h*h);c>1?(i=o,n=a):c>0&&(i+=s*c,n+=h*c)}return r(t,e,i,n)},e.f=r,e.e=function(t){for(var e=t.length,i=0;i<e;i++){for(var n=i,r=Math.abs(t[i][i]),o=i+1;o<e;o++){var a=Math.abs(t[o][i]);a>r&&(r=a,n=o)}if(0===r)return null;var s=t[n];t[n]=t[i],t[i]=s;for(var h=i+1;h<e;h++)for(var c=-t[h][i]/t[i][i],l=i;l<e+1;l++)i==l?t[h][l]=0:t[h][l]+=c*t[i][l]}for(var u=new Array(e),p=e-1;p>=0;p--){u[p]=t[p][e]/t[p][p];for(var d=p-1;d>=0;d--)t[d][e]-=t[d][p]*u[p]}return u},e.h=function(t){return 180*t/Math.PI},e.i=function(t){return t*Math.PI/180},e.d=function(t,e){var i=t%e;return i*e<0?i+e:i},e.c=function(t,e,i){return t+i*(e-t)};i("OEyb");var n="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function r(t,e,i,n){var r=i-t,o=n-e;return r*r+o*o}},pWpL:function(t,e,i){"use strict";e.a=a,e.b=function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){if(a(t,e,i[o],n,r))return!0;e=i[o]}return!1},e.c=s,e.d=function(t,e,i,n,r){for(var o=0,a=i.length;o<a;++o){var h=i[o];if(s(t,e,h,n,r))return!0;e=h[h.length-1]}return!1};var n=i("/LWt"),r=i("ZXW8"),o=i("vkQb");function a(t,e,i,r,a){var s=Object(n.s)(Object(n.j)(),t,e,i,r);return!!Object(n.F)(a,s)&&(!!Object(n.g)(a,s)||(s[0]>=a[0]&&s[2]<=a[2]||(s[1]>=a[1]&&s[3]<=a[3]||Object(o.a)(t,e,i,r,function(t,e){return Object(n.G)(a,t,e)}))))}function s(t,e,i,n,o){if(!function(t,e,i,n,o){return!!(a(t,e,i,n,o)||Object(r.b)(t,e,i,n,o[0],o[1])||Object(r.b)(t,e,i,n,o[0],o[3])||Object(r.b)(t,e,i,n,o[2],o[1])||Object(r.b)(t,e,i,n,o[2],o[3]))}(t,e,i[0],n,o))return!1;if(1===i.length)return!0;for(var s=1,h=i.length;s<h;++s)if(Object(r.a)(t,i[s-1],i[s],n,o))return!1;return!0}},piqq:function(t,e,i){"use strict";function n(t,e,i,n){for(;e<i-n;){for(var r=0;r<n;++r){var o=t[e+r];t[e+r]=t[i-n+r],t[i-n+r]=o}e+=n,i-=n}}function r(t,e,i,n){for(var r=0,o=t[i-n],a=t[i-n+1];e<i;e+=n){var s=t[e],h=t[e+1];r+=(s-o)*(h+a),o=s,a=h}return r>0}function o(t,e,i,n,o){for(var a=void 0!==o&&o,s=0,h=i.length;s<h;++s){var c=i[s],l=r(t,e,c,n);if(0===s){if(a&&l||!a&&!l)return!1}else if(a&&!l||!a&&l)return!1;e=c}return!0}function a(t,e,i,o,a){for(var s=void 0!==a&&a,h=0,c=i.length;h<c;++h){var l=i[h],u=r(t,e,l,o);(0===h?s&&u||!s&&!u:s&&!u||!s&&u)&&n(t,e,l,o),e=l}return e}e.a=o,e.b=function(t,e,i,n,r){for(var a=0,s=i.length;a<s;++a)if(!o(t,e,i[a],n,r))return!1;return!0},e.c=a,e.d=function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o)e=a(t,e,i[o],n,r);return e}},qARP:function(t,e,i){"use strict";var n=i("lOnJ");t.exports.f=function(t){return new function(t){var e,i;this.promise=new t(function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n}),this.resolve=n(e),this.reject=n(i)}(t)}},qio6:function(t,e,i){var n=i("evD5"),r=i("77Pl"),o=i("lktj");t.exports=i("+E39")?Object.defineProperties:function(t,e){r(t);for(var i,a=o(e),s=a.length,h=0;s>h;)n.f(t,i=a[h++],e[i]);return t}},sB3e:function(t,e,i){var n=i("52gC");t.exports=function(t){return Object(n(t))}},t8x9:function(t,e,i){var n=i("77Pl"),r=i("lOnJ"),o=i("dSzd")("species");t.exports=function(t,e){var i,a=n(t).constructor;return void 0===a||void 0==(i=n(a)[o])?e:r(i)}},tFCN:function(t,e,i){"use strict";i.d(e,"a",function(){return n}),e.b=function(t){for(var e in t)delete t[e]},e.c=function(t){var e=[];for(var i in t)e.push(t[i]);return e},e.d=function(t){var e;for(e in t)return!1;return!e};var n="function"==typeof Object.assign?Object.assign:function(t,e){var i=arguments;if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1,o=arguments.length;r<o;++r){var a=i[r];if(void 0!==a&&null!==a)for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])}return n}},trid:function(t,e,i){"use strict";var n=i("3ciB"),r=i("A90D"),o=i("DM+O"),a=i("LKHy"),s=function(t){function e(e,i,n){t.call(this,e),this.map=i,this.frameState=void 0!==n?n:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.a),h=function(t){function e(e,i,n,r,o){t.call(this,e,i,o),this.originalEvent=n,this.pixel=i.getEventPixel(n),this.coordinate=i.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(s),c=i("4acs"),l=i("57Gy"),u={SINGLECLICK:"singleclick",CLICK:l.a.CLICK,DBLCLICK:l.a.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},p=function(t){function e(e,i,n,r,o){t.call(this,e,i,n.originalEvent,r,o),this.pointerEvent=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(h),d=i("6t+W"),f=i("bhTf"),m={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},v=function(t,e){this.dispatcher=t,this.mapping_=e};v.prototype.getEvents=function(){return Object.keys(this.mapping_)},v.prototype.getHandlerForEvent=function(t){return this.mapping_[t]};var g=v,y=1,_="mouse";function x(t){if(!this.isEventSimulatedFromTouch_(t)){y.toString()in this.pointerMap&&this.cancel(t);var e=T(t,this.dispatcher);this.pointerMap[y.toString()]=t,this.dispatcher.down(e,t)}}function b(t){if(!this.isEventSimulatedFromTouch_(t)){var e=T(t,this.dispatcher);this.dispatcher.move(e,t)}}function M(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[y.toString()];if(e&&e.button===t.button){var i=T(t,this.dispatcher);this.dispatcher.up(i,t),this.cleanupMouse()}}}function w(t){if(!this.isEventSimulatedFromTouch_(t)){var e=T(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function E(t){if(!this.isEventSimulatedFromTouch_(t)){var e=T(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}function T(t,e){var i=e.cloneEvent(t,t),n=i.preventDefault;return i.preventDefault=function(){t.preventDefault(),n()},i.pointerId=y,i.isPrimary=!0,i.pointerType=_,i}var S=function(t){function e(e){var i={mousedown:x,mousemove:b,mouseup:M,mouseover:w,mouseout:E};t.call(this,e,i),this.pointerMap=e.pointerMap,this.lastTouches=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,i=t.clientX,n=t.clientY,r=0,o=e.length,a=void 0;r<o&&(a=e[r]);r++){var s=Math.abs(i-a[0]),h=Math.abs(n-a[1]);if(s<=25&&h<=25)return!0}return!1},e.prototype.cancel=function(t){var e=T(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},e.prototype.cleanupMouse=function(){delete this.pointerMap[y.toString()]},e}(g),C=["","unavailable","touch","pen","mouse"];function O(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)}function R(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)}function A(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)}function L(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)}function P(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)}function I(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)}function N(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)}function F(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)}var D=function(t){function e(e){var i={MSPointerDown:O,MSPointerMove:R,MSPointerUp:A,MSPointerOut:L,MSPointerOver:P,MSPointerCancel:I,MSGotPointerCapture:F,MSLostPointerCapture:N};t.call(this,e,i),this.pointerMap=e.pointerMap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=C[t.pointerType]),e},e.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},e}(g);function j(t){this.dispatcher.fireNativeEvent(t)}function k(t){this.dispatcher.fireNativeEvent(t)}function G(t){this.dispatcher.fireNativeEvent(t)}function U(t){this.dispatcher.fireNativeEvent(t)}function z(t){this.dispatcher.fireNativeEvent(t)}function B(t){this.dispatcher.fireNativeEvent(t)}function H(t){this.dispatcher.fireNativeEvent(t)}function V(t){this.dispatcher.fireNativeEvent(t)}var W=function(t){function e(e){var i={pointerdown:j,pointermove:k,pointerup:G,pointerout:U,pointerover:z,pointercancel:B,gotpointercapture:V,lostpointercapture:H};t.call(this,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(g),X=!1,Y=function(t){function e(e,i,n){t.call(this,e),this.originalEvent=i;var r=n||{};this.buttons=this.getButtons_(r),this.pressure=this.getPressure_(r,this.buttons),this.bubbles="bubbles"in r&&r.bubbles,this.cancelable="cancelable"in r&&r.cancelable,this.view="view"in r?r.view:null,this.detail="detail"in r?r.detail:null,this.screenX="screenX"in r?r.screenX:0,this.screenY="screenY"in r?r.screenY:0,this.clientX="clientX"in r?r.clientX:0,this.clientY="clientY"in r?r.clientY:0,this.ctrlKey="ctrlKey"in r&&r.ctrlKey,this.altKey="altKey"in r&&r.altKey,this.shiftKey="shiftKey"in r&&r.shiftKey,this.metaKey="metaKey"in r&&r.metaKey,this.button="button"in r?r.button:0,this.relatedTarget="relatedTarget"in r?r.relatedTarget:null,this.pointerId="pointerId"in r?r.pointerId:0,this.width="width"in r?r.width:0,this.height="height"in r?r.height:0,this.tiltX="tiltX"in r?r.tiltX:0,this.tiltY="tiltY"in r?r.tiltY:0,this.pointerType="pointerType"in r?r.pointerType:"",this.hwTimestamp="hwTimestamp"in r?r.hwTimestamp:0,this.isPrimary="isPrimary"in r&&r.isPrimary,i.preventDefault&&(this.preventDefault=function(){i.preventDefault()})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getButtons_=function(t){var e;if(t.buttons||X)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e},e.prototype.getPressure_=function(t,e){return t.pressure?t.pressure:e?.5:0},e}(a.a);!function(){try{var t=new MouseEvent("click",{buttons:1});X=1===t.buttons}catch(t){}}();var q=Y,K=i("zF6X");function Z(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function $(t){this.processTouches_(t,this.moveOverOut_)}function J(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function Q(t){this.processTouches_(t,this.cancelOut_)}var tt=function(t){function e(e,i){var n={touchstart:Z,touchmove:$,touchend:J,touchcancel:Q};t.call(this,e,n),this.pointerMap=e.pointerMap,this.mouseSource=i,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_=void 0,this.dedupTimeout_=2500}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},e.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&y.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},e.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},e.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},e.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},e.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},e.prototype.touchToPointer_=function(t,e){var i=this.dispatcher.cloneEvent(t,e);return i.pointerId=e.identifier+2,i.bubbles=!0,i.cancelable=!0,i.detail=this.clickCount_,i.button=0,i.buttons=1,i.width=e.webkitRadiusX||e.radiusX||0,i.height=e.webkitRadiusY||e.radiusY||0,i.pressure=e.webkitForce||e.force||.5,i.isPrimary=this.isPrimaryTouch_(e),i.pointerType="touch",i.clientX=e.clientX,i.clientY=e.clientY,i.screenX=e.screenX,i.screenY=e.screenY,i},e.prototype.processTouches_=function(t,e){var i=Array.prototype.slice.call(t.changedTouches),n=i.length;function r(){t.preventDefault()}for(var o=0;o<n;++o){var a=this.touchToPointer_(t,i[o]);a.preventDefault=r,e.call(this,t,a)}},e.prototype.findTouch_=function(t,e){for(var i=t.length,n=0;n<i;n++){if(t[n].identifier===e)return!0}return!1},e.prototype.vacuumTouches_=function(t){var e=t.touches,i=Object.keys(this.pointerMap),n=i.length;if(n>=e.length){for(var r=[],o=0;o<n;++o){var a=i[o],s=this.pointerMap[a];a==y||this.findTouch_(e,a-2)||r.push(s.out)}for(var h=0;h<r.length;++h)this.cancelOut_(t,r[h])}},e.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},e.prototype.moveOverOut_=function(t,e){var i=e,n=this.pointerMap[i.pointerId];if(n){var r=n.out,o=n.outTarget;this.dispatcher.move(i,t),r&&o!==i.target&&(r.relatedTarget=i.target,i.relatedTarget=o,r.target=o,i.target?(this.dispatcher.leaveOut(r,t),this.dispatcher.enterOver(i,t)):(i.target=o,i.relatedTarget=null,this.cancelOut_(t,i))),n.out=i,n.outTarget=i.target}},e.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},e.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches,i=t.changedTouches[0];if(this.isPrimaryTouch_(i)){var n=[i.clientX,i.clientY];e.push(n),setTimeout(function(){Object(K.h)(e,n)},this.dedupTimeout_)}},e}(g),et=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],it=function(t){function e(e){t.call(this),this.element_=e,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.registerSources=function(){if(c.f)this.registerSource("native",new W(this));else if(c.e)this.registerSource("ms",new D(this));else{var t=new S(this);this.registerSource("mouse",t),c.h&&this.registerSource("touch",new tt(this,t))}this.register_()},e.prototype.registerSource=function(t,e){var i=e,n=i.getEvents();n&&(n.forEach(function(t){var e=i.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(i))}.bind(this)),this.eventSourceList_.push(i))},e.prototype.register_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var i=this.eventSourceList_[e];this.addEvents_(i.getEvents())}},e.prototype.unregister_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var i=this.eventSourceList_[e];this.removeEvents_(i.getEvents())}},e.prototype.eventHandler_=function(t){var e=t.type,i=this.eventMap_[e];i&&i(t)},e.prototype.addEvents_=function(t){t.forEach(function(t){Object(d.a)(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.removeEvents_=function(t){t.forEach(function(t){Object(d.c)(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.cloneEvent=function(t,e){for(var i={},n=0,r=et.length;n<r;n++){var o=et[n][0];i[o]=t[o]||e[o]||et[n][1]}return i},e.prototype.down=function(t,e){this.fireEvent(m.POINTERDOWN,t,e)},e.prototype.move=function(t,e){this.fireEvent(m.POINTERMOVE,t,e)},e.prototype.up=function(t,e){this.fireEvent(m.POINTERUP,t,e)},e.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent(m.POINTERENTER,t,e)},e.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent(m.POINTERLEAVE,t,e)},e.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent(m.POINTEROVER,t,e)},e.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent(m.POINTEROUT,t,e)},e.prototype.cancel=function(t,e){this.fireEvent(m.POINTERCANCEL,t,e)},e.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},e.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},e.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},e.prototype.makeEvent=function(t,e,i){return new q(t,i,e)},e.prototype.fireEvent=function(t,e,i){var n=this.makeEvent(t,e,i);this.dispatchEvent(n)},e.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},e.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,S.prepareEvent(e,this),e)},e.prototype.disposeInternal=function(){this.unregister_(),t.prototype.disposeInternal.call(this)},e}(f.a),nt=function(t){function e(e,i){t.call(this),this.map_=e,this.clickTimeoutId_=0,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=i?i*c.b:c.b,this.down_=null;var n=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new it(n),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=Object(d.a)(this.pointerEventHandler_,m.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=Object(d.a)(this.pointerEventHandler_,m.POINTERMOVE,this.relayEvent_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.emulateClick_=function(t){var e=new p(u.CLICK,this.map_,t);this.dispatchEvent(e),0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=0,e=new p(u.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=0;var e=new p(u.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==u.POINTERUP||e.type==u.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==u.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new p(u.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(d.e),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new p(u.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new it(document),this.dragListenerKeys_.push(Object(d.a)(this.documentPointerEventHandler_,u.POINTERMOVE,this.handlePointerMove_,this),Object(d.a)(this.documentPointerEventHandler_,u.POINTERUP,this.handlePointerUp_,this),Object(d.a)(this.pointerEventHandler_,u.POINTERCANCEL,this.handlePointerUp_,this)))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new p(u.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},e.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new p(t.type,this.map_,t,e))},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Object(d.e)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(Object(d.e)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(d.e),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),t.prototype.disposeInternal.call(this)},e}(f.a),rt={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"},ot={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},at=i("hTFF"),st=i("XOen"),ht=i("XDHy"),ct=i("DL7K"),lt=i("OEyb"),ut=i("tFCN"),pt=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};pt.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Object(ut.b)(this.queuedElements_)},pt.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i},pt.prototype.enqueue=function(t){Object(lt.a)(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},pt.prototype.getCount=function(){return this.elements_.length},pt.prototype.getLeftChildIndex_=function(t){return 2*t+1},pt.prototype.getRightChildIndex_=function(t){return 2*t+2},pt.prototype.getParentIndex_=function(t){return t-1>>1},pt.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},pt.prototype.isEmpty=function(){return 0===this.elements_.length},pt.prototype.isKeyQueued=function(t){return t in this.queuedElements_},pt.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},pt.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,n=e.length,r=e[t],o=i[t],a=t;t<n>>1;){var s=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),c=h<n&&i[h]<i[s]?h:s;e[t]=e[c],i[t]=i[c],t=c}e[t]=r,i[t]=o,this.siftDown_(a,t)},pt.prototype.siftDown_=function(t,e){for(var i=this.elements_,n=this.priorities_,r=i[e],o=n[e];e>t;){var a=this.getParentIndex_(e);if(!(n[a]>o))break;i[e]=i[a],n[e]=n[a],e=a}i[e]=r,n[e]=o},pt.prototype.reprioritize=function(){var t,e,i,n=this.priorityFunction_,r=this.elements_,o=this.priorities_,a=0,s=r.length;for(e=0;e<s;++e)(i=n(t=r[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(o[a]=i,r[a++]=t);r.length=a,o.length=a,this.heapify_()};var dt=function(t){function e(e,i){t.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()}),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.enqueue=function(e){var i=t.prototype.enqueue.call(this,e);if(i){var n=e[0];Object(d.a)(n,l.a.CHANGE,this.handleTileChange,this)}return i},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(i===ct.a.LOADED||i===ct.a.ERROR||i===ct.a.EMPTY||i===ct.a.ABORT){Object(d.c)(e,l.a.CHANGE,this.handleTileChange,this);var n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var i,n,r,o=0,a=!1;this.tilesLoading_<t&&o<e&&this.getCount()>0;)r=(n=this.dequeue()[0]).getKey(),(i=n.getState())===ct.a.ABORT?a=!0:i!==ct.a.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++o,n.load());0===o&&a&&this.tileChangeCallback_()},e}(pt),ft=i("Lfyu"),mt=i("3Q3L"),vt=i("w2Al"),gt=i("/LWt"),yt=i("V2dr"),_t=i("OrOo"),xt=i("9Ewl"),bt={LAYERS:"layers"},Mt=function(t){function e(e){var i=e||{},n=Object(ut.a)({},i);delete n.layers;var o=i.layers;t.call(this,n),this.layersListenerKeys_=[],this.listenerKeys_={},Object(d.a)(this,Object(st.b)(bt.LAYERS),this.handleLayersChanged_,this),o?Array.isArray(o)?o=new r.b(o.slice(),{unique:!0}):(Object(lt.a)(o instanceof r.b,43),o=o):o=new r.b(void 0,{unique:!0}),this.setLayers(o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(d.e),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(Object(d.a)(t,o.a.ADD,this.handleLayersAdd_,this),Object(d.a)(t,o.a.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(d.e);Object(ut.b)(this.listenerKeys_);for(var i=t.getArray(),r=0,a=i.length;r<a;r++){var s=i[r];this.listenerKeys_[Object(n.b)(s).toString()]=[Object(d.a)(s,ht.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(d.a)(s,l.a.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element,i=Object(n.b)(e).toString();this.listenerKeys_[i]=[Object(d.a)(e,ht.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(d.a)(e,l.a.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=t.element,i=Object(n.b)(e).toString();this.listenerKeys_[i].forEach(d.e),delete this.listenerKeys_[i],this.changed()},e.prototype.getLayers=function(){return this.get(bt.LAYERS)},e.prototype.setLayers=function(t){this.set(bt.LAYERS,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],i=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});for(var n=this.getLayerState(),r=i,o=e.length;r<o;r++){var a=e[r];a.opacity*=n.opacity,a.visible=a.visible&&n.visible,a.maxResolution=Math.min(a.maxResolution,n.maxResolution),a.minResolution=Math.max(a.minResolution,n.minResolution),void 0!==n.extent&&(void 0!==a.extent?a.extent=Object(gt.B)(a.extent,n.extent):a.extent=n.extent)}return e},e.prototype.getSourceState=function(){return xt.a.READY},e}(_t.a),wt=i("xifc"),Et=i("azsZ");var Tt=function(t){function e(e){t.call(this);var i=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,n,o,a={},s=t.layers instanceof Mt?t.layers:new Mt({layers:t.layers});a[ot.LAYERGROUP]=s,a[ot.TARGET]=t.target,a[ot.VIEW]=void 0!==t.view?t.view:new ft.a,void 0!==t.controls&&(Array.isArray(t.controls)?i=new r.b(t.controls.slice()):(Object(lt.a)(t.controls instanceof r.b,47),i=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?n=new r.b(t.interactions.slice()):(Object(lt.a)(t.interactions instanceof r.b,48),n=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?o=new r.b(t.overlays.slice()):(Object(lt.a)(t.overlays instanceof r.b,49),o=t.overlays):o=new r.b;return{controls:i,interactions:n,keyboardEventTarget:e,overlays:o,values:a}}(e);this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==e.loadTilesWhileAnimating&&e.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==e.loadTilesWhileInteracting&&e.loadTilesWhileInteracting,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:c.b,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=Object(Et.c)(),this.pixelToCoordinateTransform_=Object(Et.c)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+(c.h?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var n=[l.a.CLICK,l.a.DBLCLICK,l.a.MOUSEDOWN,l.a.TOUCHSTART,l.a.MSPOINTERDOWN,u.POINTERDOWN,l.a.MOUSEWHEEL,l.a.WHEEL],s=0,h=n.length;s<h;++s)Object(d.a)(this.overlayContainerStopEvent_,n[s],a.b);for(var p in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new nt(this,e.moveTolerance),u)Object(d.a)(this.mapBrowserEventHandler_,u[p],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=i.keyboardEventTarget,this.keyHandlerKeys_=null,Object(d.a)(this.viewport_,l.a.CONTEXTMENU,this.handleBrowserEvent,this),Object(d.a)(this.viewport_,l.a.WHEEL,this.handleBrowserEvent,this),Object(d.a)(this.viewport_,l.a.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=i.controls||new r.b,this.interactions=i.interactions||new r.b,this.overlays_=i.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new dt(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},Object(d.a)(this,Object(st.b)(ot.LAYERGROUP),this.handleLayerGroupChanged_,this),Object(d.a)(this,Object(st.b)(ot.VIEW),this.handleViewChanged_,this),Object(d.a)(this,Object(st.b)(ot.SIZE),this.handleSizeChanged_,this),Object(d.a)(this,Object(st.b)(ot.TARGET),this.handleTargetChanged_,this),this.setProperties(i.values),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),Object(d.a)(this.controls,o.a.ADD,function(t){t.element.setMap(this)},this),Object(d.a)(this.controls,o.a.REMOVE,function(t){t.element.setMap(null)},this),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),Object(d.a)(this.interactions,o.a.ADD,function(t){t.element.setMap(this)},this),Object(d.a)(this.interactions,o.a.REMOVE,function(t){t.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),Object(d.a)(this.overlays_,o.a.ADD,function(t){this.addOverlayInternal_(t.element)},this),Object(d.a)(this.overlays_,o.a.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)},this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),Object(d.c)(this.viewport_,l.a.CONTEXTMENU,this.handleBrowserEvent,this),Object(d.c)(this.viewport_,l.a.WHEEL,this.handleBrowserEvent,this),Object(d.c)(this.viewport_,l.a.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(l.a.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,i){if(this.frameState_){var n=this.getCoordinateFromPixel(t),r=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==i.layerFilter?i.layerFilter:yt.b;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,r,e,null,o,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var i=null;return this.forEachFeatureAtPixel(t,function(t){i||(i=[]),i.push(t)},e),i},e.prototype.forEachLayerAtPixel=function(t,e,i){if(this.frameState_){var n=i||{},r=void 0!==n.hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,o=n.layerFilter||yt.b;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,r,e,null,o,null)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var i=this.getCoordinateFromPixel(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:yt.b,r=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,n,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),i=t.changedTouches?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]},e.prototype.getTarget=function(){return this.get(ot.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;return e?Object(Et.a)(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(ot.LAYERGROUP)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;return e?Object(Et.a)(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(ot.SIZE)},e.prototype.getView=function(){return this.get(ot.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,i,n){var r=this.frameState_;if(!(r&&e in r.wantedTiles))return 1/0;if(!r.wantedTiles[e][t.getKey()])return 1/0;var o=i[0]-r.focus[0],a=i[1]-r.focus[1];return 65536*Math.log(n)+Math.sqrt(o*o+a*a)/n},e.prototype.handleBrowserEvent=function(t,e){var i=e||t.type,n=new h(i,this,t);this.handleMapBrowserEvent(n)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){this.focus_=t.coordinate,t.frameState=this.frameState_;var e=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var i=e.length-1;i>=0;i--){var n=e[i];if(n.getActive())if(!n.handleEvent(t))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var i=this.maxTilesLoading_,n=i;if(t){var r=t.viewHints;r[mt.a.ANIMATING]&&(i=this.loadTilesWhileAnimating_?8:0,n=2),r[mt.a.INTERACTING]&&(i=this.loadTilesWhileInteracting_?8:0,n=2)}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,n))}!t||!this.hasListener(rt.RENDERCOMPLETE)||t.animate||this.tileQueue_.getTilesLoading()||function t(e){for(var i=0,n=e.length;i<n;++i){var r=e[i];if(r instanceof Mt)return t(r.getLayers().getArray());var o=e[i].getSource();if(o&&o.loading)return!0}return!1}(this.getLayers().getArray())||this.renderer_.dispatchRenderEvent(at.a.RENDERCOMPLETE,t);for(var o=this.postRenderFunctions_,a=0,s=o.length;a<s;++a)o[a](this,t);o.length=0},e.prototype.handleSizeChanged_=function(){this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,i=this.keyHandlerKeys_.length;e<i;++e)Object(d.e)(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);var n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[Object(d.a)(n,l.a.KEYDOWN,this.handleBrowserEvent,this),Object(d.a)(n,l.a.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),addEventListener(l.a.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),Object(vt.c)(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(l.a.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Object(d.e)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Object(d.e)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",Object(n.b)(t)),this.viewPropertyListenerKey_=Object(d.a)(t,ht.a.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Object(d.a)(t,l.a.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(d.e),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[Object(d.a)(t,ht.a.PROPERTYCHANGE,this.render,this),Object(d.a)(t,l.a.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e,i=this.getSize(),r=this.getView(),o=Object(gt.j)(),a=this.frameState_,h=null;if(void 0!==i&&Object(wt.a)(i)&&r&&r.isDef()){for(var c=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=this.getLayerGroup().getLayerStatesArray(),u={},p=0,d=l.length;p<d;++p)u[Object(n.b)(l[p].layer)]=l[p];e=r.getState(this.pixelRatio_),h={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:o,focus:this.focus_?this.focus_:e.center,index:this.frameIndex_++,layerStates:u,layerStatesArray:l,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:e,viewHints:c,wantedTiles:{}}}if(h&&(h.extent=Object(gt.z)(e.center,e.resolution,e.rotation,h.size,o)),this.frameState_=h,this.renderer_.renderFrame(h),h){if(h.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,h.postRenderFunctions),a)(!this.previousExtent_||!Object(gt.H)(this.previousExtent_)&&!Object(gt.p)(h.extent,this.previousExtent_))&&(this.dispatchEvent(new s(rt.MOVESTART,this,a)),this.previousExtent_=Object(gt.l)(this.previousExtent_));this.previousExtent_&&!h.viewHints[mt.a.ANIMATING]&&!h.viewHints[mt.a.INTERACTING]&&!Object(gt.p)(h.extent,this.previousExtent_)&&(this.dispatchEvent(new s(rt.MOVEEND,this,h)),Object(gt.d)(h.extent,this.previousExtent_))}this.dispatchEvent(new s(rt.POSTRENDER,this,h)),setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(ot.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(ot.SIZE,t)},e.prototype.setTarget=function(t){this.set(ot.TARGET,t)},e.prototype.setView=function(t){this.set(ot.VIEW,t)},e.prototype.skipFeature=function(t){var e=Object(n.b)(t).toString();this.skippedFeatureUids_[e]=!0,this.render()},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},e.prototype.unskipFeature=function(t){var e=Object(n.b)(t).toString();delete this.skippedFeatureUids_[e],this.render()},e}(st.a);var St=function(t){function e(e){t.call(this),this.element=e.element?e.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=e.render?e.render:yt.c,e.target&&this.setTarget(e.target)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){Object(vt.c)(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Object(vt.c)(this.element);for(var e=0,i=this.listenerKeys.length;e<i;++e)Object(d.e)(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==yt.c&&this.listenerKeys.push(Object(d.a)(t,rt.POSTRENDER,this.render,this)),t.render())},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(st.a),Ct=i("CTDj"),Ot=i("+iwx");function Rt(t){this.updateElement_(t.frameState)}var At=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||Rt,target:i.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===i.collapsed||i.collapsed,this.collapsible_=void 0===i.collapsible||i.collapsible,this.collapsible_||(this.collapsed_=!1);var n=void 0!==i.className?i.className:"ol-attribution",r=void 0!==i.tipLabel?i.tipLabel:"Attributions",o=void 0!==i.collapseLabel?i.collapseLabel:"»";"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o):this.collapseLabel_=o;var a=void 0!==i.label?i.label:"i";"string"==typeof a?(this.label_=document.createElement("span"),this.label_.textContent=a):this.label_=a;var s=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=r,h.appendChild(s),Object(d.a)(h,l.a.CLICK,this.handleClick_,this);var c=n+" "+Ct.d+" "+Ct.b+(this.collapsed_&&this.collapsible_?" "+Ct.a:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.ulElement_),u.appendChild(h),this.renderedAttributions_=[],this.renderedVisible_=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getSourceAttributions_=function(t){for(var e={},i=[],n=t.layerStatesArray,r=t.viewState.resolution,o=0,a=n.length;o<a;++o){var s=n[o];if(Object(Ot.b)(s,r)){var h=s.layer.getSource();if(h){var c=h.getAttributions();if(c){var l=c(t);if(l)if(Array.isArray(l))for(var u=0,p=l.length;u<p;++u)l[u]in e||(i.push(l[u]),e[l[u]]=!0);else l in e||(i.push(l),e[l]=!0)}}}}return i},e.prototype.updateElement_=function(t){if(t){var e=this.getSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Object(K.b)(e,this.renderedAttributions_)){Object(vt.b)(this.ulElement_);for(var n=0,r=e.length;n<r;++n){var o=document.createElement("li");o.innerHTML=e[n],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(Ct.a),this.collapsed_?Object(vt.d)(this.collapseLabel_,this.label_):Object(vt.d)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(St),Lt=i("2S6f");function Pt(t){var e=t.frameState;if(e){var i=e.viewState.rotation;if(i!=this.rotation_){var n="rotate("+i+"rad)";if(this.autoHide_){var r=this.element.classList.contains(Ct.c);r||0!==i?r&&0!==i&&this.element.classList.remove(Ct.c):this.element.classList.add(Ct.c)}this.label_.style.msTransform=n,this.label_.style.webkitTransform=n,this.label_.style.transform=n}this.rotation_=i}}var It=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||Pt,target:i.target});var n=void 0!==i.className?i.className:"ol-rotate",r=void 0!==i.label?i.label:"⇧";this.label_=null,"string"==typeof r?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=r):(this.label_=r,this.label_.classList.add("ol-compass"));var o=i.tipLabel?i.tipLabel:"Reset rotation",a=document.createElement("button");a.className=n+"-reset",a.setAttribute("type","button"),a.title=o,a.appendChild(this.label_),Object(d.a)(a,l.a.CLICK,this.handleClick_,this);var s=n+" "+Ct.d+" "+Ct.b,h=this.element;h.className=s,h.appendChild(a),this.callResetNorth_=i.resetNorth?i.resetNorth:void 0,this.duration_=void 0!==i.duration?i.duration:250,this.autoHide_=void 0===i.autoHide||i.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Ct.c)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:Lt.b}):t.setRotation(0))},e}(St),Nt=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),target:i.target});var n=void 0!==i.className?i.className:"ol-zoom",r=void 0!==i.delta?i.delta:1,o=void 0!==i.zoomInLabel?i.zoomInLabel:"+",a=void 0!==i.zoomOutLabel?i.zoomOutLabel:"−",s=void 0!==i.zoomInTipLabel?i.zoomInTipLabel:"Zoom in",h=void 0!==i.zoomOutTipLabel?i.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=n+"-in",c.setAttribute("type","button"),c.title=s,c.appendChild("string"==typeof o?document.createTextNode(o):o),Object(d.a)(c,l.a.CLICK,this.handleClick_.bind(this,r));var u=document.createElement("button");u.className=n+"-out",u.setAttribute("type","button"),u.title=h,u.appendChild("string"==typeof a?document.createTextNode(a):a),Object(d.a)(u,l.a.CLICK,this.handleClick_.bind(this,-r));var p=n+" "+Ct.d+" "+Ct.b,f=this.element;f.className=p,f.appendChild(c),f.appendChild(u),this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var i=e.getResolution();if(i){var n=e.constrainResolution(i,t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:n,duration:this.duration_,easing:Lt.b})):e.setResolution(n)}}},e}(St);var Ft=function(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0};Ft.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},Ft.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},Ft.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var i=e-3;i>0&&this.points_[i+2]>t;)i-=3;var n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;var r=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/n,this.initialVelocity_>this.minVelocity_},Ft.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},Ft.prototype.getAngle=function(){return this.angle_};var Dt=Ft,jt={ACTIVE:"active"},kt=i("o1z/");function Gt(t,e,i,n){Ut(t,e=t.constrainRotation(e,0),i,n)}function Ut(t,e,i,n){if(void 0!==e){var r=t.getRotation(),o=t.getCenter();void 0!==r&&o&&n>0?t.animate({rotation:e,anchor:i,duration:n,easing:Lt.b}):t.rotate(e,i)}}function zt(t,e,i,n,r){Ht(t,e=t.constrainResolution(e,0,r),i,n)}function Bt(t,e,i,n){var r=t.getResolution(),o=t.constrainResolution(r,e,0);if(void 0!==o){var a=t.getResolutions();o=Object(kt.a)(o,t.getMinResolution()||a[a.length-1],t.getMaxResolution()||a[0])}if(i&&void 0!==o&&o!==r){var s=t.getCenter(),h=t.calculateCenterZoom(o,i);h=t.constrainCenter(h),i=[(o*s[0]-r*h[0])/(o-r),(o*s[1]-r*h[1])/(o-r)]}Ht(t,o,i,n)}function Ht(t,e,i,n){if(e){var r=t.getResolution(),o=t.getCenter();if(void 0!==r&&o&&e!==r&&n)t.animate({resolution:e,anchor:i,duration:n,easing:Lt.b});else{if(i){var a=t.calculateCenterZoom(e,i);t.setCenter(a)}t.setResolution(e)}}}var Vt=function(t){function e(e){t.call(this),this.map_=null,this.setActive(!0),this.handleEvent=e.handleEvent}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getActive=function(){return this.get(jt.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.setActive=function(t){this.set(jt.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(st.a);function Wt(t){var e=!1,i=t.originalEvent;if(t.type==u.DBLCLICK){var n=t.map,r=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_;Bt(n.getView(),o,r,this.duration_),t.preventDefault(),e=!0}return!e}var Xt=function(t){function e(e){t.call(this,{handleEvent:Wt});var i=e||{};this.delta_=i.delta?i.delta:1,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Vt),Yt=i("IZoy"),qt=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Kt=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Zt=function(t){return t.target.getTargetElement()===document.activeElement},$t=yt.b,Jt=function(t){var e=t.originalEvent;return 0==e.button&&!(c.i&&c.d&&e.ctrlKey)},Qt=yt.a,te=function(t){return"pointermove"==t.type},ee=function(t){return t.type==u.SINGLECLICK},ie=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},ne=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},re=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},oe=function(t){return Object(lt.a)(t.pointerEvent,56),"mouse"==t.pointerEvent.pointerType},ae=function(t){var e=t.pointerEvent;return e.isPrimary&&0===e.button},se=yt.c,he=yt.a,ce=yt.a,le=yt.c;function ue(t){for(var e=t.length,i=0,n=0,r=0;r<e;r++)i+=t[r].clientX,n+=t[r].clientY;return[i/e,n/e]}function pe(t){if(!(t instanceof p))return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==u.POINTERDRAG)this.handleDragEvent_(t);else if(t.type==u.POINTERUP){var i=this.handleUpEvent_(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==u.POINTERDOWN){var n=this.handleDownEvent_(t);n&&t.preventDefault(),this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==u.POINTERMOVE&&this.handleMoveEvent_(t);return!e}var de=function(t){function e(e){var i=e||{};t.call(this,{handleEvent:i.handleEvent||pe}),this.handleDownEvent_=i.handleDownEvent?i.handleDownEvent:ce,this.handleDragEvent_=i.handleDragEvent?i.handleDragEvent:se,this.handleMoveEvent_=i.handleMoveEvent?i.handleMoveEvent:le,this.handleUpEvent_=i.handleUpEvent?i.handleUpEvent:he,this.handlingDownUpSequence=!1,this.stopDown=i.stopDown?i.stopDown:fe,this.trackedPointers_={},this.targetPointers=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===u.POINTERDOWN||e===u.POINTERDRAG||e===u.POINTERUP}(t)){var e=t.pointerEvent,i=e.pointerId.toString();t.type==u.POINTERUP?delete this.trackedPointers_[i]:t.type==u.POINTERDOWN?this.trackedPointers_[i]=e:i in this.trackedPointers_&&(this.trackedPointers_[i]=e),this.targetPointers=Object(ut.c)(this.trackedPointers_)}},e}(Vt);function fe(t){return t}function me(t){this.panning_||(this.panning_=!0,this.getMap().getView().setHint(mt.a.INTERACTING,1));var e=this.targetPointers,i=ue(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var n=this.lastCentroid[0]-i[0],r=i[1]-this.lastCentroid[1],o=t.map.getView(),a=[n,r];Object(Yt.g)(a,o.getResolution()),Object(Yt.f)(a,o.getRotation()),Object(Yt.a)(a,o.getCenter()),a=o.constrainCenter(a),o.setCenter(a)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length}function ve(t){var e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=i.getCenter(),a=e.getPixelFromCoordinate(o),s=e.getCoordinateFromPixel([a[0]-n*Math.cos(r),a[1]-n*Math.sin(r)]);i.animate({center:i.constrainCenter(s),duration:500,easing:Lt.b})}return this.panning_&&(this.panning_=!1,i.setHint(mt.a.INTERACTING,-1)),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}function ge(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}var ye=function(t){function e(e){t.call(this,{handleDownEvent:ge,handleDragEvent:me,handleUpEvent:ve,stopDown:yt.a});var i=e||{};this.kinetic_=i.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1,this.condition_=i.condition?i.condition:ie,this.noKinetic_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(de),_e=i("xek4");function xe(t){if(oe(t)){var e=t.map,i=e.getView();if(i.getConstraints().rotation!==_e.c){var n=e.getSize(),r=t.pixel,o=Math.atan2(n[1]/2-r[1],r[0]-n[0]/2);if(void 0!==this.lastAngle_){var a=o-this.lastAngle_;Ut(i,i.getRotation()-a)}this.lastAngle_=o}}}function be(t){if(!oe(t))return!0;var e=t.map.getView();return e.setHint(mt.a.INTERACTING,-1),Gt(e,e.getRotation(),void 0,this.duration_),!1}function Me(t){return!!oe(t)&&(!(!Jt(t)||!this.condition_(t))&&(t.map.getView().setHint(mt.a.INTERACTING,1),this.lastAngle_=void 0,!0))}var we=function(t){function e(e){var i=e||{};t.call(this,{handleDownEvent:Me,handleDragEvent:xe,handleUpEvent:be,stopDown:yt.a}),this.condition_=i.condition?i.condition:Kt,this.lastAngle_=void 0,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(de),Ee=i("IU0A"),Te=i("ZYQ1"),Se=function(t){function e(e){t.call(this),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i=this.element_.style;i.left=Math.min(t[0],e[0])+"px",i.top=Math.min(t[1],e[1])+"px",i.width=Math.abs(e[0]-t[0])+"px",i.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Te.a([i])},e.prototype.getGeometry=function(){return this.geometry_},e}(Ee.a),Ce={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"},Oe=function(t){function e(e,i,n){t.call(this,e),this.coordinate=i,this.mapBrowserEvent=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.a);function Re(t,e,i){var n=i[0]-e[0],r=i[1]-e[1];return n*n+r*r>=this.minArea_}function Ae(t){oe(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Oe(Ce.BOXDRAG,t.coordinate,t)))}function Le(t){return!oe(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new Oe(Ce.BOXEND,t.coordinate,t))),!1)}function Pe(t){return!!oe(t)&&(!(!Jt(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Oe(Ce.BOXSTART,t.coordinate,t)),!0))}function Ie(){var t=this.getMap(),e=t.getView(),i=t.getSize(),n=this.getGeometry().getExtent();if(this.out_){var r=e.calculateExtent(i),o=Object(gt.n)([t.getPixelFromCoordinate(Object(gt.v)(n)),t.getPixelFromCoordinate(Object(gt.D)(n))]),a=e.getResolutionForExtent(o,i);Object(gt.J)(r,1/a),n=r}var s=e.constrainResolution(e.getResolutionForExtent(n,i)),h=Object(gt.x)(n);h=e.constrainCenter(h),e.animate({resolution:s,center:h,duration:this.duration_,easing:Lt.b})}var Ne=function(t){function e(e){var i=e||{},n=i.condition?i.condition:ne;t.call(this,{condition:n,className:i.className||"ol-dragzoom",onBoxEnd:Ie}),this.duration_=void 0!==i.duration?i.duration:200,this.out_=void 0!==i.out&&i.out}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(function(t){function e(e){t.call(this,{handleDownEvent:Pe,handleDragEvent:Ae,handleUpEvent:Le});var i=e||{};this.box_=new Se(i.className||"ol-dragbox"),this.minArea_=void 0!==i.minArea?i.minArea:64,this.onBoxEnd_=i.onBoxEnd?i.onBoxEnd:yt.c,this.startPixel_=null,this.condition_=i.condition?i.condition:$t,this.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:Re}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getGeometry=function(){return this.box_.getGeometry()},e}(de)),Fe={LEFT:37,UP:38,RIGHT:39,DOWN:40};function De(t){var e=!1;if(t.type==l.a.KEYDOWN){var i=t.originalEvent.keyCode;if(this.condition_(t)&&(i==Fe.DOWN||i==Fe.LEFT||i==Fe.RIGHT||i==Fe.UP)){var n=t.map.getView(),r=n.getResolution()*this.pixelDelta_,o=0,a=0;i==Fe.DOWN?a=-r:i==Fe.LEFT?o=-r:i==Fe.RIGHT?o=r:a=r;var s=[o,a];Object(Yt.f)(s,n.getRotation()),function(t,e,i){var n=t.getCenter();if(n){var r=t.constrainCenter([n[0]+e[0],n[1]+e[1]]);i?t.animate({duration:i,easing:Lt.d,center:r}):t.setCenter(r)}}(n,s,this.duration_),t.preventDefault(),e=!0}}return!e}var je=function(t){function e(e){t.call(this,{handleEvent:De});var i=e||{};this.defaultCondition_=function(t){return ie(t)&&re(t)},this.condition_=void 0!==i.condition?i.condition:this.defaultCondition_,this.duration_=void 0!==i.duration?i.duration:100,this.pixelDelta_=void 0!==i.pixelDelta?i.pixelDelta:128}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Vt);function ke(t){var e=!1;if(t.type==l.a.KEYDOWN||t.type==l.a.KEYPRESS){var i=t.originalEvent.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var n=t.map,r=i=="+".charCodeAt(0)?this.delta_:-this.delta_;Bt(n.getView(),r,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var Ge=function(t){function e(e){t.call(this,{handleEvent:ke});var i=e||{};this.condition_=i.condition?i.condition:re,this.delta_=i.delta?i.delta:1,this.duration_=void 0!==i.duration?i.duration:100}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Vt),Ue={TRACKPAD:"trackpad",WHEEL:"wheel"};function ze(t){if(!this.condition_(t))return!0;var e=t.type;if(e!==l.a.WHEEL&&e!==l.a.MOUSEWHEEL)return!0;t.preventDefault();var i,n=t.map,r=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==l.a.WHEEL?(i=r.deltaY,c.c&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=c.b),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)):t.type==l.a.MOUSEWHEEL&&(i=-r.wheelDeltaY,c.g&&(i/=3)),0===i)return!1;var o=Date.now();if(void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?Ue.TRACKPAD:Ue.WHEEL),this.mode_===Ue.TRACKPAD){var a=n.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):a.setHint(mt.a.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var s=a.getResolution()*Math.pow(2,i/this.trackpadDeltaPerZoom_),h=a.getMinResolution(),u=a.getMaxResolution(),p=0;if(s<h?(s=Math.max(s,h/this.trackpadZoomBuffer_),p=1):s>u&&(s=Math.min(s,u*this.trackpadZoomBuffer_),p=-1),this.lastAnchor_){var d=a.calculateCenterZoom(s,this.lastAnchor_);a.setCenter(a.constrainCenter(d))}return a.setResolution(s),0===p&&this.constrainResolution_&&a.animate({resolution:a.constrainResolution(s,i>0?-1:1),easing:Lt.b,anchor:this.lastAnchor_,duration:this.duration_}),p>0?a.animate({resolution:h,easing:Lt.b,anchor:this.lastAnchor_,duration:500}):p<0&&a.animate({resolution:u,easing:Lt.b,anchor:this.lastAnchor_,duration:500}),this.startTime_=o,!1}this.delta_+=i;var f=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),f),!1}var Be=function(t){function e(e){t.call(this,{handleEvent:ze});var i=e||{};this.delta_=0,this.duration_=void 0!==i.duration?i.duration:250,this.timeout_=void 0!==i.timeout?i.timeout:80,this.useAnchor_=void 0===i.useAnchor||i.useAnchor,this.constrainResolution_=i.constrainResolution||!1,this.condition_=i.condition?i.condition:$t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_=void 0,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(mt.a.INTERACTING,-1)},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();Bt(e,-Object(kt.a)(this.delta_,-1,1),this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(Vt);function He(t){var e=0,i=this.targetPointers[0],n=this.targetPointers[1],r=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(void 0!==this.lastAngle_){var o=r-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=r;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==_e.c){var h=a.getViewport().getBoundingClientRect(),c=ue(this.targetPointers);if(c[0]-=h.left,c[1]-=h.top,this.anchor_=a.getCoordinateFromPixel(c),this.rotating_){var l=s.getRotation();a.render(),Ut(s,l+e,this.anchor_)}}}function Ve(t){if(this.targetPointers.length<2){var e=t.map.getView();if(e.setHint(mt.a.INTERACTING,-1),this.rotating_)Gt(e,e.getRotation(),this.anchor_,this.duration_);return!1}return!0}function We(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(mt.a.INTERACTING,1),!0}return!1}var Xe=function(t){function e(e){t.call(this,{handleDownEvent:We,handleDragEvent:He,handleUpEvent:Ve,stopDown:yt.a});var i=e||{};this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==i.threshold?i.threshold:.3,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(de);function Ye(t){var e=1,i=this.targetPointers[0],n=this.targetPointers[1],r=i.clientX-n.clientX,o=i.clientY-n.clientY,a=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,h=s.getView(),c=h.getResolution(),l=h.getMaxResolution(),u=h.getMinResolution(),p=c*e;p>l?(e=l/c,p=l):p<u&&(e=u/c,p=u),1!=e&&(this.lastScaleDelta_=e);var d=s.getViewport().getBoundingClientRect(),f=ue(this.targetPointers);f[0]-=d.left,f[1]-=d.top,this.anchor_=s.getCoordinateFromPixel(f),s.render(),Ht(h,p,this.anchor_)}function qe(t){if(this.targetPointers.length<2){var e=t.map.getView();e.setHint(mt.a.INTERACTING,-1);var i=e.getResolution();if(this.constrainResolution_||i<e.getMinResolution()||i>e.getMaxResolution()){var n=this.lastScaleDelta_-1;zt(e,i,this.anchor_,this.duration_,n)}return!1}return!0}function Ke(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(mt.a.INTERACTING,1),!0}return!1}var Ze=function(t){function e(e){t.call(this,{handleDownEvent:Ke,handleDragEvent:Ye,handleUpEvent:qe,stopDown:yt.a});var i=e||{};this.constrainResolution_=i.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==i.duration?i.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(de),$e=i("yGLh"),Je="addfeatures",Qe=function(t){function e(e,i,n,r){t.call(this,e),this.features=n,this.file=i,this.projection=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.a);function ti(t){for(var e=t.dataTransfer.files,i=0,n=e.length;i<n;++i){var r=e.item(i),o=new FileReader;o.addEventListener(l.a.LOAD,this.handleResult_.bind(this,r)),o.readAsText(r)}}function ei(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}!function(t){function e(e){var i=e||{};t.call(this,{handleEvent:yt.b}),this.formatConstructors_=i.formatConstructors?i.formatConstructors:[],this.projection_=i.projection?Object($e.d)(i.projection):null,this.dropListenKeys_=null,this.source_=i.source||null,this.target=i.target?i.target:null}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleResult_=function(t,e){var i=e.target.result,n=this.getMap(),r=this.projection_;r||(r=n.getView().getProjection());for(var o=this.formatConstructors_,a=[],s=0,h=o.length;s<h;++s){var c=new(0,o[s]);if((a=this.tryReadFeatures_(c,i,{featureProjection:r}))&&a.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(a)),this.dispatchEvent(new Qe(Je,t,a,r))},e.prototype.registerListeners_=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.dropListenKeys_=[Object(d.a)(e,l.a.DROP,ti,this),Object(d.a)(e,l.a.DRAGENTER,ei,this),Object(d.a)(e,l.a.DRAGOVER,ei,this),Object(d.a)(e,l.a.DROP,ei,this)]}},e.prototype.setActive=function(e){t.prototype.setActive.call(this,e),e?this.registerListeners_():this.unregisterListeners_()},e.prototype.setMap=function(e){this.unregisterListeners_(),t.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},e.prototype.tryReadFeatures_=function(t,e,i){try{return t.readFeatures(e,i)}catch(t){return null}},e.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(d.e),this.dropListenKeys_=null)}}(Vt);function ii(t){if(oe(t)){var e=t.map,i=e.getSize(),n=t.pixel,r=n[0]-i[0]/2,o=i[1]/2-n[1],a=Math.atan2(o,r),s=Math.sqrt(r*r+o*o),h=e.getView();if(h.getConstraints().rotation!==_e.c&&void 0!==this.lastAngle_){var c=a-this.lastAngle_;Ut(h,h.getRotation()-c)}if(this.lastAngle_=a,void 0!==this.lastMagnitude_)Ht(h,this.lastMagnitude_*(h.getResolution()/s));void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/s),this.lastMagnitude_=s}}function ni(t){if(!oe(t))return!0;var e=t.map.getView();e.setHint(mt.a.INTERACTING,-1);var i=this.lastScaleDelta_-1;return Gt(e,e.getRotation()),zt(e,e.getResolution(),void 0,this.duration_,i),this.lastScaleDelta_=0,!1}function ri(t){return!!oe(t)&&(!!this.condition_(t)&&(t.map.getView().setHint(mt.a.INTERACTING,1),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))}!function(t){function e(e){var i=e||{};t.call(this,{handleDownEvent:ri,handleDragEvent:ii,handleUpEvent:ni}),this.condition_=i.condition?i.condition:ne,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==i.duration?i.duration:400}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e}(de);var oi=i("nq2H"),ai=i("Fu+J"),si=i("VgFP"),hi=i("hrLW"),ci=function(t){function e(e,i,n){if(t.call(this),void 0!==n&&void 0===i)this.setFlatCoordinates(n,e);else{var r=i||0;this.setCenterAndRadius(e,r,n)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,i,n){var r=this.flatCoordinates,o=t-r[0],a=e-r[1],s=o*o+a*a;if(s<n){if(0===s)for(var h=0;h<this.stride;++h)i[h]=r[h];else{var c=this.getRadius()/Math.sqrt(s);i[0]=r[0]+c*o,i[1]=r[1]+c*a;for(var l=2;l<this.stride;++l)i[l]=r[l]}return i.length=this.stride,s}return n},e.prototype.containsXY=function(t,e){var i=this.flatCoordinates,n=t-i[0],r=e-i[1];return n*n+r*r<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return Object(gt.k)(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return ai.a.CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if(Object(gt.F)(t,e)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||(t[1]<=i[1]&&t[3]>=i[1]||Object(gt.t)(t,this.intersectsCoordinate,this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+i;for(var r=1;r<e;++r)n[e+r]=t[r];this.setFlatCoordinates(this.layout,n),this.changed()},e.prototype.setCenterAndRadius=function(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,r=Object(hi.a)(n,0,t,this.stride);n[r++]=n[0]+e;for(var o=1,a=this.stride;o<a;++o)n[r++]=n[o];n.length=r,this.changed()},e.prototype.getCoordinates=function(){},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e}(si.a);ci.prototype.transform;var li=ci,ui=i("grfP"),pi=i("5t69"),di=i("i3aX"),fi=i("AT16"),mi=i("T18w"),vi=i("Umvz"),gi=i("WMwB"),yi=i("Mjwz"),_i={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},xi="drawstart",bi="drawend",Mi=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.a);function wi(t){t.originalEvent.type===l.a.CONTEXTMENU&&t.preventDefault(),this.freehand_=this.mode_!==_i.POINT&&this.freehandCondition_(t);var e=t.type===u.POINTERMOVE,i=!0;this.lastDragTime_&&t.type===u.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&t.type===u.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t),i=!1):this.freehand_&&t.type===u.POINTERDOWN?i=!1:e?(i=t.type===u.POINTERMOVE)&&this.freehand_?i=this.handlePointerMove_(t):(t.pointerEvent.pointerType==_||t.type===u.POINTERDRAG&&!this.downTimeout_)&&this.handlePointerMove_(t):t.type===u.DBLCLICK&&(i=!1),pe.call(this,t)&&i}function Ei(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new p(u.POINTERMOVE,t.map,t.pointerEvent,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)}function Ti(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var i=this.mode_===_i.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===_i.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e}!function(t){function e(e){t.call(this,{handleDownEvent:Ei,handleEvent:wi,handleUpEvent:Ti,stopDown:yt.a}),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=function(t){var e;t===ai.a.POINT||t===ai.a.MULTI_POINT?e=_i.POINT:t===ai.a.LINE_STRING||t===ai.a.MULTI_LINE_STRING?e=_i.LINE_STRING:t===ai.a.POLYGON||t===ai.a.MULTI_POLYGON?e=_i.POLYGON:t===ai.a.CIRCLE&&(e=_i.CIRCLE);return e}(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_===_i.POLYGON?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:yt.b;var i,n=e.geometryFunction;if(!n)if(this.type_===ai.a.CIRCLE)n=function(t,e){var i=e||new li([NaN,NaN]),n=Object(Yt.h)(t[0],t[1]);return i.setCenterAndRadius(t[0],Math.sqrt(n)),i};else{var r,o=this.mode_;o===_i.POINT?r=mi.a:o===_i.LINE_STRING?r=ui.a:o===_i.POLYGON&&(r=Te.a),n=function(t,e){var i=e;return i?o===_i.POLYGON?t[0].length?i.setCoordinates([t[0].concat([t[0][0]])]):i.setCoordinates([]):i.setCoordinates(t):i=new r(t),i}}this.geometryFunction_=n,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new vi.a({source:new gi.b({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(i=Object(yi.b)(),function(t,e){return i[t.getGeometry().getType()]}),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:ie,this.freehandCondition_,e.freehand?this.freehandCondition_=$t:this.freehandCondition_=e.freehandCondition?e.freehandCondition:ne,Object(d.a)(this,Object(st.b)(jt.ACTIVE),this.updateState_,this)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,n=e[0]-i[0],r=e[1]-i[1],o=n*n+r*r;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,n=[this.finishCoordinate_];if(this.mode_===_i.LINE_STRING?i=this.sketchCoords_.length>this.minPoints_:this.mode_===_i.POLYGON&&(i=this.sketchCoords_[0].length>this.minPoints_,n=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]),i)for(var r=t.map,o=0,a=n.length;o<a;o++){var s=n[o],h=r.getPixelFromCoordinate(s),c=t.pixel,l=c[0]-h[0],u=c[1]-h[1],p=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(l*l+u*u)<=p){this.finishCoordinate_=s;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new oi.a(new mi.a(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===_i.POINT?this.sketchCoords_=e.slice():this.mode_===_i.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new oi.a(new ui.a(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new oi.a,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new Mi(xi,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,i,n,r=t.coordinate,o=this.sketchFeature_.getGeometry();(this.mode_===_i.POINT?i=this.sketchCoords_:this.mode_===_i.POLYGON?(i=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(r=this.finishCoordinate_.slice())):i=(e=this.sketchCoords_)[e.length-1],i[0]=r[0],i[1]=r[1],this.geometryFunction_(this.sketchCoords_,o),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(r);if(o instanceof Te.a&&this.mode_!==_i.POLYGON){this.sketchLine_||(this.sketchLine_=new oi.a);var a=o.getLinearRing(0);(n=this.sketchLine_.getGeometry())?(n.setFlatCoordinates(a.getLayout(),a.getFlatCoordinates()),n.changed()):(n=new ui.a(a.getFlatCoordinates(),a.getLayout()),this.sketchLine_.setGeometry(n))}else this.sketchLineCoords_&&(n=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,i,n=t.coordinate,r=this.sketchFeature_.getGeometry();this.mode_===_i.LINE_STRING?(this.finishCoordinate_=n.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(n.slice()),this.geometryFunction_(i,r)):this.mode_===_i.POLYGON&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(n.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,r)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry();this.mode_===_i.LINE_STRING?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===_i.POLYGON&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry();this.mode_===_i.LINE_STRING?(e.pop(),this.geometryFunction_(e,i)):this.mode_===_i.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i),e=i.getCoordinates()),this.type_===ai.a.MULTI_POINT?t.setGeometry(new di.a([e])):this.type_===ai.a.MULTI_LINE_STRING?t.setGeometry(new pi.a([e])):this.type_===ai.a.MULTI_POLYGON&&t.setGeometry(new fi.a([e])),this.dispatchEvent(new Mi(bi,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new Mi(xi,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)}}(de);var Si={EXTENTCHANGED:"extentchanged"},Ci=function(t){function e(e){t.call(this,Si.EXTENTCHANGED),this.extent=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.a);function Oi(t){return!(t instanceof p)||(t.type!=u.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),pe.call(this,t),!1)}function Ri(t){var e=t.pixel,i=t.map,n=this.getExtent(),r=this.snapToVertex_(e,i),o=function(t){var e=null,i=null;return t[0]==n[0]?e=n[2]:t[0]==n[2]&&(e=n[0]),t[1]==n[1]?i=n[3]:t[1]==n[3]&&(i=n[1]),null!==e&&null!==i?[e,i]:null};if(r&&n){var a=r[0]==n[0]||r[0]==n[2]?r[0]:null,s=r[1]==n[1]||r[1]==n[3]?r[1]:null;null!==a&&null!==s?this.pointerHandler_=Pi(o(r)):null!==a?this.pointerHandler_=Ii(o([a,n[1]]),o([a,n[3]])):null!==s&&(this.pointerHandler_=Ii(o([n[0],s]),o([n[2],s])))}else r=i.getCoordinateFromPixel(e),this.setExtent([r[0],r[1],r[0],r[1]]),this.pointerHandler_=Pi(r);return!0}function Ai(t){if(this.pointerHandler_){var e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}return!0}function Li(t){this.pointerHandler_=null;var e=this.getExtent();return e&&0!==Object(gt.u)(e)||this.setExtent(null),!1}function Pi(t){return function(e){return Object(gt.b)([t,e])}}function Ii(t,e){return t[0]==e[0]?function(i){return Object(gt.b)([t,[i[0],e[1]]])}:t[1]==e[1]?function(i){return Object(gt.b)([t,[e[0],i[1]]])}:null}!function(t){function e(e){t.call(this,{handleDownEvent:Ri,handleDragEvent:Ai,handleEvent:Oi,handleUpEvent:Li});var i,n=e||{};this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,e||(e={}),this.extentOverlay_=new vi.a({source:new gi.b({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:(i=Object(yi.b)(),function(t,e){return i[ai.a.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new vi.a({source:new gi.b({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:function(){var t=Object(yi.b)();return function(e,i){return t[ai.a.POINT]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&this.setExtent(e.extent)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapToVertex_=function(t,e){var i=e.getCoordinateFromPixel(t),n=this.getExtent();if(n){var r=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(n);r.sort(function(t,e){return Object(Yt.i)(i,t)-Object(Yt.i)(i,e)});var o=r[0],a=Object(Yt.c)(i,o),s=e.getPixelFromCoordinate(a);if(Object(Yt.d)(t,s)<=this.pixelTolerance_){var h=e.getPixelFromCoordinate(o[0]),c=e.getPixelFromCoordinate(o[1]),l=Object(Yt.h)(s,h),u=Object(Yt.h)(s,c),p=Math.sqrt(Math.min(l,u));return this.snappedToVertex_=p<=this.pixelTolerance_,this.snappedToVertex_&&(a=l>u?o[1]:o[0]),a}}return null},e.prototype.handlePointerMove_=function(t){var e=t.pixel,i=t.map,n=this.snapToVertex_(e,i);n||(n=i.getCoordinateFromPixel(e)),this.createOrUpdatePointerFeature_(n)},e.prototype.createOrUpdateExtentFeature_=function(t){var e=this.extentFeature_;return e?t?e.setGeometry(Object(Te.c)(t)):e.setGeometry(void 0):(e=t?new oi.a(Object(Te.c)(t)):new oi.a({}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},e.prototype.createOrUpdatePointerFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new oi.a(new mi.a(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e));return e},e.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getExtent=function(){return this.extent_},e.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new Ci(this.extent_))}}(de);var Ni=i("NNCy"),Fi=i("YxaZ"),Di=0,ji=1,ki={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},Gi=function(t){function e(e,i,n){t.call(this,e),this.features=i,this.mapBrowserEvent=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.a);function Ui(t,e){return t.index-e.index}function zi(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);var e=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;var i=this.vertexFeature_;if(i){var r=[],o=i.getGeometry().getCoordinates(),a=Object(gt.b)([o]),s=this.rBush_.getInExtent(a),h={};s.sort(Ui);for(var c=0,l=s.length;c<l;++c){var u=s[c],p=u.segment,d=Object(n.b)(u.feature),f=u.depth;if(f&&(d+="-"+f.join("-")),h[d]||(h[d]=new Array(2)),u.geometry.getType()===ai.a.CIRCLE&&u.index===ji){var m=Xi(e,u);Object(Yt.e)(m,o)&&!h[d][0]&&(this.dragSegments_.push([u,0]),h[d][0]=u)}else if(Object(Yt.e)(p[0],o)&&!h[d][0])this.dragSegments_.push([u,0]),h[d][0]=u;else if(Object(Yt.e)(p[1],o)&&!h[d][1]){if((u.geometry.getType()===ai.a.LINE_STRING||u.geometry.getType()===ai.a.MULTI_LINE_STRING)&&h[d][0]&&0===h[d][0].index)continue;this.dragSegments_.push([u,1]),h[d][1]=u}else this.insertVertexCondition_(t)&&Object(n.b)(p)in this.vertexSegments_&&!h[d][0]&&!h[d][1]&&r.push([u,o])}r.length&&this.willModifyFeatures_(t);for(var v=r.length-1;v>=0;--v)this.insertVertex_.apply(this,r[v])}return!!this.vertexFeature_}function Bi(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,i=0,n=this.dragSegments_.length;i<n;++i){for(var r=this.dragSegments_[i],o=r[0],a=o.depth,s=o.geometry,h=void 0,c=o.segment,l=r[1];e.length<s.getStride();)e.push(c[l][e.length]);switch(s.getType()){case ai.a.POINT:h=e,c[0]=c[1]=e;break;case ai.a.MULTI_POINT:(h=s.getCoordinates())[o.index]=e,c[0]=c[1]=e;break;case ai.a.LINE_STRING:(h=s.getCoordinates())[o.index+l]=e,c[l]=e;break;case ai.a.MULTI_LINE_STRING:case ai.a.POLYGON:(h=s.getCoordinates())[a[0]][o.index+l]=e,c[l]=e;break;case ai.a.MULTI_POLYGON:(h=s.getCoordinates())[a[1]][a[0]][o.index+l]=e,c[l]=e;break;case ai.a.CIRCLE:c[0]=c[1]=e,o.index===Di?(this.changingFeature_=!0,s.setCenter(e),this.changingFeature_=!1):(this.changingFeature_=!0,s.setRadius(Object(Yt.d)(s.getCenter(),e)),this.changingFeature_=!1)}h&&this.setGeometryCoordinates_(s,h)}this.createOrUpdateVertexFeature_(e)}function Hi(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var i=this.dragSegments_[e][0],n=i.geometry;if(n.getType()===ai.a.CIRCLE){var r=n.getCenter(),o=i.featureSegments[0],a=i.featureSegments[1];o.segment[0]=o.segment[1]=r,a.segment[0]=a.segment[1]=r,this.rBush_.update(Object(gt.m)(r),o),this.rBush_.update(n.getExtent(),a)}else this.rBush_.update(Object(gt.b)(i.segment),i)}return this.modified_&&(this.dispatchEvent(new Gi(ki.MODIFYEND,this.features_,t)),this.modified_=!1),!1}function Vi(t){return!(t instanceof p)||(this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=u.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(e=!(t.type!=u.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==u.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),pe.call(this,t)&&!e);var e}function Wi(t,e){var i=e.geometry;if(i.getType()===ai.a.CIRCLE){var n=i;if(e.index===ji){var r=Object(Yt.h)(n.getCenter(),t),o=Math.sqrt(r)-n.getRadius();return o*o}}return Object(Yt.i)(t,e.segment)}function Xi(t,e){var i=e.geometry;return i.getType()===ai.a.CIRCLE&&e.index===ji?i.getClosestPoint(t):Object(Yt.c)(t,e.segment)}!function(t){function e(e){var i,n;if(t.call(this,{handleDownEvent:zi,handleDragEvent:Bi,handleEvent:Vi,handleUpEvent:Hi}),this.condition_=e.condition?e.condition:ae,this.defaultDeleteCondition_=function(t){return qt(t)&&ee(t)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:$t,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new Fi.a,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new vi.a({source:new gi.b({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(i=Object(yi.b)(),function(t,e){return i[ai.a.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,e.source?(this.source_=e.source,n=new r.b(this.source_.getFeatures()),Object(d.a)(this.source_,Ni.a.ADDFEATURE,this.handleSourceAdd_,this),Object(d.a)(this.source_,Ni.a.REMOVEFEATURE,this.handleSourceRemove_,this)):n=e.features,!n)throw new Error("The modify interaction requires features or a source");this.features_=n,this.features_.forEach(this.addFeature_.bind(this)),Object(d.a)(this.features_,o.a.ADD,this.handleFeatureAdd_,this),Object(d.a)(this.features_,o.a.REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature_=function(t){var e=t.getGeometry();e&&e.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[e.getType()].call(this,t,e);var i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),Object(d.a)(t,l.a.CHANGE,this.handleFeatureChange_,this)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new Gi(ki.MODIFYSTART,this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),Object(d.c)(t,l.a.CHANGE,this.handleFeatureChange_,this)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,i=[];e.forEach(function(e){t===e.feature&&i.push(e)});for(var n=i.length-1;n>=0;--n)e.remove(i[n])},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),n={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n){var o=i[n],a={feature:t,geometry:e,depth:[n],index:n,segment:[o,o]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length-1;n<r;++n){var o=i.slice(n,n+2),a={feature:t,geometry:e,index:n,segment:o};this.rBush_.insert(Object(gt.b)(o),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],a=0,s=o.length-1;a<s;++a){var h=o.slice(a,a+2),c={feature:t,geometry:e,depth:[n],index:a,segment:h};this.rBush_.insert(Object(gt.b)(h),c)}},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],a=0,s=o.length-1;a<s;++a){var h=o.slice(a,a+2),c={feature:t,geometry:e,depth:[n],index:a,segment:h};this.rBush_.insert(Object(gt.b)(h),c)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],a=0,s=o.length;a<s;++a)for(var h=o[a],c=0,l=h.length-1;c<l;++c){var u=h.slice(c,c+2),p={feature:t,geometry:e,depth:[a,n],index:c,segment:u};this.rBush_.insert(Object(gt.b)(u),p)}},e.prototype.writeCircleGeometry_=function(t,e){var i=e.getCenter(),n={feature:t,geometry:e,index:Di,segment:[i,i]},r={feature:t,geometry:e,index:ji,segment:[i,i]},o=[n,r];n.featureSegments=r.featureSegments=o,this.rBush_.insert(Object(gt.m)(i),n),this.rBush_.insert(e.getExtent(),r)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),n=0;n<i.length;++n)this.SEGMENT_WRITERS_[i[n].getType()].call(this,t,i[n])},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new oi.a(new mi.a(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e));return e},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},e.prototype.handlePointerAtPixel_=function(t,e){var i=e.getCoordinateFromPixel(t),r=Object(gt.c)(Object(gt.m)(i),e.getView().getResolution()*this.pixelTolerance_),o=this.rBush_.getInExtent(r);if(o.length>0){o.sort(function(t,e){return Wi(i,t)-Wi(i,e)});var a=o[0],s=a.segment,h=Xi(i,a),c=e.getPixelFromCoordinate(h),l=Object(Yt.d)(t,c);if(l<=this.pixelTolerance_){var u={};if(a.geometry.getType()===ai.a.CIRCLE&&a.index===ji)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(h);else{var p=e.getPixelFromCoordinate(s[0]),d=e.getPixelFromCoordinate(s[1]),f=Object(Yt.h)(c,p),m=Object(Yt.h)(c,d);l=Math.sqrt(Math.min(f,m)),this.snappedToVertex_=l<=this.pixelTolerance_,this.snappedToVertex_&&(h=f>m?s[1]:s[0]),this.createOrUpdateVertexFeature_(h);for(var v=1,g=o.length;v<g;++v){var y=o[v].segment;if(!(Object(Yt.e)(s[0],y[0])&&Object(Yt.e)(s[1],y[1])||Object(Yt.e)(s[0],y[1])&&Object(Yt.e)(s[1],y[0])))break;u[Object(n.b)(y)]=!0}}return u[Object(n.b)(s)]=!0,void(this.vertexSegments_=u)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var i,n=t.segment,r=t.feature,o=t.geometry,a=t.depth,s=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case ai.a.MULTI_LINE_STRING:case ai.a.POLYGON:(i=o.getCoordinates())[a[0]].splice(s+1,0,e);break;case ai.a.MULTI_POLYGON:(i=o.getCoordinates())[a[1]][a[0]].splice(s+1,0,e);break;case ai.a.LINE_STRING:(i=o.getCoordinates()).splice(s+1,0,e);break;default:return}this.setGeometryCoordinates_(o,i);var h=this.rBush_;h.remove(t),this.updateSegmentIndices_(o,s,a,1);var c={segment:[n[0],e],feature:r,geometry:o,depth:a,index:s};h.insert(Object(gt.b)(c.segment),c),this.dragSegments_.push([c,1]);var l={segment:[e,n[1]],feature:r,geometry:o,depth:a,index:s+1};h.insert(Object(gt.b)(l.segment),l),this.dragSegments_.push([l,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=u.POINTERDRAG){var t=this.lastPointerEvent_;return this.willModifyFeatures_(t),this.removeVertex_(),this.dispatchEvent(new Gi(ki.MODIFYEND,this.features_,t)),this.modified_=!1,!0}return!1},e.prototype.removeVertex_=function(){var t,e,i,r,o,a,s,h,c,l,u,p=this.dragSegments_,d={},f=!1;for(o=p.length-1;o>=0;--o)l=(i=p[o])[0],u=Object(n.b)(l.feature),l.depth&&(u+="-"+l.depth.join("-")),u in d||(d[u]={}),0===i[1]?(d[u].right=l,d[u].index=l.index):1==i[1]&&(d[u].left=l,d[u].index=l.index+1);for(u in d){switch(c=d[u].right,s=d[u].left,h=(a=d[u].index)-1,l=void 0!==s?s:c,h<0&&(h=0),t=e=(r=l.geometry).getCoordinates(),f=!1,r.getType()){case ai.a.MULTI_LINE_STRING:e[l.depth[0]].length>2&&(e[l.depth[0]].splice(a,1),f=!0);break;case ai.a.LINE_STRING:e.length>2&&(e.splice(a,1),f=!0);break;case ai.a.MULTI_POLYGON:t=t[l.depth[1]];case ai.a.POLYGON:(t=t[l.depth[0]]).length>4&&(a==t.length-1&&(a=0),t.splice(a,1),f=!0,0===a&&(t.pop(),t.push(t[0]),h=t.length-1))}if(f){this.setGeometryCoordinates_(r,e);var m=[];if(void 0!==s&&(this.rBush_.remove(s),m.push(s.segment[0])),void 0!==c&&(this.rBush_.remove(c),m.push(c.segment[1])),void 0!==s&&void 0!==c){var v={depth:l.depth,feature:l.feature,geometry:l.geometry,index:h,segment:m};this.rBush_.insert(Object(gt.b)(v.segment),v)}this.updateSegmentIndices_(r,a,l.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),p.length=0}}return f},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,i,n){this.rBush_.forEachInExtent(t.getExtent(),function(r){r.geometry===t&&(void 0===i||void 0===r.depth||Object(K.b)(r.depth,i))&&r.index>e&&(r.index+=n)})}}(de);var Yi={SELECT:"select"},qi=function(t){function e(e,i,n,r){t.call(this,e),this.selected=i,this.deselected=n,this.mapBrowserEvent=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.a);function Ki(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),i=this.removeCondition_(t),n=this.toggleCondition_(t),r=!e&&!i&&!n,o=t.map,a=this.featureOverlay_.getSource().getFeaturesCollection(),s=[],h=[];if(r){Object(ut.b)(this.featureLayerAssociation_),o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return h.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var c=a.getLength()-1;c>=0;--c){var l=a.item(c),u=h.indexOf(l);u>-1?h.splice(u,1):(a.remove(l),s.push(l))}0!==h.length&&a.extend(h)}else{o.forEachFeatureAtPixel(t.pixel,function(t,r){if(this.filter_(t,r))return!e&&!n||Object(K.d)(a.getArray(),t)?(i||n)&&Object(K.d)(a.getArray(),t)&&(s.push(t),this.removeFeatureLayerAssociation_(t)):(h.push(t),this.addFeatureLayerAssociation_(t,r)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var p=s.length-1;p>=0;--p)a.remove(s[p]);a.extend(h)}return(h.length>0||s.length>0)&&this.dispatchEvent(new qi(Yi.SELECT,h,s,t)),te(t)}!function(t){function e(e){t.call(this,{handleEvent:Ki});var i=e||{};this.condition_=i.condition?i.condition:ee,this.addCondition_=i.addCondition?i.addCondition:Qt,this.removeCondition_=i.removeCondition?i.removeCondition:Qt,this.toggleCondition_=i.toggleCondition?i.toggleCondition:ne,this.multi_=!!i.multi&&i.multi,this.filter_=i.filter?i.filter:yt.b,this.hitTolerance_=i.hitTolerance?i.hitTolerance:0;var n,r,a=new vi.a({source:new gi.b({useSpatialIndex:!1,features:i.features,wrapX:i.wrapX}),style:i.style?i.style:(n=Object(yi.b)(),Object(K.c)(n[ai.a.POLYGON],n[ai.a.LINE_STRING]),Object(K.c)(n[ai.a.GEOMETRY_COLLECTION],n[ai.a.LINE_STRING]),function(t,e){return t.getGeometry()?n[t.getGeometry().getType()]:null}),updateWhileAnimating:!0,updateWhileInteracting:!0});if(this.featureOverlay_=a,i.layers)if("function"==typeof i.layers)r=i.layers;else{var s=i.layers;r=function(t){return Object(K.d)(s,t)}}else r=yt.b;this.layerFilter_=r,this.featureLayerAssociation_={};var h=this.featureOverlay_.getSource().getFeaturesCollection();Object(d.a)(h,o.a.ADD,this.addFeature_,this),Object(d.a)(h,o.a.REMOVE,this.removeFeature_,this)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeatureLayerAssociation_=function(t,e){var i=Object(n.b)(t);this.featureLayerAssociation_[i]=e},e.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){var e=Object(n.b)(t);return this.featureLayerAssociation_[e]},e.prototype.getOverlay=function(){return this.featureOverlay_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var i=this.getMap(),n=this.featureOverlay_.getSource().getFeaturesCollection();i&&n.forEach(i.unskipFeature.bind(i)),t.prototype.setMap.call(this,e),this.featureOverlay_.setMap(e),e&&n.forEach(e.skipFeature.bind(e))},e.prototype.addFeature_=function(t){var e=this.getMap();e&&e.skipFeature(t.element)},e.prototype.removeFeature_=function(t){var e=this.getMap();e&&e.unskipFeature(t.element)},e.prototype.removeFeatureLayerAssociation_=function(t){var e=Object(n.b)(t);delete this.featureLayerAssociation_[e]}}(Vt);function Zi(t){var e=this.snapTo(t.pixel,t.coordinate,t.map);return e.snapped&&(t.coordinate=e.vertex.slice(0,2),t.pixel=e.vertexPixel),pe.call(this,t)}function $i(t){var e=Object(ut.c)(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}!function(t){function e(e){t.call(this,{handleEvent:Zi,handleDownEvent:yt.b,handleUpEvent:$i,stopDown:yt.a});var i=e||{};this.source_=i.source?i.source:null,this.vertex_=void 0===i.vertex||i.vertex,this.edge_=void 0===i.edge||i.edge,this.features_=i.features?i.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelCoordinate_=null,this.pixelTolerance_=void 0!==i.pixelTolerance?i.pixelTolerance:10,this.sortByDistance_=function(t,e){var i=Object(Yt.i)(this.pixelCoordinate_,t.segment),n=Object(Yt.i)(this.pixelCoordinate_,e.segment);return i-n}.bind(this),this.rBush_=new Fi.a,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t,e){var i=void 0===e||e,r=Object(n.b)(t),o=t.getGeometry();if(o){var a=this.SEGMENT_WRITERS_[o.getType()];a&&(this.indexedFeaturesExtents_[r]=o.getExtent(Object(gt.j)()),a.call(this,t,o))}i&&(this.featureChangeListenerKeys_[r]=Object(d.a)(t,l.a.CHANGE,this.handleFeatureChange_,this))},e.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},e.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},e.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},e.prototype.handleFeatureAdd_=function(t){var e;t instanceof gi.a?e=t.feature:t instanceof r.a&&(e=t.element),this.addFeature(e)},e.prototype.handleFeatureRemove_=function(t){var e;t instanceof gi.a?e=t.feature:t instanceof r.a&&(e=t.element),this.removeFeature(e)},e.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var i=Object(n.b)(e);i in this.pendingFeatures_||(this.pendingFeatures_[i]=e)}else this.updateFeature_(e)},e.prototype.removeFeature=function(t,e){var i=void 0===e||e,r=Object(n.b)(t),o=this.indexedFeaturesExtents_[r];if(o){var a=this.rBush_,s=[];a.forEachInExtent(o,function(e){t===e.feature&&s.push(e)});for(var h=s.length-1;h>=0;--h)a.remove(s[h])}i&&(Object(d.e)(this.featureChangeListenerKeys_[r]),delete this.featureChangeListenerKeys_[r])},e.prototype.setMap=function(e){var i=this.getMap(),n=this.featuresListenerKeys_,r=this.getFeatures_();i&&(n.forEach(d.e),n.length=0,r.forEach(this.forEachFeatureRemove_.bind(this))),t.prototype.setMap.call(this,e),e&&(this.features_?n.push(Object(d.a)(this.features_,o.a.ADD,this.handleFeatureAdd_,this),Object(d.a)(this.features_,o.a.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push(Object(d.a)(this.source_,Ni.a.ADDFEATURE,this.handleFeatureAdd_,this),Object(d.a)(this.source_,Ni.a.REMOVEFEATURE,this.handleFeatureRemove_,this)),r.forEach(this.forEachFeatureAdd_.bind(this)))},e.prototype.snapTo=function(t,e,i){var n=i.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),r=i.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]),o=Object(gt.b)([n,r]),a=this.rBush_.getInExtent(o);this.vertex_&&!this.edge_&&(a=a.filter(function(t){return t.feature.getGeometry().getType()!==ai.a.CIRCLE}));var s,h,c,l,u=!1,p=null,d=null;if(a.length>0){this.pixelCoordinate_=e,a.sort(this.sortByDistance_);var f=a[0].segment,m=a[0].feature.getGeometry().getType()===ai.a.CIRCLE;this.vertex_&&!this.edge_?(s=i.getPixelFromCoordinate(f[0]),h=i.getPixelFromCoordinate(f[1]),c=Object(Yt.h)(t,s),l=Object(Yt.h)(t,h),Math.sqrt(Math.min(c,l))<=this.pixelTolerance_&&(u=!0,p=c>l?f[1]:f[0],d=i.getPixelFromCoordinate(p))):this.edge_&&(p=m?Object(Yt.b)(e,a[0].feature.getGeometry()):Object(Yt.c)(e,f),d=i.getPixelFromCoordinate(p),Object(Yt.d)(t,d)<=this.pixelTolerance_&&(u=!0,this.vertex_&&!m&&(s=i.getPixelFromCoordinate(f[0]),h=i.getPixelFromCoordinate(f[1]),c=Object(Yt.h)(d,s),l=Object(Yt.h)(d,h),Math.sqrt(Math.min(c,l))<=this.pixelTolerance_&&(p=c>l?f[1]:f[0],d=i.getPixelFromCoordinate(p))))),u&&(d=[Math.round(d[0]),Math.round(d[1])])}return{snapped:u,vertex:p,vertexPixel:d}},e.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.writeCircleGeometry_=function(t,e){for(var i=Object(Te.b)(e).getCoordinates()[0],n=0,r=i.length-1;n<r;++n){var o=i.slice(n,n+2),a={feature:t,segment:o};this.rBush_.insert(Object(gt.b)(o),a)}},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),n=0;n<i.length;++n){var r=this.SEGMENT_WRITERS_[i[n].getType()];r&&r.call(this,t,i[n])}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length-1;n<r;++n){var o=i.slice(n,n+2),a={feature:t,segment:o};this.rBush_.insert(Object(gt.b)(o),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],a=0,s=o.length-1;a<s;++a){var h=o.slice(a,a+2),c={feature:t,segment:h};this.rBush_.insert(Object(gt.b)(h),c)}},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n){var o=i[n],a={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],a=0,s=o.length;a<s;++a)for(var h=o[a],c=0,l=h.length-1;c<l;++c){var u=h.slice(c,c+2),p={feature:t,segment:u};this.rBush_.insert(Object(gt.b)(u),p)}},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),n={feature:t,segment:[i,i]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],a=0,s=o.length-1;a<s;++a){var h=o.slice(a,a+2),c={feature:t,segment:h};this.rBush_.insert(Object(gt.b)(h),c)}}}(de);var Ji={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"},Qi=function(t){function e(e,i,n){t.call(this,e),this.features=i,this.coordinate=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.a);function tn(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=t.coordinate,rn.call(this,t);var e=this.features_||new r.b([this.lastFeature_]);return this.dispatchEvent(new Qi(Ji.TRANSLATESTART,e,t.coordinate)),!0}return!1}function en(t){if(this.lastCoordinate_){this.lastCoordinate_=null,rn.call(this,t);var e=this.features_||new r.b([this.lastFeature_]);return this.dispatchEvent(new Qi(Ji.TRANSLATEEND,e,t.coordinate)),!0}return!1}function nn(t){if(this.lastCoordinate_){var e=t.coordinate,i=e[0]-this.lastCoordinate_[0],n=e[1]-this.lastCoordinate_[1],o=this.features_||new r.b([this.lastFeature_]);o.forEach(function(t){var e=t.getGeometry();e.translate(i,n),t.setGeometry(e)}),this.lastCoordinate_=e,this.dispatchEvent(new Qi(Ji.TRANSLATING,o,e))}}function rn(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")}!function(t){function e(e){t.call(this,{handleDownEvent:tn,handleDragEvent:nn,handleMoveEvent:rn,handleUpEvent:en});var i,n=e||{};if(this.lastCoordinate_=null,this.features_=void 0!==n.features?n.features:null,n.layers)if("function"==typeof n.layers)i=n.layers;else{var r=n.layers;i=function(t){return Object(K.d)(r,t)}}else i=yt.b;this.layerFilter_=i,this.hitTolerance_=n.hitTolerance?n.hitTolerance:0,this.lastFeature_=null,Object(d.a)(this,Object(st.b)(jt.ACTIVE),this.handleActiveChanged_,this)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t){if(!this.features_||Object(K.d)(this.features_.getArray(),t))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var i=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(i)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),i=this.getActive();e&&i||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")}}(de);var on=i("09IN"),an=function(t){function e(e,i,n,r){t.call(this),this.extent=e,this.pixelRatio_=n,this.resolution=i,this.state=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(l.a.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){},e}(f.a),sn=i("3Jqb"),hn=function(t){function e(e,i,n,r,o){var a=void 0!==o?sn.a.IDLE:sn.a.LOADED;t.call(this,e,i,n,a),this.loader_=void 0!==o?o:null,this.canvas_=r,this.error_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=sn.a.ERROR):this.state=sn.a.LOADED,this.changed()},e.prototype.load=function(){this.state==sn.a.IDLE&&(this.state=sn.a.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(an),cn=i("v5fe"),ln=i("iVNI"),un=function(t){function e(e,i,n,r,o){t.call(this,e),this.vectorContext=i,this.frameState=n,this.context=r,this.glContext=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.a),pn=i("Oeue"),dn=i("QBya"),fn=i("RUSk"),mn=function(){};mn.prototype.drawCustom=function(t,e,i){},mn.prototype.drawGeometry=function(t){},mn.prototype.setStyle=function(t){},mn.prototype.drawCircle=function(t,e){},mn.prototype.drawFeature=function(t,e){},mn.prototype.drawGeometryCollection=function(t,e){},mn.prototype.drawLineString=function(t,e){},mn.prototype.drawMultiLineString=function(t,e){},mn.prototype.drawMultiPoint=function(t,e){},mn.prototype.drawMultiPolygon=function(t,e){},mn.prototype.drawPoint=function(t,e){},mn.prototype.drawPolygon=function(t,e){},mn.prototype.drawText=function(t,e){},mn.prototype.setFillStrokeStyle=function(t,e){},mn.prototype.setImageStyle=function(t,e){},mn.prototype.setTextStyle=function(t,e){};var vn=mn,gn=function(t){function e(e,i,n,r,o){t.call(this),this.context_=e,this.pixelRatio_=i,this.extent_=n,this.transform_=r,this.viewRotation_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Object(Et.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawImages_=function(t,e,i,n){if(this.image_){var r=Object(fn.c)(t,e,i,2,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,s=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=s*this.imageOpacity_);var h=this.imageRotation_;this.imageRotateWithView_&&(h+=this.viewRotation_);for(var c=0,l=r.length;c<l;c+=2){var u=r[c]-this.imageAnchorX_,p=r[c+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_){var d=u+this.imageAnchorX_,f=p+this.imageAnchorY_;Object(Et.b)(a,d,f,this.imageScale_,this.imageScale_,h,-d,-f),o.setTransform.apply(o,a)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,u,p,this.imageWidth_,this.imageHeight_)}0===h&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=s)}},e.prototype.drawText_=function(t,e,i,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=Object(fn.c)(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=n){var s=r[e]+this.textOffsetX_,h=r[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_){var c=Object(Et.b)(this.tmpLocalTransform_,s,h,this.textScale_,this.textScale_,a,-s,-h);o.setTransform.apply(o,c)}this.textStrokeState_&&o.strokeText(this.text_,s,h),this.textFillState_&&o.fillText(this.text_,s,h)}0===a&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,i,n,r){var o=this.context_,a=Object(fn.c)(t,e,i,n,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);var s=a.length;r&&(s-=2);for(var h=2;h<s;h+=2)o.lineTo(a[h],a[h+1]);return r&&o.closePath(),i},e.prototype.drawRings_=function(t,e,i,n){for(var r=0,o=i.length;r<o;++r)e=this.moveToLineTo_(t,e,i[r],n,!0);return e},e.prototype.drawCircle=function(t){if(Object(gt.F)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=Object(si.b)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],r=Math.sqrt(i*i+n*n),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.drawGeometry=function(t){switch(t.getType()){case ai.a.POINT:this.drawPoint(t);break;case ai.a.LINE_STRING:this.drawLineString(t);break;case ai.a.POLYGON:this.drawPolygon(t);break;case ai.a.MULTI_POINT:this.drawMultiPoint(t);break;case ai.a.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case ai.a.MULTI_POLYGON:this.drawMultiPolygon(t);break;case ai.a.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case ai.a.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&Object(gt.F)(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(Object(gt.F)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiLineString=function(t){var e=t.getExtent();if(Object(gt.F)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,n=t.getFlatCoordinates(),r=0,o=t.getEnds(),a=t.getStride();i.beginPath();for(var s=0,h=o.length;s<h;++s)r=this.moveToLineTo_(n,r,o[s],a,!1);i.stroke()}if(""!==this.text_){var c=t.getFlatMidpoints();this.drawText_(c,0,c.length,2)}}},e.prototype.drawPolygon=function(t){if(Object(gt.F)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(Object(gt.F)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),n=0,r=t.getEndss(),o=t.getStride();e.beginPath();for(var a=0,s=r.length;a<s;++a){var h=r[a];n=this.drawRings_(i,n,h,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var c=t.getFlatInteriorPoints();this.drawText_(c,0,c.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=e.lineCap=t.lineCap),c.a&&(Object(K.b)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,c.a&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:pn.l;i?(i.font!=t.font&&(i.font=e.font=t.font),i.textAlign!=n&&(i.textAlign=e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:Object(dn.a)(i||pn.b)}}else this.fillState_=null;if(e){var n=e.getColor(),r=e.getLineCap(),o=e.getLineDash(),a=e.getLineDashOffset(),s=e.getLineJoin(),h=e.getWidth(),c=e.getMiterLimit();this.strokeState_={lineCap:void 0!==r?r:pn.d,lineDash:o||pn.e,lineDashOffset:a||pn.f,lineJoin:void 0!==s?s:pn.g,lineWidth:this.pixelRatio_*(void 0!==h?h:pn.h),miterLimit:void 0!==c?c:pn.i,strokeStyle:Object(dn.a)(n||pn.k)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),n=t.getOrigin(),r=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=r[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=r[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:Object(dn.a)(i||pn.b)}}else this.textFillState_=null;var n=t.getStroke();if(n){var r=n.getColor(),o=n.getLineCap(),a=n.getLineDash(),s=n.getLineDashOffset(),h=n.getLineJoin(),c=n.getWidth(),l=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:pn.d,lineDash:a||pn.e,lineDashOffset:s||pn.f,lineJoin:void 0!==h?h:pn.g,lineWidth:void 0!==c?c:pn.h,miterLimit:void 0!==l?l:pn.i,strokeStyle:Object(dn.a)(r||pn.k)}}else this.textStrokeState_=null;var u=t.getFont(),p=t.getOffsetX(),d=t.getOffsetY(),f=t.getRotateWithView(),m=t.getRotation(),v=t.getScale(),g=t.getText(),y=t.getTextAlign(),_=t.getTextBaseline();this.textState_={font:void 0!==u?u:pn.c,textAlign:void 0!==y?y:pn.l,textBaseline:void 0!==_?_:pn.m},this.text_=void 0!==g?g:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==d?this.pixelRatio_*d:0,this.textRotateWithView_=void 0!==f&&f,this.textRotation_=void 0!==m?m:0,this.textScale_=this.pixelRatio_*(void 0!==v?v:1)}else this.text_=""},e}(vn),yn=i("AMn6"),_n=function(t){function e(e){t.call(this),this.map_=e,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.registerLayerRenderers=function(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)},e.prototype.getLayerRendererConstructors=function(){return this.layerRendererConstructors_},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;Object(Et.b)(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Object(Et.d)(Object(Et.g)(n,i))},e.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,o,a,s){var h,c=e.viewState,l=c.resolution;function u(t,i){var a=Object(n.b)(t).toString(),s=e.layerStates[Object(n.b)(i)].managed;if(!(a in e.skippedFeatureUids)||s)return r.call(o,t,s?i:null)}var p=c.projection,d=t;if(p.canWrapX()){var f=p.getExtent(),m=Object(gt.E)(f),v=t[0];if(v<f[0]||v>f[2])d=[v+m*Math.ceil((f[0]-v)/m),t[1]]}var g,y=e.layerStatesArray;for(g=y.length-1;g>=0;--g){var _=y[g],x=_.layer;if(Object(Ot.b)(_,l)&&a.call(s,x)){var b=this.getLayerRenderer(x);if(x.getSource()&&(h=b.forEachFeatureAtCoordinate(x.getSource().getWrapX()?d:t,e,i,u,o)),h)return h}}},e.prototype.forEachLayerAtPixel=function(t,e,i,n,r,o,a){},e.prototype.hasFeatureAtCoordinate=function(t,e,i,n,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,yt.b,this,n,r)},e.prototype.getLayerRenderer=function(t){var e=Object(n.b)(t).toString();if(e in this.layerRenderers_)return this.layerRenderers_[e];for(var i,r=0,o=this.layerRendererConstructors_.length;r<o;++r){var a=this.layerRendererConstructors_[r];if(a.handles(t)){i=a.create(this,t);break}}if(!i)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=i,this.layerRendererListeners_[e]=Object(d.a)(i,l.a.CHANGE,this.handleLayerRendererChange_,this),i},e.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},e.prototype.getLayerRenderers=function(){return this.layerRenderers_},e.prototype.getMap=function(){return this.map_},e.prototype.handleLayerRendererChange_=function(){this.map_.render()},e.prototype.removeLayerRendererByKey_=function(t){var e=this.layerRenderers_[t];return delete this.layerRenderers_[t],Object(d.e)(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},e.prototype.removeUnusedLayerRenderers_=function(t,e){for(var i in this.layerRenderers_)e&&i in e.layerStates||this.removeLayerRendererByKey_(i).dispose()},e.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(xn)},e.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(var e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},e}(Ee.a);function xn(t,e){yn.a.expire()}function bn(t,e){return t.zIndex-e.zIndex}_n.prototype.renderFrame=yt.c,_n.prototype.dispatchRenderEvent=yt.c;var Mn=[],wn=function(t){function e(e){t.call(this,e);var i=e.getViewport();this.context_=Object(vt.a)(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=Ct.d,i.insertBefore(this.canvas_,i.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=Object(Et.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchRenderEvent=function(t,e){var i=this.getMap(),n=this.context_;if(i.hasListener(t)){var r=e.extent,o=e.pixelRatio,a=e.viewState.rotation,s=this.getTransform(e),h=new gn(n,o,r,s,a),c=new un(t,h,e,n,null);i.dispatchEvent(c)}},e.prototype.getTransform=function(t){var e=t.viewState,i=this.canvas_.width/2,n=this.canvas_.height/2,r=t.pixelRatio/e.resolution,o=-r,a=-e.rotation,s=-e.center[0],h=-e.center[1];return Object(Et.b)(this.transform_,i,n,r,o,a,s,h)},e.prototype.renderFrame=function(t){if(t){var e=this.context_,i=t.pixelRatio,n=Math.round(t.size[0]*i),r=Math.round(t.size[1]*i);this.canvas_.width!=n||this.canvas_.height!=r?(this.canvas_.width=n,this.canvas_.height=r):e.clearRect(0,0,n,r);var o=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchRenderEvent(at.a.PRECOMPOSE,t);var a=t.layerStatesArray;Object(K.j)(a,bn),o&&(e.save(),Object(pn.s)(e,o,n/2,r/2));var s,h,c,l,u,p=t.viewState.resolution;for(s=0,h=a.length;s<h;++s)c=(u=a[s]).layer,l=this.getLayerRenderer(c),Object(Ot.b)(u,p)&&u.sourceState==xt.a.READY&&l.prepareFrame(t,u)&&l.composeFrame(t,u,e);o&&e.restore(),this.dispatchRenderEvent(at.a.POSTCOMPOSE,t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,i,n,r,o,a){var s,h,c=e.viewState.resolution,l=e.layerStatesArray,u=l.length,p=Object(Et.a)(e.pixelToCoordinateTransform,t.slice());for(h=u-1;h>=0;--h){var d=l[h],f=d.layer;if(Object(Ot.b)(d,c)&&o.call(a,f))if(s=this.getLayerRenderer(f).forEachLayerAtCoordinate(p,e,i,n,r))return s}},e.prototype.registerLayerRenderers=function(e){t.prototype.registerLayerRenderers.call(this,e);for(var i=0,n=e.length;i<n;++i){var r=e[i];Object(K.d)(Mn,r)||Mn.push(r)}},e}(_n),En=function(t){function e(e){t.call(this),this.layer_=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createLoadedTileFinder=function(t,e,i){return function(n,r){return t.forEachLoadedTile(e,n,r,function(t){i[n]||(i[n]={}),i[n][t.tileCoord.toString()]=t})}},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleImageChange_=function(t){t.target.getState()===sn.a.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=sn.a.LOADED&&e!=sn.a.ERROR&&Object(d.a)(t,l.a.CHANGE,this.handleImageChange_,this),e==sn.a.IDLE&&(t.load(),e=t.getState()),e==sn.a.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==xt.a.READY&&this.changed()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var i=function(t,e,i){var r=Object(n.b)(t).toString();r in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[r])}.bind(null,e);t.postRenderFunctions.push(i)}},e.prototype.updateUsedTiles=function(t,e,i,r){var o=Object(n.b)(e).toString(),a=i.toString();o in t?a in t[o]?t[o][a].extend(r):t[o][a]=r:(t[o]={},t[o][a]=r)},e.prototype.manageTilePyramid=function(t,e,i,r,o,a,s,h,c,l){var u=Object(n.b)(e).toString();u in t.wantedTiles||(t.wantedTiles[u]={});var p,d,f,m,v,g,y=t.wantedTiles[u],_=t.tileQueue;for(g=i.getMinZoom();g<=s;++g)for(d=i.getTileRangeForExtentAndZ(a,g,d),f=i.getResolution(g),m=d.minX;m<=d.maxX;++m)for(v=d.minY;v<=d.maxY;++v)s-g<=h?((p=e.getTile(g,m,v,r,o)).getState()==ct.a.IDLE&&(y[p.getKey()]=!0,_.isKeyQueued(p.getKey())||_.enqueue([p,u,i.getTileCoordCenter(p.tileCoord),f])),void 0!==c&&c.call(l,p)):e.useTile(g,m,v,o)},e}(i("nxYM").a);En.prototype.forEachFeatureAtCoordinate=yt.c,En.prototype.hasFeatureAtCoordinate=yt.a;var Tn=function(t){function e(e){t.call(this,e),this.renderedResolution,this.transform_=Object(Et.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clip=function(t,e,i){var n=e.pixelRatio,r=e.size[0]*n,o=e.size[1]*n,a=e.viewState.rotation,s=Object(gt.C)(i),h=Object(gt.D)(i),c=Object(gt.w)(i),l=Object(gt.v)(i);Object(Et.a)(e.coordinateToPixelTransform,s),Object(Et.a)(e.coordinateToPixelTransform,h),Object(Et.a)(e.coordinateToPixelTransform,c),Object(Et.a)(e.coordinateToPixelTransform,l),t.save(),Object(pn.s)(t,-a,r/2,o/2),t.beginPath(),t.moveTo(s[0]*n,s[1]*n),t.lineTo(h[0]*n,h[1]*n),t.lineTo(c[0]*n,c[1]*n),t.lineTo(l[0]*n,l[1]*n),t.clip(),Object(pn.s)(t,a,r/2,o/2)},e.prototype.dispatchComposeEvent_=function(t,e,i,n){var r=this.getLayer();if(r.hasListener(t)){var o=i.size[0]*i.pixelRatio,a=i.size[1]*i.pixelRatio,s=i.viewState.rotation;Object(pn.s)(e,-s,o/2,a/2);var h=void 0!==n?n:this.getTransform(i,0),c=new gn(e,i.pixelRatio,i.extent,h,i.viewState.rotation),l=new un(t,c,i,e,null);r.dispatchEvent(l),Object(pn.s)(e,s,o/2,a/2)}},e.prototype.forEachLayerAtCoordinate=function(t,e,i,n,r){return this.forEachFeatureAtCoordinate(t,e,i,yt.b,this)?n.call(r,this.getLayer(),null):void 0},e.prototype.postCompose=function(t,e,i,n){this.dispatchComposeEvent_(at.a.POSTCOMPOSE,t,e,n)},e.prototype.preCompose=function(t,e,i){this.dispatchComposeEvent_(at.a.PRECOMPOSE,t,e,i)},e.prototype.dispatchRenderEvent=function(t,e,i){this.dispatchComposeEvent_(at.a.RENDER,t,e,i)},e.prototype.getTransform=function(t,e){var i=t.viewState,n=t.pixelRatio,r=n*t.size[0]/2,o=n*t.size[1]/2,a=n/i.resolution,s=-a,h=-i.rotation,c=-i.center[0]+e,l=-i.center[1];return Object(Et.b)(this.transform_,r,o,a,s,h,c,l)},e.prototype.composeFrame=function(t,e,i){},e.prototype.prepareFrame=function(t,e){},e}(En),Sn=function(t){function e(e){t.call(this,e),this.coordinateToCanvasPixelTransform=Object(Et.c)(),this.hitCanvasContext_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.composeFrame=function(t,e,i){this.preCompose(i,t);var n=this.getImage();if(n){var r=e.extent,o=void 0!==r&&!Object(gt.g)(r,t.extent)&&Object(gt.F)(r,t.extent);o&&this.clip(i,t,r);var a=this.getImageTransform(),s=i.globalAlpha;i.globalAlpha=e.opacity;var h=a[4],c=a[5],l=n.width*a[0],u=n.height*a[3];i.drawImage(n,0,0,+n.width,+n.height,Math.round(h),Math.round(c),Math.round(l),Math.round(u)),i.globalAlpha=s,o&&i.restore()}this.postCompose(i,t,e)},e.prototype.getImage=function(){},e.prototype.getImageTransform=function(){},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){var o=this.getLayer(),a=o.getSource(),s=e.viewState.resolution,h=e.viewState.rotation,c=e.skippedFeatureUids;return a.forEachFeatureAtCoordinate(t,s,h,i,c,function(t){return n.call(r,t,o)})},e.prototype.forEachLayerAtCoordinate=function(e,i,n,r,o){if(this.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==yt.c)return t.prototype.forEachLayerAtCoordinate.call(this,arguments);var a=Object(Et.a)(this.coordinateToCanvasPixelTransform,e.slice());Object(Yt.g)(a,i.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=Object(vt.a)(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),a[0],a[1],1,1,0,0,1,1);var s=this.hitCanvasContext_.getImageData(0,0,1,1).data;return s[3]>0?r.call(o,this.getLayer(),s):void 0}},e}(Tn),Cn=function(t){function e(i){if(t.call(this,i),this.image_=null,this.imageTransform_=Object(Et.c)(),this.skippedFeatures_=[],this.vectorRenderer_=null,i.getType()===cn.a.VECTOR)for(var n=0,r=Mn.length;n<r;++n){var o=Mn[n];if(o!==e&&o.handles(i)){this.vectorRenderer_=new o(i);break}}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.vectorRenderer_&&this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.prepareFrame=function(t,e){var i,n=t.pixelRatio,r=t.size,o=t.viewState,a=o.center,s=o.resolution,h=this.getLayer().getSource(),c=t.viewHints,l=this.vectorRenderer_,u=t.extent;if(l||void 0===e.extent||(u=Object(gt.B)(u,e.extent)),!c[mt.a.ANIMATING]&&!c[mt.a.INTERACTING]&&!Object(gt.H)(u)){var p=o.projection;if(!on.a){var d=h.getProjection();d&&(p=d)}var f=this.skippedFeatures_;if(l){var m=l.context,v=Object(ut.a)({},t,{size:[Object(gt.E)(u)/s,Object(gt.A)(u)/s],viewState:Object(ut.a)({},t.viewState,{rotation:0})}),g=Object.keys(v.skippedFeatureUids).sort();i=new hn(u,s,n,m.canvas,function(t){!l.prepareFrame(v,e)||!l.replayGroupChanged&&Object(K.b)(f,g)||(m.canvas.width=v.size[0]*n,m.canvas.height=v.size[1]*n,l.compose(m,v,e),f=g,t())})}else i=h.getImage(u,s,n,p);i&&this.loadImage(i)&&(this.image_=i,this.skippedFeatures_=f)}if(this.image_){var y=(i=this.image_).getExtent(),_=i.getResolution(),x=i.getPixelRatio(),b=n*_/(s*x),M=Object(Et.b)(this.imageTransform_,n*r[0]/2,n*r[1]/2,b,b,0,x*(y[0]-a[0])/_,x*(a[1]-y[3])/_);Object(Et.b)(this.coordinateToCanvasPixelTransform,n*r[0]/2-M[4],n*r[1]/2-M[5],n/s,-n/s,0,-a[0],-a[1]),this.renderedResolution=_*n/x}return!!this.image_},e.prototype.forEachFeatureAtCoordinate=function(e,i,n,r,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,i,n,r,o):t.prototype.forEachFeatureAtCoordinate.call(this,e,i,n,r,o)},e}(Sn);Cn.handles=function(t){return t.getType()===cn.a.IMAGE||t.getType()===cn.a.VECTOR&&t.getRenderMode()===ln.a.IMAGE},Cn.create=function(t,e){return new Cn(e)};var On=Cn,Rn=i("o1CS"),An=function(t){function e(e,i){t.call(this,e),this.context=i?null:Object(vt.a)(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Object(gt.j)(),this.tmpTileRange_=new Rn.b(0,0,0,0),this.imageTransform_=Object(Et.c)(),this.zDirection=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isDrawableTile_=function(t){var e=t.getState(),i=this.getLayer().getUseInterimTilesOnError();return e==ct.a.LOADED||e==ct.a.EMPTY||e==ct.a.ERROR&&!i},e.prototype.getTile=function(t,e,i,n,r){var o=this.getLayer(),a=o.getSource().getTile(t,e,i,n,r);return a.getState()==ct.a.ERROR&&(o.getUseInterimTilesOnError()?o.getPreload()>0&&(this.newTiles_=!0):a.setState(ct.a.LOADED)),this.isDrawableTile_(a)||(a=a.getInterimTile()),a},e.prototype.prepareFrame=function(t,e){var i=t.pixelRatio,r=t.size,o=t.viewState,a=o.projection,s=o.resolution,h=o.center,c=this.getLayer(),l=c.getSource(),u=l.getRevision(),p=l.getTileGridForProjection(a),d=p.getZForResolution(s,this.zDirection),f=p.getResolution(d),m=Math.round(s/f)||1,v=t.extent;if(void 0!==e.extent&&(v=Object(gt.B)(v,e.extent)),Object(gt.H)(v))return!1;var g=p.getTileRangeForExtentAndZ(v,d),y=p.getTileRangeExtent(d,g),_=l.getTilePixelRatio(i),x={};x[d]={};var b,M,w,E=this.createLoadedTileFinder(l,a,x),T=t.viewHints,S=T[mt.a.ANIMATING]||T[mt.a.INTERACTING],C=this.tmpExtent,O=this.tmpTileRange_;for(this.newTiles_=!1,M=g.minX;M<=g.maxX;++M)for(w=g.minY;w<=g.maxY;++w)if(!(Date.now()-t.time>16&&S)){if(b=this.getTile(d,M,w,i,a),this.isDrawableTile_(b)){var R=Object(n.b)(this);if(b.getState()==ct.a.LOADED){x[d][b.tileCoord.toString()]=b;var A=b.inTransition(R);this.newTiles_||!A&&-1!==this.renderedTiles.indexOf(b)||(this.newTiles_=!0)}if(1===b.getAlpha(R,t.time))continue}var L=p.getTileCoordChildTileRange(b.tileCoord,O,C),P=!1;L&&(P=E(d+1,L)),P||p.forEachTileCoordParentTileRange(b.tileCoord,E,null,O,C)}var I=f*i/_*m;if(!(this.renderedResolution&&Date.now()-t.time>16&&S)&&(this.newTiles_||!this.renderedExtent_||!Object(gt.g)(this.renderedExtent_,v)||this.renderedRevision!=u||m!=this.oversampling_||!S&&I!=this.renderedResolution)){var N=this.context;if(N){var F=l.getTilePixelSize(d,i,a),D=Math.round(g.getWidth()*F[0]/m),j=Math.round(g.getHeight()*F[1]/m),k=N.canvas;k.width!=D||k.height!=j?(this.oversampling_=m,k.width=D,k.height=j):(this.renderedExtent_&&!Object(gt.p)(y,this.renderedExtent_)&&N.clearRect(0,0,D,j),m=this.oversampling_)}this.renderedTiles.length=0;var G,U,z,B,H,V,W,X,Y,q,K=Object.keys(x).map(Number);for(K.sort(function(t,e){return t===d?1:e===d?-1:t>e?1:t<e?-1:0}),B=0,H=K.length;B<H;++B)for(var Z in z=K[B],U=l.getTilePixelSize(z,i,a),G=p.getResolution(z)/f,W=_*l.getGutterForProjection(a),X=x[z])b=X[Z],M=((V=p.getTileCoordExtent(b.getTileCoord(),C))[0]-y[0])/f*_/m,w=(y[3]-V[3])/f*_/m,Y=U[0]*G/m,q=U[1]*G/m,this.drawTileImage(b,t,e,M,w,Y,q,W,d===z),this.renderedTiles.push(b);this.renderedRevision=u,this.renderedResolution=f*i/_*m,this.renderedExtent_=y}var $=this.renderedResolution/s,J=Object(Et.b)(this.imageTransform_,i*r[0]/2,i*r[1]/2,$,$,0,(this.renderedExtent_[0]-h[0])/this.renderedResolution*i,(h[1]-this.renderedExtent_[3])/this.renderedResolution*i);return Object(Et.b)(this.coordinateToCanvasPixelTransform,i*r[0]/2-J[4],i*r[1]/2-J[5],i/s,-i/s,0,-h[0],-h[1]),this.updateUsedTiles(t.usedTiles,l,d,g),this.manageTilePyramid(t,l,p,i,a,v,d,c.getPreload()),this.scheduleExpireCache(t,l),this.renderedTiles.length>0},e.prototype.drawTileImage=function(t,e,i,r,o,a,s,h,c){var l=t.getImage(this.getLayer());if(l){var u=Object(n.b)(this),p=c?t.getAlpha(u,e.time):1;1!==p||this.getLayer().getSource().getOpaque(e.viewState.projection)||this.context.clearRect(r,o,a,s);var d=p!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(l,h,h,l.width-2*h,l.height-2*h,r,o,a,s),d&&this.context.restore(),1!==p?e.animate=!0:c&&t.endTransition(u)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getImageTransform=function(){return this.imageTransform_},e}(Sn);An.handles=function(t){return t.getType()===cn.a.TILE},An.create=function(t,e){return new An(e)},An.prototype.getLayer;var Ln=An,Pn=i("emf4"),In=i.n(Pn),Nn=function(){};Nn.prototype.getReplay=function(t,e){},Nn.prototype.isEmpty=function(){};var Fn=Nn,Dn={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"},jn=i("+Ggc"),kn=i("wupX"),Gn=i("3ahG");function Un(t,e,i,n,r,o,a,s){for(var h,c,l,u=[],p=t[e]>t[i-n],d=r.length,f=t[e],m=t[e+1],v=t[e+=n],g=t[e+1],y=0,_=Math.sqrt(Math.pow(v-f,2)+Math.pow(g-m,2)),x="",b=0,M=0;M<d;++M){c=p?d-M-1:M;var w=r.charAt(c),E=o(x=p?w+x:x+w)-b;b+=E;for(var T=a+E/2;e<i-n&&y+_<T;)f=v,m=g,v=t[e+=n],g=t[e+1],y+=_,_=Math.sqrt(Math.pow(v-f,2)+Math.pow(g-m,2));var S=T-y,C=Math.atan2(g-m,v-f);if(p&&(C+=C>0?-Math.PI:Math.PI),void 0!==l){var O=C-l;if(O+=O>Math.PI?-2*Math.PI:O<-Math.PI?2*Math.PI:0,Math.abs(O)>s)return null}var R=S/_,A=Object(kt.c)(f,v,R),L=Object(kt.c)(m,g,R);l==C?(p&&(h[0]=A,h[1]=L,h[2]=E/2),h[4]=x):(b=E,h=[A,L,E/2,C,x=w],p?u.unshift(h):u.push(h),l=C),a+=E}return u}var zn={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Bn=[zn.FILL],Hn=[zn.STROKE],Vn=[zn.BEGIN_PATH],Wn=[zn.CLOSE_PATH],Xn=zn,Yn=[Dn.POLYGON,Dn.CIRCLE,Dn.LINE_STRING,Dn.IMAGE,Dn.TEXT,Dn.DEFAULT],qn={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Kn=Object(gt.j)(),Zn=Object(Et.c)(),$n=function(t){function e(e,i,n,r,o,a){t.call(this),this.declutterTree=a,this.tolerance=e,this.maxExtent=i,this.overlaps=o,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=n,this.alignFill_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=Object(Et.c)(),this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replayTextBackground_=function(t,e,i,n,r,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},e.prototype.replayImage_=function(t,e,i,n,r,o,a,s,h,c,l,u,p,d,f,m,v,g){var y=v||g;e-=r*=p,i-=o*=p;var _,x,b,M,w=f+c>n.width?n.width-c:f,E=s+l>n.height?n.height-l:s,T=m[3]+w*p+m[1],S=m[0]+E*p+m[2],C=e-m[3],O=i-m[0];(y||0!==u)&&(_=[C,O],x=[C+T,O],b=[C+T,O+S],M=[C,O+S]);var R=null;if(0!==u){var A=e+r,L=i+o;R=Object(Et.b)(Zn,A,L,1,1,u,-A,-L),Object(gt.l)(Kn),Object(gt.r)(Kn,Object(Et.a)(Zn,_)),Object(gt.r)(Kn,Object(Et.a)(Zn,x)),Object(gt.r)(Kn,Object(Et.a)(Zn,b)),Object(gt.r)(Kn,Object(Et.a)(Zn,M))}else Object(gt.k)(C,O,C+T,O+S,Kn);var P=t.canvas,I=g?g[2]*p/2:0,N=Kn[0]-I<=P.width&&Kn[2]+I>=0&&Kn[1]-I<=P.height&&Kn[3]+I>=0;if(d&&(e=Math.round(e),i=Math.round(i)),a){if(!N&&1==a[4])return;Object(gt.q)(a,Kn);var F=N?[t,R?R.slice(0):null,h,n,c,l,w,E,e,i,p]:null;F&&y&&F.push(v,g,_,x,b,M),a.push(F)}else N&&(y&&this.replayTextBackground_(t,_,x,b,M,v,g),Object(pn.n)(t,R,h,n,c,l,w,E,e,i,p))},e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},e.prototype.appendFlatCoordinates=function(t,e,i,n,r,o){var a=this.coordinates.length,s=this.getBufferedMaxExtent();o&&(e+=n);var h,c,l,u=[t[e],t[e+1]],p=[NaN,NaN],d=!0;for(h=e+n;h<i;h+=n)p[0]=t[h],p[1]=t[h+1],(l=Object(gt.i)(s,p))!==c?(d&&(this.coordinates[a++]=u[0],this.coordinates[a++]=u[1]),this.coordinates[a++]=p[0],this.coordinates[a++]=p[1],d=!1):l===jn.a.INTERSECTING?(this.coordinates[a++]=p[0],this.coordinates[a++]=p[1],d=!1):d=!0,u[0]=p[0],u[1]=p[1],c=l;return(r&&d||h===e+n)&&(this.coordinates[a++]=u[0],this.coordinates[a++]=u[1]),a},e.prototype.drawCustomCoordinates_=function(t,e,i,n,r){for(var o=0,a=i.length;o<a;++o){var s=i[o],h=this.appendFlatCoordinates(t,e,s,n,!1,!1);r.push(h),e=s}return e},e.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var n,r,o,a,s,h=t.getType(),c=t.getStride(),l=this.coordinates.length;if(h==ai.a.MULTI_POLYGON){n=(t=t).getOrientedFlatCoordinates(),a=[];var u=t.getEndss();s=0;for(var p=0,d=u.length;p<d;++p){var f=[];s=this.drawCustomCoordinates_(n,s,u[p],c,f),a.push(f)}this.instructions.push([Xn.CUSTOM,l,a,t,i,kn.c])}else h==ai.a.POLYGON||h==ai.a.MULTI_LINE_STRING?(o=[],n=h==ai.a.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),s=this.drawCustomCoordinates_(n,0,t.getEnds(),c,o),this.instructions.push([Xn.CUSTOM,l,o,t,i,kn.b])):h==ai.a.LINE_STRING||h==ai.a.MULTI_POINT?(n=t.getFlatCoordinates(),r=this.appendFlatCoordinates(n,0,n.length,c,!1,!1),this.instructions.push([Xn.CUSTOM,l,r,t,i,kn.a])):h==ai.a.POINT&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),r=this.coordinates.length,this.instructions.push([Xn.CUSTOM,l,r,t,i]));this.endGeometry(t,e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[Xn.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Xn.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.fill_=function(t){if(this.alignFill_){var e=Object(Et.a)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,pn.r)},e.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],c.a&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},e.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){var i=t[4];if(1==i||i==t.length-5){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(n)){this.declutterTree.insert(n);for(var r=5,o=t.length;r<o;++r){var a=t[r];a&&(a.length>11&&this.replayTextBackground_(a[0],a[13],a[14],a[15],a[16],a[11],a[12]),pn.n.apply(void 0,a))}}t.length=5,Object(gt.l)(t)}}},e.prototype.replay_=function(t,e,i,r,o,a,s){var h;this.pixelCoordinates_&&Object(K.b)(e,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=Object(fn.c)(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),Object(Et.g)(this.renderedTransform_,e));for(var c,l,u,p,d,f,m,v,g,y,_,x,b=!Object(ut.d)(i),M=0,w=r.length,E=0,T=0,S=0,C=null,O=null,R=this.coordinateCache_,A=this.viewRotation_,L={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:A},P=this.instructions!=r||this.overlaps?0:200;M<w;){var I=r[M];switch(I[0]){case Xn.BEGIN_GEOMETRY:y=I[1],b&&i[Object(n.b)(y).toString()]||!y.getGeometry()?M=I[2]:void 0===s||Object(gt.F)(s,y.getGeometry().getExtent())?++M:M=I[2]+1;break;case Xn.BEGIN_PATH:T>P&&(this.fill_(t),T=0),S>P&&(t.stroke(),S=0),T||S||(t.beginPath(),p=d=NaN),++M;break;case Xn.CIRCLE:var N=h[E=I[1]],F=h[E+1],D=h[E+2]-N,j=h[E+3]-F,k=Math.sqrt(D*D+j*j);t.moveTo(N+k,F),t.arc(N,F,k,0,2*Math.PI,!0),++M;break;case Xn.CLOSE_PATH:t.closePath(),++M;break;case Xn.CUSTOM:E=I[1],c=I[2];var G=I[3],U=I[4],z=6==I.length?I[5]:void 0;L.geometry=G,L.feature=y,M in R||(R[M]=[]);var B=R[M];z?z(h,E,c,2,B):(B[0]=h[E],B[1]=h[E+1],B.length=2),U(B,L),++M;break;case Xn.DRAW_IMAGE:E=I[1],c=I[2],g=I[3],l=I[4],u=I[5],v=a?null:I[6];var H=I[7],V=I[8],W=I[9],X=I[10],Y=I[11],q=I[12],Z=I[13],$=I[14],J=void 0,Q=void 0,tt=void 0;for(I.length>16?(J=I[15],Q=I[16],tt=I[17]):(J=pn.j,Q=tt=!1),Y&&(q+=A);E<c;E+=2)this.replayImage_(t,h[E],h[E+1],g,l,u,v,H,V,W,X,q,Z,o,$,J,Q?C:null,tt?O:null);this.renderDeclutter_(v,y),++M;break;case Xn.DRAW_CHARS:var et=I[1],it=I[2],nt=I[3];v=a?null:I[4];var rt=I[5],ot=I[6],at=I[7],st=I[8],ht=I[9],ct=I[10],lt=I[11],pt=I[12],dt=I[13],ft=I[14],mt=Object(Gn.a)(h,et,it,2),vt=st(pt);if(rt||vt<=mt){var yt=this.textStates[dt].textAlign,_t=Un(h,et,it,2,pt,st,(mt-vt)*qn[yt],at);if(_t){var xt=void 0,bt=void 0,Mt=void 0,wt=void 0,Tt=void 0;if(ct)for(xt=0,bt=_t.length;xt<bt;++xt)Mt=(Tt=_t[xt])[4],wt=this.getImage(Mt,dt,"",ct),l=Tt[2]+lt,u=nt*wt.height+2*(.5-nt)*lt-ht,this.replayImage_(t,Tt[0],Tt[1],wt,l,u,v,wt.height,1,0,0,Tt[3],ft,!1,wt.width,pn.j,null,null);if(ot)for(xt=0,bt=_t.length;xt<bt;++xt)Mt=(Tt=_t[xt])[4],wt=this.getImage(Mt,dt,ot,""),l=Tt[2],u=nt*wt.height-ht,this.replayImage_(t,Tt[0],Tt[1],wt,l,u,v,wt.height,1,0,0,Tt[3],ft,!1,wt.width,pn.j,null,null)}}this.renderDeclutter_(v,y),++M;break;case Xn.END_GEOMETRY:if(void 0!==a){var St=a(y=I[1]);if(St)return St}++M;break;case Xn.FILL:P?T++:this.fill_(t),++M;break;case Xn.MOVE_TO_LINE_TO:for(E=I[1],c=I[2],_=h[E],m=(x=h[E+1])+.5|0,(f=_+.5|0)===p&&m===d||(t.moveTo(_,x),p=f,d=m),E+=2;E<c;E+=2)f=(_=h[E])+.5|0,m=(x=h[E+1])+.5|0,E!=c-2&&f===p&&m===d||(t.lineTo(_,x),p=f,d=m);++M;break;case Xn.SET_FILL_STYLE:C=I,this.alignFill_=I[2],T&&(this.fill_(t),T=0,S&&(t.stroke(),S=0)),t.fillStyle=I[1],++M;break;case Xn.SET_STROKE_STYLE:O=I,S&&(t.stroke(),S=0),this.setStrokeStyle_(t,I),++M;break;case Xn.STROKE:P?S++:t.stroke(),++M;break;default:++M}}T&&this.fill_(t),S&&t.stroke()},e.prototype.replay=function(t,e,i,n,r){this.viewRotation_=i,this.replay_(t,e,n,this.instructions,r,void 0,void 0)},e.prototype.replayHitDetection=function(t,e,i,n,r,o){return this.viewRotation_=i,this.replay_(t,e,n,this.hitDetectionInstructions,!0,r,o)},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,n,r=e.length,o=-1;for(t=0;t<r;++t)(n=(i=e[t])[0])==Xn.END_GEOMETRY?o=t:n==Xn.BEGIN_GEOMETRY&&(i[2]=t,Object(K.i)(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var n=t.getColor();i.fillStyle=Object(dn.a)(n||pn.b)}else i.fillStyle=void 0;if(e){var r=e.getColor();i.strokeStyle=Object(dn.a)(r||pn.k);var o=e.getLineCap();i.lineCap=void 0!==o?o:pn.d;var a=e.getLineDash();i.lineDash=a?a.slice():pn.e;var s=e.getLineDashOffset();i.lineDashOffset=s||pn.f;var h=e.getLineJoin();i.lineJoin=void 0!==h?h:pn.g;var c=e.getWidth();i.lineWidth=void 0!==c?c:pn.h;var l=e.getMiterLimit();i.miterLimit=void 0!==l?l:pn.i,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t,e){var i=t.fillStyle,n=[Xn.SET_FILL_STYLE,i];return"string"!=typeof i&&n.push(!0),n},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[Xn.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e,i){var n=t.fillStyle;"string"==typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t,i)),t.currentFillStyle=n)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,n=t.lineCap,r=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,s=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||r!=t.currentLineDash&&!Object(K.b)(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=s||t.currentMiterLimit!=h)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=s,t.currentMiterLimit=h)},e.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[Xn.END_GEOMETRY,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Object(gt.d)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Object(gt.c)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(vn);$n.prototype.finish=yt.c;var Jn=$n,Qn=function(t){function e(e,i,n,r,o,a){t.call(this,e,i,n,r,o,a),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,i,n){return this.appendFlatCoordinates(t,e,i,n,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([Xn.DRAW_IMAGE,r,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([Xn.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([Xn.DRAW_IMAGE,r,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([Xn.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),n=t.getSize(),r=t.getHitDetectionImage(1),o=t.getImage(1),a=t.getOrigin();this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroup_=e,this.hitDetectionImage_=r,this.image_=o,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=n[0]},e}(Jn),tr=function(t){function e(e,i,n,r,o,a){t.call(this,e,i,n,r,o,a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinates_=function(t,e,i,n){var r=this.coordinates.length,o=this.appendFlatCoordinates(t,e,i,n,!1,!1),a=[Xn.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i},e.prototype.drawLineString=function(t,e){var i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0!==n&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Xn.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Vn);var o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(Hn),this.endGeometry(t,e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0!==n&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Xn.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Vn);for(var o=t.getEnds(),a=t.getFlatCoordinates(),s=t.getStride(),h=0,c=0,l=o.length;c<l;++c)h=this.drawFlatCoordinates_(a,h,o[c],s);this.hitDetectionInstructions.push(Hn),this.endGeometry(t,e)}},e.prototype.finish=function(){var t=this.state;void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Hn),this.reverseHitDetectionInstructions(),this.state=null},e.prototype.applyStroke=function(e){void 0!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Hn),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(Vn)},e}(Jn),er=i("FeXB"),ir=i("LmAy"),nr=function(t){function e(e,i,n,r,o,a){t.call(this,e,i,n,r,o,a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinatess_=function(t,e,i,n){var r=this.state,o=void 0!==r.fillStyle,a=void 0!=r.strokeStyle,s=i.length;this.instructions.push(Vn),this.hitDetectionInstructions.push(Vn);for(var h=0;h<s;++h){var c=i[h],l=this.coordinates.length,u=this.appendFlatCoordinates(t,e,c,n,!0,!a),p=[Xn.MOVE_TO_LINE_TO,l,u];this.instructions.push(p),this.hitDetectionInstructions.push(p),a&&(this.instructions.push(Wn),this.hitDetectionInstructions.push(Wn)),e=c}return o&&(this.instructions.push(Bn),this.hitDetectionInstructions.push(Bn)),a&&(this.instructions.push(Hn),this.hitDetectionInstructions.push(Hn)),e},e.prototype.drawCircle=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Xn.SET_FILL_STYLE,Object(er.b)(pn.b)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Xn.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length;this.appendFlatCoordinates(o,0,o.length,a,!1,!1);var h=[Xn.CIRCLE,s];this.instructions.push(Vn,h),this.hitDetectionInstructions.push(Vn,h),this.hitDetectionInstructions.push(Bn),void 0!==i.fillStyle&&this.instructions.push(Bn),void 0!==i.strokeStyle&&(this.instructions.push(Hn),this.hitDetectionInstructions.push(Hn)),this.endGeometry(t,e)}},e.prototype.drawPolygon=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Xn.SET_FILL_STYLE,Object(er.b)(pn.b)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Xn.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),a=t.getOrientedFlatCoordinates(),s=t.getStride();this.drawFlatCoordinatess_(a,0,o,s),this.endGeometry(t,e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Xn.SET_FILL_STYLE,Object(er.b)(pn.b)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Xn.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var o=t.getEndss(),a=t.getOrientedFlatCoordinates(),s=t.getStride(),h=0,c=0,l=o.length;c<l;++c)h=this.drawFlatCoordinatess_(a,h,o[c],s);this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,i=0,n=e.length;i<n;++i)e[i]=Object(ir.e)(e[i],t)},e.prototype.setFillStrokeStyles_=function(t){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},e}(Jn);function rr(t,e,i,n,r){var o,a,s,h,c,l,u,p,d,f=i,m=i,v=0,g=0,y=i;for(o=i;o<n;o+=r){var _=e[o],x=e[o+1];void 0!==h&&(p=_-h,d=x-c,s=Math.sqrt(p*p+d*d),void 0!==l&&(g+=a,Math.acos((l*p+u*d)/(a*s))>t&&(g>v&&(v=g,f=y,m=o),g=0,y=o-r)),a=s,l=p,u=d),h=_,c=x}return(g+=s)>v?[y,o]:[f,m]}var or="line";var ar={Circle:nr,Default:Jn,Image:Qn,LineString:tr,Polygon:nr,Text:function(t){function e(e,i,n,r,o,a){t.call(this,e,i,n,r,o,a),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},pn.o.prune()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawText=function(t,e){var i=this.textFillState_,n=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(i||n)){var o,a,s=this.coordinates.length,h=t.getType(),c=null,l=2,u=2;if(r.placement===or){if(!Object(gt.F)(this.getBufferedMaxExtent(),t.getExtent()))return;var p;if(c=t.getFlatCoordinates(),u=t.getStride(),h==ai.a.LINE_STRING)p=[c.length];else if(h==ai.a.MULTI_LINE_STRING)p=t.getEnds();else if(h==ai.a.POLYGON)p=t.getEnds().slice(0,1);else if(h==ai.a.MULTI_POLYGON){var d=t.getEndss();for(p=[],o=0,a=d.length;o<a;++o)p.push(d[o][0])}this.beginGeometry(t,e);for(var f,m=r.textAlign,v=0,g=0,y=p.length;g<y;++g){if(void 0==m){var _=rr(r.maxAngle,c,v,p[g],u);v=_[0],f=_[1]}else f=p[g];for(o=v;o<f;o+=u)this.coordinates.push(c[o],c[o+1]);l=this.coordinates.length,v=p[g],this.drawChars_(s,l,this.declutterGroup_),s=l}this.endGeometry(t,e)}else{var x=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),b=x.width/this.pixelRatio;switch(h){case ai.a.POINT:case ai.a.MULTI_POINT:l=(c=t.getFlatCoordinates()).length;break;case ai.a.LINE_STRING:c=t.getFlatMidpoint();break;case ai.a.CIRCLE:c=t.getCenter();break;case ai.a.MULTI_LINE_STRING:l=(c=t.getFlatMidpoints()).length;break;case ai.a.POLYGON:if(c=t.getFlatInteriorPoint(),!r.overflow&&c[2]/this.resolution<b)return;u=3;break;case ai.a.MULTI_POLYGON:var M=t.getFlatInteriorPoints();for(c=[],o=0,a=M.length;o<a;o+=3)(r.overflow||M[o+2]/this.resolution>=b)&&c.push(M[o],M[o+1]);if(0==(l=c.length))return}l=this.appendFlatCoordinates(c,0,l,u,!1,!1),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e),this.drawTextImage_(x,s,l),this.endGeometry(t,e)}}},e.prototype.getImage=function(t,e,i,n){var r,o=n+e+t+i+this.pixelRatio;if(!pn.o.containsKey(o)){var a=n?this.strokeStates[n]||this.textStrokeState_:null,s=i?this.fillStates[i]||this.textFillState_:null,h=this.textStates[e]||this.textState_,l=this.pixelRatio,u=h.scale*l,p=qn[h.textAlign||pn.l],d=n&&a.lineWidth?a.lineWidth:0,f=t.split("\n"),m=f.length,v=[],g=function(t,e,i){for(var n=e.length,r=0,o=0;o<n;++o){var a=Object(pn.q)(t,e[o]);r=Math.max(r,a),i.push(a)}return r}(h.font,f,v),y=Object(pn.p)(h.font),_=y*m,x=g+d,b=Object(vt.a)(Math.ceil(x*u),Math.ceil((_+d)*u));r=b.canvas,pn.o.set(o,r),1!=u&&b.scale(u,u),b.font=h.font,n&&(b.strokeStyle=a.strokeStyle,b.lineWidth=d,b.lineCap=a.lineCap,b.lineJoin=a.lineJoin,b.miterLimit=a.miterLimit,c.a&&a.lineDash.length&&(b.setLineDash(a.lineDash),b.lineDashOffset=a.lineDashOffset)),i&&(b.fillStyle=s.fillStyle),b.textBaseline="middle",b.textAlign="center";var M,w=.5-p,E=p*r.width/u+w*d;if(n)for(M=0;M<m;++M)b.strokeText(f[M],E+w*v[M],.5*(d+y)+M*y);if(i)for(M=0;M<m;++M)b.fillText(f[M],E+w*v[M],.5*(d+y)+M*y)}return pn.o.get(o)},e.prototype.drawTextImage_=function(t,e,i){var n=this.textState_,r=this.textStrokeState_,o=this.pixelRatio,a=qn[n.textAlign||pn.l],s=qn[n.textBaseline],h=r&&r.lineWidth?r.lineWidth:0,c=a*t.width/o+2*(.5-a)*h,l=s*t.height/o+2*(.5-s)*h;this.instructions.push([Xn.DRAW_IMAGE,e,i,t,(c-this.textOffsetX_)*o,(l-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,t.width,n.padding==pn.j?pn.j:n.padding.map(function(t){return t*o}),!!n.backgroundFill,!!n.backgroundStroke]),this.hitDetectionInstructions.push([Xn.DRAW_IMAGE,e,i,t,(c-this.textOffsetX_)*o,(l-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/o,t.width,n.padding,!!n.backgroundFill,!!n.backgroundStroke])},e.prototype.drawChars_=function(t,e,i){var n=this.textStrokeState_,r=this.textState_,o=this.textFillState_,a=this.strokeKey_;n&&(a in this.strokeStates||(this.strokeStates[a]={strokeStyle:n.strokeStyle,lineCap:n.lineCap,lineDashOffset:n.lineDashOffset,lineWidth:n.lineWidth,lineJoin:n.lineJoin,miterLimit:n.miterLimit,lineDash:n.lineDash}));var s=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:r.font,textAlign:r.textAlign||pn.l,scale:r.scale});var h=this.fillKey_;o&&(h in this.fillStates||(this.fillStates[h]={fillStyle:o.fillStyle}));var c=this.pixelRatio,l=qn[r.textBaseline],u=this.textOffsetY_*c,p=this.text_,d=r.font,f=r.scale,m=n?n.lineWidth*f/2:0,v=this.widths_[d];v||(this.widths_[d]=v={}),this.instructions.push([Xn.DRAW_CHARS,t,e,l,i,r.overflow,h,r.maxAngle,function(t){var e=v[t];return e||(e=v[t]=Object(pn.q)(d,t)),e*f*c},u,a,m*c,p,s,1]),this.hitDetectionInstructions.push([Xn.DRAW_CHARS,t,e,l,i,r.overflow,h,r.maxAngle,function(t){var e=v[t];return e||(e=v[t]=Object(pn.q)(d,t)),e*f},u,a,m,p,s,1/c])},e.prototype.setTextStyle=function(t,e){var i,r,o;if(t){this.declutterGroup_=e;var a=t.getFill();a?((r=this.textFillState_)||(r=this.textFillState_={}),r.fillStyle=Object(dn.a)(a.getColor()||pn.b)):r=this.textFillState_=null;var s=t.getStroke();if(s){(o=this.textStrokeState_)||(o=this.textStrokeState_={});var h=s.getLineDash(),c=s.getLineDashOffset(),l=s.getWidth(),u=s.getMiterLimit();o.lineCap=s.getLineCap()||pn.d,o.lineDash=h?h.slice():pn.e,o.lineDashOffset=void 0===c?pn.f:c,o.lineJoin=s.getLineJoin()||pn.g,o.lineWidth=void 0===l?pn.h:l,o.miterLimit=void 0===u?pn.i:u,o.strokeStyle=Object(dn.a)(s.getColor()||pn.k)}else o=this.textStrokeState_=null;i=this.textState_;var p=t.getFont()||pn.c;Object(pn.a)(p);var d=t.getScale();i.overflow=t.getOverflow(),i.font=p,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||pn.m,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||pn.j,i.scale=void 0===d?1:d;var f=t.getOffsetX(),m=t.getOffsetY(),v=t.getRotateWithView(),g=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===f?0:f,this.textOffsetY_=void 0===m?0:m,this.textRotateWithView_=void 0!==v&&v,this.textRotation_=void 0===g?0:g,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:Object(n.b)(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+Object(n.b)(r.fillStyle):""}else this.text_=""},e}(Jn)},sr=function(t){function e(e,i,n,r,o,a,s){t.call(this),this.declutterTree_=a,this.declutterGroup_=null,this.tolerance_=e,this.maxExtent_=i,this.overlaps_=o,this.pixelRatio_=r,this.resolution_=n,this.renderBuffer_=s,this.replaysByZIndex_={},this.hitDetectionContext_=Object(vt.a)(1,1),this.hitDetectionTransform_=Object(Et.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addDeclutter=function(t){var e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=Object(gt.j)()).push(1)),e},e.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},e.prototype.hasReplays=function(t){for(var e in this.replaysByZIndex_)for(var i=this.replaysByZIndex_[e],n=0,r=t.length;n<r;++n)if(t[n]in i)return!0;return!1},e.prototype.finish=function(){for(var t in this.replaysByZIndex_){var e=this.replaysByZIndex_[t];for(var i in e)e[i].finish()}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r,o,a){var s,h=2*(n=Math.round(n))+1,c=Object(Et.b)(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]),l=this.hitDetectionContext_;l.canvas.width!==h||l.canvas.height!==h?(l.canvas.width=h,l.canvas.height=h):l.clearRect(0,0,h,h),void 0!==this.renderBuffer_&&(s=Object(gt.j)(),Object(gt.r)(s,t),Object(gt.c)(s,e*(this.renderBuffer_+n),s));var u,p,d=function(t){if(void 0!==hr[t])return hr[t];for(var e=2*t+1,i=new Array(e),n=0;n<e;n++)i[n]=new Array(e);var r=t,o=0,a=0;for(;r>=o;)cr(i,t+r,t+o),cr(i,t+o,t+r),cr(i,t-o,t+r),cr(i,t-r,t+o),cr(i,t-r,t-o),cr(i,t-o,t-r),cr(i,t+o,t-r),cr(i,t+r,t-o),2*((a+=1+2*++o)-r)+1>0&&(a+=1-2*(r-=1));return hr[t]=i,i}(n);function f(t){for(var e=l.getImageData(0,0,h,h).data,i=0;i<h;i++)for(var n=0;n<h;n++)if(d[i][n]&&e[4*(n*h+i)+3]>0){var r=void 0;return(!u||p!=Dn.IMAGE&&p!=Dn.TEXT||-1!==u.indexOf(t))&&(r=o(t)),r||void l.clearRect(0,0,h,h)}}this.declutterTree_&&(u=this.declutterTree_.all().map(function(t){return t.value}));var m,v,g,y,_,x=Object.keys(this.replaysByZIndex_).map(Number);for(x.sort(K.g),m=x.length-1;m>=0;--m){var b=x[m].toString();for(g=this.replaysByZIndex_[b],v=Yn.length-1;v>=0;--v)if(void 0!==(y=g[p=Yn[v]]))if(!a||p!=Dn.IMAGE&&p!=Dn.TEXT){if(_=y.replayHitDetection(l,c,i,r,f,s))return _}else{var M=a[b];M?M.push(y,c.slice(0)):a[b]=[y,c.slice(0)]}}},e.prototype.getClipCoords=function(t){var e=this.maxExtent_,i=e[0],n=e[1],r=e[2],o=e[3],a=[i,n,i,o,r,o,r,n];return Object(fn.c)(a,0,8,2,t,a),a},e.prototype.getReplay=function(t,e){var i=void 0!==t?t.toString():"0",n=this.replaysByZIndex_[i];void 0===n&&(n={},this.replaysByZIndex_[i]=n);var r=n[e];void 0===r&&(r=new(0,ar[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),n[e]=r);return r},e.prototype.getReplays=function(){return this.replaysByZIndex_},e.prototype.isEmpty=function(){return Object(ut.d)(this.replaysByZIndex_)},e.prototype.replay=function(t,e,i,n,r,o,a){var s=Object.keys(this.replaysByZIndex_).map(Number);s.sort(K.g),t.save(),this.clip(t,e);var h,c,l,u,p,d,f=o||Yn;for(h=0,c=s.length;h<c;++h){var m=s[h].toString();for(p=this.replaysByZIndex_[m],l=0,u=f.length;l<u;++l){var v=f[l];if(d=p[v],void 0!==d)if(!a||v!=Dn.IMAGE&&v!=Dn.TEXT)d.replay(t,e,i,n,r);else{var g=a[m];g?g.push(d,e.slice(0)):a[m]=[d,e.slice(0)]}}}t.restore()},e}(Fn),hr={0:[[!0]]};function cr(t,e,i){var n,r=Math.floor(t.length/2);if(e>=r)for(n=r;n<e;n++)t[n][i]=!0;else if(e<r)for(n=e+1;n<r;n++)t[n][i]=!0}var lr=sr,ur=.5,pr={Point:function(t,e,i,n){var r=i.getImage();if(r){if(r.getImageState()!=sn.a.LOADED)return;var o=t.getReplay(i.getZIndex(),Dn.IMAGE);o.setImageStyle(r,t.addDeclutter(!1)),o.drawPoint(e,n)}var a=i.getText();if(a){var s=t.getReplay(i.getZIndex(),Dn.TEXT);s.setTextStyle(a,t.addDeclutter(!!r)),s.drawText(e,n)}},LineString:function(t,e,i,n){var r=i.getStroke();if(r){var o=t.getReplay(i.getZIndex(),Dn.LINE_STRING);o.setFillStrokeStyle(null,r),o.drawLineString(e,n)}var a=i.getText();if(a){var s=t.getReplay(i.getZIndex(),Dn.TEXT);s.setTextStyle(a,t.addDeclutter(!1)),s.drawText(e,n)}},Polygon:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(r||o){var a=t.getReplay(i.getZIndex(),Dn.POLYGON);a.setFillStrokeStyle(r,o),a.drawPolygon(e,n)}var s=i.getText();if(s){var h=t.getReplay(i.getZIndex(),Dn.TEXT);h.setTextStyle(s,t.addDeclutter(!1)),h.drawText(e,n)}},MultiPoint:function(t,e,i,n){var r=i.getImage();if(r){if(r.getImageState()!=sn.a.LOADED)return;var o=t.getReplay(i.getZIndex(),Dn.IMAGE);o.setImageStyle(r,t.addDeclutter(!1)),o.drawMultiPoint(e,n)}var a=i.getText();if(a){var s=t.getReplay(i.getZIndex(),Dn.TEXT);s.setTextStyle(a,t.addDeclutter(!!r)),s.drawText(e,n)}},MultiLineString:function(t,e,i,n){var r=i.getStroke();if(r){var o=t.getReplay(i.getZIndex(),Dn.LINE_STRING);o.setFillStrokeStyle(null,r),o.drawMultiLineString(e,n)}var a=i.getText();if(a){var s=t.getReplay(i.getZIndex(),Dn.TEXT);s.setTextStyle(a,t.addDeclutter(!1)),s.drawText(e,n)}},MultiPolygon:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(o||r){var a=t.getReplay(i.getZIndex(),Dn.POLYGON);a.setFillStrokeStyle(r,o),a.drawMultiPolygon(e,n)}var s=i.getText();if(s){var h=t.getReplay(i.getZIndex(),Dn.TEXT);h.setTextStyle(s,t.addDeclutter(!1)),h.drawText(e,n)}},GeometryCollection:function(t,e,i,n){var r,o,a=e.getGeometriesArray();for(r=0,o=a.length;r<o;++r){var s=pr[a[r].getType()];s(t,a[r],i,n)}},Circle:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(r||o){var a=t.getReplay(i.getZIndex(),Dn.CIRCLE);a.setFillStrokeStyle(r,o),a.drawCircle(e,n)}var s=i.getText();if(s){var h=t.getReplay(i.getZIndex(),Dn.TEXT);h.setTextStyle(s,t.addDeclutter(!1)),h.drawText(e,n)}}};function dr(t,e){return Object(n.b)(t)-Object(n.b)(e)}function fr(t,e){var i=mr(t,e);return i*i}function mr(t,e){return ur*t/e}function vr(t,e,i,n,r,o){var a=!1,s=i.getImage();if(s){var h=s.getImageState();h==sn.a.LOADED||h==sn.a.ERROR?s.unlistenImageChange(r,o):(h==sn.a.IDLE&&s.load(),h=s.getImageState(),s.listenImageChange(r,o),a=!0)}return function(t,e,i,n){var r=i.getGeometryFunction()(e);if(!r)return;var o=r.getSimplifiedGeometry(n);if(i.getRenderer())!function t(e,i,n,r){if(i.getType()==ai.a.GEOMETRY_COLLECTION){for(var o=i.getGeometries(),a=0,s=o.length;a<s;++a)t(e,o[a],n,r);return}var h=e.getReplay(n.getZIndex(),Dn.DEFAULT);h.drawCustom(i,r,n.getRenderer())}(t,o,i,e);else{var a=pr[o.getType()];a(t,o,i,e)}}(t,e,i,n),a}var gr=function(t){function e(e){t.call(this,e),this.declutterTree_=e.getDeclutter()?In()(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Object(gt.j)(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=Object(vt.a)(),Object(d.a)(pn.o,l.a.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){Object(d.c)(pn.o,l.a.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.compose=function(t,e,i){var n=e.extent,r=e.pixelRatio,o=i.managed?e.skippedFeatureUids:{},a=e.viewState,s=a.projection,h=a.rotation,c=s.getExtent(),l=this.getLayer().getSource(),u=this.getTransform(e,0),p=i.extent,d=void 0!==p;d&&this.clip(t,e,p);var f=this.replayGroup_;if(f&&!f.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var m,v=this.getLayer(),g=0,y=0,_=1!==i.opacity,x=v.hasListener(at.a.RENDER);if(_||x){var b=t.canvas.width,M=t.canvas.height;if(h){var w=Math.round(Math.sqrt(b*b+M*M));g=(w-b)/2,y=(w-M)/2,b=M=w}this.context.canvas.width=b,this.context.canvas.height=M,m=this.context}else m=t;var E=m.globalAlpha;_||(m.globalAlpha=i.opacity),m!=t&&m.translate(g,y);var T=e.viewHints,S=!(T[mt.a.ANIMATING]||T[mt.a.INTERACTING]),C=e.size[0]*r,O=e.size[1]*r;if(Object(pn.s)(m,-h,C/2,O/2),f.replay(m,u,h,o,S),l.getWrapX()&&s.canWrapX()&&!Object(gt.g)(c,n)){for(var R,A=n[0],L=Object(gt.E)(c),P=0;A<c[0];)R=L*--P,u=this.getTransform(e,R),f.replay(m,u,h,o,S),A+=L;for(P=0,A=n[2];A>c[2];)R=L*++P,u=this.getTransform(e,R),f.replay(m,u,h,o,S),A-=L}if(Object(pn.s)(m,h,C/2,O/2),x&&this.dispatchRenderEvent(m,e,u),m!=t){if(_){var I=t.globalAlpha;t.globalAlpha=i.opacity,t.drawImage(m.canvas,-g,-y),t.globalAlpha=I}else t.drawImage(m.canvas,-g,-y);m.translate(-g,-y)}_||(m.globalAlpha=E)}d&&t.restore()},e.prototype.composeFrame=function(t,e,i){var n=this.getTransform(t,0);this.preCompose(i,t,n),this.compose(i,t,e),this.postCompose(i,t,e,n)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,o){if(this.replayGroup_){var a=e.viewState.resolution,s=e.viewState.rotation,h=this.getLayer(),c={};return this.replayGroup_.forEachFeatureAtCoordinate(t,a,s,i,{},function(t){var e=Object(n.b)(t).toString();if(!(e in c))return c[e]=!0,r.call(o,t,h)},null)}},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t,e){var i=this.getLayer(),n=i.getSource(),r=t.viewHints[mt.a.ANIMATING],o=t.viewHints[mt.a.INTERACTING],a=i.getUpdateWhileAnimating(),s=i.getUpdateWhileInteracting();if(!this.dirty_&&!a&&r||!s&&o)return!0;var h=t.extent,c=t.viewState,l=c.projection,u=c.resolution,p=t.pixelRatio,d=i.getRevision(),f=i.getRenderBuffer(),m=i.getRenderOrder();void 0===m&&(m=dr);var v=Object(gt.c)(h,f*u),g=c.projection.getExtent();if(n.getWrapX()&&c.projection.canWrapX()&&!Object(gt.g)(g,t.extent)){var y=Object(gt.E)(g),_=Math.max(Object(gt.E)(v)/2,y);v[0]=g[0]-_,v[2]=g[2]+_}if(!this.dirty_&&this.renderedResolution_==u&&this.renderedRevision_==d&&this.renderedRenderOrder_==m&&Object(gt.g)(this.renderedExtent_,v))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var x=new lr(mr(u,p),v,u,p,n.getOverlaps(),this.declutterTree_,i.getRenderBuffer());n.loadFeatures(v,u,l);var b=function(t){var e,n=t.getStyleFunction()||i.getStyleFunction();if(n&&(e=n(t,u)),e){var r=this.renderFeature(t,u,p,e,x);this.dirty_=this.dirty_||r}}.bind(this);if(m){var M=[];n.forEachFeatureInExtent(v,function(t){M.push(t)},this),M.sort(m);for(var w=0,E=M.length;w<E;++w)b(M[w])}else n.forEachFeatureInExtent(v,b,this);return x.finish(),this.renderedResolution_=u,this.renderedRevision_=d,this.renderedRenderOrder_=m,this.renderedExtent_=v,this.replayGroup_=x,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,i,n,r){if(!n)return!1;var o=!1;if(Array.isArray(n))for(var a=0,s=n.length;a<s;++a)o=vr(r,t,n[a],fr(e,i),this.handleStyleImageChange_,this)||o;else o=vr(r,t,n,fr(e,i),this.handleStyleImageChange_,this);return o},e}(Tn);gr.handles=function(t){return t.getType()===cn.a.VECTOR},gr.create=function(t,e){return new gr(e)};var yr=gr,_r={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"},xr=i("vv/+"),br={image:[Dn.POLYGON,Dn.CIRCLE,Dn.LINE_STRING,Dn.IMAGE,Dn.TEXT],hybrid:[Dn.POLYGON,Dn.LINE_STRING]},Mr={image:[Dn.DEFAULT],hybrid:[Dn.IMAGE,Dn.TEXT,Dn.DEFAULT],vector:Yn},wr=function(t){function e(e){t.call(this,e,!0),this.declutterTree_=e.getDeclutter()?In()(9,void 0):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=Object(Et.c)(),this.zDirection=e.getRenderMode()==_r.VECTOR?1:0,Object(d.a)(pn.o,l.a.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){Object(d.c)(pn.o,l.a.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.getTile=function(e,i,n,r,o){var a=t.prototype.getTile.call(this,e,i,n,r,o);return a.getState()===ct.a.LOADED&&(this.createReplayGroup_(a,r,o),this.context&&this.renderTileImage_(a,r,o)),a},e.prototype.prepareFrame=function(e,i){var n=this.getLayer(),r=n.getRevision();if(this.renderedLayerRevision_!=r){this.renderedTiles.length=0;var o=n.getRenderMode();this.context||o==_r.VECTOR||(this.context=Object(vt.a)()),this.context&&o==_r.VECTOR&&(this.context=null)}return this.renderedLayerRevision_=r,t.prototype.prepareFrame.call(this,e,i)},e.prototype.createReplayGroup_=function(t,e,i){var n=this,r=this.getLayer(),o=r.getRevision(),a=r.getRenderOrder()||null,s=t.getReplayState(r);if(s.dirty||s.renderedRevision!=o||s.renderedRenderOrder!=a){for(var h=r.getSource(),c=h.getTileGrid(),l=h.getTileGridForProjection(i).getResolution(t.tileCoord[0]),u=t.extent,p={},d=function(o,d){var f=t.getTile(t.tileKeys[o]);if(f.getState()==ct.a.LOADED){var m=f.tileCoord,v=c.getTileCoordExtent(m),g=Object(gt.B)(u,v),y=Object(gt.p)(v,g)?null:Object(gt.c)(g,r.getRenderBuffer()*l,n.tmpExtent),_=f.getProjection(),x=!1;Object($e.c)(i,_)||(x=!0,f.setProjection(i)),s.dirty=!1;var b=new lr(0,g,l,e,h.getOverlaps(),n.declutterTree_,r.getRenderBuffer()),M=fr(l,e),w=function(t){var e,i=t.getStyleFunction()||r.getStyleFunction();if(i&&(e=i(t,l)),e){var n=this.renderFeature(t,M,e,b);this.dirty_=this.dirty_||n,s.dirty=s.dirty||n}},E=f.getFeatures();a&&a!==s.renderedRenderOrder&&E.sort(a);for(var T=0,S=E.length;T<S;++T){var C=E[T];x&&(_.getUnits()==xr.b.TILE_PIXELS&&(_.setWorldExtent(v),_.setExtent(f.getExtent())),C.getGeometry().transform(_,i)),y&&!Object(gt.F)(y,C.getGeometry().getExtent())||w.call(n,C)}for(var O in b.finish(),b.getReplays())p[O]=!0;f.setReplayGroup(r,t.tileCoord.toString(),b)}},f=0,m=t.tileKeys.length;f<m;++f)d(f);s.renderedRevision=o,s.renderedRenderOrder=a}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,o){var a=e.viewState.resolution,s=e.viewState.rotation;i=void 0==i?0:i;var h,c,l,u,p,d=this.getLayer(),f={},m=this.renderedTiles;for(l=0,u=m.length;l<u;++l){var v=m[l];if(h=Object(gt.c)(v.extent,i*a,h),Object(gt.f)(h,t))for(var g=0,y=v.tileKeys.length;g<y;++g){var _=v.getTile(v.tileKeys[g]);_.getState()==ct.a.LOADED&&(p=_.getReplayGroup(d,v.tileCoord.toString()),c=c||p.forEachFeatureAtCoordinate(t,a,s,i,{},function(t){var e=Object(n.b)(t).toString();if(!(e in f))return f[e]=!0,r.call(o,t,d)},null))}}return c},e.prototype.getReplayTransform_=function(t,e){var i=this.getLayer().getSource().getTileGrid(),n=t.tileCoord,r=i.getResolution(n[0]),o=e.viewState,a=e.pixelRatio,s=o.resolution/a,h=i.getTileCoordExtent(n,this.tmpExtent),c=o.center,l=Object(gt.C)(h),u=e.size,p=Math.round(a*u[0]/2),d=Math.round(a*u[1]/2);return Object(Et.b)(this.tmpTransform_,p,d,r/s,r/s,o.rotation,(l[0]-c[0])/r,(c[1]-l[1])/r)},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.postCompose=function(e,i,n){var r=this.getLayer(),o=r.getRenderMode();if(o!=_r.IMAGE){var a,s,h=r.getDeclutter()?{}:null,c=r.getSource(),l=Mr[o],u=i.pixelRatio,p=i.viewState.rotation,d=i.size;p&&(a=Math.round(u*d[0]/2),s=Math.round(u*d[1]/2),Object(pn.s)(e,-p,a,s)),h&&this.declutterTree_.clear();for(var f=i.viewHints,m=!(f[mt.a.ANIMATING]||f[mt.a.INTERACTING]),v=this.renderedTiles,g=c.getTileGridForProjection(i.viewState.projection),y=[],_=[],x=v.length-1;x>=0;--x){var b=v[x];if(b.getState()!=ct.a.ABORT)for(var M=b.tileCoord,w=g.getTileCoordExtent(M,this.tmpExtent)[0]-b.extent[0],E=void 0,T=0,S=b.tileKeys.length;T<S;++T){var C=b.getTile(b.tileKeys[T]);if(C.getState()==ct.a.LOADED){var O=C.getReplayGroup(r,M.toString());if(O&&O.hasReplays(l)){E||(E=this.getTransform(i,w));var R=C.tileCoord[0],A=O.getClipCoords(E);e.save(),e.globalAlpha=n.opacity;for(var L=0,P=y.length;L<P;++L){var I=y[L];R<_[L]&&(e.beginPath(),e.moveTo(A[0],A[1]),e.lineTo(A[2],A[3]),e.lineTo(A[4],A[5]),e.lineTo(A[6],A[7]),e.moveTo(I[6],I[7]),e.lineTo(I[4],I[5]),e.lineTo(I[2],I[3]),e.lineTo(I[0],I[1]),e.clip())}O.replay(e,E,p,{},m,l,h),e.restore(),y.push(A),_.push(R)}}}}h&&function(t,e,i,n){for(var r=Object.keys(t).map(Number).sort(K.g),o={},a=0,s=r.length;a<s;++a)for(var h=t[r[a].toString()],c=0,l=h.length;c<l;){var u=h[c++],p=h[c++];u.replay(e,p,i,o,n)}}(h,e,p,m),p&&Object(pn.s)(e,p,a,s)}t.prototype.postCompose.call(this,e,i,n)},e.prototype.renderFeature=function(t,e,i,n){if(!i)return!1;var r=!1;if(Array.isArray(i))for(var o=0,a=i.length;o<a;++o)r=vr(n,t,i[o],e,this.handleStyleImageChange_,this)||r;else r=vr(n,t,i,e,this.handleStyleImageChange_,this);return r},e.prototype.renderTileImage_=function(t,e,i){var n=this.getLayer(),r=t.getReplayState(n),o=n.getRevision(),a=br[n.getRenderMode()];if(a&&r.renderedTileRevision!==o){r.renderedTileRevision=o;var s=t.wrappedTileCoord,h=s[0],c=n.getSource(),l=c.getTileGridForProjection(i),u=l.getResolution(h),p=t.getContext(n),d=c.getTilePixelSize(h,e,i);p.canvas.width=d[0],p.canvas.height=d[1];for(var f=l.getTileCoordExtent(s,this.tmpExtent),m=0,v=t.tileKeys.length;m<v;++m){var g=t.getTile(t.tileKeys[m]);if(g.getState()==ct.a.LOADED){var y=e/u,_=Object(Et.e)(this.tmpTransform_);Object(Et.f)(_,y,-y),Object(Et.h)(_,-f[0],-f[3]),g.getReplayGroup(n,t.tileCoord.toString()).replay(p,_,0,{},!0,a)}}}},e}(Ln);wr.handles=function(t){return t.getType()===cn.a.VECTOR_TILE},wr.create=function(t,e){return new wr(e)};var Er=wr,Tr=function(t){function e(e){(e=Object(ut.a)({},e)).controls||(e.controls=function(t){var e=t||{},i=new r.b;return(void 0===e.zoom||e.zoom)&&i.push(new Nt(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&i.push(new It(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&i.push(new At(e.attributionOptions)),i}()),e.interactions||(e.interactions=function(t){var e=t||{},i=new r.b,n=new Dt(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&i.push(new we),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&i.push(new Xt({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&i.push(new ye({condition:e.onFocusOnly?Zt:void 0,kinetic:n})),(void 0===e.pinchRotate||e.pinchRotate)&&i.push(new Xe),(void 0===e.pinchZoom||e.pinchZoom)&&i.push(new Ze({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(i.push(new je),i.push(new Ge({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&i.push(new Be({condition:e.onFocusOnly?Zt:void 0,constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&i.push(new Ne({duration:e.zoomDuration})),i}()),t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){var t=new wn(this);return t.registerLayerRenderers([On,Ln,yr,Er]),t},e}(Tt);e.a=Tr},v5fe:function(t,e,i){"use strict";e.a={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"}},"vFc/":function(t,e,i){var n=i("TcQ7"),r=i("QRG4"),o=i("fkB2");t.exports=function(t){return function(e,i,a){var s,h=n(e),c=r(h.length),l=o(a,c);if(t&&i!=i){for(;c>l;)if((s=h[l++])!=s)return!0}else for(;c>l;l++)if((t||l in h)&&h[l]===i)return t||l||0;return!t&&-1}}},"vIB/":function(t,e,i){"use strict";var n=i("O4g8"),r=i("kM2E"),o=i("880/"),a=i("hJx8"),s=i("/bQp"),h=i("94VQ"),c=i("e6n0"),l=i("PzxK"),u=i("dSzd")("iterator"),p=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,i,f,m,v,g){h(i,e,f);var y,_,x,b=function(t){if(!p&&t in T)return T[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},M=e+" Iterator",w="values"==m,E=!1,T=t.prototype,S=T[u]||T["@@iterator"]||m&&T[m],C=S||b(m),O=m?w?b("entries"):C:void 0,R="Array"==e&&T.entries||S;if(R&&(x=l(R.call(new t)))!==Object.prototype&&x.next&&(c(x,M,!0),n||"function"==typeof x[u]||a(x,u,d)),w&&S&&"values"!==S.name&&(E=!0,C=function(){return S.call(this)}),n&&!g||!p&&!E&&T[u]||a(T,u,C),s[e]=C,s[M]=d,m)if(y={values:w?C:b("values"),keys:v?C:b("keys"),entries:O},g)for(_ in y)_ in T||o(T,_,y[_]);else r(r.P+r.F*(p||E),e,y);return y}},vhPq:function(t,e,i){"use strict";e.a=o,e.b=function(t,e,i,n,r){for(var a=[],s=0,h=i.length;s<h;++s){var c=i[s];a=o(t,e,c,n,r,2*s,a),e=c[c.length-1]}return a};var n=i("zF6X"),r=i("ZXW8");function o(t,e,i,o,a,s,h){for(var c,l,u,p,d,f,m,v=a[s+1],g=[],y=0,_=i.length;y<_;++y){var x=i[y];for(p=t[x-o],f=t[x-o+1],c=e;c<x;c+=o)d=t[c],m=t[c+1],(v<=f&&m<=v||f<=v&&v<=m)&&(u=(v-f)/(m-f)*(d-p)+p,g.push(u)),p=d,f=m}var b=NaN,M=-1/0;for(g.sort(n.g),p=g[0],c=1,l=g.length;c<l;++c){d=g[c];var w=Math.abs(d-p);w>M&&(u=(p+d)/2,Object(r.c)(t,e,i,o,u,v)&&(b=u,M=w)),p=d}return isNaN(b)&&(b=a[s]),h?(h.push(b,v,M),h):[b,v,M]}},vkQb:function(t,e,i){"use strict";e.a=function(t,e,i,n,r,o){for(var a,s=[t[e],t[e+1]],h=[];e+n<i;e+=n){if(h[0]=t[e+n],h[1]=t[e+n+1],a=r.call(o,s,h))return a;s[0]=h[0],s[1]=h[1]}return!1}},"vv/+":function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},r={};r[n.DEGREES]=2*Math.PI*6370997/360,r[n.FEET]=.3048,r[n.METERS]=1,r[n.USFEET]=1200/3937,e.b=n},w2Al:function(t,e,i){"use strict";e.a=function(t,e){var i=document.createElement("canvas");t&&(i.width=t);e&&(i.height=e);return i.getContext("2d")},e.d=function(t,e){var i=e.parentNode;i&&i.replaceChild(t,e)},e.c=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},e.b=function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}},wupX:function(t,e,i){"use strict";function n(t,e,i,n,r){for(var o=void 0!==r?r:[],a=0,s=e;s<i;s+=n)o[a++]=t.slice(s,s+n);return o.length=a,o}function r(t,e,i,r,o){for(var a=void 0!==o?o:[],s=0,h=0,c=i.length;h<c;++h){var l=i[h];a[s++]=n(t,e,l,r,a[s]),e=l}return a.length=s,a}e.a=n,e.b=r,e.c=function(t,e,i,n,o){for(var a=void 0!==o?o:[],s=0,h=0,c=i.length;h<c;++h){var l=i[h];a[s++]=r(t,e,l,n,a[s]),e=l[l.length-1]}return a.length=s,a}},xGkn:function(t,e,i){"use strict";var n=i("4mcu"),r=i("EGZi"),o=i("/bQp"),a=i("TcQ7");t.exports=i("vIB/")(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},"xH/j":function(t,e,i){var n=i("hJx8");t.exports=function(t,e,i){for(var r in e)i&&t[r]?t[r]=e[r]:n(t,r,e[r]);return t}},xek4:function(t,e,i){"use strict";e.c=function(t,e){return void 0!==t?0:void 0},e.d=function(t,e){return void 0!==t?t+e:void 0},e.a=function(t){var e=2*Math.PI/t;return function(t,i){return void 0!==t?t=Math.floor((t+i)/e+.5)*e:void 0}},e.b=function(t){var e=t||Object(n.i)(5);return function(t,i){return void 0!==t?Math.abs(t+i)<=e?0:t+i:void 0}};var n=i("o1z/")},xifc:function(t,e,i){"use strict";e.a=function(t){return t[0]>0&&t[1]>0},e.b=function(t,e,i){void 0===i&&(i=[0,0]);return i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i},e.c=function(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}},xnc9:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},yGLh:function(t,e,i){"use strict";var n=i("1avf"),r=i("/LWt"),o=i("o1z/"),a=i("vv/+"),s=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit};s.prototype.canWrapX=function(){return this.canWrapX_},s.prototype.getCode=function(){return this.code_},s.prototype.getExtent=function(){return this.extent_},s.prototype.getUnits=function(){return this.units_},s.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||a.a[this.units_]},s.prototype.getWorldExtent=function(){return this.worldExtent_},s.prototype.getAxisOrientation=function(){return this.axisOrientation_},s.prototype.isGlobal=function(){return this.global_},s.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},s.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},s.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},s.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},s.prototype.setWorldExtent=function(t){this.worldExtent_=t},s.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},s.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};var h=s,c=6378137,l=Math.PI*c,u=[-l,-l,l,l],p=[-180,-85,180,85],d=function(t){function e(e){t.call(this,{code:e,units:a.b.METERS,extent:u,global:!0,worldExtent:p,getPointResolution:function(t,e){return t/Object(o.b)(e[1]/c)}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(h),f=[new d("EPSG:3857"),new d("EPSG:102100"),new d("EPSG:102113"),new d("EPSG:900913"),new d("urn:ogc:def:crs:EPSG:6.18:3:3857"),new d("urn:ogc:def:crs:EPSG::3857"),new d("http://www.opengis.net/gml/srs/epsg.xml#3857")];function m(t,e,i){var n=t.length,r=i>1?i:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(n));for(var a=l,s=0;s<n;s+=r){o[s]=a*t[s]/180;var h=c*Math.log(Math.tan(Math.PI*(t[s+1]+90)/360));h>a?h=a:h<-a&&(h=-a),o[s+1]=h}return o}function v(t,e,i){var n=t.length,r=i>1?i:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(n));for(var a=0;a<n;a+=r)o[a]=180*t[a]/l,o[a+1]=360*Math.atan(Math.exp(t[a+1]/c))/Math.PI-90;return o}var g=[-180,-90,180,90],y=6378137*Math.PI/180,_=function(t){function e(e,i){t.call(this,{code:e,units:a.b.DEGREES,extent:g,axisOrientation:i,global:!0,metersPerUnit:y,worldExtent:g})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(h),x=[new _("CRS:84"),new _("EPSG:4326","neu"),new _("urn:ogc:def:crs:EPSG::4326","neu"),new _("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new _("urn:ogc:def:crs:OGC:1.3:CRS84"),new _("urn:ogc:def:crs:OGC:2:84"),new _("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new _("urn:x-ogc:def:crs:EPSG:4326","neu")],b={};i("tFCN");var M,w,E,T={};function S(t,e,i){var n=t.getCode(),r=e.getCode();n in T||(T[n]={}),T[n][r]=i}function C(t,e,i){var n;if(void 0!==e){for(var r=0,o=t.length;r<o;++r)e[r]=t[r];n=e}else n=t.slice();return n}function O(t,e,i){if(void 0!==e&&t!==e){for(var n=0,r=t.length;n<r;++n)e[n]=t[n];t=e}return t}function R(t){!function(t,e){b[t]=e}(t.getCode(),t),S(t,t,C)}function A(t){var e=null;if(t instanceof h)e=t;else if("string"==typeof t){e=function(t){return b[t]||null}(t)}return e}function L(t){!function(t){t.forEach(R)}(t),t.forEach(function(e){t.forEach(function(t){e!==t&&S(e,t,C)})})}function P(t,e){var i=function(t,e){var i;return t in T&&e in T[t]&&(i=T[t][e]),i}(t.getCode(),e.getCode());return i||(i=O),i}function I(t,e){return P(A(t),A(e))}function N(t,e,i){return I(e,i)(t,void 0,t.length)}e.d=A,e.e=function(t,e,i,r){var o,s=(t=A(t)).getPointResolutionFunc();if(s)o=s(e,i);else{var h=t.getUnits();if(h==a.b.DEGREES&&!r||r==a.b.DEGREES)o=e;else{var c=P(t,A("EPSG:4326")),l=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];l=c(l,l,2);var u=Object(n.a)(l.slice(0,2),l.slice(2,4)),p=Object(n.a)(l.slice(4,6),l.slice(6,8));o=(u+p)/2;var d=r?a.a[r]:t.getMetersPerUnit();void 0!==d&&(o/=d)}}return o},e.b=function(t,e){return t?"string"==typeof t?A(t):t:A(e)},e.c=function(t,e){if(t===e)return!0;var i=t.getUnits()===e.getUnits();if(t.getCode()===e.getCode())return i;var n=P(t,e);return n===C&&i},e.f=I,e.g=N,e.h=function(t,e,i){var n=I(e,i);return Object(r.a)(t,n)},i.d(e,"a",function(){return a.a}),i.d(e,!1,function(){return h}),L(f),L(x),M=f,w=m,E=v,x.forEach(function(t){M.forEach(function(e){S(t,e,w),S(e,t,E)})})},zF6X:function(t,e,i){"use strict";function n(t,e){return t>e?1:t<e?-1:0}e.a=function(t,e,i){var r,o,a=i||n,s=0,h=t.length,c=!1;for(;s<h;)(o=+a(t[r=s+(h-s>>1)],e))<0?s=r+1:(h=r,c=!o);return c?s:~s},e.g=n,e.d=function(t,e){return t.indexOf(e)>=0},e.f=function(t,e,i){var n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;var r;if(i>0){for(r=1;r<n;++r)if(t[r]<e)return r-1}else if(i<0){for(r=1;r<n;++r)if(t[r]<=e)return r}else for(r=1;r<n;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return n-1},e.i=function(t,e,i){for(;e<i;){var n=t[e];t[e]=t[i],t[i]=n,++e,--i}},e.c=function(t,e){for(var i=Array.isArray(e)?e:[e],n=i.length,r=0;r<n;r++)t[t.length]=i[r]},e.h=function(t,e){var i=t.indexOf(e),n=i>-1;n&&t.splice(i,1);return n},e.b=function(t,e){var i=t.length;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0},e.j=function(t,e){var i,n=t.length,r=Array(t.length);for(i=0;i<n;i++)r[i]={index:i,value:t[i]};for(r.sort(function(t,i){return e(t.value,i.value)||t.index-i.index}),i=0;i<t.length;i++)t[i]=r[i].value},e.e=function(t,e,i){var r=e||n;return t.every(function(e,n){if(0===n)return!0;var o=r(t[n-1],e);return!(o>0||i&&0===o)})}},zOBh:function(t,e,i){"use strict";var n=i("3ciB"),r=i("3Jqb"),o=i("OEyb"),a=i("FeXB"),s=i("6t+W"),h=i("57Gy"),c={FRACTION:"fraction",PIXELS:"pixels"},l=i("w2Al"),u=i("bhTf"),p=i("AMn6"),d=function(t){function e(e,i,n,o,a,s){t.call(this),this.hitDetectionImage_=null,this.image_=e||new Image,null!==o&&(this.image_.crossOrigin=o),this.canvas_=s?document.createElement("canvas"):null,this.color_=s,this.imageListenerKeys_=null,this.imageState_=a,this.size_=n,this.src_=i,this.tainting_=!1,this.imageState_==r.a.LOADED&&this.determineTainting_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.determineTainting_=function(){var t=Object(l.a)(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainting_=!0}},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(h.a.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=r.a.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=r.a.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.determineTainting_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.tainting_){var e=this.size_[0],i=this.size_[1],n=Object(l.a)(e,i);n.fillRect(0,0,e,i),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==r.a.IDLE){this.imageState_=r.a.LOADING,this.imageListenerKeys_=[Object(s.b)(this.image_,h.a.ERROR,this.handleImageError_,this),Object(s.b)(this.image_,h.a.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},e.prototype.replaceColor_=function(){if(!this.tainting_&&null!==this.color_){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,n=this.color_[0]/255,r=this.color_[1]/255,o=this.color_[2]/255,a=0,s=i.length;a<s;a+=4)i[a]*=n,i[a+1]*=r,i[a+2]*=o;t.putImageData(e,0,0)}},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(s.e),this.imageListenerKeys_=null},e}(u.a);var f={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},m=function(t){function e(e){var i=e||{},s=void 0!==i.opacity?i.opacity:1,h=void 0!==i.rotation?i.rotation:0,l=void 0!==i.scale?i.scale:1,u=void 0!==i.rotateWithView&&i.rotateWithView;t.call(this,{opacity:s,rotation:h,scale:l,rotateWithView:u}),this.anchor_=void 0!==i.anchor?i.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==i.anchorOrigin?i.anchorOrigin:f.TOP_LEFT,this.anchorXUnits_=void 0!==i.anchorXUnits?i.anchorXUnits:c.FRACTION,this.anchorYUnits_=void 0!==i.anchorYUnits?i.anchorYUnits:c.FRACTION,this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null;var m=void 0!==i.img?i.img:null,v=void 0!==i.imgSize?i.imgSize:null,g=i.src;Object(o.a)(!(void 0!==g&&m),4),Object(o.a)(!m||m&&v,5),void 0!==g&&0!==g.length||!m||(g=m.src||Object(n.b)(m).toString()),Object(o.a)(void 0!==g&&g.length>0,6);var y=void 0!==i.src?r.a.IDLE:r.a.LOADED;this.color_=void 0!==i.color?Object(a.a)(i.color):null,this.iconImage_=function(t,e,i,n,r,o){var a=p.a.get(e,n,o);return a||(a=new d(t,e,i,n,r,o),p.a.set(e,n,o,a)),a}(m,g,v,this.crossOrigin_,y,this.color_),this.offset_=void 0!==i.offset?i.offset:[0,0],this.offsetOrigin_=void 0!==i.offsetOrigin?i.offsetOrigin:f.TOP_LEFT,this.origin_=null,this.size_=void 0!==i.size?i.size:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==c.FRACTION||this.anchorYUnits_==c.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==c.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==c.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=f.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=f.TOP_RIGHT&&this.anchorOrigin_!=f.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=f.BOTTOM_LEFT&&this.anchorOrigin_!=f.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=f.TOP_LEFT){var e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),this.offsetOrigin_!=f.TOP_RIGHT&&this.offsetOrigin_!=f.BOTTOM_RIGHT||(t[0]=i[0]-e[0]-t[0]),this.offsetOrigin_!=f.BOTTOM_LEFT&&this.offsetOrigin_!=f.BOTTOM_RIGHT||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t,e){return Object(s.a)(this.iconImage_,h.a.CHANGE,t,e)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t,e){Object(s.c)(this.iconImage_,h.a.CHANGE,t,e)},e}(i("dw+W").a);e.a=m},zQR9:function(t,e,i){"use strict";var n=i("h65t")(!0);i("vIB/")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})}});
//# sourceMappingURL=vendor.381d37628fddc101ba93.js.map